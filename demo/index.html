<html lang="en">
  <head>
    <title>inkmap demo page</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400&family=PT+Sans:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/zenburn.min.css"
    />
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/highlight.min.js"></script>
  </head>
  <style>
    body {
      font-family: 'PT Sans', sans-serif;
    }
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-family: 'Montserrat', sans-serif;
    }
  </style>
  <body>
    <div class="container mb-5" style="width: 960px">
      <h1 class="mt-5">
        <strong>inkmap</strong><br />
        <span class="mt-2" style="font-size: 20px"
          >a library for generating high-quality, printable maps.</span
        >
      </h1>

      <div class="mt-5" id="example-01">
        <p>
          Give <strong>inkmap</strong> a JSON spec and it will use it to
          generate a PNG image in the background.
        </p>
        <p>
          Use the <code>print</code> API to begin printing a spec. This function
          returns a
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"
            >Promise</a
          >
          which resolves to a
          <a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob"
            >Blob</a
          >
          containing the map image.
        </p>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a
              class="nav-link active"
              data-toggle="tab"
              href=".example-01-result"
              >Result</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href=".example-01-source"
              >Source</a
            >
          </li>
        </ul>
        <div class="tab-content mt-2">
          <div class="tab-pane example-01-result show active">
            <div class="row align-items-start">
              <print-spec class="col-8" expanded="true"></print-spec>
              <custom-button class="col-3"> Generate! </custom-button>
            </div>
          </div>
          <div class="tab-pane example-01-source">
            <pre
              class="rounded small"
            ><code class="js"><%- example01 %></code></pre>
          </div>
        </div>
      </div>

      <div class="mt-5" id="example-02">
        <h2>Showing progress</h2>
        <p>
          <strong>inkmap</strong> also enables finer monitoring by making the
          job status observable.
        </p>
        <p>
          Use the <code>enqueuePrint</code> API to start a print job
          asynchronously. This function returns a
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"
            >Promise</a
          >
          which resolves to a job id. You can then feed the job id to
          <code>getJobStatus</code> which will return an observable that you can
          <code>subscribe</code> to, emitting updates on the given print job
          status.
        </p>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a
              class="nav-link active"
              data-toggle="tab"
              href=".example-02-result"
              >Result</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href=".example-02-source"
              >Source</a
            >
          </li>
        </ul>
        <div class="tab-content mt-2">
          <div class="tab-pane example-02-result show active">
            <div class="row align-items-start">
              <print-spec class="col-8" expanded="false"></print-spec>
              <div class="col-3">
                <custom-button> Generate! </custom-button>
                <custom-progress></custom-progress>
              </div>
            </div>
          </div>
          <div class="tab-pane example-02-source">
            <pre
              class="rounded small"
            ><code class="js"><%- example02 %></code></pre>
          </div>
        </div>
      </div>

      <div class="mt-5" id="example-03">
        <h2>Canceling a job</h2>
        <p><strong>inkmap</strong> also enables job cancellation.</p>
        <p>
          Use <code>cancelJob</code> after having started a job with
          <code>enqueuePrint</code>.
        </p>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a
              class="nav-link active"
              data-toggle="tab"
              href=".example-03-result"
              >Result</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href=".example-03-source"
              >Source</a
            >
          </li>
        </ul>
        <div class="tab-content mt-2">
          <div class="tab-pane example-03-result show active">
            <div class="row align-items-start">
              <print-spec class="col-8" expanded="false"></print-spec>
              <div class="col-3">
                <custom-button> Generate! </custom-button>
                <custom-progress></custom-progress>
                <button
                  role="button"
                  class="cancel-btn btn btn-danger btn-block mt-2"
                >
                  Cancel
                </button>
              </div>
            </div>
          </div>
          <div class="tab-pane example-03-source">
            <pre
              class="rounded small"
            ><code class="js"><%- example03 %></code></pre>
          </div>
        </div>
      </div>

      <div class="mt-5" id="example-04">
        <h2>Monitoring multiple jobs</h2>
        <p>
          Multiple jobs can be monitored at once through a long lived
          observable.
        </p>
        <p>
          Use <code>getJobsStatus</code> to receive a long-lived observable that
          you can <code>subscribe</code> to and which will regularly give you
          status updates on all running jobs.
        </p>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a
              class="nav-link active"
              data-toggle="tab"
              href=".example-04-result"
              >Result</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href=".example-04-source"
              >Source</a
            >
          </li>
        </ul>
        <div class="tab-content mt-2">
          <div class="tab-pane example-04-result show active">
            <div class="row align-items-start">
              <print-spec class="col-8" expanded="false"></print-spec>
              <div class="col-3">
                <custom-button> Add to the queue </custom-button>
                <progress-bars></progress-bars>
              </div>
            </div>
          </div>
          <div class="tab-pane example-04-source">
            <pre
              class="rounded small"
            ><code class="js"><%- example04 %></code></pre>
          </div>
        </div>
      </div>

      <div class="mt-5" id="example-05">
        <h2>Printing to PDF</h2>
        <p>
          <strong>inkmap</strong> jobs give back a
          <a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob"
            >Blob</a
          >
          which can be inserted into a PDF. This is for example supported by
          <a
            href="http://raw.githack.com/MrRio/jsPDF/master/docs/module-addImage.html#~addImage"
            >jsPDF</a
          >, as showcased here.
        </p>
        <p>
          This example also makes use of the <code>getScalebar</code>,
          <code>getNorthArrow</code> and <code>getLegend</code>
          functions to obtain these elements as separate images, which can then
          be inserted in different part of the document (including other
          pages!).
        </p>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a
              class="nav-link active"
              data-toggle="tab"
              href=".example-05-result"
              >Result</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href=".example-05-source"
              >Source</a
            >
          </li>
        </ul>
        <div class="tab-content mt-2">
          <div class="tab-pane example-05-result show active">
            <div class="row align-items-start">
              <print-spec class="col-8" expanded="false"></print-spec>
              <custom-button class="col-3"> Generate! </custom-button>
            </div>
          </div>
          <div class="tab-pane example-05-source">
            <pre
              class="rounded small"
            ><code class="js"><%- example05 %></code></pre>
          </div>
        </div>
      </div>

      <div class="mt-5" id="example-06">
        <h2>Using projections</h2>
        <p>
          <strong>inkmap</strong> supports a large amount of projections for
          rendering the map. Projections can be defined and registered using
          <code>registerProjection</code>. If the map projection is not
          registered, <strong>inkmap</strong> will look it up on
          <a href="https://epsg.io/">epsg.io</a>.
        </p>
        <p>
          Under the hood, <strong>inkmap</strong> uses
          <a href="http://proj4js.org/">proj4js</a>.
        </p>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a
              class="nav-link active"
              data-toggle="tab"
              href=".example-06-result"
              >Result</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href=".example-06-source"
              >Source</a
            >
          </li>
        </ul>
        <div class="tab-content mt-2">
          <div class="tab-pane example-06-result show active">
            <div class="row align-items-start">
              <print-spec
                class="col-8"
                expanded="false"
                select="North pole, arctic projection (WMS)"
              ></print-spec>
              <custom-button class="col-3"> Generate! </custom-button>
            </div>
          </div>
          <div class="tab-pane example-06-source">
            <pre
              class="rounded small"
            ><code class="js"><%- example06 %></code></pre>
          </div>
        </div>
      </div>

      <div class="mt-5" id="example-07">
        <h2>Error handling</h2>
        <p>
          When errors are encountered while loading data for one or several
          layers, <strong>inkmap</strong> includes a list of error objects with
          urls in the status updates.
        </p>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a
              class="nav-link active"
              data-toggle="tab"
              href=".example-07-result"
              >Result</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href=".example-07-source"
              >Source</a
            >
          </li>
        </ul>
        <div class="tab-content mt-2">
          <div class="tab-pane example-07-result show active">
            <div class="row align-items-start">
              <print-spec
                class="col-8"
                expanded="false"
                select="Spec with invalid sources"
              ></print-spec>
              <custom-button class="col-3"> Generate! </custom-button>
            </div>
          </div>
          <div class="tab-pane example-07-source">
            <pre
              class="rounded small"
            ><code class="js"><%- example07 %></code></pre>
          </div>
        </div>
        <p id="errors" class="text-danger"></p>
      </div>

      <div class="mt-5" id="example-08">
        <h2>Printing legends</h2>
        <p>
          This examples shows how to print legends for vector and rasterlayers
          by providing the configuration option <code>legend</code> on a layer
          with a value of <code>true</code>. Currently this supports WMS, WMTS,
          GeoJSON and WFS layers.
        </p>
        <p>
          The print will generate a separate image containing all the legends at
          once.
        </p>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a
              class="nav-link active"
              data-toggle="tab"
              href=".example-08-result"
              >Result</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href=".example-08-source"
              >Source</a
            >
          </li>
        </ul>
        <div class="tab-content mt-2">
          <div class="tab-pane example-08-result show active">
            <div class="row align-items-start">
              <print-spec
                class="col-8"
                expanded="false"
                select="Spec with legends"
              ></print-spec>
              <div class="col-3">
                <custom-button class="map-btn"> Generate map </custom-button>
                <custom-progress></custom-progress>
                <custom-button class="legend-btn">
                  Download legend as SVG
                </custom-button>
              </div>
            </div>
          </div>
          <div class="tab-pane example-08-source">
            <pre
              class="rounded small"
            ><code class="js"><%- example08 %></code></pre>
          </div>
        </div>
      </div>
    </div>
    <script src="app.js"></script>
  </body>
</html>
