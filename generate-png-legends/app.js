/*! For license information please see app.js.LICENSE.txt */
(()=>{var t,e,i,n,r={6202:()=>{class t extends HTMLElement{constructor(){super(),this.working_=!1,this.startBtn=null,this.waitBtn=null,this.enabled_=!0}set working(t){this.working_=t,t||(this.progress_=null),this.refreshDOM()}set enabled(t){this.enabled_=t,this.refreshDOM()}showSpinner(){this.working=!0}hideSpinner(){this.working=!1}connectedCallback(){this.innerHTML=`\n<button role="button" class="start-btn btn btn-primary btn-block">\n  ${this.innerHTML.trim()}\n</button>\n<button\n  role="button"\n  disabled\n  class="wait-btn btn btn-primary btn-block mt-0"\n>\n  <span\n    class="spinner-border spinner-border-sm"\n    role="status"\n    aria-hidden="true"\n  ></span>\n  Working...\n</button>`,this.startBtn=this.querySelector(".start-btn"),this.waitBtn=this.querySelector(".wait-btn"),this.refreshDOM()}refreshDOM(){this.waitBtn.style.display=this.working_?null:"none",this.startBtn.style.display=this.working_?"none":null,this.startBtn.disabled=!this.enabled_}}customElements.define("custom-button",t)},1006:()=>{class t extends HTMLElement{static get observedAttributes(){return["progress","status"]}constructor(){super(),this.progress_=null,this.status_="pending",this.progressBar=null,this.progressBarInner=null}set progress(t){this.progress_=t,this.refreshDOM()}set status(t){["pending","ongoing","finished","canceled"].includes(t)?this.status_=t:this.status_="pending",this.refreshDOM()}connectedCallback(){this.innerHTML='\n  <div class="progress mt-1" style="height: 5px; visible">\n    <div\n      class="progress-bar"\n      style="width: 50%"\n      role="progressbar"\n      aria-valuemin="0"\n      aria-valuemax="100"\n    ></div>\n  </div>',this.progressBar=this.querySelector(".progress"),this.progressBarInner=this.progressBar.children.item(0),this.refreshDOM()}attributeChangedCallback(t,e,i){switch(t){case"progress":this.progress_=parseFloat(i);break;case"status":this.status_=i}}refreshDOM(){switch("number"!=typeof this.progress_?(this.progressBar.style.visibility="hidden",this.progressBarInner.style.width="0"):(this.progressBar.style.visibility="visible",this.progressBarInner.style.width=Math.round(100*this.progress_)+"%"),this.status_){case"pending":this.progressBarInner.classList.add("bg-secondary"),this.progressBarInner.classList.remove("bg-primary"),this.progressBarInner.classList.remove("bg-success"),this.progressBarInner.classList.remove("bg-danger");break;case"ongoing":this.progressBarInner.classList.remove("bg-secondary"),this.progressBarInner.classList.add("bg-primary"),this.progressBarInner.classList.remove("bg-success"),this.progressBarInner.classList.remove("bg-danger");break;case"finished":this.progressBarInner.classList.remove("bg-secondary"),this.progressBarInner.classList.remove("bg-primary"),this.progressBarInner.classList.add("bg-success"),this.progressBarInner.classList.remove("bg-danger");break;case"canceled":this.progressBarInner.classList.remove("bg-secondary"),this.progressBarInner.classList.remove("bg-primary"),this.progressBarInner.classList.remove("bg-success"),this.progressBarInner.classList.add("bg-danger")}}}customElements.define("custom-progress",t)},1176:()=>{class t extends HTMLElement{constructor(){super(),this.jobsStatus_=[]}set jobsStatus(t){this.jobsStatus_=t,this.refreshDOM()}connectedCallback(){this.refreshDOM()}refreshDOM(){this.innerHTML=`\n      <div>\n        ${this.jobsStatus_.map((t=>`\n            <label style="width: 100%">\n                job #${t.id} progress:\n            <custom-progress progress="${t.progress}" status="${t.status}"></custom-progress>\n            </label>`)).join("\n")}\n      </div>`}}customElements.define("progress-bars",t)},1914:(t,e,i)=>{"use strict";i.r(e),i.d(e,{create:()=>vt,creator:()=>h,local:()=>bt,matcher:()=>p,namespace:()=>s,namespaces:()=>r,pointer:()=>St,pointers:()=>Mt,select:()=>yt,selectAll:()=>Ct,selection:()=>mt,selector:()=>c,selectorAll:()=>f,style:()=>j,window:()=>R});var n="http://www.w3.org/1999/xhtml";const r={svg:"http://www.w3.org/2000/svg",xhtml:n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function s(t){var e=t+="",i=e.indexOf(":");return i>=0&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),r.hasOwnProperty(e)?{space:r[e],local:t}:t}function o(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===n&&e.documentElement.namespaceURI===n?e.createElement(t):e.createElementNS(i,t)}}function a(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function h(t){var e=s(t);return(e.local?a:o)(e)}function l(){}function c(t){return null==t?l:function(){return this.querySelector(t)}}function u(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function d(){return[]}function f(t){return null==t?d:function(){return this.querySelectorAll(t)}}function p(t){return function(){return this.matches(t)}}function g(t){return function(e){return e.matches(t)}}var m=Array.prototype.find;function y(){return this.firstElementChild}var v=Array.prototype.filter;function _(){return this.children}function b(t){return new Array(t.length)}function w(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function x(t){return function(){return t}}function S(t,e,i,n,r,s){for(var o,a=0,h=e.length,l=s.length;a<l;++a)(o=e[a])?(o.__data__=s[a],n[a]=o):i[a]=new w(t,s[a]);for(;a<h;++a)(o=e[a])&&(r[a]=o)}function M(t,e,i,n,r,s,o){var a,h,l,c=new Map,u=e.length,d=s.length,f=new Array(u);for(a=0;a<u;++a)(h=e[a])&&(f[a]=l=o.call(h,h.__data__,a,e)+"",c.has(l)?r[a]=h:c.set(l,h));for(a=0;a<d;++a)l=o.call(t,s[a],a,s)+"",(h=c.get(l))?(n[a]=h,h.__data__=s[a],c.delete(l)):i[a]=new w(t,s[a]);for(a=0;a<u;++a)(h=e[a])&&c.get(f[a])===h&&(r[a]=h)}function C(t){return t.__data__}function A(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function L(t){return function(){this.removeAttribute(t)}}function N(t){return function(){this.removeAttributeNS(t.space,t.local)}}function E(t,e){return function(){this.setAttribute(t,e)}}function P(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function I(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}}function O(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function R(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function F(t){return function(){this.style.removeProperty(t)}}function T(t,e,i){return function(){this.style.setProperty(t,e,i)}}function k(t,e,i){return function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function j(t,e){return t.style.getPropertyValue(e)||R(t).getComputedStyle(t,null).getPropertyValue(e)}function D(t){return function(){delete this[t]}}function B(t,e){return function(){this[t]=e}}function q(t,e){return function(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}}function G(t){return t.trim().split(/^|\s+/)}function z(t){return t.classList||new U(t)}function U(t){this._node=t,this._names=G(t.getAttribute("class")||"")}function W(t,e){for(var i=z(t),n=-1,r=e.length;++n<r;)i.add(e[n])}function Y(t,e){for(var i=z(t),n=-1,r=e.length;++n<r;)i.remove(e[n])}function H(t){return function(){W(this,t)}}function V(t){return function(){Y(this,t)}}function X(t,e){return function(){(e.apply(this,arguments)?W:Y)(this,t)}}function Z(){this.textContent=""}function K(t){return function(){this.textContent=t}}function J(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Q(){this.innerHTML=""}function $(t){return function(){this.innerHTML=t}}function tt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function et(){this.nextSibling&&this.parentNode.appendChild(this)}function it(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nt(){return null}function rt(){var t=this.parentNode;t&&t.removeChild(this)}function st(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ot(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function at(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}}))}function ht(t){return function(){var e=this.__on;if(e){for(var i,n=0,r=-1,s=e.length;n<s;++n)i=e[n],t.type&&i.type!==t.type||i.name!==t.name?e[++r]=i:this.removeEventListener(i.type,i.listener,i.options);++r?e.length=r:delete this.__on}}}function lt(t,e,i){return function(){var n,r=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var o=0,a=r.length;o<a;++o)if((n=r[o]).type===t.type&&n.name===t.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=i),void(n.value=e);this.addEventListener(t.type,s,i),n={type:t.type,name:t.name,value:e,listener:s,options:i},r?r.push(n):this.__on=[n]}}function ct(t,e,i){var n=R(t),r=n.CustomEvent;"function"==typeof r?r=new r(e,i):(r=n.document.createEvent("Event"),i?(r.initEvent(e,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ut(t,e){return function(){return ct(this,t,e)}}function dt(t,e){return function(){return ct(this,t,e.apply(this,arguments))}}w.prototype={constructor:w,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},U.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ft=[null];function pt(t,e){this._groups=t,this._parents=e}function gt(){return new pt([[document.documentElement]],ft)}pt.prototype=gt.prototype={constructor:pt,select:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var s,o,a=e[r],h=a.length,l=n[r]=new Array(h),u=0;u<h;++u)(s=a[u])&&(o=t.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),l[u]=o);return new pt(n,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:u(e)}}(t):f(t);for(var e=this._groups,i=e.length,n=[],r=[],s=0;s<i;++s)for(var o,a=e[s],h=a.length,l=0;l<h;++l)(o=a[l])&&(n.push(t.call(o,o.__data__,l,a)),r.push(o));return new pt(n,r)},selectChild:function(t){return this.select(null==t?y:function(t){return function(){return m.call(this.children,t)}}("function"==typeof t?t:g(t)))},selectChildren:function(t){return this.selectAll(null==t?_:function(t){return function(){return v.call(this.children,t)}}("function"==typeof t?t:g(t)))},filter:function(t){"function"!=typeof t&&(t=p(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var s,o=e[r],a=o.length,h=n[r]=[],l=0;l<a;++l)(s=o[l])&&t.call(s,s.__data__,l,o)&&h.push(s);return new pt(n,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,C);var i=e?M:S,n=this._parents,r=this._groups;"function"!=typeof t&&(t=x(t));for(var s=r.length,o=new Array(s),a=new Array(s),h=new Array(s),l=0;l<s;++l){var c=n[l],d=r[l],f=d.length,p=u(t.call(c,c&&c.__data__,l,n)),g=p.length,m=a[l]=new Array(g),y=o[l]=new Array(g),v=h[l]=new Array(f);i(c,d,m,y,v,p,e);for(var _,b,w=0,A=0;w<g;++w)if(_=m[w]){for(w>=A&&(A=w+1);!(b=y[A])&&++A<g;);_._next=b||null}}return(o=new pt(o,n))._enter=a,o._exit=h,o},enter:function(){return new pt(this._enter||this._groups.map(b),this._parents)},exit:function(){return new pt(this._exit||this._groups.map(b),this._parents)},join:function(t,e,i){var n=this.enter(),r=this,s=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=e&&(r=e(r)),null==i?s.remove():i(s),n&&r?n.merge(r).order():r},merge:function(t){if(!(t instanceof pt))throw new Error("invalid merge");for(var e=this._groups,i=t._groups,n=e.length,r=i.length,s=Math.min(n,r),o=new Array(n),a=0;a<s;++a)for(var h,l=e[a],c=i[a],u=l.length,d=o[a]=new Array(u),f=0;f<u;++f)(h=l[f]||c[f])&&(d[f]=h);for(;a<n;++a)o[a]=e[a];return new pt(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n,r=t[e],s=r.length-1,o=r[s];--s>=0;)(n=r[s])&&(o&&4^n.compareDocumentPosition(o)&&o.parentNode.insertBefore(n,o),o=n);return this},sort:function(t){function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}t||(t=A);for(var i=this._groups,n=i.length,r=new Array(n),s=0;s<n;++s){for(var o,a=i[s],h=a.length,l=r[s]=new Array(h),c=0;c<h;++c)(o=a[c])&&(l[c]=o);l.sort(e)}return new pt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,s=n.length;r<s;++r){var o=n[r];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var r,s=e[i],o=0,a=s.length;o<a;++o)(r=s[o])&&t.call(r,r.__data__,o,s);return this},attr:function(t,e){var i=s(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((null==e?i.local?N:L:"function"==typeof e?i.local?O:I:i.local?P:E)(i,e))},style:function(t,e,i){return arguments.length>1?this.each((null==e?F:"function"==typeof e?k:T)(t,e,null==i?"":i)):j(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?D:"function"==typeof e?q:B)(t,e)):this.node()[t]},classed:function(t,e){var i=G(t+"");if(arguments.length<2){for(var n=z(this.node()),r=-1,s=i.length;++r<s;)if(!n.contains(i[r]))return!1;return!0}return this.each(("function"==typeof e?X:e?H:V)(i,e))},text:function(t){return arguments.length?this.each(null==t?Z:("function"==typeof t?J:K)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Q:("function"==typeof t?tt:$)(t)):this.node().innerHTML},raise:function(){return this.each(et)},lower:function(){return this.each(it)},append:function(t){var e="function"==typeof t?t:h(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var i="function"==typeof t?t:h(t),n=null==e?nt:"function"==typeof e?e:c(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(rt)},clone:function(t){return this.select(t?ot:st)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,i){var n,r,s=at(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?lt:ht,n=0;n<o;++n)this.each(a(s[n],e,i));return this}var a=this.node().__on;if(a)for(var h,l=0,c=a.length;l<c;++l)for(n=0,h=a[l];n<o;++n)if((r=s[n]).type===h.type&&r.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?dt:ut)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n,r=t[e],s=0,o=r.length;s<o;++s)(n=r[s])&&(yield n)}};const mt=gt;function yt(t){return"string"==typeof t?new pt([[document.querySelector(t)]],[document.documentElement]):new pt([[t]],ft)}function vt(t){return yt(h(t).call(document.documentElement))}var _t=0;function bt(){return new wt}function wt(){this._="@"+(++_t).toString(36)}function xt(t){let e;for(;e=t.sourceEvent;)t=e;return t}function St(t,e){if(t=xt(t),void 0===e&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function Mt(t,e){return t.target&&(t=xt(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>St(t,e)))}function Ct(t){return"string"==typeof t?new pt([document.querySelectorAll(t)],[document.documentElement]):new pt([null==t?[]:u(t)],ft)}wt.prototype=bt.prototype={constructor:wt,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}},7647:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,i){this.size=t,this.maxColumnWidth=e,this.maxColumnHeight=i}},7260:function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var i,n,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,r=0,s=e.length;r<s;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(8641),h=o(i(188)),l=o(i(2033)),c=o(i(2083)),u=o(i(5069)),d=i(6101),f=o(i(3772)),p=o(i(1090)),g=o(i(6108)),m=o(i(167)),y=[45,30],v=function(){function t(t){this.config=null,this.config=t}return t.prototype.extractConfigFromStyle=function(t){var e={items:[],title:""};return t.name&&(e.title=t.name),t.rules.forEach((function(t){e.items.push({title:t.name,rule:t})})),e},t.prototype.renderLegendItem=function(t,e,i){var n=this.config,r=n.hideRect,o=n.maxColumnHeight,a=n.maxColumnWidth;if(e.rule)return t.useContainer(e.title),this.getRuleIcon(e.rule).then((function(n){t.addImage.apply(t,s(s([n],y,!1),[i[0]+1,i[1],!r],!1)),t.addLabel(e.title,i[0]+y[0]+5,i[1]+20),i[1]+=y[1]+5,o&&i[1]+y[1]+5>=o&&(i[1]=5,i[0]+=a)})).catch((function(){}))},t.prototype.getGeometryForSymbolizer=function(t){switch(t.kind){case"Mark":case"Icon":case"Text":default:return new h.default([y[0]/2,y[1]/2]);case"Fill":return new l.default([[[3,3],[y[0]-3,3],[y[0]-3,y[1]-3],[3,y[1]-3],[3,3]]]);case"Line":return new c.default([[y[0]/6,y[1]/6],[y[0]/3,y[1]/3*2],[y[0]/2,y[1]/3],[y[0]/6*5,y[1]/6*5]])}},t.prototype.getRuleIcon=function(t){var e=this,i=document.createElement("canvas");i.setAttribute("width","".concat(y[0])),i.setAttribute("height","".concat(y[1]));var s=(0,a.boundingExtent)([[0,0],[y[0],y[1]]]),o=i.getContext("2d"),h=(0,d.create)(),l=new u.default(o,1,s,h,0),c=[];t.symbolizers.forEach((function(t){return c.push(e.getGeometryForSymbolizer(t))}));var g=new f.default,m={name:"",rules:[{name:"",symbolizers:t.symbolizers}]};return new Promise((function(t,s){return n(e,void 0,void 0,(function(){function e(){c.forEach((function(t){return l.drawGeometry(t)}))}var n,o,a,h;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,g.writeStyle(m)];case 1:return n=r.sent(),o=n.output,a=n.errors,(h=void 0===a?[]:a).length>0&&s(h[0]),"function"==typeof o&&(o=o(new p.default(c[0]),1)),Array.isArray(o)?o.forEach((function(t){l.setStyle(t),e()})):(l.setStyle(o),e()),t(i.toDataURL("image/png")),[3,3];case 2:return r.sent(),s(),[3,3];case 3:return[2]}}))}))}))},t.prototype.renderLegend=function(t,e,i){var n=this;return e.useRoot(),"auto"!==this.config.overflow&&0!==i[0]&&t.items.length*(y[1]+5)+20+i[1]>this.config.maxColumnHeight&&(i[0]+=this.config.maxColumnWidth,i[1]=0),t.title&&(e.addTitle(t.title,i[0],0===i[1]?"1em":i[1]+15),i[1]+=20),t.items.reduce((function(t,r){return t.then((function(){return n.renderLegendItem(e,r,i)}))}),Promise.resolve())},t.prototype.renderImages=function(t,e,i){return n(this,void 0,void 0,(function(){var o,a,h,l,c,u,d,f,p,g,m=this;return r(this,(function(y){switch(y.label){case 0:o=20,a=5,h=0,y.label=1;case 1:if(!(h<t.length))return[3,9];l=t[h].url,c=t[h].title,y.label=2;case 2:return y.trys.push([2,7,,8]),[4,fetch(l)];case 3:return[4,y.sent().blob()];case 4:return u=y.sent(),d=function(t){return n(m,void 0,void 0,(function(){var e=this;return r(this,(function(i){return[2,new Promise((function(i,s){try{var o=new FileReader;o.onload=function(t){return n(e,void 0,void 0,(function(){var e;return r(this,(function(n){return e=t.target.result,i(e),[2]}))}))},o.readAsDataURL(t)}catch(t){s(t)}}))]}))}))},[4,d(u)];case 5:return f=y.sent(),(p=new Image).src=f.toString(),[4,p.decode()];case 6:return y.sent(),"auto"===this.config.overflow&&p.height+o+a+i[1]>this.config.maxColumnHeight&&(i[0]+=this.config.maxColumnWidth,i[1]=0),c&&(e.useRoot(),i[1]+=o,e.addTitle.apply(e,s([c],i,!1)),i[1]+=a),e.addImage.apply(e,s(s([f.toString(),p.width,p.height],i,!1),[!1],!1)),i[1]+=p.height,[3,8];case 7:return g=y.sent(),console.error("Error on fetching legend: ",g),[3,8];case 8:return h++,[3,1];case 9:return[2]}}))}))},t.prototype.renderAsImage=function(t,e){return n(this,void 0,void 0,(function(){var i,n,s,o,a,h,l,c,u,d,f,p,y,v,_=this;return r(this,(function(r){switch(r.label){case 0:i=this.config,n=i.styles,s=i.configs,o=i.size,a=o[0],h=o[1],l=i.remoteLegends,c=i.maxColumnWidth,u=i.maxColumnHeight,d=[],n&&n.forEach((function(t){return d.push(_.extractConfigFromStyle(t))})),s&&d.unshift.apply(d,s),f="svg"===t?g.default:m.default,p=new f([a,h],c,u,e),y=[0,0],v=0,r.label=1;case 1:return v<d.length?[4,this.renderLegend(d[v],p,y)]:[3,4];case 2:r.sent(),r.label=3;case 3:return v++,[3,1];case 4:return l?[4,this.renderImages(l,p,y)]:[3,6];case 5:r.sent(),r.label=6;case 6:return[2,p.generate(y[1])]}}))}))},t.prototype.render=function(t,e){return void 0===e&&(e="svg"),n(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.renderAsImage(e,t)];case 1:return i.sent(),[2]}}))}))},t}();e.default=v},167:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(i(7647)),a="geostyler-legend-renderer";function h(t){if("number"==typeof t)return t;var e=document.createElement("div");document.body.append(e),e.style.height=t;var i=parseFloat(getComputedStyle(e).height.replace(/px$/,""));return e.remove(),i}var l=function(t){function e(e,i,n,r){var s=t.call(this,e,i,n)||this;return s.target=r,s.createCanvas.apply(s,e),s}return r(e,t),e.prototype.useContainer=function(t){},e.prototype.useRoot=function(){},e.prototype.addTitle=function(t,e,i){this.context.fillText(t,h(e),h(i))},e.prototype.addLabel=function(t,e,i){this.context.fillText(t,h(e),h(i))},e.prototype.addImage=function(t,e,i,n,r,s){var o=h(n),a=h(r);this.expandHeight(a+i);var l=new Image;l.src=t,this.context.drawImage(l,o,a,e,i),s&&(this.context.strokeStyle="1px solid black",this.context.strokeRect(o,a,e,i))},e.prototype.generate=function(t){return this.canvas},e.prototype.createCanvas=function(t,e){this.canvas=document.createElement("canvas"),this.canvas.className=a,this.canvas.width=t,this.canvas.height=e,this.context=this.canvas.getContext("2d"),this.context.font="14px sans-serif",this.target&&(this.target.querySelectorAll(".".concat(a)).forEach((function(t){return t.remove()})),this.target.append(this.canvas))},e.prototype.expandHeight=function(t){if(!(this.canvas.height>=t)){var e=this.canvas;this.createCanvas(this.canvas.width,t),this.context.drawImage(e,0,0)}},e}(o.default);e.default=l},6108:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(1914),a=s(i(7647)),h="geostyler-legend-renderer",l=function(t){function e(e,i,n,r){var s=t.call(this,e,i,n)||this;s.root=null,s.currentContainer=null;var a=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.root=(0,o.select)(a).attr("class",h).attr("viewBox","0 0 ".concat(e[0]," ").concat(e[1])).attr("top",0).attr("left",0).attr("width",e[0]).attr("height",e[1]),s.currentContainer=s.root,r&&((0,o.select)(r).select(".".concat(h)).remove(),r.append(s.root.node())),s}return r(e,t),e.prototype.useContainer=function(t){this.currentContainer=this.root.append("g").attr("class","legend-item").attr("title",t)},e.prototype.useRoot=function(){this.currentContainer=this.root},e.prototype.addTitle=function(t,e,i){this.currentContainer.append("g").append("text").text(t).attr("class","legend-title").attr("text-anchor","start").attr("dx",e).attr("dy",i)},e.prototype.addLabel=function(t,e,i){this.currentContainer.append("text").text(t).attr("x",e).attr("y",i)},e.prototype.addImage=function(t,e,i,n,r,s){s&&this.currentContainer.append("rect").attr("x",n).attr("y",r).attr("width",e).attr("height",i).style("fill-opacity",0).style("stroke","black"),this.currentContainer.append("svg:image").attr("x",n).attr("y",r).attr("width",e).attr("height",i).attr("href",t),this.root.attr("xmlns","http://www.w3.org/2000/svg")},e.prototype.generate=function(t){var e=this.root.selectAll("g.legend-item");return this.shortenLabels(e,this.maxColumnWidth),this.maxColumnHeight||this.root.attr("viewBox","0 0 ".concat(this.size[0]," ").concat(t)).attr("height",t),this.root.node()},e.prototype.shortenLabels=function(t,e){t.each((function(){var t=(0,o.select)(this),i=t.select("text");if(t.node()instanceof SVGElement&&i.size()){for(var n=i.node(),r=n.getBoundingClientRect().width,s=!1;r>e;){var a;a=(a=i.text()).substring(0,a.length-1),i.text(a),r=n.getBoundingClientRect().width,s=!0}s&&(a=(a=i.text()).substring(0,a.length-3),i.text(a+"..."))}}))},e}(a.default);e.default=l},3772:function(t,e,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlStyleParser=void 0;var s=i(2075),o=r(i(553)),a=r(i(188)),h=r(i(7539)),l=r(i(8443)),c=r(i(8958)),u=r(i(1280)),d=r(i(283)),f=r(i(1345)),p=r(i(4548)),g=r(i(5393)),m=i(8375),y=r(i(2661)),v=i(9839),_=function(){function t(t){this.unsupportedProperties={Symbolizer:{MarkSymbolizer:{avoidEdges:"none",blur:"none",fillOpacity:"none",offsetAnchor:"none",pitchAlignment:"none",pitchScale:"none",visibility:"none"},FillSymbolizer:{antialias:"none",fillOpacity:{support:"none",info:"Use opacity instead."},graphicFill:"none",visibility:"none"},IconSymbolizer:{allowOverlap:"none",anchor:"none",avoidEdges:"none",color:"none",haloBlur:"none",haloColor:"none",haloWidth:"none",keepUpright:"none",offsetAnchor:"none",optional:"none",padding:"none",pitchAlignment:"none",rotationAlignment:"none",textFit:"none",textFitPadding:"none",visibility:"none"},LineSymbolizer:{blur:"none",gapWidth:"none",gradient:"none",miterLimit:"none",roundLimit:"none",spacing:"none",visibility:"none",graphicFill:"none",graphicStroke:"none",perpendicularOffset:"none"},RasterSymbolizer:"none"},Function:{double2bool:{support:"none",info:"Always returns false"},atan2:{support:"none",info:"Currently returns the first argument"},rint:{support:"none",info:"Currently returns the first argument"},numberFormat:{support:"none",info:"Currently returns the first argument"},strAbbreviate:{support:"none",info:"Currently returns the first argument"}}},this.title="OpenLayers Style Parser",this.olIconStyleCache={},this.OlStyleConstructor=h.default,this.OlStyleImageConstructor=l.default,this.OlStyleFillConstructor=f.default,this.OlStyleStrokeConstructor=c.default,this.OlStyleTextConstructor=u.default,this.OlStyleCircleConstructor=d.default,this.OlStyleIconConstructor=p.default,this.OlStyleRegularshapeConstructor=g.default,this.isOlParserStyleFct=function(t){return"function"==typeof t},t&&(this.OlStyleConstructor=t.style.Style,this.OlStyleImageConstructor=t.style.Image,this.OlStyleFillConstructor=t.style.Fill,this.OlStyleStrokeConstructor=t.style.Stroke,this.OlStyleTextConstructor=t.style.Text,this.OlStyleCircleConstructor=t.style.Circle,this.OlStyleIconConstructor=t.style.Icon,this.OlStyleRegularshapeConstructor=t.style.RegularShape)}return t.prototype.getPointSymbolizerFromOlStyle=function(t){var e;if(t.getImage()instanceof this.OlStyleCircleConstructor){var i=t.getImage(),n=i.getFill(),r=i.getStroke(),s=i.getDisplacement();e={kind:"Mark",wellKnownName:"circle",color:n?y.default.getHexColor(n.getColor()):void 0,opacity:n?y.default.getOpacity(n.getColor()):void 0,radius:0!==i.getRadius()?i.getRadius():5,strokeColor:r?r.getColor():void 0,strokeOpacity:r?y.default.getOpacity(r.getColor()):void 0,strokeWidth:r?r.getWidth():void 0,offset:s[0]||s[1]?s:void 0}}else if(t.getImage()instanceof this.OlStyleRegularshapeConstructor){var o=t.getImage(),a=(n=o.getFill(),r=o.getStroke(),o.getRadius()),h=o.getRadius2(),l=o.getPoints(),c=o.getAngle(),u=(s=o.getDisplacement(),{kind:"Mark",color:n?y.default.getHexColor(n.getColor()):void 0,opacity:n?y.default.getOpacity(n.getColor()):void 0,strokeColor:r?r.getColor():void 0,strokeOpacity:r?y.default.getOpacity(r.getColor()):void 0,strokeWidth:r?r.getWidth():void 0,radius:0!==a?a:5,rotate:o.getRotation()/Math.PI*180,offset:s[0]||s[1]?s:void 0});switch(l){case 2:switch(c){case 0:u.wellKnownName="shape://vertline";break;case Math.PI/2:u.wellKnownName="shape://horline";break;case Math.PI/4:u.wellKnownName="shape://slash";break;case 2*Math.PI-Math.PI/4:u.wellKnownName="shape://backslash"}break;case 3:switch(c){case 0:u.wellKnownName="triangle";break;case Math.PI/2:u.wellKnownName="shape://carrow"}break;case 4:Number.isFinite(h)?0===o.getAngle()?u.wellKnownName="cross":u.wellKnownName="x":u.wellKnownName="square";break;case 5:u.wellKnownName="star";break;default:throw new Error("Could not parse OlStyle. Only 2, 3, 4 or 5 point regular shapes are allowed")}e=u}else if(t.getText()instanceof this.OlStyleTextConstructor){var d=t.getText(),f=(n=d.getFill(),r=d.getStroke(),d.getRotation()),p=d.getText()||"a",g=d.getFont()||"10px sans-serif",m=y.default.getFontNameFromOlFont(g);a=y.default.getSizeFromOlFont(g),s=[d.getOffsetX(),d.getOffsetY()],Array.isArray(p)&&(p=p[0]),e={kind:"Mark",wellKnownName:"ttf://".concat(m,"#0x").concat(p.charCodeAt(0).toString(16)),color:n?y.default.getHexColor(n.getColor()):void 0,opacity:n?y.default.getOpacity(n.getColor()):void 0,strokeColor:r?r.getColor():void 0,strokeOpacity:r?y.default.getOpacity(r.getColor()):void 0,strokeWidth:r?r.getWidth():void 0,radius:0!==a?a:5,rotate:f?f/Math.PI*180:0,offset:s[0]||s[1]?s:void 0}}else{var v=t.getImage();s=v.getDisplacement(),e={kind:"Icon",image:v.getSrc()?v.getSrc():void 0,opacity:v.getOpacity(),size:0!==v.getScale()?v.getScale():5,rotate:v.getRotation()/Math.PI*180,offset:s[0]||s[1]?s:void 0}}return e},t.prototype.getLineSymbolizerFromOlStyle=function(t){var e=t.getStroke(),i=e?e.getLineDash():void 0;return{kind:"Line",color:e?y.default.getHexColor(e.getColor()):void 0,opacity:e?y.default.getOpacity(e.getColor()):void 0,width:e?e.getWidth():void 0,cap:e?e.getLineCap():"butt",join:e?e.getLineJoin():"miter",dasharray:i||void 0,dashOffset:e?e.getLineDashOffset():void 0}},t.prototype.getFillSymbolizerFromOlStyle=function(t){var e=t.getFill(),i=t.getStroke(),n=i?i.getLineDash():void 0,r={kind:"Fill"};return e&&(r.color=y.default.getHexColor(e.getColor())),i&&(r.opacity=y.default.getOpacity(e.getColor())),i&&(r.outlineColor=y.default.getHexColor(i.getColor())),n&&(r.outlineDasharray=n),i&&(r.outlineOpacity=y.default.getOpacity(i.getColor())),i&&i.getWidth()&&(r.outlineWidth=i.getWidth()),r},t.prototype.getTextSymbolizerFromOlStyle=function(t){var e,i=t.getText(),n=i.getFill(),r=i.getStroke(),s=i.getOffsetX(),o=i.getOffsetY(),a=i.getFont(),h=i.getRotation(),l=i.getOverflow()?i.getOverflow():void 0,c=i.getText(),u=Array.isArray(c)?c[0]:c,d=1/0,f=void 0;if(a){var p=a.split("px");e=p[0].trim().split(" "),d=parseInt(e[e.length-1],10),f=(2===p.length?p[1]:p[2]).split(",").map((function(t){return t.startsWith(" ")?t.slice(1):t}))}return{kind:"Text",label:u,allowOverlap:l,color:n?y.default.getHexColor(n.getColor()):void 0,size:isFinite(d)?d:void 0,font:f,offset:void 0!==s&&void 0!==o?[s,o]:[0,0],haloColor:r&&r.getColor()?y.default.getHexColor(r.getColor()):void 0,haloWidth:r?r.getWidth():void 0,rotate:void 0!==h?h/Math.PI*180:void 0}},t.prototype.getSymbolizersFromOlStyle=function(t){var e=this,i=[];return t.forEach((function(t){var n;switch(e.getStyleTypeFromOlStyle(t)){case"Point":n=t.getText()&&!y.default.getIsMarkSymbolizerFont(t.getText().getFont())?e.getTextSymbolizerFromOlStyle(t):e.getPointSymbolizerFromOlStyle(t);break;case"Line":n=e.getLineSymbolizerFromOlStyle(t);break;case"Fill":n=e.getFillSymbolizerFromOlStyle(t);break;default:throw new Error("Failed to parse SymbolizerKind from OpenLayers Style")}i.push(n)})),i},t.prototype.getRuleFromOlStyle=function(t){return{name:"OL Style Rule 0",symbolizers:Array.isArray(t)?this.getSymbolizersFromOlStyle(t):this.getSymbolizersFromOlStyle([t])}},t.prototype.getStyleTypeFromOlStyle=function(t){var e;if(t.getImage()instanceof this.OlStyleImageConstructor)e="Point";else if(t.getText()instanceof this.OlStyleTextConstructor)e="Point";else if(t.getFill()instanceof this.OlStyleFillConstructor)e="Fill";else{if(!t.getStroke()||t.getFill())throw new Error("StyleType could not be detected");e="Line"}return e},t.prototype.olStyleToGeoStylerStyle=function(t){return{name:"OL Style",rules:[this.getRuleFromOlStyle(t)]}},t.prototype.readStyle=function(t){var e=this;return new Promise((function(i){try{e.isOlParserStyleFct(t)?i({output:t.__geoStylerStyle}):i({output:e.olStyleToGeoStylerStyle(t)})}catch(t){i({errors:[t]})}}))},t.prototype.writeStyle=function(t){var e=this;return new Promise((function(i){var n=e.checkForUnsupportedProperites(t);try{i({output:e.getOlStyleTypeFromGeoStylerStyle(t),unsupportedProperties:n,warnings:n&&["Your style contains unsupportedProperties!"]})}catch(t){i({errors:[t]})}}))},t.prototype.checkForUnsupportedProperites=function(t){var e=this,i={};if(t.rules.forEach((function(t){t.symbolizers.forEach((function(t){var n,r,s,o=(s="".concat(t.kind,"Symbolizer"))[0].toUpperCase()+s.slice(1),a=null===(r=null===(n=e.unsupportedProperties)||void 0===n?void 0:n.Symbolizer)||void 0===r?void 0:r[o];a&&("string"==typeof a||a instanceof String?(i.Symbolizer||(i.Symbolizer={}),i.Symbolizer[o]=a):Object.keys(t).forEach((function(t){a[t]&&(i.Symbolizer||(i.Symbolizer={}),i.Symbolizer[o]||(i.Symbolizer[o]={}),i.Symbolizer[o][t]=a[t])})))}))})),Object.keys(i).length>0)return i},t.prototype.getOlStyleTypeFromGeoStylerStyle=function(t){var e,i,n,r,s,o,a,h,l=t.rules;if(1===l.length){var c=void 0!==(null===(i=null===(e=null==t?void 0:t.rules)||void 0===e?void 0:e[0])||void 0===i?void 0:i.filter),u=void 0!==(null===(s=null===(r=null===(n=null==t?void 0:t.rules)||void 0===n?void 0:n[0])||void 0===r?void 0:r.scaleDenominator)||void 0===s?void 0:s.min),d=void 0!==(null===(h=null===(a=null===(o=null==t?void 0:t.rules)||void 0===o?void 0:o[0])||void 0===a?void 0:a.scaleDenominator)||void 0===h?void 0:h.max),f=!(!u&&!d),p=y.default.containsGeoStylerFunctions(t),g=t.rules[0].symbolizers.length,m=l[0].symbolizers.some((function(t){return"Text"===t.kind})),v=l[0].symbolizers.some((function(t){return"Icon"===t.kind&&"string"==typeof t.image&&t.image.includes("{{")}));return c||f||m||v||p?this.geoStylerStyleToOlParserStyleFct(t):1===g?this.geoStylerStyleToOlStyle(t):this.geoStylerStyleToOlStyleArray(t)}return this.geoStylerStyleToOlParserStyleFct(t)},t.prototype.geoStylerStyleToOlStyle=function(t){var e=t.rules[0].symbolizers[0];return this.getOlSymbolizerFromSymbolizer(e)},t.prototype.geoStylerStyleToOlStyleArray=function(t){var e=this,i=t.rules[0],n=[];return i.symbolizers.forEach((function(t){var i=e.getOlSymbolizerFromSymbolizer(t);n.push(i)})),n},t.prototype.geoStylerStyleToOlParserStyleFct=function(t){var e=this,i=t.rules,n=function(t,n){var r=[],o=m.METERS_PER_UNIT.m,a=n*o*39.37*(25.4/.28);return i.forEach((function(i){var o,h,l=null===(o=null==i?void 0:i.scaleDenominator)||void 0===o?void 0:o.min,c=null===(h=null==i?void 0:i.scaleDenominator)||void 0===h?void 0:h.max,u=!0;void 0===l&&void 0===c||(l=(0,s.isGeoStylerFunction)(l)?y.default.evaluateNumberFunction(l):l,c=(0,s.isGeoStylerFunction)(c)?y.default.evaluateNumberFunction(c):c,void 0!==l&&a<l&&(u=!1),void 0!==c&&a>=c&&(u=!1));var d=!1;if(i.filter)try{d=e.geoStylerFilterToOlParserFilter(t,i.filter)}catch(t){d=!1}else d=!0;u&&d&&i.symbolizers.forEach((function(i){var s=e.getOlSymbolizerFromSymbolizer(i,t);if("function"!=typeof s)r.push(s);else{var o=s(t,n);r.push(o)}}))})),r};return n.__geoStylerStyle=t,n},t.prototype.geoStylerFilterToOlParserFilter=function(t,e){var i=this,n=!0,r=!1;({"&&":!0,"||":!0,"!":!0})[e[0]]&&(r=!0);try{if(r)switch(e[0]){case"&&":var o=!0,a=e.slice(1);a.forEach((function(e){i.geoStylerFilterToOlParserFilter(t,e)||(o=!1)})),n=o;break;case"||":o=!1,(a=e.slice(1)).forEach((function(e){i.geoStylerFilterToOlParserFilter(t,e)&&(o=!0)})),n=o;break;case"!":n=!this.geoStylerFilterToOlParserFilter(t,e[1]);break;default:throw new Error("Cannot parse Filter. Unknown combination or negation operator.")}else{var h=void 0;h=(0,s.isGeoStylerFunction)(e[1])?y.default.evaluateFunction(e[1],t):t.get(e[1]);var l;switch(l=(0,s.isGeoStylerFunction)(e[2])?t.get(y.default.evaluateFunction(e[2],t)):e[2],e[0]){case"==":n=""+h==""+l;break;case"*=":"string"==typeof l&&"string"==typeof h&&(n=!(l.length>h.length)&&-1!==h.indexOf(l));break;case"!=":n=""+h!=""+l;break;case"<":n=Number(h)<Number(l);break;case"<=":n=Number(h)<=Number(l);break;case">":n=Number(h)>Number(l);break;case">=":n=Number(h)>=Number(l);break;default:throw new Error("Cannot parse Filter. Unknown comparison operator.")}}}catch(t){throw new Error("Cannot parse Filter. Invalid structure.")}return n},t.prototype.getOlSymbolizerFromSymbolizer=function(t,e){var i;switch(t.kind){case"Mark":i=this.getOlPointSymbolizerFromMarkSymbolizer(t,e);break;case"Icon":i=this.getOlIconSymbolizerFromIconSymbolizer(t,e);break;case"Text":i=this.getOlTextSymbolizerFromTextSymbolizer(t,e);break;case"Line":i=this.getOlLineSymbolizerFromLineSymbolizer(t,e);break;case"Fill":i=this.getOlPolygonSymbolizerFromFillSymbolizer(t,e);break;default:var n=new this.OlStyleFillConstructor({color:"rgba(255,255,255,0.4)"}),r=new this.OlStyleStrokeConstructor({color:"#3399CC",width:1.25});i=new this.OlStyleConstructor({image:new this.OlStyleCircleConstructor({fill:n,stroke:r,radius:5}),fill:n,stroke:r})}return i},t.prototype.getOlPointSymbolizerFromMarkSymbolizer=function(t,e){for(var i,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];(0,s.isGeoStylerFunction)(t[o])&&(t[o]=y.default.evaluateFunction(t[o],e))}(t.strokeColor||void 0!==t.strokeWidth)&&(i=new this.OlStyleStrokeConstructor({color:t.strokeColor&&void 0!==t.strokeOpacity?y.default.getRgbaColor(t.strokeColor,t.strokeOpacity):t.strokeColor,width:t.strokeWidth}));var a,h={fill:new this.OlStyleFillConstructor({color:t.color&&void 0!==t.opacity?y.default.getRgbaColor(t.color,t.opacity):t.color}),opacity:t.opacity||1,radius:t.radius||5,rotation:"number"==typeof t.rotate?t.rotate*Math.PI/180:void 0,stroke:i,displacement:"number"==typeof t.offset?t.offset:void 0};switch(t.wellKnownName){case"shape://dot":case"circle":a=new this.OlStyleConstructor({image:new this.OlStyleCircleConstructor(h)});break;case"square":h.points=4,h.angle=45*Math.PI/180,a=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(h)});break;case"triangle":h.points=3,h.angle=0,a=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(h)});break;case"star":h.points=5,h.radius2=h.radius/2.5,h.angle=0,a=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(h)});break;case"shape://plus":case"cross":h.points=4,h.radius2=0,h.angle=0,void 0===h.stroke&&(h.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),a=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(h)});break;case"shape://times":case"x":h.points=4,h.radius2=0,h.angle=45*Math.PI/180,void 0===h.stroke&&(h.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),a=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(h)});break;case"shape://backslash":h.points=2,h.angle=2*Math.PI-Math.PI/4,void 0===h.stroke&&(h.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),a=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(h)});break;case"shape://horline":h.points=2,h.angle=Math.PI/2,void 0===h.stroke&&(h.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),a=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(h)});break;case"shape://oarrow":case"shape://carrow":h.points=3,h.angle=Math.PI/2,a=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(h)});break;case"shape://slash":h.points=2,h.angle=Math.PI/4,void 0===h.stroke&&(h.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),a=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(h)});break;case"shape://vertline":h.points=2,h.angle=0,void 0===h.stroke&&(h.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),a=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(h)});break;default:if(y.default.getIsFontGlyphBased(t)){a=new this.OlStyleConstructor({text:new this.OlStyleTextConstructor({text:y.default.getCharacterForMarkSymbolizer(t),font:y.default.getTextFontForMarkSymbolizer(t),fill:h.fill,stroke:h.stroke,rotation:h.rotation})});break}throw new Error("MarkSymbolizer cannot be parsed. Unsupported WellKnownName.")}return a},t.prototype.getOlIconSymbolizerFromIconSymbolizer=function(t,e){for(var i=this,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];(0,s.isGeoStylerFunction)(t[a])&&(t[a]=y.default.evaluateFunction(t[a],e))}var h={src:t.image,crossOrigin:"anonymous",opacity:t.opacity,scale:t.size||1,rotation:"number"==typeof t.rotate?t.rotate*Math.PI/180:void 0,displacement:t.offset},l=new RegExp("\\{\\{.*?\\}\\}","g");return"string"==typeof t.image&&t.image.match(l)?function(e){var r,s=y.default.resolveAttributeTemplate(e,t.image,"");return s||(s=t.image+""),i.olIconStyleCache[s]?((r=i.olIconStyleCache[s]).setScale(h.scale),void 0!==h.rotation&&r.setRotation(h.rotation),void 0!==h.opacity&&r.setOpacity(h.opacity)):(r=new i.OlStyleIconConstructor(n(n({},h),{src:s})),i.olIconStyleCache[s]=r),new i.OlStyleConstructor({image:r})}:new this.OlStyleConstructor({image:new this.OlStyleIconConstructor(n({},h))})},t.prototype.getOlLineSymbolizerFromLineSymbolizer=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];(0,s.isGeoStylerFunction)(t[r])&&(t[r]=y.default.evaluateFunction(t[r],e))}return new this.OlStyleConstructor({stroke:new this.OlStyleStrokeConstructor({color:t.color&&null!==t.opacity&&void 0!==t.opacity?y.default.getRgbaColor(t.color,t.opacity):t.color,width:t.width,lineCap:t.cap,lineJoin:t.join,lineDash:t.dasharray,lineDashOffset:t.dashOffset})})},t.prototype.getOlPolygonSymbolizerFromFillSymbolizer=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];(0,s.isGeoStylerFunction)(t[r])&&(t[r]=y.default.evaluateFunction(t[r],e))}var o=t.color?new this.OlStyleFillConstructor({color:null!==t.opacity&&void 0!==t.opacity?y.default.getRgbaColor(t.color,t.opacity):t.color}):null,a=t.outlineColor||t.outlineWidth?new this.OlStyleStrokeConstructor({color:t.outlineColor&&Number.isFinite(t.outlineOpacity)?y.default.getRgbaColor(t.outlineColor,t.outlineOpacity):t.outlineColor,width:t.outlineWidth,lineDash:t.outlineDasharray}):null,h=new this.OlStyleConstructor({fill:o,stroke:a});if(t.graphicFill){var l=this.getOlPatternFromGraphicFill(t.graphicFill);o||(o=new this.OlStyleFillConstructor({})),l&&o.setColor(l),h.setFill(o)}return h},t.prototype.getOlPatternFromGraphicFill=function(t){var e;if((0,s.isIconSymbolizer)(t)){var i=null==(e=this.getOlIconSymbolizerFromIconSymbolizer(t))?void 0:e.getImage();if(null==i||i.load(),(null==i?void 0:i.getImageState())!==o.default.LOADED)return null}else{if(!(0,s.isMarkSymbolizer)(t))return null;e=this.getOlPointSymbolizerFromMarkSymbolizer(t)}var n=e.clone(),r=n.getImage(),h=document.createElement("canvas"),l=h.getContext("2d"),c=r.getScale()||1;r.setScale(1);var u=r.getSize(),d=(0,v.toContext)(l,{pixelRatio:c,size:u});d.setStyle(n);var f=u.map((function(t){return t/2}));return d.drawGeometry(new a.default(f)),l.createPattern(h,"repeat")},t.prototype.getOlTextSymbolizerFromTextSymbolizer=function(t,e){for(var i=this,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];(0,s.isGeoStylerFunction)(t[a])&&(t[a]=y.default.evaluateFunction(t[a],e))}var h,l={font:y.default.getTextFont(t),fill:new this.OlStyleFillConstructor({color:t.color&&null!==t.opacity&&void 0!==t.opacity?y.default.getRgbaColor(t.color,t.opacity):t.color}),stroke:new this.OlStyleStrokeConstructor({color:t.haloColor&&null!==t.opacity&&void 0!==t.opacity?y.default.getRgbaColor(t.haloColor,t.opacity):t.haloColor,width:t.haloWidth?t.haloWidth:0}),overflow:t.allowOverlap,offsetX:t.offset?t.offset[0]:0,offsetY:t.offset?t.offset[1]:0,rotation:"number"==typeof t.rotate?t.rotate*Math.PI/180:void 0},c=new RegExp("\\{\\{.*?\\}\\}","g");return(0,s.isGeoStylerStringFunction)(t.label)||(h=t.label?t.label.match(c):null),h?function(e){var r=new i.OlStyleTextConstructor(n({text:y.default.resolveAttributeTemplate(e,t.label,"")},l));return new i.OlStyleConstructor({text:r})}:new this.OlStyleConstructor({text:new this.OlStyleTextConstructor(n({text:t.label},l))})},t.title="OpenLayers Style Parser",t}();e.OlStyleParser=_,e.default=_},2661:function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DUMMY_MARK_SYMBOLIZER_FONT=void 0;var r=i(2075),s=n(i(9003)),o=/^ttf:\/\/(.+)#(.+)$/;e.DUMMY_MARK_SYMBOLIZER_FONT="geostyler-mark-symbolizer";var a=function(){function t(){}return t.getRgbaColor=function(e,i){if((0,r.isGeoStylerStringFunction)(e)&&(e=t.evaluateStringFunction(e)),"string"==typeof e){if(e.startsWith("rgba("))return e;if(/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)){var n=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return(0,r.isGeoStylerNumberFunction)(i)&&(i=t.evaluateNumberFunction(i)),i<0&&(i=1),"rgba("+n+", "+s+", "+o+", "+i+")"}}},t.splitRgbaColor=function(t){var e=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/);return[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10),parseFloat(e[3])]},t.getHexColor=function(e){if(e.startsWith("#"))return e;if(e.startsWith("rgb")){var i=t.splitRgbaColor(e);return t.getHexCodeFromRgbArray(i)}if(void 0!==s.default[e.toLocaleLowerCase()]){var n=s.default[e.toLocaleLowerCase()];return t.getHexCodeFromRgbArray(n)}},t.getHexCodeFromRgbArray=function(t){return"#"+t.map((function(t,e){var i=t.toString(16);return e<3?1===i.length?"0"+i:i:""})).join("")},t.getOpacity=function(e){if(e.startsWith("rgba(")){var i=t.splitRgbaColor(e);return 4===i.length?i[3]:void 0}},t.getTextFont=function(t){return"Normal "+t.size+"px "+t.font},t.getIsFontGlyphBased=function(t){return o.test(t.wellKnownName)},t.getIsMarkSymbolizerFont=function(t){var i=e.DUMMY_MARK_SYMBOLIZER_FONT;return t.substring(t.length-i.length,t.length)===i},t.getTextFontForMarkSymbolizer=function(t){var i=t.wellKnownName.match(o);if(!i)throw new Error("Could not parse font-based well known name: ".concat(t.wellKnownName));var n=i[1];return"Normal ".concat(t.radius||5,"px '").concat(n,"', ").concat(e.DUMMY_MARK_SYMBOLIZER_FONT)},t.getCharacterForMarkSymbolizer=function(t){var e=t.wellKnownName.match(o);if(!e)throw new Error("Could not parse font-based well known name: ".concat(t.wellKnownName));return String.fromCharCode(parseInt(e[2],16))},t.getFontNameFromOlFont=function(t){var e=t.match(/(?:\d+\S+) '?"?([^,'"]+)/);if(!e)throw new Error("Could not find font family name in the following string: ".concat(t));return e[1]},t.getSizeFromOlFont=function(t){var e=t.match(/(?:(\d+)px)/);return e?parseInt(e[1],10):0},t.resolveAttributeTemplate=function(t,e,i,n){void 0===i&&(i="n.v."),void 0===n&&(n=function(t,e){return e});var r=new RegExp("\\{\\{(.*?)\\}\\}","g"),s=e.match(r);return s&&s.forEach((function(r){for(var s=0,o=0,a=Object.entries(t.getProperties());o<a.length;o++){var h=a[o],l=h[0],c=h[1];if(r.slice(2,r.length-2).toLowerCase()===l.toLowerCase()){e=e.replace(r,n(l,c));break}s++}s===Object.keys(t.getProperties()).length&&(e=e.replace(r,i))})),e},t.evaluateFunction=function(e,i){if("property"===e.name){if(!i)throw new Error("Could not evalute 'property' function. Feature ".concat(i," is not defined."));return(0,r.isGeoStylerStringFunction)(e.args[0])?null==i?void 0:i.get(t.evaluateStringFunction(e.args[0],i)):null==i?void 0:i.get(e.args[0])}return(0,r.isGeoStylerStringFunction)(e)?t.evaluateStringFunction(e,i):(0,r.isGeoStylerNumberFunction)(e)?t.evaluateNumberFunction(e,i):(0,r.isGeoStylerBooleanFunction)(e)?t.evaluateBooleanFunction(e,i):(0,r.isGeoStylerUnknownFunction)(e)?t.evaluateUnknownFunction(e,i):void 0},t.evaluateBooleanFunction=function(e,i){var n=e.args.map((function(e){return(0,r.isGeoStylerFunction)(e)?t.evaluateFunction(e,i):e}));switch(e.name){case"between":return n[0]>=n[1]&&n[0]<=n[2];case"double2bool":default:return!1;case"in":return n.slice(1).includes(n[0]);case"parseBoolean":return!!n[0];case"strEndsWith":return n[0].endsWith(n[1]);case"strEqualsIgnoreCase":return n[0].toLowerCase()===n[1].toLowerCase();case"strMatches":return new RegExp(n[1]).test(n[0]);case"strStartsWith":return n[0].startsWith(n[1])}},t.evaluateNumberFunction=function(e,i){if("pi"===e.name)return Math.PI;if("random"===e.name)return Math.random();var n=e.args.map((function(e){return(0,r.isGeoStylerFunction)(e)?t.evaluateFunction(e,i):e}));switch(e.name){case"abs":return Math.abs(n[0]);case"acos":return Math.acos(n[0]);case"asin":return Math.asin(n[0]);case"atan":return Math.atan(n[0]);case"atan2":case"rint":default:return n[0];case"ceil":return Math.ceil(n[0]);case"cos":return Math.cos(n[0]);case"exp":return Math.exp(n[0]);case"floor":return Math.floor(n[0]);case"log":return Math.log(n[0]);case"max":return Math.max.apply(Math,n);case"min":return Math.min.apply(Math,n);case"modulo":return n[0]%n[1];case"pow":return Math.pow(n[0],n[1]);case"round":return Math.round(n[0]);case"sin":return Math.sin(n[0]);case"sqrt":return Math.sqrt(n[0]);case"strIndexOf":return n[0].indexOf(n[1]);case"strLastIndexOf":return n[0].lastIndexOf(n[1]);case"strLength":return n[0].length;case"tan":return Math.tan(n[0]);case"toDegrees":return n[0]*(180/Math.PI);case"toRadians":return n[0]*(Math.PI/180)}},t.evaluateUnknownFunction=function(e,i){var n=e.args.map((function(e){return(0,r.isGeoStylerFunction)(e)?t.evaluateFunction(e,i):e}));return"property"===e.name?null==i?void 0:i.get(n[0]):n[0]},t.evaluateStringFunction=function(e,i){var n,s=e.args.map((function(e){return(0,r.isGeoStylerFunction)(e)?t.evaluateFunction(e,i):e}));switch(e.name){case"numberFormat":case"strAbbreviate":default:return s[0];case"strCapitalize":for(var o=s[0].toLowerCase().split(" "),a=0,h=o;a<h.length;a++){var l=h[a];l=l.charAt(0).toUpperCase()+l.substring(1)}return o.join(" ");case"strConcat":return s.join();case"strDefaultIfBlank":return(null===(n=s[0])||void 0===n?void 0:n.length)<1?s[1]:s[0];case"strReplace":return!0===s[3]?s[0].replaceAll(s[1],s[2]):s[0].replace(s[1],s[2]);case"strStripAccents":return s[0].normalize("NFKD").replace(/[\u0300-\u036f]/g,"");case"strSubstring":return s[0].substring(s[1],s[2]);case"strSubstringStart":return s[0].substring(s[1]);case"strToLowerCase":return s[0].toLowerCase();case"strToUpperCase":return s[0].toUpperCase();case"strTrim":return s[0].trim()}},t.containsGeoStylerFunctions=function(t){return t.rules.some((function(t){var e,i,n,s,o=null===(e=t.filter)||void 0===e?void 0:e.some(r.isGeoStylerFunction),a=null===(i=t.symbolizers)||void 0===i?void 0:i.some((function(t){return Object.values(t).some(r.isGeoStylerFunction)})),h=(0,r.isGeoStylerFunction)(null===(n=null==t?void 0:t.scaleDenominator)||void 0===n?void 0:n.max)||(0,r.isGeoStylerFunction)(null===(s=null==t?void 0:t.scaleDenominator)||void 0===s?void 0:s.min);return o||a||h}))},t}();e.default=a},9003:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},3880:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2075:function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(e,i);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,r)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(7760),e),r(i(3880),e),r(i(9859),e)},7760:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9859:function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isGeoStylerFunction=e.isGeoStylerUnknownFunction=e.isGeoStylerBooleanFunction=e.isGeoStylerStringFunction=e.isGeoStylerNumberFunction=e.isGrayChannel=e.isRgbChannel=e.isRule=e.isRasterSymbolizer=e.isFillSymbolizer=e.isLineSymbolizer=e.isMarkSymbolizer=e.isTextSymbolizer=e.isIconSymbolizer=e.isPointSymbolizer=e.isSymbolizer=e.isNegationFilter=e.isCombinationFilter=e.isComparisonFilter=e.isFilter=e.isNegationOperator=e.isCombinationOperator=e.isComparisonOperator=e.isOperator=e.isScaleDenominator=e.isPropertyType=e.isFunctionCall=e.isExpression=void 0;var r=n(i(7037)),s=n(i(1763)),o=n(i(1584));e.isExpression=function(t){return(0,e.isFunctionCall)(t)||(0,e.isPropertyType)(t)},e.isFunctionCall=function(t){return"functioncall"===t.type&&t.hasOwnProperty("name")&&(0,r.default)(t.name)&&t.hasOwnProperty("args")&&Array.isArray(t.args)&&t.args.every((function(t){return(0,e.isExpression)(t)}))},e.isPropertyType=function(t){return(0,r.default)(t)||(0,s.default)(t)||(0,o.default)(t)||null===t},e.isScaleDenominator=function(t){return((null==t?void 0:t.min)||(null==t?void 0:t.max))&&(!t.min||(0,e.isFilter)(t.min))&&(!t.max||(0,e.isFilter)(t.max))},e.isOperator=function(t){return(0,e.isComparisonOperator)(t)||(0,e.isCombinationOperator)(t)||(0,e.isNegationOperator)(t)},e.isComparisonOperator=function(t){return["==","*=","!=","<","<=",">",">=","<=x<="].includes(t)},e.isCombinationOperator=function(t){return["&&","||"].includes(t)},e.isNegationOperator=function(t){return"!"===t},e.isFilter=function(t){return(0,e.isComparisonFilter)(t)||(0,e.isCombinationFilter)(t)||(0,e.isGeoStylerBooleanFunction)(t)||(0,e.isNegationFilter)(t)},e.isComparisonFilter=function(t){var i=t&&"<=x<="===t[0]?4:3;return Array.isArray(t)&&t.length===i&&(0,e.isComparisonOperator)(t[0])&&((0,e.isGeoStylerBooleanFunction)(t[1])||(0,r.default)(t[1]))&&(0,e.isPropertyType)(t[2])&&("<=x<="!==t[0]||(0,s.default)(t[3]))},e.isCombinationFilter=function(t){return Array.isArray(t)&&t.length>=3&&(0,e.isCombinationOperator)(t[0])&&t.every((function(t,i){return 0===i||(0,e.isFilter)(t)}))},e.isNegationFilter=function(t){return Array.isArray(t)&&2===t.length&&(0,e.isNegationOperator)(t[0])&&(0,e.isFilter)(t[1])},e.isSymbolizer=function(t){return["Fill","Icon","Line","Text","Mark","Raster"].includes(null==t?void 0:t.kind)},e.isPointSymbolizer=function(t){return["Icon","Text","Mark"].includes(null==t?void 0:t.kind)},e.isIconSymbolizer=function(t){return"Icon"===(null==t?void 0:t.kind)},e.isTextSymbolizer=function(t){return"Text"===(null==t?void 0:t.kind)},e.isMarkSymbolizer=function(t){return"Mark"===(null==t?void 0:t.kind)&&(0,r.default)(null==t?void 0:t.wellKnownName)},e.isLineSymbolizer=function(t){return"Line"===(null==t?void 0:t.kind)},e.isFillSymbolizer=function(t){return"Fill"===(null==t?void 0:t.kind)},e.isRasterSymbolizer=function(t){return"Raster"===(null==t?void 0:t.kind)},e.isRule=function(t){return(0,r.default)(null==t?void 0:t.name)&&(!(null==t?void 0:t.filter)||(0,e.isFilter)(t.filter))&&(!(null==t?void 0:t.scaleDenominator)||(0,e.isScaleDenominator)(t.scaleDenominator))&&(null==t?void 0:t.symbolizers.every((function(t){return(0,e.isSymbolizer)(t)})))},e.isRgbChannel=function(t){return void 0!==t.redChannel||void 0!==t.greenChannel||void 0!==t.blueChannel},e.isGrayChannel=function(t){return void 0!==t.grayChannel},e.isGeoStylerNumberFunction=function(t){return["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","modulo","pi","pow","random","rint","round","sin","sqrt","strIndexOf","strLastIndexOf","strLength","tan","toDegrees","toRadians"].includes(null==t?void 0:t.name)},e.isGeoStylerStringFunction=function(t){return["numberFormat","strAbbreviate","strCapitalize","strConcat","strDefaultIfBlank","strReplace","strStripAccents","strSubstring","strSubstringStart","strToLowerCase","strToUpperCase","strTrim"].includes(null==t?void 0:t.name)},e.isGeoStylerBooleanFunction=function(t){return["between","double2bool","in","parseBoolean","strEndsWith","strEqualsIgnoreCase","strMatches","strStartsWith"].includes(null==t?void 0:t.name)},e.isGeoStylerUnknownFunction=function(t){return["property"].includes(null==t?void 0:t.name)},e.isGeoStylerFunction=function(t){return(0,e.isGeoStylerBooleanFunction)(t)||(0,e.isGeoStylerNumberFunction)(t)||(0,e.isGeoStylerStringFunction)(t)||(0,e.isGeoStylerUnknownFunction)(t)}},8552:(t,e,i)=>{var n=i(852)(i(5639),"DataView");t.exports=n},1989:(t,e,i)=>{var n=i(1789),r=i(401),s=i(7667),o=i(1327),a=i(1866);function h(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}h.prototype.clear=n,h.prototype.delete=r,h.prototype.get=s,h.prototype.has=o,h.prototype.set=a,t.exports=h},8407:(t,e,i)=>{var n=i(7040),r=i(4125),s=i(2117),o=i(7518),a=i(4705);function h(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}h.prototype.clear=n,h.prototype.delete=r,h.prototype.get=s,h.prototype.has=o,h.prototype.set=a,t.exports=h},7071:(t,e,i)=>{var n=i(852)(i(5639),"Map");t.exports=n},3369:(t,e,i)=>{var n=i(4785),r=i(1285),s=i(6e3),o=i(9916),a=i(5265);function h(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}h.prototype.clear=n,h.prototype.delete=r,h.prototype.get=s,h.prototype.has=o,h.prototype.set=a,t.exports=h},3818:(t,e,i)=>{var n=i(852)(i(5639),"Promise");t.exports=n},8525:(t,e,i)=>{var n=i(852)(i(5639),"Set");t.exports=n},8668:(t,e,i)=>{var n=i(3369),r=i(619),s=i(2385);function o(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new n;++e<i;)this.add(t[e])}o.prototype.add=o.prototype.push=r,o.prototype.has=s,t.exports=o},6384:(t,e,i)=>{var n=i(8407),r=i(7465),s=i(3779),o=i(7599),a=i(4758),h=i(4309);function l(t){var e=this.__data__=new n(t);this.size=e.size}l.prototype.clear=r,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=a,l.prototype.set=h,t.exports=l},2705:(t,e,i)=>{var n=i(5639).Symbol;t.exports=n},1149:(t,e,i)=>{var n=i(5639).Uint8Array;t.exports=n},577:(t,e,i)=>{var n=i(852)(i(5639),"WeakMap");t.exports=n},4963:t=>{t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length,r=0,s=[];++i<n;){var o=t[i];e(o,i,t)&&(s[r++]=o)}return s}},4636:(t,e,i)=>{var n=i(2545),r=i(5694),s=i(1469),o=i(4144),a=i(5776),h=i(6719),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var i=s(t),c=!i&&r(t),u=!i&&!c&&o(t),d=!i&&!c&&!u&&h(t),f=i||c||u||d,p=f?n(t.length,String):[],g=p.length;for(var m in t)!e&&!l.call(t,m)||f&&("length"==m||u&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||p.push(m);return p}},2488:t=>{t.exports=function(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}},2908:t=>{t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}},8470:(t,e,i)=>{var n=i(7813);t.exports=function(t,e){for(var i=t.length;i--;)if(n(t[i][0],e))return i;return-1}},8866:(t,e,i)=>{var n=i(2488),r=i(1469);t.exports=function(t,e,i){var s=e(t);return r(t)?s:n(s,i(t))}},4239:(t,e,i)=>{var n=i(2705),r=i(9607),s=i(2333),o=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):s(t)}},9454:(t,e,i)=>{var n=i(4239),r=i(7005);t.exports=function(t){return r(t)&&"[object Arguments]"==n(t)}},939:(t,e,i)=>{var n=i(2492),r=i(7005);t.exports=function t(e,i,s,o,a){return e===i||(null==e||null==i||!r(e)&&!r(i)?e!=e&&i!=i:n(e,i,s,o,t,a))}},2492:(t,e,i)=>{var n=i(6384),r=i(7114),s=i(8351),o=i(6096),a=i(4160),h=i(1469),l=i(4144),c=i(6719),u="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,i,g,m,y){var v=h(t),_=h(e),b=v?d:a(t),w=_?d:a(e),x=(b=b==u?f:b)==f,S=(w=w==u?f:w)==f,M=b==w;if(M&&l(t)){if(!l(e))return!1;v=!0,x=!1}if(M&&!x)return y||(y=new n),v||c(t)?r(t,e,i,g,m,y):s(t,e,b,i,g,m,y);if(!(1&i)){var C=x&&p.call(t,"__wrapped__"),A=S&&p.call(e,"__wrapped__");if(C||A){var L=C?t.value():t,N=A?e.value():e;return y||(y=new n),m(L,N,i,g,y)}}return!!M&&(y||(y=new n),o(t,e,i,g,m,y))}},8458:(t,e,i)=>{var n=i(3560),r=i(5346),s=i(3218),o=i(346),a=/^\[object .+?Constructor\]$/,h=Function.prototype,l=Object.prototype,c=h.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||r(t))&&(n(t)?d:a).test(o(t))}},8749:(t,e,i)=>{var n=i(4239),r=i(1780),s=i(7005),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return s(t)&&r(t.length)&&!!o[n(t)]}},280:(t,e,i)=>{var n=i(5726),r=i(6916),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return r(t);var e=[];for(var i in Object(t))s.call(t,i)&&"constructor"!=i&&e.push(i);return e}},2545:t=>{t.exports=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}},1717:t=>{t.exports=function(t){return function(e){return t(e)}}},4757:t=>{t.exports=function(t,e){return t.has(e)}},4429:(t,e,i)=>{var n=i(5639)["__core-js_shared__"];t.exports=n},7114:(t,e,i)=>{var n=i(8668),r=i(2908),s=i(4757);t.exports=function(t,e,i,o,a,h){var l=1&i,c=t.length,u=e.length;if(c!=u&&!(l&&u>c))return!1;var d=h.get(t),f=h.get(e);if(d&&f)return d==e&&f==t;var p=-1,g=!0,m=2&i?new n:void 0;for(h.set(t,e),h.set(e,t);++p<c;){var y=t[p],v=e[p];if(o)var _=l?o(v,y,p,e,t,h):o(y,v,p,t,e,h);if(void 0!==_){if(_)continue;g=!1;break}if(m){if(!r(e,(function(t,e){if(!s(m,e)&&(y===t||a(y,t,i,o,h)))return m.push(e)}))){g=!1;break}}else if(y!==v&&!a(y,v,i,o,h)){g=!1;break}}return h.delete(t),h.delete(e),g}},8351:(t,e,i)=>{var n=i(2705),r=i(1149),s=i(7813),o=i(7114),a=i(8776),h=i(1814),l=n?n.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,i,n,l,u,d){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!u(new r(t),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=a;case"[object Set]":var p=1&n;if(f||(f=h),t.size!=e.size&&!p)return!1;var g=d.get(t);if(g)return g==e;n|=2,d.set(t,e);var m=o(f(t),f(e),n,l,u,d);return d.delete(t),m;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},6096:(t,e,i)=>{var n=i(8234),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,i,s,o,a){var h=1&i,l=n(t),c=l.length;if(c!=n(e).length&&!h)return!1;for(var u=c;u--;){var d=l[u];if(!(h?d in e:r.call(e,d)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var g=!0;a.set(t,e),a.set(e,t);for(var m=h;++u<c;){var y=t[d=l[u]],v=e[d];if(s)var _=h?s(v,y,d,e,t,a):s(y,v,d,t,e,a);if(!(void 0===_?y===v||o(y,v,i,s,a):_)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}},1957:(t,e,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=n},8234:(t,e,i)=>{var n=i(8866),r=i(9551),s=i(3674);t.exports=function(t){return n(t,s,r)}},5050:(t,e,i)=>{var n=i(7019);t.exports=function(t,e){var i=t.__data__;return n(e)?i["string"==typeof e?"string":"hash"]:i.map}},852:(t,e,i)=>{var n=i(8458),r=i(7801);t.exports=function(t,e){var i=r(t,e);return n(i)?i:void 0}},9607:(t,e,i)=>{var n=i(2705),r=Object.prototype,s=r.hasOwnProperty,o=r.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),i=t[a];try{t[a]=void 0;var n=!0}catch(t){}var r=o.call(t);return n&&(e?t[a]=i:delete t[a]),r}},9551:(t,e,i)=>{var n=i(4963),r=i(479),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(t){return null==t?[]:(t=Object(t),n(o(t),(function(e){return s.call(t,e)})))}:r;t.exports=a},4160:(t,e,i)=>{var n=i(8552),r=i(7071),s=i(3818),o=i(8525),a=i(577),h=i(4239),l=i(346),c="[object Map]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",g=l(n),m=l(r),y=l(s),v=l(o),_=l(a),b=h;(n&&b(new n(new ArrayBuffer(1)))!=p||r&&b(new r)!=c||s&&b(s.resolve())!=u||o&&b(new o)!=d||a&&b(new a)!=f)&&(b=function(t){var e=h(t),i="[object Object]"==e?t.constructor:void 0,n=i?l(i):"";if(n)switch(n){case g:return p;case m:return c;case y:return u;case v:return d;case _:return f}return e}),t.exports=b},7801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},1789:(t,e,i)=>{var n=i(4536);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},7667:(t,e,i)=>{var n=i(4536),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return r.call(e,t)?e[t]:void 0}},1327:(t,e,i)=>{var n=i(4536),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:r.call(e,t)}},1866:(t,e,i)=>{var n=i(4536);t.exports=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},5776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,i){var n=typeof t;return!!(i=null==i?9007199254740991:i)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<i}},7019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},5346:(t,e,i)=>{var n,r=i(4429),s=(n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!s&&s in t}},5726:t=>{var e=Object.prototype;t.exports=function(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||e)}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,i)=>{var n=i(8470),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,i=n(e,t);return!(i<0||(i==e.length-1?e.pop():r.call(e,i,1),--this.size,0))}},2117:(t,e,i)=>{var n=i(8470);t.exports=function(t){var e=this.__data__,i=n(e,t);return i<0?void 0:e[i][1]}},7518:(t,e,i)=>{var n=i(8470);t.exports=function(t){return n(this.__data__,t)>-1}},4705:(t,e,i)=>{var n=i(8470);t.exports=function(t,e){var i=this.__data__,r=n(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}},4785:(t,e,i)=>{var n=i(1989),r=i(8407),s=i(7071);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||r),string:new n}}},1285:(t,e,i)=>{var n=i(5050);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},6e3:(t,e,i)=>{var n=i(5050);t.exports=function(t){return n(this,t).get(t)}},9916:(t,e,i)=>{var n=i(5050);t.exports=function(t){return n(this,t).has(t)}},5265:(t,e,i)=>{var n=i(5050);t.exports=function(t,e){var i=n(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}},8776:t=>{t.exports=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}},4536:(t,e,i)=>{var n=i(852)(Object,"create");t.exports=n},6916:(t,e,i)=>{var n=i(5569)(Object.keys,Object);t.exports=n},1167:(t,e,i)=>{t=i.nmd(t);var n=i(1957),r=e&&!e.nodeType&&e,s=r&&t&&!t.nodeType&&t,o=s&&s.exports===r&&n.process,a=function(){try{return s&&s.require&&s.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5569:t=>{t.exports=function(t,e){return function(i){return t(e(i))}}},5639:(t,e,i)=>{var n=i(1957),r="object"==typeof self&&self&&self.Object===Object&&self,s=n||r||Function("return this")();t.exports=s},619:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},2385:t=>{t.exports=function(t){return this.__data__.has(t)}},1814:t=>{t.exports=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}},7465:(t,e,i)=>{var n=i(8407);t.exports=function(){this.__data__=new n,this.size=0}},3779:t=>{t.exports=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}},7599:t=>{t.exports=function(t){return this.__data__.get(t)}},4758:t=>{t.exports=function(t){return this.__data__.has(t)}},4309:(t,e,i)=>{var n=i(8407),r=i(7071),s=i(3369);t.exports=function(t,e){var i=this.__data__;if(i instanceof n){var o=i.__data__;if(!r||o.length<199)return o.push([t,e]),this.size=++i.size,this;i=this.__data__=new s(o)}return i.set(t,e),this.size=i.size,this}},346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},5694:(t,e,i)=>{var n=i(9454),r=i(7005),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,h=n(function(){return arguments}())?n:function(t){return r(t)&&o.call(t,"callee")&&!a.call(t,"callee")};t.exports=h},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,i)=>{var n=i(3560),r=i(1780);t.exports=function(t){return null!=t&&r(t.length)&&!n(t)}},1584:(t,e,i)=>{var n=i(4239),r=i(7005);t.exports=function(t){return!0===t||!1===t||r(t)&&"[object Boolean]"==n(t)}},4144:(t,e,i)=>{t=i.nmd(t);var n=i(5639),r=i(5062),s=e&&!e.nodeType&&e,o=s&&t&&!t.nodeType&&t,a=o&&o.exports===s?n.Buffer:void 0,h=(a?a.isBuffer:void 0)||r;t.exports=h},8446:(t,e,i)=>{var n=i(939);t.exports=function(t,e){return n(t,e)}},3560:(t,e,i)=>{var n=i(4239),r=i(3218);t.exports=function(t){if(!r(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},1763:(t,e,i)=>{var n=i(4239),r=i(7005);t.exports=function(t){return"number"==typeof t||r(t)&&"[object Number]"==n(t)}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},7037:(t,e,i)=>{var n=i(4239),r=i(1469),s=i(7005);t.exports=function(t){return"string"==typeof t||!r(t)&&s(t)&&"[object String]"==n(t)}},6719:(t,e,i)=>{var n=i(8749),r=i(1717),s=i(1167),o=s&&s.isTypedArray,a=o?r(o):n;t.exports=a},3674:(t,e,i)=>{var n=i(4636),r=i(280),s=i(8612);t.exports=function(t){return s(t)?n(t):r(t)}},479:t=>{t.exports=function(){return[]}},5062:t=>{t.exports=function(){return!1}},4331:function(t){t.exports=function(){"use strict";function t(t,n,r,s,o){!function t(i,n,r,s,o){for(;s>r;){if(s-r>600){var a=s-r+1,h=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(h-a/2<0?-1:1);t(i,n,Math.max(r,Math.floor(n-h*c/a+u)),Math.min(s,Math.floor(n+(a-h)*c/a+u)),o)}var d=i[n],f=r,p=s;for(e(i,r,n),o(i[s],d)>0&&e(i,r,s);f<p;){for(e(i,f,p),f++,p--;o(i[f],d)<0;)f++;for(;o(i[p],d)>0;)p--}0===o(i[r],d)?e(i,r,p):e(i,++p,s),p<=n&&(r=p+1),n<=p&&(s=p-1)}}(t,n,r||0,s||t.length-1,o||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function s(t,e){o(t,0,t.children.length,e,t)}function o(t,e,i,n,r){r||(r=p(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s=e;s<i;s++){var o=t.children[s];a(r,t.leaf?n(o):o)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,i,n,r,s){for(var o=[i,n];o.length;)if(!((n=o.pop())-(i=o.pop())<=r)){var a=i+Math.ceil((n-i)/r/2)*r;t(e,a,i,n,s),o.push(i,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!f(t,e))return i;for(var n=this.toBBox,r=[];e;){for(var s=0;s<e.children.length;s++){var o=e.children[s],a=e.leaf?n(o):o;f(t,a)&&(e.leaf?i.push(o):d(t,a)?this._all(o,i):r.push(o))}e=r.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],s=e.leaf?this.toBBox(r):r;if(f(t,s)){if(e.leaf||d(t,s))return!0;i.push(r)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=p([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,s,o=this.data,a=this.toBBox(t),h=[],l=[];o||h.length;){if(o||(o=h.pop(),n=h[h.length-1],i=l.pop(),s=!0),o.leaf){var c=r(t,o.children,e);if(-1!==c)return o.children.splice(c,1),h.push(o),this._condense(h),this}s||o.leaf||!d(o,a)?n?(i++,o=n.children[i],s=!1):o=null:(h.push(o),l.push(i),i=0,n=o,o=o.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return s(r=p(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=p([])).leaf=!1,r.height=n;var h=Math.ceil(o/a),l=h*Math.ceil(Math.sqrt(a));g(t,e,i,l,this.compareMinX);for(var c=e;c<=i;c+=l){var u=Math.min(c+l-1,i);g(t,c,u,h,this.compareMinY);for(var d=c;d<=u;d+=h){var f=Math.min(d+h-1,u);r.children.push(this._build(t,d,f,n-1))}}return s(r,this.toBBox),r},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=1/0,s=1/0,o=void 0,a=0;a<e.children.length;a++){var h=e.children[a],l=c(h),u=(d=t,f=h,(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-l);u<s?(s=u,r=l<r?l:r,o=h):u===s&&l<r&&(r=l,o=h)}e=o||e.children[0]}var d,f;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],s=this._chooseSubtree(n,this.data,e,r);for(s.children.push(t),a(s,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),a=p(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},n.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,r,s,a,h,l,u,d=1/0,f=1/0,p=e;p<=i-e;p++){var g=o(t,0,p,this.toBBox),m=o(t,p,i,this.toBBox),y=(r=g,s=m,void 0,void 0,void 0,void 0,a=Math.max(r.minX,s.minX),h=Math.max(r.minY,s.minY),l=Math.min(r.maxX,s.maxX),u=Math.min(r.maxY,s.maxY),Math.max(0,l-a)*Math.max(0,u-h)),v=c(g)+c(m);y<d?(d=y,n=p,f=v<f?v:f):y===d&&v<f&&(f=v,n=p)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:h,r=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var r=this.toBBox,s=o(t,0,e,r),h=o(t,i-e,i,r),l=u(s)+u(h),c=e;c<i-e;c++){var d=t.children[c];a(s,t.leaf?r(d):d),l+=u(s)}for(var f=i-e-1;f>=e;f--){var p=t.children[f];a(h,t.leaf?r(p):p),l+=u(h)}return l},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():s(t[e],this.toBBox)},n}()},1002:(t,e,i)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}i.d(e,{Z:()=>n})},6813:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const n={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class r extends Error{constructor(t){const e=n[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const s=r},1090:(t,e,i)=>{"use strict";i.r(e),i.d(e,{createStyleFunction:()=>h,default:()=>l});var n=i(2971),r=i(5487),s=i(9515),o=i(5818);class a extends n.Z{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new a(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,o.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=(0,o.oL)(t,r.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?h(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function h(t){if("function"==typeof t)return t;let e;return Array.isArray(t)?e=t:((0,s.h)("function"==typeof t.getZIndex,41),e=[t]),function(){return e}}const l=a},8096:(t,e,i)=>{"use strict";i.d(e,{K:()=>c,Z:()=>u});var n=i(5487),r=i(1798),s=i(553),o=i(177),a=i(8641),h=i(5818);class l extends r.Z{constructor(t,e,i,n,r,o){super(t,e,i,s.default.IDLE),this.src_=n,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.state=s.default.IDLE,this.imageLoadFunction_=o}getImage(){return this.image_}handleImageError_(){this.state=s.default.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=(0,a.getHeight)(this.extent)/this.image_.height),this.state=s.default.LOADED,this.unlistenImage_(),this.changed()}load(){this.state!=s.default.IDLE&&this.state!=s.default.ERROR||(this.state=s.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=c(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(t){this.image_=t,this.resolution=(0,a.getHeight)(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function c(t,e,i){const r=t;let s=!0,a=!1,l=!1;const c=[(0,h.Vx)(r,n.Z.LOAD,(function(){l=!0,a||e()}))];return r.src&&o.Tp?(a=!0,r.decode().then((function(){s&&e()})).catch((function(t){s&&(l?e():i())}))):c.push((0,h.Vx)(r,n.Z.ERROR,i)),function(){s=!1,c.forEach(h.bN)}}const u=l},1798:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(3069),r=i(5487),s=i(4187);class o extends n.Z{constructor(t,e,i,n){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=n}changed(){this.dispatchEvent(r.Z.CHANGE)}getExtent(){return this.extent}getImage(){return(0,s.O3)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){(0,s.O3)()}}const a=o},553:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},2971:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(291),r=i(5990),s=i(2706),o=i(4187),a=i(9374);class h extends n.ZP{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class l extends s.Z{constructor(t){super(),this.on,this.once,this.un,(0,o.sq)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new h(i,t,e)),i=r.Z.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new h(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const i=n[t];n[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],(0,a.x)(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const c=l},5990:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={PROPERTYCHANGE:"propertychange"}},2706:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(3069),r=i(5487),s=i(5818);class o extends n.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(r.Z.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=(0,s.oL)(this,t[r],e);return n}return(0,s.oL)(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let r=0;r<n;++r)i[r]=(0,s.Vx)(this,t[r],e)}else i=(0,s.Vx)(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)!function(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)(0,s.bN)(t[e]);else(0,s.bN)(t)}(i);else if(Array.isArray(t))for(let i=0,n=t.length;i<n;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}o.prototype.on,o.prototype.once,o.prototype.un;const a=o},5537:(t,e,i)=>{"use strict";function n(t,e,i){let n,s;i=i||r;let o=0,a=t.length,h=!1;for(;o<a;)n=o+(a-o>>1),s=+i(t[n],e),s<0?o=n+1:(a=n,h=!s);return h?o:~o}function r(t,e){return t>e?1:t<e?-1:0}function s(t,e,i){const n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;let r;if(i>0){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return"function"==typeof i?i(e,t[r-1],t[r])>0?r-1:r:t[r-1]-e<e-t[r]?r-1:r}return n-1}function o(t,e,i){for(;e<i;){const n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function a(t,e){const i=Array.isArray(e)?e:[e],n=i.length;for(let e=0;e<n;e++)t[t.length]=i[e]}function h(t,e){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function l(t,e,i){const n=e||r;return t.every((function(e,r){if(0===r)return!0;const s=n(t[r-1],e);return!(s>0||i&&0===s)}))}i.d(e,{FZ:()=>o,fS:()=>h,h7:()=>s,j2:()=>r,l7:()=>a,pT:()=>l,ry:()=>n})},9515:(t,e,i)=>{"use strict";i.d(e,{h:()=>r});var n=i(6813);function r(t,e){if(!t)throw new n.Z(e)}},9706:(t,e,i)=>{"use strict";i.d(e,{BB:()=>u,XC:()=>a,_2:()=>l});var n=i(9515),r=i(3983);const s=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,o=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(t){return"string"==typeof t?t:u(t)}const h=function(){const t={};let e=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(e>=1024){let i=0;for(const n in t)0==(3&i++)&&(delete t[n],--e)}r=function(t){let e,i,r,a,h;if(o.exec(t)&&(t=function(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(t)),s.exec(t)){const n=t.length-1;let s;s=n<=4?1:2;const o=4===n||8===n;e=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),r=parseInt(t.substr(1+2*s,s),16),a=o?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,i=(i<<4)+i,r=(r<<4)+r,o&&(a=(a<<4)+a)),h=[e,i,r,a/255]}else t.startsWith("rgba(")?(h=t.slice(5,-1).split(",").map(Number),c(h)):t.startsWith("rgb(")?(h=t.slice(4,-1).split(",").map(Number),h.push(1),c(h)):(0,n.h)(!1,14);return h}(i),t[i]=r,++e}return r}}();function l(t){return Array.isArray(t)?t:h(t)}function c(t){return t[0]=(0,r.uZ)(t[0]+.5|0,0,255),t[1]=(0,r.uZ)(t[1]+.5|0,0,255),t[2]=(0,r.uZ)(t[2]+.5|0,0,255),t[3]=(0,r.uZ)(t[3],0,1),t}function u(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}},6620:(t,e,i)=>{"use strict";i.d(e,{y:()=>r});var n=i(9706);function r(t){return Array.isArray(t)?(0,n.BB)(t):t}},1900:(t,e,i)=>{"use strict";i.d(e,{Cf:()=>r,jk:()=>s});var n=i(8641);function r(t,e){if(e.canWrapX()){const i=(0,n.getWidth)(e.getExtent()),r=s(t,e,i);r&&(t[0]-=r*i)}return t}function s(t,e,i){const r=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(i=i||(0,n.getWidth)(r),s=Math.floor((t[0]-r[0])/i)),s}},8326:(t,e,i)=>{"use strict";i.d(e,{E4:()=>r,jy:()=>s});var n=i(177);function r(t,e,i,r){let s;return s=i&&i.length?i.shift():n.Id?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(s.width=t),e&&(s.height=e),s.getContext("2d",r)}function s(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}},5818:(t,e,i)=>{"use strict";i.d(e,{Vx:()=>s,bN:()=>o,oL:()=>r});var n=i(9374);function r(t,e,i,n,r){if(n&&n!==t&&(i=i.bind(n)),r){const n=i;i=function(){t.removeEventListener(e,i),n.apply(this,arguments)}}const s={target:t,type:e,listener:i};return t.addEventListener(e,i),s}function s(t,e,i,n){return r(t,e,i,n,!0)}function o(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,n.Z)(t))}},291:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>n});const n=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},5487:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},3069:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});const n=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};var r=i(291),s=i(6885),o=i(9374);const a=class extends n{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e="string"==typeof t,i=e?t:t.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const o=e?new r.ZP(t):t;o.target||(o.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});let l;i in a||(a[i]=0,h[i]=0),++a[i];for(let t=0,e=n.length;t<e;++t)if(l="handleEvent"in n[t]?n[t].handleEvent(o):n[t].call(this,o),!1===l||o.propagationStopped){l=!1;break}if(0==--a[i]){let t=h[i];for(delete h[i];t--;)this.removeEventListener(i,s.Zn);delete a[i]}return l}disposeInternal(){this.listeners_&&(0,o.Z)(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=s.Zn,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}}}},8641:(t,e,i)=>{"use strict";i.r(e),i.d(e,{applyTransform:()=>K,approximatelyEquals:()=>w,boundingExtent:()=>s,buffer:()=>o,clone:()=>a,closestSquaredDistanceXY:()=>h,containsCoordinate:()=>l,containsExtent:()=>c,containsXY:()=>u,coordinateRelationship:()=>d,createEmpty:()=>f,createOrUpdate:()=>p,createOrUpdateEmpty:()=>g,createOrUpdateFromCoordinate:()=>m,createOrUpdateFromCoordinates:()=>y,createOrUpdateFromFlatCoordinates:()=>v,createOrUpdateFromRings:()=>_,equals:()=>b,extend:()=>x,extendCoordinate:()=>S,extendCoordinates:()=>M,extendFlatCoordinates:()=>C,extendRings:()=>A,extendXY:()=>L,forEachCorner:()=>N,getArea:()=>E,getBottomLeft:()=>P,getBottomRight:()=>I,getCenter:()=>O,getCorner:()=>R,getEnlargedArea:()=>F,getForViewAndSize:()=>T,getHeight:()=>j,getIntersection:()=>B,getIntersectionArea:()=>D,getMargin:()=>q,getRotatedViewport:()=>k,getSize:()=>G,getTopLeft:()=>z,getTopRight:()=>U,getWidth:()=>W,intersects:()=>Y,intersectsSegment:()=>Z,isEmpty:()=>H,returnOrUpdate:()=>V,scaleFromCenter:()=>X,wrapAndSliceX:()=>Q,wrapX:()=>J});var n=i(8716),r=i(9515);function s(t){const e=[1/0,1/0,-1/0,-1/0];for(let i=0,n=t.length;i<n;++i)S(e,t[i]);return e}function o(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function a(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function h(t,e,i){let n,r;return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,n*n+r*r}function l(t,e){return u(t,e[0],e[1])}function c(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function u(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function d(t,e){const i=t[0],r=t[1],s=t[2],o=t[3],a=e[0],h=e[1];let l=n.Z.UNKNOWN;return a<i?l|=n.Z.LEFT:a>s&&(l|=n.Z.RIGHT),h<r?l|=n.Z.BELOW:h>o&&(l|=n.Z.ABOVE),l===n.Z.UNKNOWN&&(l=n.Z.INTERSECTING),l}function f(){return[1/0,1/0,-1/0,-1/0]}function p(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function g(t){return p(1/0,1/0,-1/0,-1/0,t)}function m(t,e){const i=t[0],n=t[1];return p(i,n,i,n,e)}function y(t,e){return M(g(e),t)}function v(t,e,i,n,r){return C(g(r),t,e,i,n)}function _(t,e){return A(g(e),t)}function b(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function w(t,e,i){return Math.abs(t[0]-e[0])<i&&Math.abs(t[2]-e[2])<i&&Math.abs(t[1]-e[1])<i&&Math.abs(t[3]-e[3])<i}function x(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function S(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function M(t,e){for(let i=0,n=e.length;i<n;++i)S(t,e[i]);return t}function C(t,e,i,n,r){for(;i<n;i+=r)L(t,e[i],e[i+1]);return t}function A(t,e){for(let i=0,n=e.length;i<n;++i)M(t,e[i]);return t}function L(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function N(t,e){let i;return i=e(P(t)),i||(i=e(I(t)),i||(i=e(U(t)),i||(i=e(z(t)),i||!1)))}function E(t){let e=0;return H(t)||(e=W(t)*j(t)),e}function P(t){return[t[0],t[1]]}function I(t){return[t[2],t[1]]}function O(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function R(t,e){let i;return"bottom-left"===e?i=P(t):"bottom-right"===e?i=I(t):"top-left"===e?i=z(t):"top-right"===e?i=U(t):(0,r.h)(!1,13),i}function F(t,e){const i=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-i)*(Math.max(t[3],e[3])-n)}function T(t,e,i,n,r){const[s,o,a,h,l,c,u,d]=k(t,e,i,n);return p(Math.min(s,a,l,u),Math.min(o,h,c,d),Math.max(s,a,l,u),Math.max(o,h,c,d),r)}function k(t,e,i,n){const r=e*n[0]/2,s=e*n[1]/2,o=Math.cos(i),a=Math.sin(i),h=r*o,l=r*a,c=s*o,u=s*a,d=t[0],f=t[1];return[d-h+u,f-l-c,d-h-u,f-l+c,d+h-u,f+l+c,d+h+u,f+l-c,d-h+u,f-l-c]}function j(t){return t[3]-t[1]}function D(t,e){return E(B(t,e))}function B(t,e,i){const n=i||[1/0,1/0,-1/0,-1/0];return Y(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):g(n),n}function q(t){return W(t)+j(t)}function G(t){return[t[2]-t[0],t[3]-t[1]]}function z(t){return[t[0],t[3]]}function U(t){return[t[2],t[3]]}function W(t){return t[2]-t[0]}function Y(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function H(t){return t[2]<t[0]||t[3]<t[1]}function V(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function X(t,e){const i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}function Z(t,e,i){let r=!1;const s=d(t,e),o=d(t,i);if(s===n.Z.INTERSECTING||o===n.Z.INTERSECTING)r=!0;else{const a=t[0],h=t[1],l=t[2],c=t[3],u=e[0],d=e[1],f=i[0],p=i[1],g=(p-d)/(f-u);let m,y;o&n.Z.ABOVE&&!(s&n.Z.ABOVE)&&(m=f-(p-c)/g,r=m>=a&&m<=l),r||!(o&n.Z.RIGHT)||s&n.Z.RIGHT||(y=p-(f-l)*g,r=y>=h&&y<=c),r||!(o&n.Z.BELOW)||s&n.Z.BELOW||(m=f-(p-h)/g,r=m>=a&&m<=l),r||!(o&n.Z.LEFT)||s&n.Z.LEFT||(y=p-(f-a)*g,r=y>=h&&y<=c)}return r}function K(t,e,i,n){let r=[];if(n>1){const e=t[2]-t[0],i=t[3]-t[1];for(let s=0;s<n;++s)r.push(t[0]+e*s/n,t[1],t[2],t[1]+i*s/n,t[2]-e*s/n,t[3],t[0],t[3]-i*s/n)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);const s=[],o=[];for(let t=0,e=r.length;t<e;t+=2)s.push(r[t]),o.push(r[t+1]);return function(t,e,i){return p(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(s,o,i)}function J(t,e){const i=e.getExtent(),n=O(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const e=W(i),r=Math.floor((n[0]-i[0])/e)*e;t[0]-=r,t[2]-=r}return t}function Q(t,e){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];J(t,e);const n=W(i);if(W(t)>n)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+n,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-n,t[3]]]}return[t]}},8716:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},6885:(t,e,i)=>{"use strict";i.d(e,{Zn:()=>s,qe:()=>o,uX:()=>r});var n=i(5537);function r(){return!0}function s(){}function o(t){let e,i,r,s=!1;return function(){const o=Array.prototype.slice.call(arguments);return s&&this===r&&(0,n.fS)(o,i)||(s=!0,r=this,i=o,e=t.apply(this,arguments)),e}}},1694:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(2971),r=i(4187),s=i(6101),o=i(8641),a=i(6414),h=i(6885),l=i(6442);const c=(0,s.create)();class u extends n.Z{constructor(){super(),this.extent_=(0,o.createEmpty)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,h.qe)((function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return(0,r.O3)()}closestPointXY(t,e,i,n){return(0,r.O3)()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return(0,r.O3)()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&(0,o.createOrUpdateEmpty)(t),this.extentRevision_=this.getRevision()}return(0,o.returnOrUpdate)(this.extent_,t)}rotate(t,e){(0,r.O3)()}scale(t,e,i){(0,r.O3)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return(0,r.O3)()}getType(){return(0,r.O3)()}applyTransform(t){(0,r.O3)()}intersectsExtent(t){return(0,r.O3)()}translate(t,e){(0,r.O3)()}transform(t,e){const i=(0,a.U2)(t),n="tile-pixels"==i.getUnits()?function(t,n,r){const h=i.getExtent(),u=i.getWorldExtent(),d=(0,o.getHeight)(u)/(0,o.getHeight)(h);return(0,s.compose)(c,u[0],u[3],d,-d,0,0,0),(0,l.vT)(t,0,t.length,r,c,n),(0,a.Ck)(i,e)(t,n,r)}:(0,a.Ck)(i,e);return this.applyTransform(n),this}}const d=u},2083:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>g});var n=i(2967),r=i(3042),s=i(8641),o=i(8527),a=i(226),h=i(5537),l=i(3032),c=i(9241),u=i(9405),d=i(3746),f=i(7374);class p extends n.ZP{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){this.flatCoordinates?(0,h.l7)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new p(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<(0,s.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))}forEachSegment(t){return(0,l.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,(0,u.iJ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return(0,c.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return(0,u.WW)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return(0,f.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,a.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new p(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return(0,d.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}const g=p},7538:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(2967),r=i(3042),s=i(8641),o=i(8527),a=i(226),h=i(9241),l=i(4078);class c extends n.ZP{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new c(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<(0,s.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return(0,l.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,h.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,a.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new c(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}const u=c},188:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>h});var n=i(2967),r=i(8641),s=i(8527),o=i(3983);class a extends n.ZP{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new a(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const r=this.flatCoordinates,s=(0,o.bI)(t,e,r[0],r[1]);if(s<n){const t=this.stride;for(let e=0;e<t;++e)i[e]=r[e];return i.length=t,s}return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return(0,r.createOrUpdateFromCoordinate)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return(0,r.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.IG)(this.flatCoordinates,0,t,this.stride),this.changed()}}const h=a},2033:(t,e,i)=>{"use strict";i.r(e),i.d(e,{circular:()=>w,default:()=>b,fromCircle:()=>S,fromExtent:()=>x,makeRegular:()=>M});var n=i(7538),r=i(188),s=i(2967),o=i(3042),a=i(8641),h=i(8527),l=i(5537),c=i(3448),u=i(9241),d=i(3746),f=i(3157),p=i(4078),g=i(9679),m=i(3983),y=i(226),v=i(7580);class _ extends s.ZP{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?(0,l.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new _(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<(0,a.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return(0,g.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return(0,p.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.zX)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,u.o1)(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,a.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,c.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new r.default(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new n.Z(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const a=i[o],h=new n.Z(e.slice(s,a),t);r.push(h),s=a}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,f.$v)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,y.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new _(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return(0,d.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,h._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const b=_;function w(t,e,i,n){i=i||32;const r=[];for(let s=0;s<i;++s)(0,l.l7)(r,(0,v.cv)(t,e,2*Math.PI*s/i,n));return r.push(r[0],r[1]),new _(r,"XY",[r.length])}function x(t){const e=t[0],i=t[1],n=t[2],r=t[3],s=[e,i,e,r,n,r,n,i,e,i];return new _(s,"XY",[s.length])}function S(t,e,i){e=e||32;const n=t.getStride(),r=t.getLayout(),s=t.getCenter(),o=n*(e+1),a=new Array(o);for(let t=0;t<o;t+=n){a[t]=0,a[t+1]=0;for(let e=2;e<n;e++)a[t+e]=s[e]}const h=[a.length],l=new _(a,r,h);return M(l,s,t.getRadius(),i),l}function M(t,e,i,n){const r=t.getFlatCoordinates(),s=t.getStride(),o=r.length/s-1,a=n||0;for(let t=0;t<=o;++t){const n=t*s,h=a+2*(0,m.$W)(t,o)*Math.PI/o;r[n]=e[0]+i*Math.cos(h),r[n+1]=e[1]+i*Math.sin(h)}t.changed()}},2967:(t,e,i)=>{"use strict";i.d(e,{Kr:()=>l,ZP:()=>c});var n=i(1694),r=i(4187),s=i(8641),o=i(6442);class a extends n.Z{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return(0,s.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return(0,r.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=h(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){(0,r.O3)()}setLayout(t,e,i){let n;if(t)n=h(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}n=e.length,t=function(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();(0,o.U1)(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=(0,s.getCenter)(this.getExtent()));const n=this.getFlatCoordinates();if(n){const r=this.getStride();(0,o.bA)(n,0,n.length,r,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();(0,o.Iu)(i,0,i.length,n,t,e,i),this.changed()}}}function h(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function l(t,e,i){const n=t.getFlatCoordinates();if(!n)return null;const r=t.getStride();return(0,o.vT)(n,0,n.length,r,e,i)}const c=a},4078:(t,e,i)=>{"use strict";function n(t,e,i,n){let r=0,s=t[i-n],o=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];r+=o*i-s*n,s=i,o=n}return r/2}function r(t,e,i,r){let s=0;for(let o=0,a=i.length;o<a;++o){const a=i[o];s+=n(t,e,a,r),e=a}return s}function s(t,e,i,n){let s=0;for(let o=0,a=i.length;o<a;++o){const a=i[o];s+=r(t,e,a,n),e=a[a.length-1]}return s}i.d(e,{Eu:()=>s,KP:()=>r,QQ:()=>n})},3042:(t,e,i)=>{"use strict";i.d(e,{Af:()=>o,Bv:()=>s,H$:()=>h,Xl:()=>l,gI:()=>c,sD:()=>a});var n=i(3983);function r(t,e,i,r,s,o,a){const h=t[e],l=t[e+1],c=t[i]-h,u=t[i+1]-l;let d;if(0===c&&0===u)d=e;else{const f=((s-h)*c+(o-l)*u)/(c*c+u*u);if(f>1)d=i;else{if(f>0){for(let s=0;s<r;++s)a[s]=(0,n.t7)(t[e+s],t[i+s],f);return void(a.length=r)}d=e}}for(let e=0;e<r;++e)a[e]=t[d+e];a.length=r}function s(t,e,i,r,s){let o=t[e],a=t[e+1];for(e+=r;e<i;e+=r){const i=t[e],r=t[e+1],h=(0,n.bI)(o,a,i,r);h>s&&(s=h),o=i,a=r}return s}function o(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o){const a=i[o];r=s(t,e,a,n,r),e=a}return r}function a(t,e,i,n,r){for(let s=0,a=i.length;s<a;++s){const a=i[s];r=o(t,e,a,n,r),e=a[a.length-1]}return r}function h(t,e,i,s,o,a,h,l,c,u,d){if(e==i)return u;let f,p;if(0===o){if(p=(0,n.bI)(h,l,t[e],t[e+1]),p<u){for(f=0;f<s;++f)c[f]=t[e+f];return c.length=s,p}return u}d=d||[NaN,NaN];let g=e+s;for(;g<i;)if(r(t,g-s,g,s,h,l,d),p=(0,n.bI)(h,l,d[0],d[1]),p<u){for(u=p,f=0;f<s;++f)c[f]=d[f];c.length=s,g+=s}else g+=s*Math.max((Math.sqrt(p)-Math.sqrt(u))/o|0,1);if(a&&(r(t,i-s,e,s,h,l,d),p=(0,n.bI)(h,l,d[0],d[1]),p<u)){for(u=p,f=0;f<s;++f)c[f]=d[f];c.length=s}return u}function l(t,e,i,n,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let d=0,f=i.length;d<f;++d){const f=i[d];c=h(t,e,f,n,r,s,o,a,l,c,u),e=f}return c}function c(t,e,i,n,r,s,o,a,h,c,u){u=u||[NaN,NaN];for(let d=0,f=i.length;d<f;++d){const f=i[d];c=l(t,e,f,n,r,s,o,a,h,c,u),e=f[f.length-1]}return c}},9679:(t,e,i)=>{"use strict";i.d(e,{TG:()=>s,Zl:()=>a,uG:()=>r,wY:()=>o});var n=i(8641);function r(t,e,i,r,o){return!(0,n.forEachCorner)(o,(function(n){return!s(t,e,i,r,n[0],n[1])}))}function s(t,e,i,n,r,s){let o=0,a=t[i-n],h=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];h<=s?n>s&&(i-a)*(s-h)-(r-a)*(n-h)>0&&o++:n<=s&&(i-a)*(s-h)-(r-a)*(n-h)<0&&o--,a=i,h=n}return 0!==o}function o(t,e,i,n,r,o){if(0===i.length)return!1;if(!s(t,e,i[0],n,r,o))return!1;for(let e=1,a=i.length;e<a;++e)if(s(t,i[e-1],i[e],n,r,o))return!1;return!0}function a(t,e,i,n,r,s){if(0===i.length)return!1;for(let a=0,h=i.length;a<h;++a){const h=i[a];if(o(t,e,h,n,r,s))return!0;e=h[h.length-1]}return!1}},8527:(t,e,i)=>{"use strict";function n(t,e,i,n){for(let n=0,r=i.length;n<r;++n)t[e++]=i[n];return e}function r(t,e,i,n){for(let r=0,s=i.length;r<s;++r){const s=i[r];for(let i=0;i<n;++i)t[e++]=s[i]}return e}function s(t,e,i,n,s){s=s||[];let o=0;for(let a=0,h=i.length;a<h;++a){const h=r(t,e,i[a],n);s[o++]=h,e=h}return s.length=o,s}function o(t,e,i,n,r){r=r||[];let o=0;for(let a=0,h=i.length;a<h;++a){const h=s(t,e,i[a],n,r[o]);0===h.length&&(h[0]=e),r[o++]=h,e=h[h.length-1]}return r.length=o,r}i.d(e,{IG:()=>n,QT:()=>o,Sg:()=>r,_5:()=>s})},9241:(t,e,i)=>{"use strict";function n(t,e,i,n,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<i;o+=n)r[s++]=t.slice(o,o+n);return r.length=s,r}function r(t,e,i,r,s){s=void 0!==s?s:[];let o=0;for(let a=0,h=i.length;a<h;++a){const h=i[a];s[o++]=n(t,e,h,r,s[o]),e=h}return s.length=o,s}function s(t,e,i,n,s){s=void 0!==s?s:[];let o=0;for(let a=0,h=i.length;a<h;++a){const h=i[a];s[o++]=1===h.length&&h[0]===e?[]:r(t,e,h,n,s[o]),e=h[h.length-1]}return s.length=o,s}i.d(e,{Ml:()=>n,o1:()=>r,ug:()=>s})},3448:(t,e,i)=>{"use strict";i.d(e,{U:()=>o,X:()=>s});var n=i(5537),r=i(9679);function s(t,e,i,s,o,a,h){let l,c,u,d,f,p,g;const m=o[a+1],y=[];for(let n=0,r=i.length;n<r;++n){const r=i[n];for(d=t[r-s],p=t[r-s+1],l=e;l<r;l+=s)f=t[l],g=t[l+1],(m<=p&&g<=m||p<=m&&m<=g)&&(u=(m-p)/(g-p)*(f-d)+d,y.push(u)),d=f,p=g}let v=NaN,_=-1/0;for(y.sort(n.j2),d=y[0],l=1,c=y.length;l<c;++l){f=y[l];const n=Math.abs(f-d);n>_&&(u=(d+f)/2,(0,r.wY)(t,e,i,s,u,m)&&(v=u,_=n)),d=f}return isNaN(v)&&(v=o[a]),h?(h.push(v,m,_),h):[v,m,_]}function o(t,e,i,n,r){let o=[];for(let a=0,h=i.length;a<h;++a){const h=i[a];o=s(t,e,h,n,r,2*a,o),e=h[h.length-1]}return o}},9405:(t,e,i)=>{"use strict";i.d(e,{WW:()=>s,dG:()=>a,iJ:()=>o});var n=i(5537),r=i(3983);function s(t,e,i,s,o,a,h){let l,c;const u=(i-e)/s;if(1===u)l=e;else if(2===u)l=e,c=o;else if(0!==u){let r=t[e],a=t[e+1],h=0;const u=[0];for(let n=e+s;n<i;n+=s){const e=t[n],i=t[n+1];h+=Math.sqrt((e-r)*(e-r)+(i-a)*(i-a)),u.push(h),r=e,a=i}const d=o*h,f=(0,n.ry)(u,d);f<0?(c=(d-u[-f-2])/(u[-f-1]-u[-f-2]),l=e+(-f-2)*s):l=e+f*s}h=h>1?h:2,a=a||new Array(h);for(let e=0;e<h;++e)a[e]=void 0===l?NaN:void 0===c?t[l+e]:(0,r.t7)(t[l+e],t[l+s+e],c);return a}function o(t,e,i,n,s,o){if(i==e)return null;let a;if(s<t[e+n-1])return o?(a=t.slice(e,e+n),a[n-1]=s,a):null;if(t[i-1]<s)return o?(a=t.slice(i-n,i),a[n-1]=s,a):null;if(s==t[e+n-1])return t.slice(e,e+n);let h=e/n,l=i/n;for(;h<l;){const e=h+l>>1;s<t[(e+1)*n-1]?l=e:h=e+1}const c=t[h*n-1];if(s==c)return t.slice((h-1)*n,(h-1)*n+n);const u=(s-c)/(t[(h+1)*n-1]-c);a=[];for(let e=0;e<n-1;++e)a.push((0,r.t7)(t[(h-1)*n+e],t[h*n+e],u));return a.push(s),a}function a(t,e,i,n,r,s,a){if(a)return o(t,e,i[i.length-1],n,r,s);let h;if(r<t[n-1])return s?(h=t.slice(0,n),h[n-1]=r,h):null;if(t[t.length-1]<r)return s?(h=t.slice(t.length-n),h[n-1]=r,h):null;for(let s=0,a=i.length;s<a;++s){const a=i[s];if(e!=a){if(r<t[e+n-1])return null;if(r<=t[a-1])return o(t,e,a,n,r,!1);e=a}}return null}},3746:(t,e,i)=>{"use strict";i.d(e,{AW:()=>a,Kz:()=>o,ac:()=>l,mV:()=>h,oW:()=>c});var n=i(8641),r=i(3032),s=i(9679);function o(t,e,i,s,o){const a=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),t,e,i,s);return!!(0,n.intersects)(o,a)&&(!!(0,n.containsExtent)(o,a)||a[0]>=o[0]&&a[2]<=o[2]||a[1]>=o[1]&&a[3]<=o[3]||(0,r.E)(t,e,i,s,(function(t,e){return(0,n.intersectsSegment)(o,t,e)})))}function a(t,e,i,n,r){for(let s=0,a=i.length;s<a;++s){if(o(t,e,i[s],n,r))return!0;e=i[s]}return!1}function h(t,e,i,n,r){return!!(o(t,e,i,n,r)||(0,s.TG)(t,e,i,n,r[0],r[1])||(0,s.TG)(t,e,i,n,r[0],r[3])||(0,s.TG)(t,e,i,n,r[2],r[1])||(0,s.TG)(t,e,i,n,r[2],r[3]))}function l(t,e,i,n,r){if(!h(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(let e=1,a=i.length;e<a;++e)if((0,s.uG)(t,i[e-1],i[e],n,r)&&!o(t,i[e-1],i[e],n,r))return!1;return!0}function c(t,e,i,n,r){for(let s=0,o=i.length;s<o;++s){const o=i[s];if(l(t,e,o,n,r))return!0;e=o[o.length-1]}return!1}},7374:(t,e,i)=>{"use strict";function n(t,e,i,n){let r=t[e],s=t[e+1],o=0;for(let a=e+n;a<i;a+=n){const e=t[a],i=t[a+1];o+=Math.sqrt((e-r)*(e-r)+(i-s)*(i-s)),r=e,s=i}return o}i.d(e,{W:()=>n})},3157:(t,e,i)=>{"use strict";i.d(e,{$v:()=>s,Oj:()=>o,dL:()=>h,zX:()=>a});var n=i(1404);function r(t,e,i,n){let r=0,s=t[i-n],o=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];r+=(i-s)*(n+o),s=i,o=n}return 0===r?void 0:r>0}function s(t,e,i,n,s){s=void 0!==s&&s;for(let o=0,a=i.length;o<a;++o){const a=i[o],h=r(t,e,a,n);if(0===o){if(s&&h||!s&&!h)return!1}else if(s&&!h||!s&&h)return!1;e=a}return!0}function o(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o){const a=i[o];if(!s(t,e,a,n,r))return!1;a.length&&(e=a[a.length-1])}return!0}function a(t,e,i,s,o){o=void 0!==o&&o;for(let a=0,h=i.length;a<h;++a){const h=i[a],l=r(t,e,h,s);(0===a?o&&l||!o&&!l:o&&!l||!o&&l)&&(0,n.k)(t,e,h,s),e=h}return e}function h(t,e,i,n,r){for(let s=0,o=i.length;s<o;++s)e=a(t,e,i[s],n,r);return e}},1404:(t,e,i)=>{"use strict";function n(t,e,i,n){for(;e<i-n;){for(let r=0;r<n;++r){const s=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=s}e+=n,i-=n}}i.d(e,{k:()=>n})},3032:(t,e,i)=>{"use strict";function n(t,e,i,n,r){let s;for(e+=n;e<i;e+=n)if(s=r(t.slice(e-n,e),t.slice(e,e+n)),s)return s;return!1}i.d(e,{E:()=>n})},226:(t,e,i)=>{"use strict";i.d(e,{Pp:()=>l,UJ:()=>s,Zh:()=>h,dt:()=>r,uZ:()=>o});var n=i(3983);function r(t,e,i,r,s,o,a){const h=(i-e)/r;if(h<3){for(;e<i;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}const l=new Array(h);l[0]=1,l[h-1]=1;const c=[e,i-r];let u=0;for(;c.length>0;){const i=c.pop(),o=c.pop();let a=0;const h=t[o],d=t[o+1],f=t[i],p=t[i+1];for(let e=o+r;e<i;e+=r){const i=t[e],r=t[e+1],s=(0,n.rU)(i,r,h,d,f,p);s>a&&(u=e,a=s)}a>s&&(l[(u-e)/r]=1,o+r<u&&c.push(o,u),u+r<i&&c.push(u,i))}for(let i=0;i<h;++i)l[i]&&(o[a++]=t[e+i*r],o[a++]=t[e+i*r+1]);return a}function s(t,e,i,n,s,o,a,h){for(let l=0,c=i.length;l<c;++l){const c=i[l];a=r(t,e,c,n,s,o,a),h.push(a),e=c}return a}function o(t,e){return e*Math.round(t/e)}function a(t,e,i,n,r,s,a){if(e==i)return a;let h,l,c=o(t[e],r),u=o(t[e+1],r);e+=n,s[a++]=c,s[a++]=u;do{if(h=o(t[e],r),l=o(t[e+1],r),(e+=n)==i)return s[a++]=h,s[a++]=l,a}while(h==c&&l==u);for(;e<i;){const i=o(t[e],r),d=o(t[e+1],r);if(e+=n,i==h&&d==l)continue;const f=h-c,p=l-u,g=i-c,m=d-u;f*m==p*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(p<0&&m<p||p==m||p>0&&m>p)?(h=i,l=d):(s[a++]=h,s[a++]=l,c=h,u=l,h=i,l=d)}return s[a++]=h,s[a++]=l,a}function h(t,e,i,n,r,s,o,h){for(let l=0,c=i.length;l<c;++l){const c=i[l];o=a(t,e,c,n,r,s,o),h.push(o),e=c}return o}function l(t,e,i,n,r,s,o,a){for(let l=0,c=i.length;l<c;++l){const c=i[l],u=[];o=h(t,e,c,n,r,s,o,u),a.push(u),e=c[c.length-1]}return o}},6442:(t,e,i)=>{"use strict";function n(t,e,i,n,r,s){s=s||[];let o=0;for(let a=e;a<i;a+=n){const e=t[a],i=t[a+1];s[o++]=r[0]*e+r[2]*i+r[4],s[o++]=r[1]*e+r[3]*i+r[5]}return s&&s.length!=o&&(s.length=o),s}function r(t,e,i,n,r,s,o){o=o||[];const a=Math.cos(r),h=Math.sin(r),l=s[0],c=s[1];let u=0;for(let r=e;r<i;r+=n){const e=t[r]-l,i=t[r+1]-c;o[u++]=l+e*a-i*h,o[u++]=c+e*h+i*a;for(let e=r+2;e<r+n;++e)o[u++]=t[e]}return o&&o.length!=u&&(o.length=u),o}function s(t,e,i,n,r,s,o,a){a=a||[];const h=o[0],l=o[1];let c=0;for(let o=e;o<i;o+=n){const e=t[o]-h,i=t[o+1]-l;a[c++]=h+r*e,a[c++]=l+s*i;for(let e=o+2;e<o+n;++e)a[c++]=t[e]}return a&&a.length!=c&&(a.length=c),a}function o(t,e,i,n,r,s,o){o=o||[];let a=0;for(let h=e;h<i;h+=n){o[a++]=t[h]+r,o[a++]=t[h+1]+s;for(let e=h+2;e<h+n;++e)o[a++]=t[e]}return o&&o.length!=a&&(o.length=a),o}i.d(e,{Iu:()=>o,U1:()=>r,bA:()=>s,vT:()=>n})},177:(t,e,i)=>{"use strict";i.d(e,{Id:()=>s,MP:()=>r,Tp:()=>o});const n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",r=(n.includes("firefox"),n.includes("safari")&&!n.includes("chrom")&&(n.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(n)),n.includes("webkit")&&n.includes("edge"),n.includes("macintosh"),"undefined"!=typeof devicePixelRatio?devicePixelRatio:1),s="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,o="undefined"!=typeof Image&&Image.prototype.decode;!function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}}()},3983:(t,e,i)=>{"use strict";function n(t,e,i){return Math.min(Math.max(t,e),i)}function r(t,e,i,n,r,o){const a=r-i,h=o-n;if(0!==a||0!==h){const s=((t-i)*a+(e-n)*h)/(a*a+h*h);s>1?(i=r,n=o):s>0&&(i+=a*s,n+=h*s)}return s(t,e,i,n)}function s(t,e,i,n){const r=i-t,s=n-e;return r*r+s*s}function o(t){const e=t.length;for(let i=0;i<e;i++){let n=i,r=Math.abs(t[i][i]);for(let s=i+1;s<e;s++){const e=Math.abs(t[s][i]);e>r&&(r=e,n=s)}if(0===r)return null;const s=t[n];t[n]=t[i],t[i]=s;for(let n=i+1;n<e;n++){const r=-t[n][i]/t[i][i];for(let s=i;s<e+1;s++)i==s?t[n][s]=0:t[n][s]+=r*t[i][s]}}const i=new Array(e);for(let n=e-1;n>=0;n--){i[n]=t[n][e]/t[n][n];for(let r=n-1;r>=0;r--)t[r][e]-=t[r][n]*i[n]}return i}function a(t){return 180*t/Math.PI}function h(t){return t*Math.PI/180}function l(t,e){const i=t%e;return i*e<0?i+e:i}function c(t,e,i){return t+i*(e-t)}function u(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function d(t,e){return Math.round(u(t,e))}function f(t,e){return Math.floor(u(t,e))}function p(t,e){return Math.ceil(u(t,e))}i.d(e,{$W:()=>l,FH:()=>u,GW:()=>f,NM:()=>d,SV:()=>o,Ux:()=>a,Yr:()=>h,bI:()=>s,mD:()=>p,rU:()=>r,t7:()=>c,uZ:()=>n})},9374:(t,e,i)=>{"use strict";function n(t){for(const e in t)delete t[e]}function r(t){let e;for(e in t)return!1;return!e}i.d(e,{Z:()=>n,x:()=>r})},6414:(t,e,i)=>{"use strict";i.d(e,{Wm:()=>g.METERS_PER_UNIT,zY:()=>P,rM:()=>N,Sx:()=>C,uA:()=>z,OP:()=>O,mi:()=>I,dY:()=>q,U2:()=>A,_Q:()=>L,Ck:()=>F,WO:()=>R,Cs:()=>D,Fj:()=>B,on:()=>G,vs:()=>T,$A:()=>k});var n=i(9619);const r=6378137,s=Math.PI*r,o=[-s,-s,s,s],a=[-180,-85,180,85],h=r*Math.log(Math.tan(Math.PI/2));class l extends n.Z{constructor(t){super({code:t,units:"m",extent:o,global:!0,worldExtent:a,getPointResolution:function(t,e){return t/Math.cosh(e[1]/r)}})}}const c=[new l("EPSG:3857"),new l("EPSG:102100"),new l("EPSG:102113"),new l("EPSG:900913"),new l("http://www.opengis.net/def/crs/EPSG/0/3857"),new l("http://www.opengis.net/gml/srs/epsg.xml#3857")];const u=[-180,-90,180,90],d=6378137*Math.PI/180;class f extends n.Z{constructor(t,e){super({code:t,units:"degrees",extent:u,axisOrientation:e,global:!0,metersPerUnit:d,worldExtent:u})}}const p=[new f("CRS:84"),new f("EPSG:4326","neu"),new f("urn:ogc:def:crs:OGC:1.3:CRS84"),new f("urn:ogc:def:crs:OGC:2:84"),new f("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new f("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new f("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var g=i(8375);let m={};var y=i(9556),v=i(8641),_=i(3983),b=i(1900),w=i(7580);let x=!0;function S(t,e){if(void 0!==e)for(let i=0,n=t.length;i<n;++i)e[i]=t[i];else e=t.slice();return e}function M(t,e){if(void 0!==e&&t!==e){for(let i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function C(t){!function(t,e){m[t]=e}(t.getCode(),t),(0,y.IH)(t,t,S)}function A(t){return"string"==typeof t?m[e=t]||m[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function L(t,e,i,n){let r;const s=(t=A(t)).getPointResolutionFunc();if(s){if(r=s(e,i),n&&n!==t.getUnits()){const e=t.getMetersPerUnit();e&&(r=r*e/g.METERS_PER_UNIT[n])}}else{const s=t.getUnits();if("degrees"==s&&!n||"degrees"==n)r=e;else{const o=R(t,A("EPSG:4326"));if(o===M&&"degrees"!==s)r=e*t.getMetersPerUnit();else{let t=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];t=o(t,t,2),r=((0,w.Sp)(t.slice(0,2),t.slice(2,4))+(0,w.Sp)(t.slice(4,6),t.slice(6,8)))/2}const a=n?g.METERS_PER_UNIT[n]:t.getMetersPerUnit();void 0!==a&&(r/=a)}}return r}function N(t){!function(t){t.forEach(C)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&(0,y.IH)(e,t,S)}))}))}function E(t){return function(e,i,n){const r=e.length;n=void 0!==n?n:2,i=void 0!==i?i:new Array(r);for(let s=0;s<r;s+=n){const r=t(e.slice(s,s+n)),o=r.length;for(let t=0,a=n;t<a;++t)i[s+t]=t>=o?e[s+t]:r[t]}return i}}function P(t,e,i,n){const r=A(t),s=A(e);(0,y.IH)(r,s,E(i)),(0,y.IH)(s,r,E(n))}function I(t,e){return x=!1,T(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function O(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||R(t,e)===S)&&i}function R(t,e){const i=t.getCode(),n=e.getCode();let r=(0,y.U2)(i,n);return r||(r=M),r}function F(t,e){return R(A(t),A(e))}function T(t,e,i){return F(e,i)(t,void 0,t.length)}function k(t,e,i,n){const r=F(e,i);return(0,v.applyTransform)(t,r,void 0,n)}let j=null;function D(){return j}function B(t,e){return t}function q(t,e){return t}function G(t,e){return t}function z(t,e,i){return function(n){let r,s;if(t.canWrapX()){const e=t.getExtent(),o=(0,v.getWidth)(e);n=n.slice(0),s=(0,b.jk)(n,t,o),s&&(n[0]=n[0]-s*o),n[0]=(0,_.uZ)(n[0],e[0],e[2]),n[1]=(0,_.uZ)(n[1],e[1],e[3]),r=i(n)}else r=i(n);return s&&e.canWrapX()&&(r[0]+=s*(0,v.getWidth)(e.getExtent())),r}}var U,W,Y;N(c),N(p),U=c,W=function(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let o=0;o<n;o+=i){e[o]=s*t[o]/180;let i=r*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));i>h?i=h:i<-h&&(i=-h),e[o+1]=i}return e},Y=function(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let o=0;o<n;o+=i)e[o]=180*t[o]/s,e[o+1]=360*Math.atan(Math.exp(t[o+1]/r))/Math.PI-90;return e},p.forEach((function(t){U.forEach((function(e){(0,y.IH)(t,e,W),(0,y.IH)(e,t,Y)}))}))},9619:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(8375);const r=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||n.METERS_PER_UNIT[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},8375:(t,e,i)=>{"use strict";i.r(e),i.d(e,{METERS_PER_UNIT:()=>s,fromCode:()=>r});const n={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function r(t){return n[t]}const s={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},9556:(t,e,i)=>{"use strict";i.d(e,{IH:()=>r,U2:()=>s});let n={};function r(t,e,i){const r=t.getCode(),s=e.getCode();r in n||(n[r]={}),n[r][s]=i}function s(t,e){let i;return t in n&&e in n[t]&&(i=n[t][e]),i}},9839:(t,e,i)=>{"use strict";i.r(e),i.d(e,{getRenderPixel:()=>c,getVectorContext:()=>l,toContext:()=>h});var n=i(5069),r=i(177),s=i(6101),o=i(6234),a=i(6414);function h(t,e){const i=t.canvas,o=(e=e||{}).pixelRatio||r.MP,a=e.size;a&&(i.width=a[0]*o,i.height=a[1]*o,i.style.width=a[0]+"px",i.style.height=a[1]+"px");const h=[0,0,i.width,i.height],l=(0,s.scale)((0,s.create)(),o,o);return new n.default(t,o,h,l,0)}function l(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=t.inversePixelTransform[0],i=t.inversePixelTransform[1],r=Math.sqrt(e*e+i*i),h=t.frameState,l=(0,s.multiply)(t.inversePixelTransform.slice(),h.coordinateToPixelTransform),c=(0,o.se)(h.viewState.resolution,r);let u;const d=(0,a.Cs)();return d&&(u=(0,a.WO)(d,h.viewState.projection)),new n.default(t.context,r,h.extent,l,h.viewState.rotation,c,u)}function c(t,e){return(0,s.apply)(t.inversePixelTransform,e.slice(0))}},5624:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=class{drawCustom(t,e,i,n){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}},4778:(t,e,i)=>{"use strict";i.d(e,{bL:()=>u,Df:()=>c,mb:()=>d,X9:()=>f,He:()=>p,rc:()=>g,yC:()=>w,V4:()=>m,oB:()=>b,Tx:()=>y,PH:()=>v,ru:()=>_,_f:()=>O,Zw:()=>I,Kd:()=>P,Qx:()=>A});var n=i(2971),r=i(177),s=i(9374),o=i(8326);const a=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),h=["style","variant","weight","size","lineHeight","family"],l=function(t){const e=t.match(a);if(!e)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let t=0,n=h.length;t<n;++t){const n=e[t+1];void 0!==n&&(i[h[t]]=n)}return i.families=i.family.split(/,\s?/),i},c="10px sans-serif",u="#000",d="round",f=[],p=0,g="round",m=10,y="#000",v="center",_="middle",b=[0,0,0,0],w=1,x=new n.Z;let S,M=null;const C={},A=function(){const t="32px ",e=["monospace","serif"],i=e.length,n="wmytzilWMYTZIL@#/&?$%10";let r,o;function a(r,s,a){let h=!0;for(let l=0;l<i;++l){const i=e[l];if(o=E(r+" "+s+" "+t+i,n),a!=i){const e=E(r+" "+s+" "+t+a+","+i,n);h=h&&e!=o}}return!!h}function h(){let t=!0;const e=x.getKeys();for(let i=0,n=e.length;i<n;++i){const n=e[i];x.get(n)<100&&(a.apply(this,n.split("\n"))?((0,s.Z)(C),M=null,S=void 0,x.set(n,100)):(x.set(n,x.get(n)+1,!0),t=!1))}t&&(clearInterval(r),r=void 0)}return function(t){const e=l(t);if(!e)return;const i=e.families;for(let t=0,n=i.length;t<n;++t){const n=i[t],s=e.style+"\n"+e.weight+"\n"+n;void 0===x.get(s)&&(x.set(s,100,!0),a(e.style,e.weight,n)||(x.set(s,0,!0),void 0===r&&(r=setInterval(h,32))))}}}(),L=function(){let t;return function(e){let i=C[e];if(null==i){if(r.Id){const t=l(e),n=N(e,"g");i=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);C[e]=i}return i}}();function N(t,e){return M||(M=(0,o.E4)(1,1)),t!=S&&(M.font=t,S=M.font),M.measureText(e)}function E(t,e){return N(t,e).width}function P(t,e,i){if(e in i)return i[e];const n=e.split("\n").reduce(((e,i)=>Math.max(e,E(t,i))),0);return i[e]=n,n}function I(t,e){const i=[],n=[],r=[];let s=0,o=0,a=0,h=0;for(let l=0,c=e.length;l<=c;l+=2){const u=e[l];if("\n"===u||l===c){s=Math.max(s,o),r.push(o),o=0,a+=h;continue}const d=e[l+1]||t.font,f=E(d,u);i.push(f),o+=f;const p=L(d);n.push(p),h=Math.max(h,p)}return{width:s,height:a,widths:i,heights:n,lineWidths:r}}function O(t,e,i,n,r,s,o,a,h,l,c){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(h,l),t.scale(c[0],c[1]),function(t,e){const i=t.contextInstructions;for(let t=0,n=i.length;t<n;t+=2)Array.isArray(i[t+1])?e[i[t]].apply(e,i[t+1]):e[i[t]]=i[t+1]}(n,t)):c[0]<0||c[1]<0?(t.translate(h,l),t.scale(c[0],c[1]),t.drawImage(n,r,s,o,a,0,0,o,a)):t.drawImage(n,r,s,o,a,h,l,o*c[0],a*c[1]),t.restore()}},5069:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>f});var n=i(5624),r=i(6620),s=i(6101),o=i(4778),a=i(5537),h=i(8641),l=i(3983),c=i(6442),u=i(2967);class d extends n.Z{constructor(t,e,i,n,r,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.transformRotation_=n?(0,l.FH)(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,s.create)()}drawImages_(t,e,i,n){if(!this.image_)return;const r=(0,c.vT)(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,h=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=h*this.imageOpacity_);let l=this.imageRotation_;0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_);for(let t=0,e=r.length;t<e;t+=2){const e=r[t]-this.imageAnchorX_,i=r[t+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const t=e+this.imageAnchorX_,n=i+this.imageAnchorY_;(0,s.compose)(a,t,n,1,1,l,-t,-n),o.setTransform.apply(o,a),o.translate(t,n),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,i,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=h)}drawText_(t,e,i,n){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=(0,c.vT)(t,e,i,n,this.transform_,this.pixelCoordinates_),s=this.context_;let o=this.textRotation_;for(0===this.transformRotation_&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=n){const t=r[e]+this.textOffsetX_,i=r[e+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.translate(t-this.textOffsetX_,i-this.textOffsetY_),s.rotate(o),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&s.strokeText(this.text_,t,i),this.textFillState_&&s.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,n,r){const s=this.context_,o=(0,c.vT)(t,e,i,n,this.transform_,this.pixelCoordinates_);s.moveTo(o[0],o[1]);let a=o.length;r&&(a-=2);for(let t=2;t<a;t+=2)s.lineTo(o[t],o[t+1]);return r&&s.closePath(),i}drawRings_(t,e,i,n){for(let r=0,s=i.length;r<s;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e}drawCircle(t){if((0,h.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,u.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),s=this.context_;s.beginPath(),s.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(0,h.intersects)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let t=0,i=e.length;t<i;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,h.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,h.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let n=0;const r=t.getEnds(),s=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t)n=this.moveToLineTo_(i,n,r[t],s,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,h.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,h.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let n=0;const r=t.getEndss(),s=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t){const e=r[t];n=this.drawRings_(i,n,e,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,a.fS)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:o.PH;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:(0,r.y)(e||o.bL)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),n=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),h=e.getWidth(),l=e.getMiterLimit(),c=n||o.X9;this.strokeState_={lineCap:void 0!==i?i:o.mb,lineDash:1===this.pixelRatio_?c:c.map((t=>t*this.pixelRatio_)),lineDashOffset:(s||o.He)*this.pixelRatio_,lineJoin:void 0!==a?a:o.rc,lineWidth:(void 0!==h?h:o.yC)*this.pixelRatio_,miterLimit:void 0!==l?l:o.V4,strokeStyle:(0,r.y)(t||o.Tx)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:(0,r.y)(t||o.bL)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),n=i.getLineDash(),s=i.getLineDashOffset(),a=i.getLineJoin(),h=i.getWidth(),l=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:o.mb,lineDash:n||o.X9,lineDashOffset:s||o.He,lineJoin:void 0!==a?a:o.rc,lineWidth:void 0!==h?h:o.yC,miterLimit:void 0!==l?l:o.V4,strokeStyle:(0,r.y)(t||o.Tx)}}else this.textStrokeState_=null;const n=t.getFont(),s=t.getOffsetX(),a=t.getOffsetY(),h=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),u=t.getText(),d=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:void 0!==n?n:o.Df,textAlign:void 0!==d?d:o.PH,textBaseline:void 0!==f?f:o.ru},this.text_=void 0!==u?Array.isArray(u)?u.reduce(((t,e,i)=>t+(i%2?" ":e)),""):u:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==a?this.pixelRatio_*a:0,this.textRotateWithView_=void 0!==h&&h,this.textRotation_=void 0!==l?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}else this.text_=""}}const f=d},6234:(t,e,i)=>{"use strict";i.d(e,{Pn:()=>l,Qz:()=>h,eR:()=>o,se:()=>a});var n=i(553),r=i(4187);const s={Point:function(t,e,i,r,s){const o=i.getImage(),a=i.getText();let h;if(o){if(o.getImageState()!=n.default.LOADED)return;let l=t;if(s){const n=o.getDeclutterMode();if("none"!==n)if(l=s,"obstacle"===n){const n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(o,h),n.drawPoint(e,r)}else a&&a.getText()&&(h={})}const c=l.getBuilder(i.getZIndex(),"Image");c.setImageStyle(o,h),c.drawPoint(e,r)}if(a&&a.getText()){let n=t;s&&(n=s);const o=n.getBuilder(i.getZIndex(),"Text");o.setTextStyle(a,h),o.drawText(e,r)}},LineString:function(t,e,i,n,r){const s=i.getStroke();if(s){const r=t.getBuilder(i.getZIndex(),"LineString");r.setFillStrokeStyle(null,s),r.drawLineString(e,n)}const o=i.getText();if(o&&o.getText()){const s=(r||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,n)}},Polygon:function(t,e,i,n,r){const s=i.getFill(),o=i.getStroke();if(s||o){const r=t.getBuilder(i.getZIndex(),"Polygon");r.setFillStrokeStyle(s,o),r.drawPolygon(e,n)}const a=i.getText();if(a&&a.getText()){const s=(r||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,n)}},MultiPoint:function(t,e,i,r,s){const o=i.getImage(),a=i.getText();let h;if(o){if(o.getImageState()!=n.default.LOADED)return;let l=t;if(s){const n=o.getDeclutterMode();if("none"!==n)if(l=s,"obstacle"===n){const n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(o,h),n.drawMultiPoint(e,r)}else a&&a.getText()&&(h={})}const c=l.getBuilder(i.getZIndex(),"Image");c.setImageStyle(o,h),c.drawMultiPoint(e,r)}if(a&&a.getText()){let n=t;s&&(n=s);const o=n.getBuilder(i.getZIndex(),"Text");o.setTextStyle(a,h),o.drawText(e,r)}},MultiLineString:function(t,e,i,n,r){const s=i.getStroke();if(s){const r=t.getBuilder(i.getZIndex(),"LineString");r.setFillStrokeStyle(null,s),r.drawMultiLineString(e,n)}const o=i.getText();if(o&&o.getText()){const s=(r||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,n)}},MultiPolygon:function(t,e,i,n,r){const s=i.getFill(),o=i.getStroke();if(o||s){const r=t.getBuilder(i.getZIndex(),"Polygon");r.setFillStrokeStyle(s,o),r.drawMultiPolygon(e,n)}const a=i.getText();if(a&&a.getText()){const s=(r||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,n)}},GeometryCollection:function(t,e,i,n,r){const o=e.getGeometriesArray();let a,h;for(a=0,h=o.length;a<h;++a)(0,s[o[a].getType()])(t,o[a],i,n,r)},Circle:function(t,e,i,n,r){const s=i.getFill(),o=i.getStroke();if(s||o){const r=t.getBuilder(i.getZIndex(),"Circle");r.setFillStrokeStyle(s,o),r.drawCircle(e,n)}const a=i.getText();if(a&&a.getText()){const s=(r||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,n)}}};function o(t,e){return parseInt((0,r.sq)(t),10)-parseInt((0,r.sq)(e),10)}function a(t,e){const i=h(t,e);return i*i}function h(t,e){return.5*t/e}function l(t,e,i,r,o,a,h){let l=!1;const u=i.getImage();if(u){const t=u.getImageState();t==n.default.LOADED||t==n.default.ERROR?u.unlistenImageChange(o):(t==n.default.IDLE&&u.load(),u.listenImageChange(o),l=!0)}return function(t,e,i,n,r,o){const a=i.getGeometryFunction()(e);if(!a)return;const h=a.simplifyTransformed(n,r);i.getRenderer()?c(t,h,i,e):(0,s[h.getType()])(t,h,i,e,o)}(t,e,i,r,a,h),l}function c(t,e,i,n){if("GeometryCollection"!=e.getType())t.getBuilder(i.getZIndex(),"Default").drawCustom(e,n,i.getRenderer(),i.getHitDetectionRenderer());else{const r=e.getGeometries();for(let e=0,s=r.length;e<s;++e)c(t,r[e],i,n)}}},4307:(t,e,i)=>{"use strict";function n(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function r(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function s(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}i.d(e,{Pq:()=>s,bA:()=>r,f3:()=>n})},7580:(t,e,i)=>{"use strict";i.d(e,{Sp:()=>s,cv:()=>o});var n=i(3983);const r=6371008.8;function s(t,e,i){i=i||r;const s=(0,n.Yr)(t[1]),o=(0,n.Yr)(e[1]),a=(o-s)/2,h=(0,n.Yr)(e[0]-t[0])/2,l=Math.sin(a)*Math.sin(a)+Math.sin(h)*Math.sin(h)*Math.cos(s)*Math.cos(o);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function o(t,e,i,s){s=s||r;const o=(0,n.Yr)(t[1]),a=(0,n.Yr)(t[0]),h=e/s,l=Math.asin(Math.sin(o)*Math.cos(h)+Math.cos(o)*Math.sin(h)*Math.cos(i)),c=a+Math.atan2(Math.sin(i)*Math.sin(h)*Math.cos(o),Math.cos(h)-Math.sin(o)*Math.sin(l));return[(0,n.Ux)(c),(0,n.Ux)(l)]}},283:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var n=i(5393);class r extends n.default{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const s=r},1345:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});class n{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const r=n},4548:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>y});var n=i(5487),r=i(553),s=i(8443),o=i(9706),a=i(9515),h=i(3069),l=i(8326);function c(t,e,i){return e+":"+t+":"+(i?(0,o.XC)(i):"null")}const u=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const n=c(t,e,i);return n in this.cache_?this.cache_[n]:null}set(t,e,i,n){const r=c(t,e,i);this.cache_[r]=n,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};var d=i(8096);let f=null;class p extends h.Z{constructor(t,e,i,n,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.unlisten_=null,this.imageState_=r,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===r.default.LOADED){f||(f=(0,l.E4)(1,1,void 0,{willReadFrequently:!0})),f.drawImage(this.image_,0,0);try{f.getImageData(0,0,1,1),this.tainted_=!1}catch(t){f=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(n.Z.CHANGE)}handleImageError_(){this.imageState_=r.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=r.default.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=(0,l.E4)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===r.default.IDLE){this.image_||this.initializeImage_(),this.imageState_=r.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,d.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==r.default.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const n=i.getContext("2d");n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=(0,o.XC)(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var g=i(4187);class m extends s.default{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,n=void 0!==t.scale?t.scale:1,s=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:i,scale:n,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const h=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let l=t.src;(0,a.h)(!(void 0!==l&&h),4),(0,a.h)(!h||h&&this.imgSize_,5),void 0!==l&&0!==l.length||!h||(l=h.src||(0,g.sq)(h)),(0,a.h)(void 0!==l&&l.length>0,6),(0,a.h)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),69);const c=void 0!==t.src?r.default.IDLE:r.default.LOADED;if(this.color_=void 0!==t.color?(0,o._2)(t.color):null,this.iconImage_=function(t,e,i,n,r,s){let o=u.get(e,n,s);return o||(o=new p(t,e,i,n,r,s),u.set(e,n,s,o)),o}(h,l,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,c,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,this.width_=t.width,this.height_=t.height,void 0!==this.width_||void 0!==this.height_){const t=this.getImage(1),e=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};t.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):t.addEventListener("load",e)}}clone(){const t=this.getScale();return new m({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(t,e){const i=this.getImage(1);void 0!==t&&void 0!==e?super.setScale([t/i.width,e/i.height]):void 0!==t?super.setScale([t/i.width,t/i.width]):void 0!==e?super.setScale([e/i.height,e/i.height]):super.setScale([1,1])}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(t){this.width_=t,this.updateScaleFromWidthAndHeight(t,this.height_)}setHeight(t){this.height_=t,this.updateScaleFromWidthAndHeight(this.width_,t)}setScale(t){super.setScale(t);const e=this.getImage(1);if(e){const i=Array.isArray(t)?t[0]:t;void 0!==i&&(this.width_=i*e.width);const n=Array.isArray(t)?t[1]:t;void 0!==n&&(this.height_=n*e.height)}}listenImageChange(t){this.iconImage_.addEventListener(n.Z.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(n.Z.CHANGE,t)}}const y=m},8443:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});var n=i(4187),r=i(4307);class s{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,r.Pq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new s({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,n.O3)()}getImage(t){return(0,n.O3)()}getHitDetectionImage(){return(0,n.O3)()}getPixelRatio(t){return 1}getImageState(){return(0,n.O3)()}getImageSize(){return(0,n.O3)()}getOrigin(){return(0,n.O3)()}getSize(){return(0,n.O3)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.Pq)(t)}listenImageChange(t){(0,n.O3)()}load(){(0,n.O3)()}unlistenImageChange(t){(0,n.O3)()}}const o=s},5393:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>c});var n=i(553),r=i(8443),s=i(9706),o=i(6620),a=i(8326),h=i(4778);class l extends r.default{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new l({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,n=(0,a.E4)(i.size*t,i.size*t);this.draw_(i,n,t),e=n.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return n.default.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let n=this.radius_,r=void 0===this.radius2_?n:this.radius2_;if(n<r){const t=n;n=r,r=t}const s=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/s,a=r*Math.sin(o),h=n-Math.sqrt(r*r-a*a),l=Math.sqrt(a*a+h*h),c=l/a;if("miter"===t&&c<=i)return c*e;const u=e/2/c,d=e/2*(h/l),f=Math.sqrt((n+u)*(n+u)+d*d)-n;if(void 0===this.radius2_||"bevel"===t)return 2*f;const p=n*Math.sin(o),g=r-Math.sqrt(n*n-p*p),m=Math.sqrt(p*p+g*g)/p;if(m<=i){const t=m*e/2-r-n;return 2*Math.max(f,t)}return 2*f}createRenderOptions(){let t,e=h.rc,i=0,n=null,r=0,s=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=h.Tx),t=(0,o.y)(t),s=this.stroke_.getWidth(),void 0===s&&(s=h.yC),n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=h.rc),i=this.stroke_.getMiterLimit(),void 0===i&&(i=h.V4));const a=this.calculateLineJoinSize_(e,s,i),l=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:s,size:Math.ceil(2*l+a),lineDash:n,lineDashOffset:r,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=h.bL),e.fillStyle=(0,o.y)(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=(0,s._2)(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){const e=(0,a.E4)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const n=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let o=0;o<e;o++){const e=r+o*s,a=o%2==0?i:n;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=h.bL,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const c=l},8958:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});class n{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const r=n},7539:(t,e,i)=>{"use strict";i.r(e),i.d(e,{createDefaultStyle:()=>c,createEditingStyle:()=>u,default:()=>f,toFunction:()=>h});var n=i(283),r=i(1345),s=i(8958),o=i(9515);class a{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=d,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new a({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=d,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function h(t){let e;if("function"==typeof t)e=t;else{let i;Array.isArray(t)?i=t:((0,o.h)("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i}}return e}let l=null;function c(t,e){if(!l){const t=new r.default({color:"rgba(255,255,255,0.4)"}),e=new s.default({color:"#3399CC",width:1.25});l=[new a({image:new n.default({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return l}function u(){const t={},e=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new a({fill:new r.default({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new a({stroke:new s.default({color:e,width:5})}),new a({stroke:new s.default({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new a({image:new n.default({radius:6,fill:new r.default({color:i}),stroke:new s.default({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function d(t){return t.getGeometry()}const f=a},1280:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});var n=i(1345),r=i(4307);class s{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,r.Pq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new n.default({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new s({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.Pq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const o=s},6101:(t,e,i)=>{"use strict";i.r(e),i.d(e,{apply:()=>u,compose:()=>m,composeCssTransform:()=>y,create:()=>o,determinant:()=>b,invert:()=>v,makeInverse:()=>_,makeScale:()=>p,multiply:()=>h,reset:()=>a,rotate:()=>d,scale:()=>f,set:()=>l,setFromArray:()=>c,toString:()=>x,translate:()=>g});var n=i(177),r=i(9515);const s=new Array(6);function o(){return[1,0,0,1,0,0]}function a(t){return l(t,1,0,0,1,0,0)}function h(t,e){const i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],h=e[0],l=e[1],c=e[2],u=e[3],d=e[4],f=e[5];return t[0]=i*h+r*l,t[1]=n*h+s*l,t[2]=i*c+r*u,t[3]=n*c+s*u,t[4]=i*d+r*f+o,t[5]=n*d+s*f+a,t}function l(t,e,i,n,r,s,o){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=s,t[5]=o,t}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function u(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function d(t,e){const i=Math.cos(e),n=Math.sin(e);return h(t,l(s,i,n,-n,i,0,0))}function f(t,e,i){return h(t,l(s,e,0,0,i,0,0))}function p(t,e,i){return l(t,e,0,0,i,0,0)}function g(t,e,i){return h(t,l(s,1,0,0,1,e,i))}function m(t,e,i,n,r,s,o,a){const h=Math.sin(s),l=Math.cos(s);return t[0]=n*l,t[1]=r*h,t[2]=-n*h,t[3]=r*l,t[4]=o*n*l-a*n*h+e,t[5]=o*r*h+a*r*l+i,t}function y(t,e,i,n,r,s,o){return x(m([1,0,0,1,0,0],t,e,i,n,r,s,o))}function v(t){return _(t,t)}function _(t,e){const i=b(e);(0,r.h)(0!==i,32);const n=e[0],s=e[1],o=e[2],a=e[3],h=e[4],l=e[5];return t[0]=a/i,t[1]=-s/i,t[2]=-o/i,t[3]=n/i,t[4]=(o*l-a*h)/i,t[5]=-(n*l-s*h)/i,t}function b(t){return t[0]*t[3]-t[1]*t[2]}let w;function x(t){const e="matrix("+t.join(", ")+")";if(n.Id)return e;const i=w||(w=document.createElement("div"));return i.style.transform=e,i.style.transform}},4187:(t,e,i)=>{"use strict";function n(){throw new Error("Unimplemented abstract method.")}i.d(e,{O3:()=>n,sq:()=>s});let r=0;function s(t){return t.ol_uid||(t.ol_uid=String(++r))}}},s={};function o(t){var e=s[t];if(void 0!==e)return e.exports;var i=s[t]={id:t,loaded:!1,exports:{}};return r[t].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=r,o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(i,n){if(1&n&&(i=this(i)),8&n)return i;if("object"==typeof i&&i){if(4&n&&i.__esModule)return i;if(16&n&&"function"==typeof i.then)return i}var r=Object.create(null);o.r(r);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=2&n&&i;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>i[t]));return s.default=()=>i,o.d(r,s),r},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((e,i)=>(o.f[i](t,e),e)),[])),o.u=t=>t+".js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i={},n="@camptocamp/inkmap:",o.l=(t,e,r,s)=>{if(i[t])i[t].push(e);else{var a,h;if(void 0!==r)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==n+r){a=u;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",n+r),a.src=t),i[t]=[e];var d=(e,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=i[t];if(delete i[t],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((t=>t(n))),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),h&&document.head.appendChild(a)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={143:0};o.f.j=(e,i)=>{var n=o.o(t,e)?t[e]:void 0;if(0!==n)if(n)i.push(n[2]);else{var r=new Promise(((i,r)=>n=t[e]=[i,r]));i.push(n[2]=r);var s=o.p+o.u(e),a=new Error;o.l(s,(i=>{if(o.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",a.name="ChunkLoadError",a.type=r,a.request=s,n[1](a)}}),"chunk-"+e,e)}};var e=(e,i)=>{var n,r,[s,a,h]=i,l=0;if(s.some((e=>0!==t[e]))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);h&&h(o)}for(e&&e(i);l<s.length;l++)r=s[l],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0},i=self.webpackChunk_camptocamp_inkmap=self.webpackChunk_camptocamp_inkmap||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";o(6202),o(1006),o(1176);const t={layers:[{type:"XYZ",url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap (www.openstreetmap.org)"},{type:"GeoJSON",attribution:"",style:{name:"Demo Style",rules:[{name:"Rule 1",symbolizers:[{kind:"Line",color:"#140155",width:30},{kind:"Line",color:"#ffffff",width:18},{kind:"Line",color:"#d80000",width:6}]}]},geojson:{type:"FeatureCollection",name:"france_3857",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::3857"}},features:[{type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:[[[[6217174,-2414045],[6210048,-2436728],[6159355,-2426204],[6145053,-2396057],[6172342,-2375152],[6195255,-2380625],[6217174,-2414045]]],[[[5047139,-1427109],[5036007,-1465841],[5011856,-1450925],[5021517,-1423292],[5047139,-1427109]]],[[[1040800,5121087],[1028706,5082432],[1000448,5088402],[990010,5121087],[972280,5176861],[959570,5217044],[1047722,5281129],[1046648,5139832],[1040800,5121087]]],[[[647670,6368072],[656049,6359607],[708783,6354906],[729920,6346294],[748453,6312074],[790487,6301373],[808656,6297595],[820286,6302302],[849997,6284021],[880610,6282528],[898171,6274745],[916453,6269191],[886062,6227245],[855013,6149762],[843570,6127074],[843500,6126117],[843957,6092648],[840016,6064300],[844808,6038894],[841037,6034717],[836110,6024498],[821637,6012857],[793747,6024573],[772467,6013155],[763469,5969414],[763672,5969123],[719454,5917809],[683291,5870171],[675042,5847303],[681900,5831332],[663026,5801543],[687684,5809500],[694785,5835581],[719454,5849852],[759317,5849067],[784233,5767925],[757236,5744934],[790894,5695574],[793829,5663665],[738054,5638833],[786556,5576525],[773497,5567330],[766705,5521523],[858745,5474966],[838217,5432078],[828133,5426684],[827923,5427087],[825204,5424182],[824909,5423654],[825396,5423225],[771592,5385360],[719454,5335851],[631391,5339298],[470913,5382281],[456531,5396788],[396641,5364020],[379266,5354536],[360733,5344429],[338790,5287372],[339783,5264793],[353418,5226421],[192695,5235027],[192115,5236838],[198828,5247302],[160586,5251839],[148033,5266407],[95536,5285485],[82967,5273832],[73485,5265049],[53183,5266423],[-34881,5289072],[-80651,5299827],[-160175,5351316],[-192461,5357149],[-196968,5363053],[-198814,5365471],[-169735,5392932],[-139604,5538098],[-126830,5686798],[-79574,5673366],[-127330,5747633],[-129411,5832452],[-198803,5865351],[-210758,5884561],[-224402,5906535],[-220464,5946763],[-273676,6015509],[-310167,6034563],[-344151,6014802],[-375585,6058589],[-392179,6081795],[-481471,6087134],[-485829,6133183],[-518667,6172533],[-493611,6210691],[-407335,6217269],[-375585,6229287],[-347549,6239913],[-310167,6204722],[-216856,6196985],[-174894,6211722],[-196072,6362875],[-156970,6378898],[-124632,6329721],[33087,6348124],[71723,6350382],[76931,6361385],[82967,6363274],[82967,6363710],[82967,6364146],[12993,6366828],[30251,6399769],[82967,6423939],[153581,6457561],[183091,6507184],[175715,6548992],[183364,6597111],[230174,6622466],[283421,6637120],[290214,6605864],[318738,6569864],[319503,6568907],[321312,6569400],[322871,6567215],[323854,6567425],[324123,6568943],[325309,6568889],[326172,6570447],[326228,6573012],[326962,6573679],[327743,6574030],[327056,6575465],[327291,6576372],[329130,6577707],[329969,6577183],[330865,6577227],[332096,6578452],[334615,6580020],[335206,6580745],[335616,6581339],[336041,6581332],[344921,6582297],[361264,6570685],[377343,6541249],[402429,6531641],[406930,6526628],[416409,6508515],[448370,6508565],[460958,6442598],[471230,6438976],[493423,6436171],[533531,6471773],[553195,6412026],[573712,6397568],[600403,6380228],[609016,6359657],[638368,6367966],[647670,6368072]]],[[[-6076696,258563],[-6047547,288195],[-6013069,396472],[-6059709,488729],[-6044429,583714],[-6011881,624668],[-5994749,635004],[-5907279,610351],[-5868972,583714],[-5771637,514462],[-5750260,451888],[-5847524,288195],[-5896145,246338],[-5982217,255610],[-6031339,238040],[-6076696,258563]]],[[[-6767970,1632250],[-6784752,1623968],[-6812277,1663231],[-6775971,1665973],[-6767970,1632250]]],[[[-6798832,1798947],[-6823533,1776027],[-6841210,1798947],[-6822666,1820201],[-6798832,1798947]]],[[[-6853252,1822305],[-6870873,1800196],[-6884078,1837025],[-6850989,1849908],[-6841291,1868491],[-6822651,1838819],[-6853252,1822305]]]]}}]}}],size:[400,240,"mm"],center:[3,46.5],dpi:120,scale:7e6,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3857",northArrow:"top-right",attributions:"bottom-right"},e={"Europe in OpenStreetMap":{layers:[{type:"XYZ",url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap (www.openstreetmap.org)"}],size:[400,240,"mm"],center:[12,56],dpi:120,scale:2e7,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3857",northArrow:"top-right",attributions:"bottom-right"},"Europe in OpenStreetMap (WMS, tiled)":{layers:[{type:"WMS",url:"https://ows.mundialis.de/services/service",layer:"OSM-WMS",tiled:!0,attribution:" OpenStreetMap (www.openstreetmap.org), terrestris GmbH"}],size:[400,240,"mm"],center:[12,56],dpi:120,scale:2e7,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3857",northArrow:"top-right",attributions:"bottom-right"},"France in OpenStreetMap and GeoJSON":t,"France in IGN orthophotos (WMTS)":{layers:[{type:"WMTS",url:"https://wxs.ign.fr/ortho/geoportail/wmts?",layer:"ORTHOIMAGERY.ORTHOPHOTOS",matrixSet:"PM",projection:"EPSG:3857",format:"image/jpeg",style:"normal",tileGrid:{matrixIds:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21"],resolutions:[156543.03392811998,78271.51696391999,39135.758481959994,19567.879241008,9783.939620504,4891.969810252,2445.984905126,1222.9924525615997,611.4962262807999,305.74811314039994,152.87405657047998,76.43702828523999,38.21851414248,19.109257071295996,9.554628535647998,4.777314267823999,2.3886571339119995,1.1943285669559998,.5971642834779999,.2985821417376,.14929107086935997,.07464553543467999],tileSize:256},attribution:" IGN  Institut national de l'information gographique et forestire"}],size:[240,280,"mm"],center:[2.5,46.5],dpi:120,scale:7e6,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3857",northArrow:"top-right",attributions:"bottom-right"},"Volcanoes Terrain model (WMS)":{layers:[{type:"WMS",url:"http://tiles.craig.fr/mnt/service",layer:"relief",attribution:" CRAIG (craig.fr)"}],size:[20,20,"cm"],center:[2.959,45.768],dpi:200,scale:15e4,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3857",northArrow:"top-right",attributions:"bottom-right"},"Mars Perseverance Rover Landing Site":{layers:[{type:"XYZ",url:"https://mars.nasa.gov/mmgis-maps/M20/Layers/Jezero_Balanced_Visible_HiRISE_HRSCcolor_IHS_pansharp/{z}/{x}/{-y}.png",attribution:" NASA/JPL-Caltech"}],size:[20,20,"cm"],center:[77.451,18.444],dpi:200,scale:18e4,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3857",northArrow:"top-right",attributions:"bottom-right"},"Bayonne, 1935 (WMTS)":{layers:[{type:"WMTS",url:"https://sextant.ifremer.fr/geowebcache/service/wmts?layer=SXT_PHOTOANCIENNE_BAYONNE&style=&tilematrixset=EPSG%3A3857&Service=WMTS",layer:"SXT_PHOTOANCIENNE_BAYONNE",matrixSet:"EPSG:3857",projection:"EPSG:3857",format:"image/png",style:"",tileGrid:{matrixIds:["EPSG:3857:0","EPSG:3857:1","EPSG:3857:2","EPSG:3857:3","EPSG:3857:4","EPSG:3857:5","EPSG:3857:6","EPSG:3857:7","EPSG:3857:8","EPSG:3857:9","EPSG:3857:10","EPSG:3857:11","EPSG:3857:12","EPSG:3857:13","EPSG:3857:14","EPSG:3857:15","EPSG:3857:16","EPSG:3857:17","EPSG:3857:18"],resolutions:[156543.03392811998,78271.51696391999,39135.758481959994,19567.879241008,9783.939620504,4891.969810252,2445.984905126,1222.9924525615997,611.4962262807999,305.74811314039994,152.87405657047998,76.43702828523999,38.21851414248,19.109257071295996,9.554628535647998,4.777314267823999,2.3886571339119995,1.1943285669559998,.5971642834779999,.2985821417376,.14929107086935997,.07464553543467999],tileSize:256},attribution:" SHOM, Ifremer, Phototque nationale"}],size:[240,280,"mm"],center:[-1.473,43.499],dpi:120,scale:15e3,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3857",northArrow:"top-right",attributions:"bottom-right"},"North pole, arctic projection (WMS)":{layers:[{type:"XYZ",url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",attribution:" GEBCO, National Oceanic and Atmospheric Administration (NOAA), Esri"}],size:[30,30,"cm"],center:[0,89],dpi:200,scale:2e7,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3413",northArrow:"top-right",attributions:"bottom-right"},"WFS layer example":{layers:[{type:"XYZ",url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap (www.openstreetmap.org)"},{type:"WFS",url:"https://ahocevar.com/geoserver/wfs",layer:"osm:water_areas",format:"geojson",version:"1.1.0",style:{name:"Demo Style",rules:[{name:"Rule 1",symbolizers:[{kind:"Line",color:"#2e37c5",width:3,opacity:.7}]}]}}],size:[800,600],center:[-81,43],dpi:70,scale:4e5,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3857",northArrow:"top-right",attributions:"bottom-right"},"Custom local projection (WMS)":{layers:[{type:"WMS",url:"https://wxs.ign.fr/jhyvi0fgmnuxvfv0zjzorvdn/geoportail/r/wms",layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",tiled:!0,attribution:" IGN"}],size:[1800,1200],center:[4,47],dpi:200,scale:25e5,projection:"EPSG:3947",projectionDefinitions:[{name:"EPSG:3947",bbox:[48,-4.77,46,7.63],proj4:"+proj=lcc +lat_1=46.25 +lat_2=47.75 +lat_0=47 +lon_0=3 +x_0=1700000 +y_0=6200000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"}],attributions:"bottom-right"},"Spec with invalid sources":{layers:[{type:"WMS",url:"https://ows.mundialis.de/services/service",layer:"TOPO-OSM-WMS",tiled:!0,attribution:" OpenStreetMap, Natural Earth, terrestris GmbH"},{type:"WMS",url:"https://wrong.tiled.wms.url/services/service",layer:"TOPO-OSM-WMS",tiled:!0},{type:"WMS",url:"https://wrong.wms.url/services/service",layer:"TOPO-OSM-WMS",tiled:!1},{type:"XYZ",url:"https://wrong.xyz.url/osm-tiles/{z}/{x}/{y}.png"}],size:[256,256],center:[12,48],dpi:25,scale:2e7,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3857",northArrow:"top-right",attributions:"bottom-right"},"Spec with legends":{layers:[{type:"WMS",url:"https://ows.terrestris.de/osm/service",layer:"OSM-WMS",tiled:!0,legend:!0,attribution:" OpenStreetMap (www.openstreetmap.org), terrestris GmbH"},{type:"WFS",url:"https://ows-demo.terrestris.de/geoserver/osm/wfs?maxFeatures=50",layer:"osm:osm-fuel",format:"geojson",version:"1.1.0",legend:!0,style:{name:"WFS Style",rules:[{name:"Simple symbol",symbolizers:[{kind:"Mark",wellKnownName:"x",opacity:.7,radius:10,color:"#ff0000"}]}]}},t.layers[1]],size:[400,300,"mm"],center:[3,46.5],dpi:72,scale:7e6,scaleBar:{position:"bottom-left",units:"metric"},projection:"EPSG:3857",northArrow:"top-right",attributions:"bottom-right"}},i=Object.keys(e);class n extends HTMLElement{constructor(){super(),this.expanded_=!1,this.currentSpecName_=null,this.specContent="",this.error_="",this.onValidityCheckHandler_=null}get value(){try{return JSON.parse(this.specContent)}catch{return null}}onValidityCheck(t){this.onValidityCheckHandler_=t}connectedCallback(){this.expanded_="true"===this.getAttribute("expanded"),this.getAttribute("select")?this.selectSpec(this.getAttribute("select")):this.selectSpec(i[0])}selectSpec(t){this.currentSpecName_=t;const i=e[t];this.specContent=JSON.stringify(i,null,2),this.refreshDOM()}checkSpecValidity(){try{this.error_="",JSON.parse(this.specContent)}catch(t){this.error_=t.message}const t=!!this.error_,e=this.querySelector(".json-validity");e&&(e.classList.toggle("text-success",!t),e.classList.toggle("text-danger",t),e.textContent=t?"The JSON object is invalid: "+this.error_:"The JSON object is valid!"),this.onValidityCheckHandler_&&this.onValidityCheckHandler_.call(this,!this.error_)}refreshDOM(){if(this.innerHTML=this.expanded_?`\n<div class="border rounded p-1">\n  <div class="dropdown d-flex flex-row align-items-baseline">\n    <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      ${this.currentSpecName_}\n    </button>\n    <div class="dropdown-menu" aria-label="List of print specs">\n      ${i.map((t=>`\n        <button type="button" class="dropdown-item preset-spec ${t===this.currentSpecName_?"active":""}" data-name="${t}">\n          ${t}\n        </button>`)).join("\n")}\n    </div>\n    <span class="mx-2 flex-grow-1">Choose a predefined spec from the list.</span>\n    <a href="#" class="mx-2 toggle-spec-btn">Hide</a>\n  </div>\n  <label class="d-block m-0 mt-1">\n    <textarea\n      class="spec form-control text-monospace border-0"\n      rows="20"\n      style="font-size: 12px"\n    >${this.specContent}</textarea>\n  </label>\n</div>\n<small class="json-validity text-secondary">\n  Please provide a valid JSON object.\n</small>`:`\n<div class="dropdown d-flex flex-row align-items-baseline p-1 border rounded">\n  <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n    ${this.currentSpecName_}\n  </button>\n  <div class="dropdown-menu" aria-label="List of print specs">\n    ${i.map((t=>`\n      <button type="button" class="dropdown-item preset-spec ${t===this.currentSpecName_?"active":""}" data-name="${t}">\n        ${t}\n      </button>`)).join("\n")}\n  </div>\n  <span class="mx-2 flex-grow-1">Choose a predefined spec from the list.</span>\n  <a href="#" class="mx-2 toggle-spec-btn">Show</a>\n</div>`,Array.from(this.querySelectorAll(".preset-spec")).forEach((t=>t.addEventListener("click",(()=>{this.selectSpec(t.getAttribute("data-name")),this.refreshDOM()})))),this.expanded_){const t=this.querySelector(".spec"),e=this.querySelector(".dropdown-toggle");t.addEventListener("input",(()=>{this.specContent=t.value,e.innerText="Custom spec ",this.currentSpecName_="Custom spec",this.checkSpecValidity()}))}this.querySelector(".toggle-spec-btn").addEventListener("click",(t=>{this.setExpanded(!this.expanded_),t.preventDefault()}))}setExpanded(t){this.expanded_=t,this.refreshDOM()}}customElements.define("print-spec",n);var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},r(t,e)};function s(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function a(t){return"function"==typeof t}var h=!1,l={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,h=t},get useDeprecatedSynchronousErrorHandling(){return h}};function c(t){setTimeout((function(){throw t}),0)}var u={closed:!0,next:function(t){},error:function(t){if(l.useDeprecatedSynchronousErrorHandling)throw t;c(t)},complete:function(){}},d=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function f(t){return null!==t&&"object"==typeof t}var p=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),g=p,m=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var i=this,n=i._parentOrParents,r=i._ctorUnsubscribe,s=i._unsubscribe,o=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if(a(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(t){e=t instanceof g?y(t.errors):[t]}}if(d(o)){h=-1;for(var l=o.length;++h<l;){var c=o[h];if(f(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof g?e=e.concat(y(t.errors)):e.push(t)}}}if(e)throw new g(e)}},t.prototype.add=function(e){var i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){var n=i;(i=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=i._parentOrParents;if(null===r)i._parentOrParents=this;else if(r instanceof t){if(r===this)return i;i._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return i;r.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[i]:s.push(i),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function y(t){return t.reduce((function(t,e){return t.concat(e instanceof g?e.errors:e)}),[])}var v=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),_=function(t){function e(i,n,r){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=u;break;case 1:if(!i){s.destination=u;break}if("object"==typeof i){i instanceof e?(s.syncErrorThrowable=i.syncErrorThrowable,s.destination=i,i.add(s)):(s.syncErrorThrowable=!0,s.destination=new b(s,i));break}default:s.syncErrorThrowable=!0,s.destination=new b(s,i,n,r)}return s}return s(e,t),e.prototype[v]=function(){return this},e.create=function(t,i,n){var r=new e(t,i,n);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(m),b=function(t){function e(e,i,n,r){var s,o=t.call(this)||this;o._parentSubscriber=e;var h=o;return a(i)?s=i:i&&(s=i.next,n=i.error,r=i.complete,i!==u&&(a((h=Object.create(i)).unsubscribe)&&o.add(h.unsubscribe.bind(h)),h.unsubscribe=o.unsubscribe.bind(o))),o._context=h,o._next=s,o._error=n,o._complete=r,o}return s(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;l.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=l.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):c(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;c(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};l.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),l.useDeprecatedSynchronousErrorHandling)throw t;c(t)}},e.prototype.__tryOrSetError=function(t,e,i){if(!l.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return l.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(c(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(_);function w(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new x(t,e))}}var x=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new S(t,this.project,this.thisArg))},t}(),S=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.project=i,r.count=0,r.thisArg=n||r,r}return s(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(_),M=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function C(t){return t}function A(t){return 0===t.length?C:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var L=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var n=this.operator,r=function(t,e,i){if(t){if(t instanceof _)return t;if(t[v])return t[v]()}return t||e||i?new _(t,e,i):new _(u)}(t,e,i);if(n?r.add(n.call(r,this.source)):r.add(this.source||l.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),l.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){l.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,i=e.closed,n=e.destination,r=e.isStopped;if(i||r)return!1;t=n&&n instanceof _?n:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=N(e))((function(e,n){var r;r=i.subscribe((function(e){try{t(e)}catch(t){n(t),r&&r.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[M]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:A(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=N(t))((function(t,i){var n;e.subscribe((function(t){return n=t}),(function(t){return i(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function N(t){if(t||(t=l.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var E=function(t){return function(e){for(var i=0,n=t.length;i<n&&!e.closed;i++)e.next(t[i]);e.complete()}};function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var I=P(),O=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function R(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var F=function(t){if(t&&"function"==typeof t[M])return function(t){return function(e){var i=t[M]();if("function"!=typeof i.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(e)}}(t);if(O(t))return E(t);if(R(t))return i=t,function(t){return i.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,c),t};if(t&&"function"==typeof t[I])return e=t,function(t){for(var i=e[I]();;){var n=void 0;try{n=i.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof i.return&&t.add((function(){i.return&&i.return()})),t};var e,i,n=f(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+n+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function T(t,e){return new L((function(i){var n=new m,r=0;return n.add(e.schedule((function(){r!==t.length?(i.next(t[r++]),i.closed||n.add(this.schedule())):i.complete()}))),n}))}function k(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[M]}(t))return function(t,e){return new L((function(i){var n=new m;return n.add(e.schedule((function(){var r=t[M]();n.add(r.subscribe({next:function(t){n.add(e.schedule((function(){return i.next(t)})))},error:function(t){n.add(e.schedule((function(){return i.error(t)})))},complete:function(){n.add(e.schedule((function(){return i.complete()})))}}))}))),n}))}(t,e);if(R(t))return function(t,e){return new L((function(i){var n=new m;return n.add(e.schedule((function(){return t.then((function(t){n.add(e.schedule((function(){i.next(t),n.add(e.schedule((function(){return i.complete()})))})))}),(function(t){n.add(e.schedule((function(){return i.error(t)})))}))}))),n}))}(t,e);if(O(t))return T(t,e);if(function(t){return t&&"function"==typeof t[I]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new L((function(i){var n,r=new m;return r.add((function(){n&&"function"==typeof n.return&&n.return()})),r.add(e.schedule((function(){n=t[I](),r.add(e.schedule((function(){if(!i.closed){var t,e;try{var r=n.next();t=r.value,e=r.done}catch(t){return void i.error(t)}e?i.complete():(i.next(t),this.schedule())}})))}))),r}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof L?t:new L(F(t))}var j=function(t){function e(e){var i=t.call(this)||this;return i.parent=e,i}return s(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(_),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(_);function B(t,e){if(!e.closed){if(t instanceof L)return t.subscribe(e);var i;try{i=F(t)(e)}catch(t){e.error(t)}return i}}function q(t,e){return"function"==typeof e?function(i){return i.pipe(q((function(i,n){return k(t(i,n)).pipe(w((function(t,r){return e(i,t,n,r)})))})))}:function(e){return e.lift(new G(t))}}var G=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new z(t,this.project))},t}(),z=function(t){function e(e,i){var n=t.call(this,e)||this;return n.project=i,n.index=0,n}return s(e,t),e.prototype._next=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this._innerSub(e)},e.prototype._innerSub=function(t){var e=this.innerSubscription;e&&e.unsubscribe();var i=new j(this),n=this.destination;n.add(i),this.innerSubscription=B(t,i),this.innerSubscription!==i&&n.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(D);function U(t,e){return void 0===e&&(e=!1),function(i){return i.lift(new W(t,e))}}var W=function(){function t(t,e){this.predicate=t,this.inclusive=e}return t.prototype.call=function(t,e){return e.subscribe(new Y(t,this.predicate,this.inclusive))},t}(),Y=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.predicate=i,r.inclusive=n,r.index=0,r}return s(e,t),e.prototype._next=function(t){var e,i=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void i.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var i=this.destination;Boolean(e)?i.next(t):(this.inclusive&&i.next(t),i.complete())},e}(_);function H(t,e,i,n){return a(i)&&(n=i,i=void 0),n?H(t,e,i).pipe(w((function(t){return d(t)?n.apply(void 0,t):n(t)}))):new L((function(n){V(t,e,(function(t){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(t)}),n,i)}))}function V(t,e,i,n,r){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var o=t;t.addEventListener(e,i,r),s=function(){return o.removeEventListener(e,i,r)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var a=t;t.on(e,i),s=function(){return a.off(e,i)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){var h=t;t.addListener(e,i),s=function(){return h.removeListener(e,i)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,c=t.length;l<c;l++)V(t[l],e,i,n,r)}n.add(s)}function X(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.length;if(0===i)throw new Error("list of properties cannot be empty.");return function(e){return w(Z(t,i))(e)}}function Z(t,e){return function(i){for(var n=i,r=0;r<e;r++){var s=null!=n?n[t[r]]:void 0;if(void 0===s)return;n=s}return n}}function K(){}function J(t,e,i){return function(n){return n.lift(new Q(t,e,i))}}var Q=function(){function t(t,e,i){this.nextOrObserver=t,this.error=e,this.complete=i}return t.prototype.call=function(t,e){return e.subscribe(new $(t,this.nextOrObserver,this.error,this.complete))},t}(),$=function(t){function e(e,i,n,r){var s=t.call(this,e)||this;return s._tapNext=K,s._tapError=K,s._tapComplete=K,s._tapError=n||K,s._tapComplete=r||K,a(i)?(s._context=s,s._tapNext=i):i&&(s._context=i,s._tapNext=i.next||K,s._tapError=i.error||K,s._tapComplete=i.complete||K),s}return s(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(_);function tt(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}const et=(tt()?H(self,"message").pipe(X("data")):H(window,"inkmap.toPrinter").pipe(X("detail"))).pipe(J((t=>console.log("[inkmap] message to printer:",t))));var it=o(8326);function nt(t){return t&&"function"==typeof t.schedule}var rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.notifyNext=function(t,e,i,n,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(_),st=function(t){function e(e,i,n){var r=t.call(this)||this;return r.parent=e,r.outerValue=i,r.outerIndex=n,r.index=0,r}return s(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(_);function ot(t,e,i,n,r){if(void 0===r&&(r=new st(t,i,n)),!r.closed)return e instanceof L?e.subscribe(r):F(e)(r)}function at(t,e){return e?T(t,e):new L(E(t))}var ht={},lt=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new ct(t,this.resultSelector))},t}(),ct=function(t){function e(e,i){var n=t.call(this,e)||this;return n.resultSelector=i,n.active=0,n.values=[],n.observables=[],n}return s(e,t),e.prototype._next=function(t){this.values.push(ht),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var i=0;i<e;i++){var n=t[i];this.add(ot(this,n,void 0,i))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,i){var n=this.values,r=n[i],s=this.toRespond?r===ht?--this.toRespond:this.toRespond:0;n[i]=e,0===s&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(rt);function ut(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1];return nt(i)?(t.pop(),T(t,i)):at(t)}const dt="requestJob",ft="jobStatus",pt="cancelJob",gt=2.54;var mt=o(8641),yt=o(6414),vt=o(9619),_t=o(9556);let bt=null;var wt=6378137,xt=.0066943799901413165,St=484813681109536e-20,Mt=Math.PI/2,Ct=1e-10,At=.017453292519943295,Lt=57.29577951308232,Nt=Math.PI/4,Et=2*Math.PI,Pt=3.14159265359,It={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const Ot={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Rt=/[\s_\-\/\(\)]/g;function Ft(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),r=e.toLowerCase().replace(Rt,""),s=-1;++s<n.length;)if((i=n[s]).toLowerCase().replace(Rt,"")===r)return t[i]}function Tt(t){var e,i,n,r={},s=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*At},lat_1:function(t){r.lat1=t*At},lat_2:function(t){r.lat2=t*At},lat_ts:function(t){r.lat_ts=t*At},lon_0:function(t){r.long0=t*At},lon_1:function(t){r.long1=t*At},lon_2:function(t){r.long2=t*At},alpha:function(t){r.alpha=parseFloat(t)*At},gamma:function(t){r.rectified_grid_angle=parseFloat(t)},lonc:function(t){r.longc=t*At},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=Ft(Ot,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*At},pm:function(t){var e=Ft(It,t);r.from_greenwich=(e||parseFloat(t))*At},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)},approx:function(){r.approx=!0}};for(e in s)i=s[e],e in o?"function"==typeof(n=o[e])?n(i):r[n]=i:r[e]=i;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var kt=/\s/,jt=/[A-Za-z]/,Dt=/[A-Za-z84_]/,Bt=/[,\]]/,qt=/[\d\.E\-\+]/;function Gt(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function zt(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,r=i.reduce((function(t,e){return Ut(e,t),t}),n);e&&(t[e]=r)}function Ut(t,e){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void Ut(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i){if("AXIS"===i)return i in e||(e[i]=[]),void e[i].push(t);var n;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Ut(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Ut(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void zt(e,i,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return Ut(t,e[i]);return zt(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}function Wt(t){return.017453292519943295*t}function Yt(t){var e=new Gt(t).output(),i=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",i]);var r={};return Ut(e,r),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,n=t.AXIS.length;i<n;++i){var r=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?e+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?e+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?e+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;function o(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Wt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Wt],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Wt],["lat0","latitude_of_origin",Wt],["lat0","standard_parallel_1",Wt],["lat1","standard_parallel_1",Wt],["lat2","standard_parallel_2",Wt],["azimuth","Azimuth"],["alpha","azimuth",Wt],["srsCode","name"]].forEach((function(e){return function(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],3===e.length&&(t[i]=e[2](t[i])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=Wt(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(r),r}function Ht(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?Ht[t]=Tt(arguments[1]):Ht[t]=Yt(arguments[1]):Ht[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?Ht.apply(e,t):Ht(t)}));if("string"==typeof t){if(t in Ht)return Ht[t]}else"EPSG"in t?Ht["EPSG:"+t.EPSG]=t:"ESRI"in t?Ht["ESRI:"+t.ESRI]=t:"IAU2000"in t?Ht["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Gt.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;kt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Gt.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Bt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Gt.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Gt.prototype.number=function(t){if(!qt.test(t)){if(Bt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Gt.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Gt.prototype.keyword=function(t){if(Dt.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!Bt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Gt.prototype.neutral=function(t){if(jt.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(qt.test(t))return this.word=t,void(this.state=3);if(!Bt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Gt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Ht);const Vt=Ht;var Xt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Zt=["3857","900913","3785","102113"];function Kt(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)void 0!==(i=e[n])&&(t[n]=i);return t}function Jt(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}function Qt(t){return t<0?-1:1}function $t(t){return Math.abs(t)<=Pt?t:t-Qt(t)*Et}function te(t,e,i){var n=t*i,r=.5*t;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(Mt-e))/n}function ee(t,e){for(var i,n,r=.5*t,s=Mt-2*Math.atan(e),o=0;o<=15;o++)if(i=t*Math.sin(s),s+=n=Mt-2*Math.atan(e*Math.pow((1-i)/(1+i),r))-s,Math.abs(n)<=1e-10)return s;return-9999}const ie={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Jt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,n=t.x,r=t.y;if(r*Lt>90&&r*Lt<-90&&n*Lt>180&&n*Lt<-180)return null;if(Math.abs(Math.abs(r)-Mt)<=Ct)return null;if(this.sphere)e=this.x0+this.a*this.k0*$t(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(Nt+.5*r));else{var s=Math.sin(r),o=te(this.e,r,s);e=this.x0+this.a*this.k0*$t(n-this.long0),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,r=t.y-this.y0;if(this.sphere)i=Mt-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(-9999===(i=ee(this.e,s)))return null}return e=$t(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function ne(t){return t}var re=[ie,{init:function(){},forward:ne,inverse:ne,names:["longlat","identity"]}],se={},oe=[];function ae(t,e){var i=oe.length;return t.names?(oe[i]=t,t.names.forEach((function(t){se[t.toLowerCase()]=i})),this):(console.log(e),!0)}const he={start:function(){re.forEach(ae)},add:ae,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==se[e]&&oe[se[e]]?oe[se[e]]:void 0}};var le={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},ce=le.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};le.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var ue={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var de={};function fe(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:de[t]||null,isNull:!1}}function pe(t){return t/3600*Math.PI/180}function ge(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function me(t){return t.map((function(t){return[pe(t.longitudeShift),pe(t.latitudeShift)]}))}function ye(t,e,i){return{name:ge(t,e+8,e+16).trim(),parent:ge(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function ve(t,e,i,n){for(var r=e+176,s=[],o=0;o<i.gridNodeCount;o++){var a={latitudeShift:t.getFloat32(r+16*o,n),longitudeShift:t.getFloat32(r+16*o+4,n),latitudeAccuracy:t.getFloat32(r+16*o+8,n),longitudeAccuracy:t.getFloat32(r+16*o+12,n)};s.push(a)}return s}function _e(t,e){if(!(this instanceof _e))return new _e(t);e=e||function(t){if(t)throw t};var i=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in Vt}(t))return Vt[t];if(function(t){return Xt.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Yt(t);if(function(t){var e=Ft(t,"authority");if(e){var i=Ft(e,"epsg");return i&&Zt.indexOf(i)>-1}}(e))return Vt["EPSG:3857"];var i=function(t){var e=Ft(t,"extension");if(e)return Ft(e,"proj4")}(e);return i?Tt(i):e}return function(t){return"+"===t[0]}(t)?Tt(t):void 0}(t);if("object"==typeof i){var n=_e.projections.get(i.projName);if(n){if(i.datumCode&&"none"!==i.datumCode){var r=Ft(ue,i.datumCode);r&&(i.datum_params=i.datum_params||(r.towgs84?r.towgs84.split(","):null),i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var s=function(t,e,i,n,r){if(!t){var s=Ft(le,n);s||(s=ce),t=s.a,e=s.b,i=s.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<Ct)&&(r=!0,e=t),{a:t,b:e,rf:i,sphere:r}}(i.a,i.b,i.rf,i.ellps,i.sphere),o=function(t,e,i,n){var r=t*t,s=e*e,o=(r-s)/r,a=0;return n?(r=(t*=1-o*(.16666666666666666+o*(.04722222222222222+.022156084656084655*o)))*t,o=0):a=Math.sqrt(o),{es:o,e:a,ep2:(r-s)/s}}(s.a,s.b,s.rf,i.R_A),a=function(t){return void 0===t?null:t.split(",").map(fe)}(i.nadgrids),h=i.datum||function(t,e,i,n,r,s,o){var a={};return a.datum_type=void 0===t||"none"===t?5:4,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=1),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=2,a.datum_params[3]*=St,a.datum_params[4]*=St,a.datum_params[5]*=St,a.datum_params[6]=a.datum_params[6]/1e6+1))),o&&(a.datum_type=3,a.grids=o),a.a=i,a.b=n,a.es=r,a.ep2=s,a}(i.datumCode,i.datum_params,s.a,s.b,o.es,o.ep2,a);Kt(this,i),Kt(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=h,this.init(),e(null,this)}else e(t)}else e(t)}_e.projections=he,_e.projections.start();const be=_e;function we(t,e,i){var n,r,s,o,a=t.x,h=t.y,l=t.z?t.z:0;if(h<-Mt&&h>-1.001*Mt)h=-Mt;else if(h>Mt&&h<1.001*Mt)h=Mt;else{if(h<-Mt)return{x:-1/0,y:-1/0,z:t.z};if(h>Mt)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),r=Math.sin(h),o=Math.cos(h),s=r*r,{x:((n=i/Math.sqrt(1-e*s))+l)*o*Math.cos(a),y:(n+l)*o*Math.sin(a),z:(n*(1-e)+l)*r}}function xe(t,e,i,n){var r,s,o,a,h,l,c,u,d,f,p,g,m,y,v,_=t.x,b=t.y,w=t.z?t.z:0;if(r=Math.sqrt(_*_+b*b),s=Math.sqrt(_*_+b*b+w*w),r/i<1e-12){if(y=0,s/i<1e-12)return v=-n,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(b,_);o=w/s,u=(a=r/s)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*a*a)),d=o*h,m=0;do{m++,l=e*(c=i/Math.sqrt(1-e*d*d))/(c+(v=r*u+w*d-c*(1-e*d*d))),g=(p=o*(h=1/Math.sqrt(1-l*(2-l)*a*a)))*u-(f=a*(1-l)*h)*d,u=f,d=p}while(g*g>1e-24&&m<30);return{x:y,y:Math.atan(p/Math.abs(f)),z:v}}function Se(t){return 1===t||2===t}function Me(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-i.x,y:i.y},r={x:Number.NaN,y:Number.NaN},s=[],o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){r=n;break}if(a.mandatory,null!==a.grid){var h=a.grid.subgrids[0],l=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,c=h.ll[0]-l,u=h.ll[1]-l,d=h.ll[0]+(h.lim[0]-1)*h.del[0]+l,f=h.ll[1]+(h.lim[1]-1)*h.del[1]+l;if(!(u>n.y||c>n.x||f<n.y||d<n.x||(r=Ce(n,e,h),isNaN(r.x))))break}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Lt+" "+n.y*Lt+" tried: '"+s+"'"),-1):(i.x=-r.x,i.y=r.y,0)}function Ce(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var r={x:t.x,y:t.y};r.x-=i.ll[0],r.y-=i.ll[1],r.x=$t(r.x-Math.PI)+Math.PI;var s=Ae(r,i);if(e){if(isNaN(s.x))return n;s.x=r.x-s.x,s.y=r.y-s.y;var o,a,h=9;do{if(a=Ae(s,i),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:r.x-(a.x+s.x),y:r.y-(a.y+s.y)},s.x+=o.x,s.y+=o.y}while(h--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=$t(s.x+i.ll[0]),n.y=s.y+i.ll[1]}else isNaN(s.x)||(n.x=t.x+s.x,n.y=t.y+s.y);return n}function Ae(t,e){var i,n={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(n.x),s=Math.floor(n.y),o=n.x-1*r,a=n.y-1*s,h={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0])return h;if(s<0||s>=e.lim[1])return h;i=s*e.lim[0]+r;var l=e.cvs[i][0],c=e.cvs[i][1];i++;var u=e.cvs[i][0],d=e.cvs[i][1];i+=e.lim[0];var f=e.cvs[i][0],p=e.cvs[i][1];i--;var g=e.cvs[i][0],m=e.cvs[i][1],y=o*a,v=o*(1-a),_=(1-o)*(1-a),b=(1-o)*a;return h.x=_*l+v*u+b*g+y*f,h.y=_*c+v*d+b*m+y*p,h}function Le(t,e,i){var n,r,s,o=i.x,a=i.y,h=i.z||0,l={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==i.z)switch(0===s?(n=o,r=-1!=="ew".indexOf(t.axis[s])?"x":"y"):1===s?(n=a,r=-1!=="ns".indexOf(t.axis[s])?"y":"x"):(n=h,r="z"),t.axis[s]){case"e":case"n":l[r]=n;break;case"w":case"s":l[r]=-n;break;case"u":void 0!==i[r]&&(l.z=n);break;case"d":void 0!==i[r]&&(l.z=-n);break;default:return null}return l}function Ne(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Ee(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Pe(t,e,i,n){var r;if(Array.isArray(i)&&(i=Ne(i)),function(t){Ee(t.x),Ee(t.y)}(i),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(i=Pe(t,r=new be("WGS84"),i,n),t=r),n&&"enu"!==t.axis&&(i=Le(t,!1,i)),"longlat"===t.projName)i={x:i.x*At,y:i.y*At,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=function(t,e,i){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return i;if(5===t.datum_type||5===e.datum_type)return i;var n=t.a,r=t.es;if(3===t.datum_type){if(0!==Me(t,!1,i))return;n=wt,r=xt}var s=e.a,o=e.b,a=e.es;return 3===e.datum_type&&(s=wt,o=6356752.314,a=xt),r!==a||n!==s||Se(t.datum_type)||Se(e.datum_type)?(i=we(i,r,n),Se(t.datum_type)&&(i=function(t,e,i){if(1===e)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(2===e){var n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],h=i[5],l=i[6];return{x:l*(t.x-h*t.y+a*t.z)+n,y:l*(h*t.x+t.y-o*t.z)+r,z:l*(-a*t.x+o*t.y+t.z)+s}}}(i,t.datum_type,t.datum_params)),Se(e.datum_type)&&(i=function(t,e,i){if(1===e)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(2===e){var n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],h=i[5],l=i[6],c=(t.x-n)/l,u=(t.y-r)/l,d=(t.z-s)/l;return{x:c+h*u-a*d,y:-h*c+u+o*d,z:a*c-o*u+d}}}(i,e.datum_type,e.datum_params)),i=xe(i,a,s,o),3!==e.datum_type||0===Me(e,!0,i)?i:void 0):i}(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),"longlat"===e.projName?i={x:i.x*Lt,y:i.y*Lt,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&"enu"!==e.axis?Le(e,!0,i):i}var Ie=be("WGS84");function Oe(t,e,i,n){var r,s,o;return Array.isArray(i)?(r=Pe(t,e,i,n)||{x:NaN,y:NaN},i.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(i.splice(3)):[r.x,r.y,i[2]].concat(i.splice(3)):[r.x,r.y].concat(i.splice(2)):[r.x,r.y]):(s=Pe(t,e,i,n),2===(o=Object.keys(i)).length||o.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;s[n]=i[n]})),s)}function Re(t){return t instanceof be?t:t.oProj?t.oProj:be(t)}const Fe=function(t,e,i){t=Re(t);var n,r=!1;return void 0===e?(e=t,t=Ie,r=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=Ie,r=!0),e=Re(e),i?Oe(t,e,i):(n={forward:function(i,n){return Oe(t,e,i,n)},inverse:function(i,n){return Oe(e,t,i,n)}},r&&(n.oProj=e),n)};var Te="AJSAJS",ke="AFAFAF",je=65,De=73,Be=79;const qe={forward:Ge,inverse:function(t){var e=Ye(Ve(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:ze};function Ge(t,e){return e=e||5,function(t,e){var i,n,r,s,o,a,h,l,c,u,d,f="00000"+t.easting,p="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(c=t.easting,u=t.northing,d=He(t.zoneNumber),i=Math.floor(c/1e5),n=Math.floor(u/1e5)%20,s=Te.charCodeAt(r=d-1),o=ke.charCodeAt(r),l=!1,(a=s+i-1)>90&&(a=a-90+je-1,l=!0),(a===De||s<De&&a>De||(a>De||s<De)&&l)&&a++,(a===Be||s<Be&&a>Be||(a>Be||s<Be)&&l)&&++a===De&&a++,a>90&&(a=a-90+je-1),(h=o+n)>86?(h=h-86+je-1,l=!0):l=!1,(h===De||o<De&&h>De||(h>De||o<De)&&l)&&h++,(h===Be||o<Be&&h>Be||(h>Be||o<Be)&&l)&&++h===De&&h++,h>86&&(h=h-86+je-1),String.fromCharCode(a)+String.fromCharCode(h))+f.substr(f.length-5,e)+p.substr(p.length-5,e)}(function(t){var e,i,n,r,s,o,a,h=t.lat,l=t.lon,c=6378137,u=.00669438,d=.9996,f=Ue(h),p=Ue(l);a=Math.floor((l+180)/6)+1,180===l&&(a=60),h>=56&&h<64&&l>=3&&l<12&&(a=32),h>=72&&h<84&&(l>=0&&l<9?a=31:l>=9&&l<21?a=33:l>=21&&l<33?a=35:l>=33&&l<42&&(a=37)),o=Ue(6*(a-1)-180+3),e=.006739496752268451,i=c/Math.sqrt(1-u*Math.sin(f)*Math.sin(f)),n=Math.tan(f)*Math.tan(f),r=e*Math.cos(f)*Math.cos(f);var g,m,y=d*i*((s=Math.cos(f)*(p-o))+(1-n+r)*s*s*s/6+(5-18*n+n*n+72*r-58*e)*s*s*s*s*s/120)+5e5,v=d*(c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f))+i*Math.tan(f)*(s*s/2+(5-n+9*r+4*r*r)*s*s*s*s/24+(61-58*n+n*n+600*r-2.2240339282485886)*s*s*s*s*s*s/720));return h<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(y),zoneNumber:a,zoneLetter:(g=h,m="Z",84>=g&&g>=72?m="X":72>g&&g>=64?m="W":64>g&&g>=56?m="V":56>g&&g>=48?m="U":48>g&&g>=40?m="T":40>g&&g>=32?m="S":32>g&&g>=24?m="R":24>g&&g>=16?m="Q":16>g&&g>=8?m="P":8>g&&g>=0?m="N":0>g&&g>=-8?m="M":-8>g&&g>=-16?m="L":-16>g&&g>=-24?m="K":-24>g&&g>=-32?m="J":-32>g&&g>=-40?m="H":-40>g&&g>=-48?m="G":-48>g&&g>=-56?m="F":-56>g&&g>=-64?m="E":-64>g&&g>=-72?m="D":-72>g&&g>=-80&&(m="C"),m)}}({lat:t[1],lon:t[0]}),e)}function ze(t){var e=Ye(Ve(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ue(t){return t*(Math.PI/180)}function We(t){return t/Math.PI*180}function Ye(t){var e=t.northing,i=t.easting,n=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var s,o,a,h,l,c,u,d,f,p=.9996,g=6378137,m=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=i-5e5,_=e;n<"N"&&(_-=1e7),u=6*(r-1)-180+3,s=.006739496752268451,f=(d=_/p/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*d)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*d)+151*y*y*y/96*Math.sin(6*d),o=g/Math.sqrt(1-m*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),h=s*Math.cos(f)*Math.cos(f),l=.99330562*g/Math.pow(1-m*Math.sin(f)*Math.sin(f),1.5),c=v/(o*p);var b=f-o*Math.tan(f)/l*(c*c/2-(5+3*a+10*h-4*h*h-9*s)*c*c*c*c/24+(61+90*a+298*h+45*a*a-1.6983531815716497-3*h*h)*c*c*c*c*c*c/720);b=We(b);var w,x=(c-(1+2*a+h)*c*c*c/6+(5-2*h+28*a-3*h*h+8*s+24*a*a)*c*c*c*c*c/120)/Math.cos(f);if(x=u+We(x),t.accuracy){var S=Ye({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:S.lat,right:S.lon,bottom:b,left:x}}else w={lat:b,lon:x};return w}function He(t){var e=t%6;return 0===e&&(e=6),e}function Ve(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,r="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,s++}var o=parseInt(r,10);if(0===s||s+3>i)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(s,s+=2);for(var h=He(o),l=function(t,e){for(var i=Te.charCodeAt(e-1),n=1e5,r=!1;i!==t.charCodeAt(0);){if(++i===De&&i++,i===Be&&i++,i>90){if(r)throw"Bad character: "+t;i=je,r=!0}n+=1e5}return n}(n.charAt(0),h),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=ke.charCodeAt(e-1),n=0,r=!1;i!==t.charCodeAt(0);){if(++i===De&&i++,i===Be&&i++,i>86){if(r)throw"Bad character: "+t;i=je,r=!0}n+=1e5}return n}(n.charAt(1),h);c<Xe(a);)c+=2e6;var u=i-s;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,f,p,g=u/2,m=0,y=0;return g>0&&(d=1e5/Math.pow(10,g),f=t.substring(s,s+g),m=parseFloat(f)*d,p=t.substring(s+g),y=parseFloat(p)*d),{easting:m+l,northing:y+c,zoneLetter:a,zoneNumber:o,accuracy:d}}function Xe(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Ze(t,e,i){if(!(this instanceof Ze))return new Ze(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ze.fromMGRS=function(t){return new Ze(ze(t))},Ze.prototype.toMGRS=function(t){return Ge([this.x,this.y],t)};const Ke=Ze;var Je=.046875,Qe=.01953125,$e=.01068115234375;function ti(t){var e=[];e[0]=1-t*(.25+t*(Je+t*(Qe+t*$e))),e[1]=t*(.75-t*(Je+t*(Qe+t*$e)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}function ei(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}function ii(t,e,i){for(var n=1/(1-e),r=t,s=20;s;--s){var o=Math.sin(r),a=1-e*o*o;if(r-=a=(ei(r,o,Math.cos(r),i)-t)*(a*Math.sqrt(a))*n,Math.abs(a)<Ct)return r}return r}const ni={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=ti(this.es),this.ml0=ei(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n,r=t.x,s=t.y,o=$t(r-this.long0),a=Math.sin(s),h=Math.cos(s);if(this.es){var l=h*o,c=Math.pow(l,2),u=this.ep2*Math.pow(h,2),d=Math.pow(u,2),f=Math.abs(h)>Ct?Math.tan(s):0,p=Math.pow(f,2),g=Math.pow(p,2);e=1-this.es*Math.pow(a,2),l/=Math.sqrt(e);var m=ei(s,a,h,this.en);i=this.a*(this.k0*l*(1+c/6*(1-p+u+c/20*(5-18*p+g+14*u-58*p*u+c/42*(61+179*g-g*p-479*p)))))+this.x0,n=this.a*(this.k0*(m-this.ml0+a*o*l/2*(1+c/12*(5-p+9*u+4*d+c/30*(61+g-58*p+270*u-330*p*u+c/56*(1385+543*g-g*p-3111*p))))))+this.y0}else{var y=h*Math.sin(o);if(Math.abs(Math.abs(y)-1)<Ct)return 93;if(i=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,n=h*Math.cos(o)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(n))>=1){if(y-1>Ct)return 93;n=0}else n=Math.acos(n);s<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,r,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(i=ii(e=this.ml0+o/this.k0,this.es,this.en),Math.abs(i)<Mt){var a=Math.sin(i),h=Math.cos(i),l=Math.abs(h)>Ct?Math.tan(i):0,c=this.ep2*Math.pow(h,2),u=Math.pow(c,2),d=Math.pow(l,2),f=Math.pow(d,2);e=1-this.es*Math.pow(a,2);var p=s*Math.sqrt(e)/this.k0,g=Math.pow(p,2);n=i-(e*=l)*g/(1-this.es)*.5*(1-g/12*(5+3*d-9*c*d+c-4*u-g/30*(61+90*d-252*c*d+45*f+46*c-g/56*(1385+3633*d+4095*f+1574*f*d)))),r=$t(this.long0+p*(1-g/6*(1+2*d+c-g/20*(5+28*d+24*f+8*c*d+6*c-g/42*(61+662*d+1320*f+720*f*d))))/h)}else n=Mt*Qt(o),r=0;else{var m=Math.exp(s/this.k0),y=.5*(m-1/m),v=this.lat0+o/this.k0,_=Math.cos(v);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(y,2))),n=Math.asin(e),o<0&&(n=-n),r=0===y&&0===_?0:$t(Math.atan2(y,_)+this.long0)}return t.x=r,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function ri(t){var e=Math.exp(t);return(e-1/e)/2}function si(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function oi(t,e){for(var i,n=2*Math.cos(2*e),r=t.length-1,s=t[r],o=0;--r>=0;)i=n*s-o+t[r],o=s,s=i;return e+i*Math.sin(2*e)}function ai(t,e,i){for(var n,r,s=Math.sin(e),o=Math.cos(e),a=ri(i),h=function(t){var e=Math.exp(t);return(e+1/e)/2}(i),l=2*o*h,c=-2*s*a,u=t.length-1,d=t[u],f=0,p=0,g=0;--u>=0;)n=p,r=f,d=l*(p=d)-n-c*(f=g)+t[u],g=c*p-r+l*f;return[(l=s*h)*d-(c=o*a)*g,l*g+c*d]}const hi={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(ni.init.apply(this),this.forward=ni.forward,this.inverse=ni.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var n=oi(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var i,n=2*Math.cos(e),r=t.length-1,s=t[r],o=0;--r>=0;)i=n*s-o+t[r],o=s,s=i;return Math.sin(e)*i}(this.gtu,2*n))},forward:function(t){var e=$t(t.x-this.long0),i=t.y;i=oi(this.cbg,i);var n=Math.sin(i),r=Math.cos(i),s=Math.sin(e),o=Math.cos(e);i=Math.atan2(n,o*r),e=Math.atan2(s*r,si(n,r*o)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}(e*(1+e/(si(1,e)+1))),t<0?-e:e}(Math.tan(e));var a,h,l=ai(this.gtu,2*i,2*e);return i+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*i+this.Zb)+this.y0):(a=1/0,h=1/0),t.x=a,t.y=h,t},inverse:function(t){var e,i,n=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var s=ai(this.utg,2*r,2*n);r+=s[0],n+=s[1],n=Math.atan(ri(n));var o=Math.sin(r),a=Math.cos(r),h=Math.sin(n),l=Math.cos(n);r=Math.atan2(o*l,si(h,l*a)),e=$t((n=Math.atan2(h,l*a))+this.long0),i=oi(this.cgb,r)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},li={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*($t(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*At,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,hi.init.apply(this),this.forward=hi.forward,this.inverse=hi.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function ci(t,e){return Math.pow((1-t)/(1+t),e)}const ui={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Nt)/(Math.pow(Math.tan(.5*this.lat0+Nt),this.C)*ci(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Nt),this.C)*ci(this.e*Math.sin(i),this.ratexp))-Mt,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+Nt)/this.K,1/this.C),r=20;r>0&&(i=2*Math.atan(n*ci(this.e*Math.sin(t.y),-.5*this.e))-Mt,!(Math.abs(i-t.y)<1e-14));--r)t.y=i;return r?(t.x=e,t.y=i,t):null},names:["gauss"]},di={init:function(){ui.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,r;return t.x=$t(t.x-this.long0),ui.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=r*i*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,r,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),i=Math.cos(o),r=Math.asin(i*this.sinc0+t.y*e*this.cosc0/s),n=Math.atan2(t.x*e,s*this.cosc0*i-t.y*this.sinc0*e)}else r=this.phic0,n=0;return t.x=n,t.y=r,ui.inverse.apply(this,[t]),t.x=$t(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},fi={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ct&&(this.k0=.5*(1+Qt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ct&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ct&&(this.k0=.5*this.cons*Jt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/te(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Jt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Mt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,n,r,s,o,a=t.x,h=t.y,l=Math.sin(h),c=Math.cos(h),u=$t(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=Ct&&Math.abs(h+this.lat0)<=Ct?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(u)),t.x=this.a*e*c*Math.sin(u)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(u))+this.y0,t):(i=2*Math.atan(this.ssfn_(h,l,this.e))-Mt,r=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=Ct?(s=te(this.e,h*this.con,this.con*l),o=2*this.a*this.k0*s/this.cons,t.x=this.x0+o*Math.sin(a-this.long0),t.y=this.y0-this.con*o*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<Ct?(e=2*this.a*this.k0/(1+r*Math.cos(u)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*r*Math.cos(u))),t.y=e*(this.cosX0*n-this.sinX0*r*Math.cos(u))+this.y0),t.x=e*r*Math.sin(u)+this.x0,t))},inverse:function(t){var e,i,n,r,s;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,i=this.lat0,o<=Ct?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),e=Math.abs(this.coslat0)<Ct?this.lat0>0?$t(this.long0+Math.atan2(t.x,-1*t.y)):$t(this.long0+Math.atan2(t.x,t.y)):$t(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=Ct){if(o<=Ct)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=o*this.cons/(2*this.a*this.k0),i=this.con*ee(this.e,n),e=this.con*$t(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=Ct?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/o),e=$t(this.long0+Math.atan2(t.x*Math.sin(r),o*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),i=-1*ee(this.e,Math.tan(.5*(Mt+s)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(Mt+t))*Math.pow((1-e)/(1+e),.5*i)}},pi={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,r=2*n-Math.pow(n,2),s=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+s*e)/(1-s*e));this.K=o-this.alpha*a+this.alpha*s/2*h},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,h=0,l=s,c=-1e3,u=0;Math.abs(l-c)>1e-7;){if(++u>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=a,t.y=l,t},names:["somerc"]};var gi=1e-7;const mi={init:function(){var t,e,i,n,r,s,o,a,h,l,c,u=0,d=0,f=0,p=0,g=0,m=0,y=0;this.no_off=function(t){var e="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(e)}(this),this.no_rot="no_rot"in this;var v=!1;"alpha"in this&&(v=!0);var _=!1;if("rectified_grid_angle"in this&&(_=!0),v&&(y=this.alpha),_&&(u=this.rectified_grid_angle*At),v||_)d=this.longc;else if(f=this.long1,g=this.lat1,p=this.long2,m=this.lat2,Math.abs(g-m)<=gi||(t=Math.abs(g))<=gi||Math.abs(t-Mt)<=gi||Math.abs(Math.abs(this.lat0)-Mt)<=gi||Math.abs(Math.abs(m)-Mt)<=gi)throw new Error;var b=1-this.es;e=Math.sqrt(b),Math.abs(this.lat0)>Ct?(a=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*a*a,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/b),this.A=this.B*this.k0*e/t,(r=(n=this.B*e/(i*Math.sqrt(t)))*n-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow(te(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=r=1),v||_?(v?(c=Math.asin(Math.sin(y)/n),_||(u=y)):(c=u,y=Math.asin(n*Math.sin(c))),this.lam0=d-Math.asin(.5*(r-1/r)*Math.tan(c))/this.B):(s=Math.pow(te(this.e,g,Math.sin(g)),this.B),o=Math.pow(te(this.e,m,Math.sin(m)),this.B),r=this.E/s,h=(o-s)/(o+s),l=((l=this.E*this.E)-o*s)/(l+o*s),(t=f-p)<-Math.pi?p-=Et:t>Math.pi&&(p+=Et),this.lam0=$t(.5*(f+p)-Math.atan(l*Math.tan(.5*this.B*(f-p))/h)/this.B),c=Math.atan(2*Math.sin(this.B*$t(f-this.lam0))/(r-1/r)),u=y=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(Nt-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(Nt+r))},forward:function(t){var e,i,n,r,s,o,a,h,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Mt)>Ct){if(e=.5*((s=this.E/Math.pow(te(this.e,t.y,Math.sin(t.y)),this.B))-(o=1/s)),i=.5*(s+o),r=Math.sin(this.B*t.x),n=(e*this.singam-r*this.cosgam)/i,Math.abs(Math.abs(n)-1)<Ct)throw new Error;h=.5*this.ArB*Math.log((1-n)/(1+n)),o=Math.cos(this.B*t.x),a=Math.abs(o)<gi?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,o)}else h=t.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*t.y;return this.no_rot?(l.x=a,l.y=h):(a-=this.u_0,l.x=h*this.cosrot+a*this.sinrot,l.y=a*this.cosrot-h*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,i,n,r,s,o,a,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((n=Math.exp(-this.BrA*i))-1/n),s=.5*(n+1/n),a=((o=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(a)-1)<Ct)h.x=0,h.y=a<0?-Mt:Mt;else{if(h.y=this.E/Math.sqrt((1+a)/(1-a)),h.y=ee(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},yi={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ct)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=Jt(this.e,e,i),r=te(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Jt(this.e,s,o),h=te(this.e,this.lat2,s),l=te(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ct?this.ns=Math.log(n/a)/Math.log(r/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=Ct&&(i=Qt(i)*(Mt-2e-10));var n,r,s=Math.abs(Math.abs(i)-Mt);if(s>Ct)n=te(this.e,i,Math.sin(i)),r=this.a*this.f0*Math.pow(n,this.ns);else{if((s=i*this.ns)<=0)return null;r=0}var o=this.ns*$t(e-this.long0);return t.x=this.k0*(r*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(o))+this.y0,t},inverse:function(t){var e,i,n,r,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),i=1):(e=-Math.sqrt(o*o+a*a),i=-1);var h=0;if(0!==e&&(h=Math.atan2(i*o,i*a)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),-9999===(r=ee(this.e,n)))return null}else r=-Mt;return s=$t(h/this.ns+this.long0),t.x=s,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},vi={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,n,r,s,o,a,h=t.x,l=t.y,c=$t(h-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),s=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,n,r,s,o,a,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,o=e,a=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(a=1),o=t.y,l+=1}while(0===a&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function _i(t,e,i,n,r){return t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)}function bi(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function wi(t){return.375*t*(1+.25*t*(1+.46875*t))}function xi(t){return.05859375*t*t*(1+.75*t)}function Si(t){return t*t*t*(35/3072)}function Mi(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}function Ci(t){return Math.abs(t)<Mt?t:t-Qt(t)*Math.PI}function Ai(t,e,i,n,r){var s,o;s=t/e;for(var a=0;a<15;a++)if(s+=o=(t-(e*s-i*Math.sin(2*s)+n*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*i*Math.cos(2*s)+4*n*Math.cos(4*s)-6*r*Math.cos(6*s)),Math.abs(o)<=1e-10)return s;return NaN}const Li={init:function(){this.sphere||(this.e0=bi(this.es),this.e1=wi(this.es),this.e2=xi(this.es),this.e3=Si(this.es),this.ml0=this.a*_i(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,n=t.x,r=t.y;if(n=$t(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=Mi(this.a,this.e,s),h=Math.tan(r)*Math.tan(r),l=n*Math.cos(r),c=l*l,u=this.es*o*o/(1-this.es);e=a*l*(1-c*h*(1/6-(8-h+8*u)*c/120)),i=this.a*_i(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*s/o*c*(.5+(5-h+6*u)*c/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,r=t.y/this.a;if(this.sphere){var s=r+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(s))}else{var o=Ai(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Mt)<=Ct)return t.x=this.long0,t.y=Mt,r<0&&(t.y*=-1),t;var a=Mi(this.a,this.e,Math.sin(o)),h=a*a*a/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(o),2),c=n*this.a/a,u=c*c;e=o-a*Math.tan(o)/h*c*c*(.5-(1+3*l)*c*c/24),i=c*(1-u*(l/3+(1+3*l)*l*u/15))/Math.cos(o)}return t.x=$t(i+this.long0),t.y=Ci(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Ni(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}const Ei={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-Mt)<Ct?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Ct?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Ni(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,i=[];return i[0]=.3333333333333333*t,e=t*t,i[0]+=.17222222222222222*e,i[1]=.06388888888888888*e,e*=t,i[0]+=.10257936507936508*e,i[1]+=.0664021164021164*e,i[2]=.016415012942191543*e,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Ni(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n,r,s,o,a,h,l,c,u=t.x,d=t.y;if(u=$t(u-this.long0),this.sphere){if(s=Math.sin(d),c=Math.cos(d),n=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+c*n:1+this.sinph0*s+this.cosph0*c*n)<=Ct)return null;e=(i=Math.sqrt(2/i))*c*Math.sin(u),i*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<Ct)return null;i=Nt-.5*d,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(u),i*=n}}else{switch(a=0,h=0,l=0,n=Math.cos(u),r=Math.sin(u),s=Math.sin(d),o=Ni(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=o/this.qp,h=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:l=1+this.sinb1*a+this.cosb1*h*n;break;case this.EQUIT:l=1+h*n;break;case this.N_POLE:l=Mt+d,o=this.qp-o;break;case this.S_POLE:l=d-Mt,o=this.qp+o}if(Math.abs(l)<Ct)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),i=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*a-this.sinb1*h*n):(l=Math.sqrt(2/(1+h*n)))*a*this.ymf,e=this.xmf*l*h*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(l=Math.sqrt(o))*r,i=n*(this.mode===this.S_POLE?l:-l)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,r,s,o,a,h,l,c,u=t.x/this.a,d=t.y/this.a;if(this.sphere){var f,p=0,g=0;if((i=.5*(f=Math.sqrt(u*u+d*d)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(i),p=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(f)<=Ct?0:Math.asin(d*g/f),u*=g,d=p*f;break;case this.OBLIQ:i=Math.abs(f)<=Ct?this.lat0:Math.asin(p*this.sinph0+d*g*this.cosph0/f),u*=g*this.cosph0,d=(p-Math.sin(i)*this.sinph0)*f;break;case this.N_POLE:d=-d,i=Mt-i;break;case this.S_POLE:i-=Mt}e=0!==d||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,d):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,d*=this.dd,(o=Math.sqrt(u*u+d*d))<Ct)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*o/this.rq),n=Math.cos(r),u*=r=Math.sin(r),this.mode===this.OBLIQ?(a=n*this.sinb1+d*r*this.cosb1/o,s=this.qp*a,d=o*this.cosb1*n-d*this.sinb1*r):(a=d*r/o,s=this.qp*a,d=o*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),!(s=u*u+d*d))return t.x=this.long0,t.y=this.lat0,t;a=1-s/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(u,d),c=(h=Math.asin(a))+h,i=h+(l=this.apa)[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=$t(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Pi(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const Ii={init:function(){Math.abs(this.lat1+this.lat2)<Ct||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Jt(this.e3,this.sin_po,this.cos_po),this.qs1=Ni(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Jt(this.e3,this.sin_po,this.cos_po),this.qs2=Ni(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ni(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Ct?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=Ni(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*$t(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return t.x=o,t.y=a,t},inverse:function(t){var e,i,n,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),r=0,0!==e&&(r=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,i)),s=$t(r/this.ns0+this.long0),t.x=s,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,r,s,o=Pi(.5*e);if(t<Ct)return o;for(var a=t*t,h=1;h<=25;h++)if(o+=s=.5*(r=1-(n=t*(i=Math.sin(o)))*n)*r/Math.cos(o)*(e/(1-a)-i/r+.5/t*Math.log((1-n)/(1+n))),Math.abs(s)<=1e-7)return o;return null}},Oi={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,n,r,s,o,a,h=t.x,l=t.y;return n=$t(h-this.long0),e=Math.sin(l),i=Math.cos(l),r=Math.cos(n),(s=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(s)<=Ct?(o=this.x0+1*this.a*i*Math.sin(n)/s,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)/s):(o=this.x0+this.infinity_dist*i*Math.sin(n),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*r)),t.x=o,t.y=a,t},inverse:function(t){var e,i,n,r,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),i=Math.sin(r),o=Pi((n=Math.cos(r))*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),s=$t(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t},names:["gnom"]},Ri={init:function(){this.sphere||(this.k0=Jt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,n=t.x,r=t.y,s=$t(n-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=Ni(this.e,Math.sin(r));e=this.x0+this.a*this.k0*s,i=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=$t(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*Mt:Mt;for(var n,r,s,o,a=Math.asin(.5*e),h=0;h<30;h++)if(r=Math.sin(a),s=Math.cos(a),o=t*r,a+=n=Math.pow(1-o*o,2)/(2*s)*(e/(1-t*t)-r/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(n)<=1e-10)return a;return NaN}(this.e,2*t.y*this.k0/this.a),e=$t(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]},Fi={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,n=$t(e-this.long0),r=Ci(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,i=t.y;return t.x=$t(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Ci(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Ti={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=bi(this.es),this.e1=wi(this.es),this.e2=xi(this.es),this.e3=Si(this.es),this.ml0=this.a*_i(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,r=t.x,s=t.y,o=$t(r-this.long0);if(n=o*Math.sin(s),this.sphere)Math.abs(s)<=Ct?(e=this.a*o,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(s),i=this.a*(Ci(s-this.lat0)+(1-Math.cos(n))/Math.tan(s)));else if(Math.abs(s)<=Ct)e=this.a*o,i=-1*this.ml0;else{var a=Mi(this.a,this.e,Math.sin(s))/Math.tan(s);e=a*Math.sin(n),i=this.a*_i(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+a*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,n,r,s,o,a,h,l;if(n=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=Ct)e=$t(n/this.a+this.long0),i=0;else{var c;for(o=this.lat0+r/this.a,a=n*n/this.a/this.a+o*o,h=o,s=20;s;--s)if(h+=l=-1*(o*(h*(c=Math.tan(h))+1)-h-.5*(h*h+a)*c)/((h-o)/c-1),Math.abs(l)<=Ct){i=h;break}e=$t(this.long0+Math.asin(n*Math.tan(h)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=Ct)i=0,e=$t(this.long0+n/this.a);else{var u,d,f,p,g;for(o=(this.ml0+r)/this.a,a=n*n/this.a/this.a+o*o,h=o,s=20;s;--s)if(g=this.e*Math.sin(h),u=Math.sqrt(1-g*g)*Math.tan(h),d=this.a*_i(this.e0,this.e1,this.e2,this.e3,h),f=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=l=(o*(u*(p=d/this.a)+1)-p-.5*u*(p*p+a))/(this.es*Math.sin(2*h)*(p*p+a-2*o*p)/(4*u)+(o-p)*(u*f-2/Math.sin(2*h))-f),Math.abs(l)<=Ct){i=h;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=$t(this.long0+Math.asin(n*u/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]},ki={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,n=t.y-this.lat0,r=i-this.long0,s=n/St*1e-5,o=r,a=1,h=0;for(e=1;e<=10;e++)a*=s,h+=this.A[e]*a;var l,c=h,u=o,d=1,f=0,p=0,g=0;for(e=1;e<=6;e++)l=f*c+d*u,d=d*c-f*u,f=l,p=p+this.B_re[e]*d-this.B_im[e]*f,g=g+this.B_im[e]*d+this.B_re[e]*f;return t.x=g*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,i,n=t.x,r=t.y,s=n-this.x0,o=(r-this.y0)/this.a,a=s/this.a,h=1,l=0,c=0,u=0;for(e=1;e<=6;e++)i=l*o+h*a,h=h*o-l*a,l=i,c=c+this.C_re[e]*h-this.C_im[e]*l,u=u+this.C_im[e]*h+this.C_re[e]*l;for(var d=0;d<this.iterations;d++){var f,p=c,g=u,m=o,y=a;for(e=2;e<=6;e++)f=g*c+p*u,p=p*c-g*u,g=f,m+=(e-1)*(this.B_re[e]*p-this.B_im[e]*g),y+=(e-1)*(this.B_im[e]*p+this.B_re[e]*g);p=1,g=0;var v=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)f=g*c+p*u,p=p*c-g*u,g=f,v+=e*(this.B_re[e]*p-this.B_im[e]*g),_+=e*(this.B_im[e]*p+this.B_re[e]*g);var b=v*v+_*_;c=(m*v+y*_)/b,u=(y*v-m*_)/b}var w=c,x=u,S=1,M=0;for(e=1;e<=9;e++)S*=w,M+=this.D[e]*S;var C=this.lat0+M*St*1e5,A=this.long0+x;return t.x=A,t.y=C,t},names:["New_Zealand_Map_Grid","nzmg"]},ji={init:function(){},forward:function(t){var e=t.x,i=t.y,n=$t(e-this.long0),r=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=r,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=$t(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]},Di={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ti(this.es)},forward:function(t){var e,i,n=t.x,r=t.y;if(n=$t(n-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(r),o=20;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<Ct)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*n*(this.m+Math.cos(r)),i=this.a*this.C_y*r}else{var h=Math.sin(r),l=Math.cos(r);i=this.a*ei(r,h,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=Pi((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Pi(Math.sin(e)/this.n)),i=$t(i+this.long0),e=Ci(e)):(e=ii(t.y/this.a,this.es,this.en),(n=Math.abs(e))<Mt?(n=Math.sin(e),i=$t(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-Ct<Mt&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]},Bi={init:function(){},forward:function(t){for(var e=t.x,i=t.y,n=$t(e-this.long0),r=i,s=Math.PI*Math.sin(i);;){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<Ct)break}r/=2,Math.PI/2-Math.abs(i)<Ct&&(n=0);var a=.900316316158*this.a*n*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=a,t.y=h,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=$t(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var r=Math.asin(i);return t.x=n,t.y=r,t},names:["Mollweide","moll"]},qi={init:function(){Math.abs(this.lat1+this.lat2)<Ct||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=bi(this.es),this.e1=wi(this.es),this.e2=xi(this.es),this.e3=Si(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Jt(this.e,this.sinphi,this.cosphi),this.ml1=_i(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ct?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Jt(this.e,this.sinphi,this.cosphi),this.ml2=_i(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=_i(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var r=_i(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-r)}var s=this.ns*$t(i-this.long0),o=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=o,t.y=a,t},inverse:function(t){var e,i,n,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;return 0!==i&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=$t(this.long0+s/this.ns),n=Ci(this.g-i/this.a),t.x=r,t.y=n,t):(n=Ai(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),r=$t(this.long0+s/this.ns),t.x=r,t.y=n,t)},names:["Equidistant_Conic","eqdc"]},Gi={init:function(){this.R=this.a},forward:function(t){var e,i,n=t.x,r=t.y,s=$t(n-this.long0);Math.abs(r)<=Ct&&(e=this.x0+this.R*s,i=this.y0);var o=Pi(2*Math.abs(r/Math.PI));(Math.abs(s)<=Ct||Math.abs(Math.abs(r)-Mt)<=Ct)&&(e=this.x0,i=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/s-s/Math.PI),h=a*a,l=Math.sin(o),c=Math.cos(o),u=c/(l+c-1),d=u*u,f=u*(2/l-1),p=f*f,g=Math.PI*this.R*(a*(u-p)+Math.sqrt(h*(u-p)*(u-p)-(p+h)*(d-p)))/(p+h);s<0&&(g=-g),e=this.x0+g;var m=h+u;return g=Math.PI*this.R*(f*m-a*Math.sqrt((p+h)*(h+1)-m*m))/(p+h),i=r>=0?this.y0+g:this.y0-g,t.x=e,t.y=i,t},inverse:function(t){var e,i,n,r,s,o,a,h,l,c,u,d;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,s=(n=t.x/u)*n+(r=t.y/u)*r,u=3*(r*r/(h=-2*(o=-Math.abs(r)*(1+s))+1+2*r*r+s*s)+(2*(a=o-2*r*r+n*n)*a*a/h/h/h-9*o*a/h/h)/27)/(l=(o-a*a/3/h)/h)/(c=2*Math.sqrt(-l/3)),Math.abs(u)>1&&(u=u>=0?1:-1),d=Math.acos(u)/3,i=t.y>=0?(-c*Math.cos(d+Math.PI/3)-a/3/h)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-a/3/h)*Math.PI,e=Math.abs(n)<Ct?this.long0:$t(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-r*r)+s*s))/2/n),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},zi={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,r,s,o,a,h,l,c,u,d,f,p,g,m,y,v,_,b,w,x,S=t.x,M=t.y,C=Math.sin(t.y),A=Math.cos(t.y),L=$t(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Ct?(t.x=this.x0+this.a*(Mt-M)*Math.sin(L),t.y=this.y0-this.a*(Mt-M)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=Ct?(t.x=this.x0+this.a*(Mt+M)*Math.sin(L),t.y=this.y0+this.a*(Mt+M)*Math.cos(L),t):(v=this.sin_p12*C+this.cos_p12*A*Math.cos(L),y=(m=Math.acos(v))?m/Math.sin(m):1,t.x=this.x0+this.a*y*A*Math.sin(L),t.y=this.y0+this.a*y*(this.cos_p12*C-this.sin_p12*A*Math.cos(L)),t):(e=bi(this.es),i=wi(this.es),n=xi(this.es),r=Si(this.es),Math.abs(this.sin_p12-1)<=Ct?(s=this.a*_i(e,i,n,r,Mt),o=this.a*_i(e,i,n,r,M),t.x=this.x0+(s-o)*Math.sin(L),t.y=this.y0-(s-o)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=Ct?(s=this.a*_i(e,i,n,r,Mt),o=this.a*_i(e,i,n,r,M),t.x=this.x0+(s+o)*Math.sin(L),t.y=this.y0+(s+o)*Math.cos(L),t):(a=C/A,h=Mi(this.a,this.e,this.sin_p12),l=Mi(this.a,this.e,C),c=Math.atan((1-this.es)*a+this.es*h*this.sin_p12/(l*A)),_=0===(u=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(L)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(u)-Math.PI)<=Ct?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(L)*Math.cos(c)/Math.sin(u)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),m=h*_*(1-(b=_*_)*(g=(f=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es))*f)*(1-g)/6+(w=b*_)/8*(p=d*f)*(1-2*g)+(x=w*_)/120*(g*(4-7*g)-3*d*d*(1-7*g))-x*_/48*p),t.x=this.x0+m*Math.sin(u),t.y=this.y0+m*Math.cos(u),t))},inverse:function(t){var e,i,n,r,s,o,a,h,l,c,u,d,f,p,g,m,y,v,_,b,w,x,S;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Mt*this.a)return;return i=e/this.a,n=Math.sin(i),r=Math.cos(i),s=this.long0,Math.abs(e)<=Ct?o=this.lat0:(o=Pi(r*this.sin_p12+t.y*n*this.cos_p12/e),a=Math.abs(this.lat0)-Mt,s=Math.abs(a)<=Ct?this.lat0>=0?$t(this.long0+Math.atan2(t.x,-t.y)):$t(this.long0-Math.atan2(-t.x,t.y)):$t(this.long0+Math.atan2(t.x*n,e*this.cos_p12*r-t.y*this.sin_p12*n))),t.x=s,t.y=o,t}return h=bi(this.es),l=wi(this.es),c=xi(this.es),u=Si(this.es),Math.abs(this.sin_p12-1)<=Ct?(o=Ai(((d=this.a*_i(h,l,c,u,Mt))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,h,l,c,u),s=$t(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=Ct?(d=this.a*_i(h,l,c,u,Mt),o=Ai(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,h,l,c,u),s=$t(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),f=Mi(this.a,this.e,this.sin_p12),m=Math.cos(g),v=-(y=this.e*this.cos_p12*m)*y/(1-this.es),_=3*this.es*(1-v)*this.sin_p12*this.cos_p12*m/(1-this.es),x=1-v*(w=(b=e/f)-v*(1+v)*Math.pow(b,3)/6-_*(1+3*v)*Math.pow(b,4)/24)*w/2-b*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*m),s=$t(this.long0+Math.asin(Math.sin(g)*Math.sin(w)/Math.cos(p))),S=Math.sin(p),o=Math.atan2((S-this.es*x*this.sin_p12)*Math.tan(p),S*(1-this.es)),t.x=s,t.y=o,t)},names:["Azimuthal_Equidistant","aeqd"]},Ui={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n,r,s,o,a,h=t.x,l=t.y;return n=$t(h-this.long0),e=Math.sin(l),i=Math.cos(l),r=Math.cos(n),((s=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(s)<=Ct)&&(o=1*this.a*i*Math.sin(n),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)),t.x=o,t.y=a,t},inverse:function(t){var e,i,n,r,s,o,a;return t.x-=this.x0,t.y-=this.y0,i=Pi((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(i),r=Math.cos(i),o=this.long0,Math.abs(e)<=Ct?(a=this.lat0,t.x=o,t.y=a,t):(a=Pi(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.abs(this.lat0)-Mt,Math.abs(s)<=Ct?(o=this.lat0>=0?$t(this.long0+Math.atan2(t.x,-t.y)):$t(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=$t(this.long0+Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n)),t.x=o,t.y=a,t))},names:["ortho"]};function Wi(t,e,i,n){var r;return t<Ct?(n.value=1,r=0):(r=Math.atan2(e,i),Math.abs(r)<=Nt?n.value=1:r>Nt&&r<=Mt+Nt?(n.value=2,r-=Mt):r>Mt+Nt||r<=-(Mt+Nt)?(n.value=3,r=r>=0?r-Pt:r+Pt):(n.value=4,r+=Mt)),r}function Yi(t,e){var i=t+e;return i<-Pt?i+=Et:i>+Pt&&(i-=Et),i}const Hi={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Mt-Nt/2?this.face=5:this.lat0<=-(Mt-Nt/2)?this.face=6:Math.abs(this.long0)<=Nt?this.face=1:Math.abs(this.long0)<=Mt+Nt?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,r,s,o,a={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,5===this.face)r=Mt-e,i>=Nt&&i<=Mt+Nt?(h.value=1,n=i-Mt):i>Mt+Nt||i<=-(Mt+Nt)?(h.value=2,n=i>0?i-Pt:i+Pt):i>-(Mt+Nt)&&i<=-Nt?(h.value=3,n=i+Mt):(h.value=4,n=i);else if(6===this.face)r=Mt+e,i>=Nt&&i<=Mt+Nt?(h.value=1,n=-i+Mt):i<Nt&&i>=-Nt?(h.value=2,n=-i):i<-Nt&&i>=-(Mt+Nt)?(h.value=3,n=-i-Mt):(h.value=4,n=i>0?-i+Pt:-i-Pt);else{var l,c,u,d,f,p;2===this.face?i=Yi(i,+Mt):3===this.face?i=Yi(i,+Pt):4===this.face&&(i=Yi(i,-Mt)),d=Math.sin(e),f=Math.cos(e),p=Math.sin(i),l=f*Math.cos(i),c=f*p,u=d,1===this.face?n=Wi(r=Math.acos(l),u,c,h):2===this.face?n=Wi(r=Math.acos(c),u,-l,h):3===this.face?n=Wi(r=Math.acos(-l),u,-c,h):4===this.face?n=Wi(r=Math.acos(-c),u,l,h):(r=n=0,h.value=1)}return o=Math.atan(12/Pt*(n+Math.acos(Math.sin(n)*Math.cos(Nt))-Mt)),s=Math.sqrt((1-Math.cos(r))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(n))))),2===h.value?o+=Mt:3===h.value?o+=Pt:4===h.value&&(o+=1.5*Pt),a.x=s*Math.cos(o),a.y=s*Math.sin(o),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,i,n,r,s,o,a,h,l,c,u,d,f={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=2,e-=Mt):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=3,e=e<0?e+Pt:e-Pt):(p.value=4,e+=Mt),l=Pt/12*Math.tan(e),s=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),o=Math.atan(s),(a=1-(n=Math.cos(e))*n*(r=Math.tan(i))*r*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?a=-1:a>1&&(a=1),5===this.face)h=Math.acos(a),f.phi=Mt-h,1===p.value?f.lam=o+Mt:2===p.value?f.lam=o<0?o+Pt:o-Pt:3===p.value?f.lam=o-Mt:f.lam=o;else if(6===this.face)h=Math.acos(a),f.phi=h-Mt,1===p.value?f.lam=-o+Mt:2===p.value?f.lam=-o:3===p.value?f.lam=-o-Mt:f.lam=o<0?-o-Pt:-o+Pt;else{var g,m,y;l=(g=a)*g,m=(l+=(y=l>=1?0:Math.sqrt(1-l)*Math.sin(o))*y)>=1?0:Math.sqrt(1-l),2===p.value?(l=m,m=-y,y=l):3===p.value?(m=-m,y=-y):4===p.value&&(l=m,m=y,y=-l),2===this.face?(l=g,g=-m,m=l):3===this.face?(g=-g,m=-m):4===this.face&&(l=g,g=m,m=-l),f.phi=Math.acos(-y)-Mt,f.lam=Math.atan2(m,g),2===this.face?f.lam=Yi(f.lam,-Mt):3===this.face?f.lam=Yi(f.lam,-Pt):4===this.face&&(f.lam=Yi(f.lam,+Mt))}return 0!==this.es&&(c=f.phi<0?1:0,u=Math.tan(f.phi),d=this.b/Math.sqrt(u*u+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),c&&(f.phi=-f.phi)),f.lam+=this.long0,t.x=f.lam,t.y=f.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var Vi=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Xi=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Zi=.8487,Ki=1.3523,Ji=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const Qi={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=$t(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(11.459155902616464*i);n<0?n=0:n>=18&&(n=17);var r={x:Ji(Vi[n],i=Lt*(i-.08726646259971647*n))*e,y:Ji(Xi[n],i)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*Zi+this.x0,r.y=r.y*this.a*Ki+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*Zi),y:Math.abs(t.y-this.y0)/(this.a*Ki)};if(e.y>=1)e.x/=Vi[18][0],e.y=t.y<0?-Mt:Mt;else{var i=Math.floor(18*e.y);for(i<0?i=0:i>=18&&(i=17);;)if(Xi[i][0]>e.y)--i;else{if(!(Xi[i+1][0]<=e.y))break;++i}var n=Xi[i],r=5*(e.y-n[0])/(Xi[i+1][0]-n[0]);r=function(t,e,i,n){for(var r=e;n;--n){var s=t(r);if(r-=s,Math.abs(s)<1e-10)break}return r}((function(t){return(Ji(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),r,0,100),e.x/=Ji(Vi[i],r),e.y=(5*i+r)*At,t.y<0&&(e.y=-e.y)}return e.x=$t(e.x+this.long0),e},names:["Robinson","robin"]},$i={init:function(){this.name="geocent"},forward:function(t){return we(t,this.es,this.a)},inverse:function(t){return xe(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var tn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const en={init:function(){if(Object.keys(tn).forEach(function(t){if(void 0===this[t])this[t]=tn[t].def;else{if(tn[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);tn[t].num&&(this[t]=parseFloat(this[t]))}tn[t].degrees&&(this[t]=this[t]*At)}.bind(this)),Math.abs(Math.abs(this.lat0)-Mt)<Ct?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<Ct?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,n,r,s=Math.sin(t.y),o=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case 3:i=this.sinph0*s+this.cosph0*o*a;break;case 2:i=o*a;break;case 1:i=-s;break;case 0:i=s}switch(e=(i=this.pn1/(this.p-i))*o*Math.sin(t.x),this.mode){case 3:i*=this.cosph0*s-this.sinph0*o*a;break;case 2:i*=s;break;case 0:i*=-o*a;break;case 1:i*=o*a}return r=1/((n=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*r,i=n*r,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,n,r={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,i=this.pn1*t.y*this.cw*n,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var s=si(t.x,t.y);if(Math.abs(s)<Ct)r.x=0,r.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case 3:r.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(r.y))*s,t.x*=a*this.cosph0;break;case 2:r.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case 0:r.y=Math.asin(o),t.y=-t.y;break;case 1:r.y=-Math.asin(o)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t},names:["Tilted_Perspective","tpers"]},nn={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i,n,r,s=t.x,o=t.y;if(s-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var a=this.radius_p/si(this.radius_p*Math.cos(o),Math.sin(o));if(i=a*Math.cos(s)*Math.cos(o),n=a*Math.sin(s)*Math.cos(o),r=a*Math.sin(o),(this.radius_g-i)*i-n*n-r*r*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/si(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(r/si(n,e)))}else"sphere"===this.shape&&(e=Math.cos(o),i=Math.cos(s)*e,n=Math.sin(s)*e,r=Math.sin(o),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/si(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(r/si(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i,n,r,s=-1,o=0,a=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*si(1,a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*si(1,o));var h=a/this.radius_p;if(e=o*o+h*h+s*s,(n=(i=2*this.radius_g*s)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-i-Math.sqrt(n))/(2*e),s=this.radius_g+r*s,o*=r,a*=r,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+a*a+s*s,(n=(i=2*this.radius_g*s)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-i-Math.sqrt(n))/(2*e),s=this.radius_g+r*s,o*=r,a*=r,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var rn;Fe.defaultDatum="WGS84",Fe.Proj=be,Fe.WGS84=new Fe.Proj("WGS84"),Fe.Point=Ke,Fe.toPoint=Ne,Fe.defs=Vt,Fe.nadgrid=function(t,e){var i=new DataView(e),n=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(i),r=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:ge(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(i,n);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var s=function(t,e,i){for(var n=[],r=0;r<e.nSubgrids;r++){var s=ye(t,176,i),o=ve(t,176,s,i),a=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),h=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);n.push({ll:[pe(s.lowerLongitude),pe(s.lowerLatitude)],del:[pe(s.longitudeInterval),pe(s.latitudeInterval)],lim:[a,h],count:s.gridNodeCount,cvs:me(o)})}return n}(i,r,n),o={header:r,subgrids:s};return de[t]=o,o},Fe.transform=Pe,Fe.mgrs=qe,Fe.version="__VERSION__",(rn=Fe).Proj.projections.add(ni),rn.Proj.projections.add(hi),rn.Proj.projections.add(li),rn.Proj.projections.add(di),rn.Proj.projections.add(fi),rn.Proj.projections.add(pi),rn.Proj.projections.add(mi),rn.Proj.projections.add(yi),rn.Proj.projections.add(vi),rn.Proj.projections.add(Li),rn.Proj.projections.add(Ei),rn.Proj.projections.add(Ii),rn.Proj.projections.add(Oi),rn.Proj.projections.add(Ri),rn.Proj.projections.add(Fi),rn.Proj.projections.add(Ti),rn.Proj.projections.add(ki),rn.Proj.projections.add(ji),rn.Proj.projections.add(Di),rn.Proj.projections.add(Bi),rn.Proj.projections.add(qi),rn.Proj.projections.add(Gi),rn.Proj.projections.add(zi),rn.Proj.projections.add(Ui),rn.Proj.projections.add(Hi),rn.Proj.projections.add(Qi),rn.Proj.projections.add($i),rn.Proj.projections.add(en),rn.Proj.projections.add(nn);const sn=Fe;function on(t,e,i){sn.defs(t,e),function(t){bt=t;const e=Object.keys(t.defs),i=e.length;let n,r;for(n=0;n<i;++n){const i=e[n];if(!(0,yt.U2)(i)){const e=t.defs(i);let n=e.units;n||"longlat"!==e.projName||(n="degrees"),(0,yt.Sx)(new vt.Z({code:i,axisOrientation:e.axis,metersPerUnit:e.to_meter,units:n}))}}for(n=0;n<i;++n){const s=e[n],o=(0,yt.U2)(s);for(r=0;r<i;++r){const i=e[r],n=(0,yt.U2)(i);if(!(0,_t.U2)(s,i))if(t.defs[s]===t.defs[i])(0,yt.rM)([o,n]);else{const e=t(s,i);(0,yt.zY)(o,n,(0,yt.uA)(o,n,e.forward),(0,yt.uA)(n,o,e.inverse))}}}}(sn);const n=(0,yt.U2)(t),r=(0,yt.Ck)("EPSG:4326",n);let s=[i[1],i[2],i[3],i[0]];n.setWorldExtent(s),i[1]>i[3]&&(s=[i[1],i[2],i[3]+360,i[0]]);var o=(0,mt.applyTransform)(s,r,void 0,8);n.setExtent(o)}var an=o(2971);const hn="opacity",ln="visible",cn="extent",un="zIndex",dn="maxResolution",fn="minResolution",pn="maxZoom",gn="minZoom",mn="source";var yn=o(4187),vn=o(9515),_n=o(3983);class bn extends an.Z{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[hn]=void 0!==t.opacity?t.opacity:1,(0,vn.h)("number"==typeof e[hn],64),e[ln]=void 0===t.visible||t.visible,e[un]=t.zIndex,e[dn]=void 0!==t.maxResolution?t.maxResolution:1/0,e[fn]=void 0!==t.minResolution?t.minResolution:0,e[gn]=void 0!==t.minZoom?t.minZoom:-1/0,e[pn]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=(0,_n.uZ)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,yn.O3)()}getLayerStatesArray(t){return(0,yn.O3)()}getExtent(){return this.get(cn)}getMaxResolution(){return this.get(dn)}getMinResolution(){return this.get(fn)}getMinZoom(){return this.get(gn)}getMaxZoom(){return this.get(pn)}getOpacity(){return this.get(hn)}getSourceState(){return(0,yn.O3)()}getVisible(){return this.get(ln)}getZIndex(){return this.get(un)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(cn,t)}setMaxResolution(t){this.set(dn,t)}setMinResolution(t){this.set(fn,t)}setMaxZoom(t){this.set(pn,t)}setMinZoom(t){this.set(gn,t)}setOpacity(t){(0,vn.h)("number"==typeof t,64),this.set(hn,t)}setVisible(t){this.set(ln,t)}setZIndex(t){this.set(un,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const wn=bn;var xn=o(5487);var Sn=o(5818);const Mn=class extends wn{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(mn,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(mn)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,Sn.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=(0,Sn.oL)(t,xn.Z.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}render(t,e){const i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set("map",t)}getMapInternal(){return this.get("map")}setMap(t){this.mapPrecomposeKey_&&((0,Sn.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,Sn.bN)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,Sn.oL)(t,"precompose",(function(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);(0,vn.h)(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=(0,Sn.oL)(this,xn.Z.CHANGE,t.render,t),this.changed())}setSource(t){this.set(mn,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}},Cn="preload",An="useInterimTilesOnError",Ln=class extends Mn{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(Cn)}setPreload(t){this.set(Cn,t)}getUseInterimTilesOnError(){return this.get(An)}setUseInterimTilesOnError(t){this.set(An,t)}getData(t){return super.getData(t)}};var Nn=o(553),En=o(2706);class Pn extends En.Z{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,yn.O3)()}getData(t){return null}prepareFrame(t){return(0,yn.O3)()}renderFrame(t,e){return(0,yn.O3)()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(n,r)=>{const s=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,r,s)}}forEachFeatureAtCoordinate(t,e,i,n,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===Nn.default.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Nn.default.LOADED&&e!=Nn.default.ERROR&&t.addEventListener(xn.Z.CHANGE,this.boundHandleImageChange_),e==Nn.default.IDLE&&(t.load(),e=t.getState()),e==Nn.default.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const In=Pn;var On=o(291);class Rn extends On.ZP{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}}const Fn=Rn;var Tn=o(6101),kn=o(9706),jn=o(5537);const Dn=[];let Bn=null;const qn=class extends In{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,Tn.create)(),this.pixelTransform=(0,Tn.create)(),this.inversePixelTransform=(0,Tn.create)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let n;Bn||(Bn=(0,it.E4)(1,1,void 0,{willReadFrequently:!0})),Bn.clearRect(0,0,1,1);try{Bn.drawImage(t,e,i,1,1,0,0,1,1),n=Bn.getImageData(0,0,1,1).data}catch(t){return Bn=null,null}return n}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let r,s;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&(0,jn.fS)((0,kn._2)(t.style.backgroundColor),(0,kn._2)(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(s=e.getContext("2d"))}if(s&&s.canvas.style.transform===e?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=n;let t=r.style;t.position="absolute",t.width="100%",t.height="100%",s=(0,it.E4)();const e=s.canvas;r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=s}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=(0,mt.getTopLeft)(i),r=(0,mt.getTopRight)(i),s=(0,mt.getBottomRight)(i),o=(0,mt.getBottomLeft)(i);(0,Tn.apply)(e.coordinateToPixelTransform,n),(0,Tn.apply)(e.coordinateToPixelTransform,r),(0,Tn.apply)(e.coordinateToPixelTransform,s),(0,Tn.apply)(e.coordinateToPixelTransform,o);const a=this.inversePixelTransform;(0,Tn.apply)(a,n),(0,Tn.apply)(a,r),(0,Tn.apply)(a,s),(0,Tn.apply)(a,o),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const r=new Fn(t,this.inversePixelTransform,i,e);n.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_("prerender",t,e)}postRender(t,e){this.dispatchRenderEvent_("postrender",t,e)}getRenderTransform(t,e,i,n,r,s,o){const a=r/2,h=s/2,l=n/e,c=-l,u=-t[0]+o,d=-t[1];return(0,Tn.compose)(this.tempTransform,a,h,l,c,-i,u,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}};var Gn=o(3069);class zn extends Gn.Z{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(xn.Z.CHANGE)}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){(0,yn.O3)()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const n=e-i+1e3/60;return n>=this.transition_?1:function(t){return Math.pow(t,3)}(n/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const Un=zn;var Wn=o(8096);const Yn=class extends Un{constructor(t,e,i,n,r,s){super(t,e,s),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function(){const t=(0,it.E4)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,Wn.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},Hn=class{constructor(t,e,i,n,r,s){this.sourceProj_=t,this.targetProj_=e;let o={};const a=(0,yt.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return o[e]||(o[e]=a(t)),o[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&(0,mt.getWidth)(n)==(0,mt.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,mt.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,mt.getWidth)(this.targetProj_.getExtent()):null;const h=(0,mt.getTopLeft)(i),l=(0,mt.getTopRight)(i),c=(0,mt.getBottomRight)(i),u=(0,mt.getBottomLeft)(i),d=this.transformInv_(h),f=this.transformInv_(l),p=this.transformInv_(c),g=this.transformInv_(u),m=10+(s?Math.max(0,Math.ceil(Math.log2((0,mt.getArea)(i)/(s*s*256*256)))):0);if(this.addQuad_(h,l,c,u,d,f,p,g,m),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,i,n){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const n=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-n<this.sourceWorldWidth_/2&&(e.source=i)}}))}o={}}addTriangle_(t,e,i,n,r,s){this.triangles_.push({source:[n,r,s],target:[t,e,i]})}addQuad_(t,e,i,n,r,s,o,a,h){const l=(0,mt.boundingExtent)([r,s,o,a]),c=this.sourceWorldWidth_?(0,mt.getWidth)(l)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&c>.5&&c<1;let f=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const r=(0,mt.boundingExtent)([t,e,i,n]);f=(0,mt.getWidth)(r)/this.targetWorldWidth_>.25||f}!d&&this.sourceProj_.isGlobal()&&c&&(f=c>.25||f)}if(!f&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3])&&!(0,mt.intersects)(l,this.maxSourceExtent_))return;let p=0;if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])))if(h>0)f=!0;else if(p=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(o[0])&&isFinite(o[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1),1!=p&&2!=p&&4!=p&&8!=p)return;if(h>0){if(!f){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],n=this.transformInv_(e);let s;s=d?((0,_n.$W)(r[0],u)+(0,_n.$W)(o[0],u))/2-(0,_n.$W)(n[0],u):(r[0]+o[0])/2-n[0];const a=(r[1]+o[1])/2-n[1];f=s*s+a*a>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const l=[(e[0]+i[0])/2,(e[1]+i[1])/2],c=this.transformInv_(l),u=[(n[0]+t[0])/2,(n[1]+t[1])/2],d=this.transformInv_(u);this.addQuad_(t,e,l,u,r,s,c,d,h-1),this.addQuad_(u,l,i,n,d,c,o,a,h-1)}else{const l=[(t[0]+e[0])/2,(t[1]+e[1])/2],c=this.transformInv_(l),u=[(i[0]+n[0])/2,(i[1]+n[1])/2],d=this.transformInv_(u);this.addQuad_(t,l,u,n,r,c,d,a,h-1),this.addQuad_(l,e,i,u,c,s,o,d,h-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&p)&&this.addTriangle_(t,i,n,r,o,a),0==(14&p)&&this.addTriangle_(t,i,e,r,o,s),p&&(0==(13&p)&&this.addTriangle_(e,n,t,s,a,r),0==(7&p)&&this.addTriangle_(e,n,i,s,a,o))}calculateSourceExtent(){const t=(0,mt.createEmpty)();return this.triangles_.forEach((function(e,i,n){const r=e.source;(0,mt.extendCoordinate)(t,r[0]),(0,mt.extendCoordinate)(t,r[1]),(0,mt.extendCoordinate)(t,r[2])})),t}getTriangles(){return this.triangles_}};let Vn;const Xn=[];function Zn(t,e,i,n,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,r)),t.restore()}function Kn(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function Jn(t,e,i,n){const r=(0,yt.vs)(i,e,t);let s=(0,yt._Q)(e,n,i);const o=e.getMetersPerUnit();void 0!==o&&(s*=o);const a=t.getMetersPerUnit();void 0!==a&&(s/=a);const h=t.getExtent();if(!h||(0,mt.containsCoordinate)(h,r)){const e=(0,yt._Q)(t,s,r)/s;isFinite(e)&&e>0&&(s/=e)}return s}function Qn(t,e,i,n,r,s,o,a,h,l,c,u){const d=(0,it.E4)(Math.round(i*t),Math.round(i*e),Xn);if(u||(d.imageSmoothingEnabled=!1),0===h.length)return d.canvas;function f(t){return Math.round(t*i)/i}d.scale(i,i),d.globalCompositeOperation="lighter";const p=(0,mt.createEmpty)();h.forEach((function(t,e,i){(0,mt.extend)(p,t.extent)}));const g=(0,mt.getWidth)(p),m=(0,mt.getHeight)(p),y=(0,it.E4)(Math.round(i*g/n),Math.round(i*m/n),Xn);u||(y.imageSmoothingEnabled=!1);const v=i/n;h.forEach((function(t,e,i){const n=t.extent[0]-p[0],r=-(t.extent[3]-p[3]),s=(0,mt.getWidth)(t.extent),o=(0,mt.getHeight)(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*v,r*v,s*v,o*v)}));const _=(0,mt.getTopLeft)(o);return a.getTriangles().forEach((function(t,e,r){const o=t.source,a=t.target;let h=o[0][0],l=o[0][1],c=o[1][0],g=o[1][1],m=o[2][0],v=o[2][1];const b=f((a[0][0]-_[0])/s),w=f(-(a[0][1]-_[1])/s),x=f((a[1][0]-_[0])/s),S=f(-(a[1][1]-_[1])/s),M=f((a[2][0]-_[0])/s),C=f(-(a[2][1]-_[1])/s),A=h,L=l;h=0,l=0,c-=A,g-=L,m-=A,v-=L;const N=[[c,g,0,0,x-b],[m,v,0,0,M-b],[0,0,c,g,S-w],[0,0,m,v,C-w]],E=(0,_n.SV)(N);if(E){if(d.save(),d.beginPath(),function(){if(void 0===Vn){const t=(0,it.E4)(6,6,Xn);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Zn(t,4,5,4,0),Zn(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;Vn=Kn(e,0)||Kn(e,4)||Kn(e,8),(0,it.jy)(t),Xn.push(t.canvas)}return Vn}()||!u){d.moveTo(x,S);const t=4,e=b-x,i=w-S;for(let n=0;n<t;n++)d.lineTo(x+f((n+1)*e/t),S+f(n*i/(t-1))),n!=t-1&&d.lineTo(x+f((n+1)*e/t),S+f((n+1)*i/(t-1)));d.lineTo(M,C)}else d.moveTo(x,S),d.lineTo(b,w),d.lineTo(M,C);d.clip(),d.transform(E[0],E[2],E[1],E[3],b,w),d.translate(p[0]-A,p[3]-L),d.scale(n/i,-n/i),d.drawImage(y.canvas,0,0),d.restore()}})),(0,it.jy)(y),Xn.push(y.canvas),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach((function(t,e,i){const n=t.target,r=(n[0][0]-_[0])/s,o=-(n[0][1]-_[1])/s,a=(n[1][0]-_[0])/s,h=-(n[1][1]-_[1])/s,l=(n[2][0]-_[0])/s,c=-(n[2][1]-_[1])/s;d.beginPath(),d.moveTo(a,h),d.lineTo(r,o),d.lineTo(l,c),d.closePath(),d.stroke()})),d.restore()),d.canvas}const $n=class extends Un{constructor(t,e,i,n,r,s,o,a,h,l,c,u){super(r,0,{interpolate:!!u}),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=o,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=s||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=n.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const g=f?(0,mt.getIntersection)(d,f):d;if(0===(0,mt.getArea)(g))return void(this.state=4);const m=t.getExtent();m&&(p=p?(0,mt.getIntersection)(p,m):m);const y=n.getResolution(this.wrappedTileCoord_[0]),v=function(t,e,i,n){const r=(0,mt.getCenter)(i);let s=Jn(t,e,r,n);return(!isFinite(s)||s<=0)&&(0,mt.forEachCorner)(i,(function(i){return s=Jn(t,e,i,n),isFinite(s)&&s>0})),s}(t,i,g,y);if(!isFinite(v)||v<=0)return void(this.state=4);const _=void 0!==l?l:.5;if(this.triangulation_=new Hn(t,i,g,p,v*_,y),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=e.getZForResolution(v);let b=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(b[1]=(0,_n.uZ)(b[1],p[1],p[3]),b[3]=(0,_n.uZ)(b[3],p[1],p[3])):b=(0,mt.getIntersection)(b,p)),(0,mt.getArea)(b)){const t=e.getTileRangeForExtentAndZ(b,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){const t=h(this.sourceZ_,e,i,o);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=3;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],s=this.targetTileGrid_.getResolution(e),o=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Qn(n,r,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),s,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const i=e.getState();if(0==i||1==i){t++;const i=(0,Sn.oL)(e,xn.Z.CHANGE,(function(n){const r=e.getState();2!=r&&3!=r&&4!=r||((0,Sn.bN)(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(i)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,i){0==t.getState()&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Sn.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,it.jy)(this.canvas_.getContext("2d")),Xn.push(this.canvas_),this.canvas_=null),super.release()}};class tr{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function er(t,e,i,n,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=n,r):new tr(t,e,i,n)}const ir=tr;var nr=o(4307);const rr=class extends qn{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,mt.createEmpty)(),this.tmpTileRange_=new ir(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!n}getTile(t,e,i,n){const r=n.pixelRatio,s=n.viewState.projection,o=this.getLayer();let a=o.getSource().getTile(t,e,i,r,s);return 3==a.getState()&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=(0,Tn.apply)(e.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!(0,mt.containsCoordinate)(r,n))return null;const s=e.pixelRatio,o=e.viewState.projection,a=e.viewState,h=i.getRenderSource(),l=h.getTileGridForProjection(a.projection),c=h.getTilePixelRatio(e.pixelRatio);for(let t=l.getZForResolution(a.resolution);t>=l.getMinZoom();--t){const e=l.getTileCoordForCoordAndZ(n,t),i=h.getTile(t,e[1],e[2],s,o);if(!(i instanceof Yn||i instanceof $n)||i instanceof $n&&4===i.getState())return null;if(2!==i.getState())continue;const r=l.getOrigin(t),u=(0,nr.Pq)(l.getTileSize(t)),d=l.getResolution(t),f=Math.floor(c*((n[0]-r[0])/d-e[1]*u[0])),p=Math.floor(c*((r[1]-n[1])/d-e[2]*u[1])),g=Math.round(c*h.getGutterForProjection(a.projection));return this.getImageData(i.getImage(),f+g,p+g)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],n=t.viewState,r=n.projection,s=n.resolution,o=n.center,a=n.rotation,h=t.pixelRatio,l=this.getLayer(),c=l.getSource(),u=c.getRevision(),d=c.getTileGridForProjection(r),f=d.getZForResolution(s,c.zDirection),p=d.getResolution(f);let g=t.extent;const m=t.viewState.resolution,y=c.getTilePixelRatio(h),v=Math.round((0,mt.getWidth)(g)/m*h),_=Math.round((0,mt.getHeight)(g)/m*h),b=i.extent&&(0,yt.dY)(i.extent,r);b&&(g=(0,mt.getIntersection)(g,(0,yt.dY)(i.extent,r)));const w=p*v/2/y,x=p*_/2/y,S=[o[0]-w,o[1]-x,o[0]+w,o[1]+x],M=d.getTileRangeForExtentAndZ(g,f),C={};C[f]={};const A=this.createLoadedTileFinder(c,r,C),L=this.tmpExtent,N=this.tmpTileRange_;this.newTiles_=!1;const E=a?(0,mt.getRotatedViewport)(n.center,m,a,t.size):void 0;for(let e=M.minX;e<=M.maxX;++e)for(let n=M.minY;n<=M.maxY;++n){if(a&&!d.tileCoordIntersectsViewport([f,e,n],E))continue;const r=this.getTile(f,e,n,t);if(this.isDrawableTile(r)){const e=(0,yn.sq)(this);if(2==r.getState()){C[f][r.tileCoord.toString()]=r;let t=r.inTransition(e);t&&1!==i.opacity&&(r.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(r)||(this.newTiles_=!0)}if(1===r.getAlpha(e,t.time))continue}const s=d.getTileCoordChildTileRange(r.tileCoord,N,L);let o=!1;s&&(o=A(f+1,s)),o||d.forEachTileCoordParentTileRange(r.tileCoord,A,N,L)}const P=p/s*h/y;(0,Tn.compose)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,a,-v/2,-_/2);const I=(0,Tn.toString)(this.pixelTransform);this.useContainer(e,I,this.getBackground(t));const O=this.context,R=O.canvas;(0,Tn.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,Tn.compose)(this.tempTransform,v/2,_/2,P,P,0,-v/2,-_/2),R.width!=v||R.height!=_?(R.width=v,R.height=_):this.containerReused||O.clearRect(0,0,v,_),b&&this.clipUnrotated(O,t,b),c.getInterpolate()||(O.imageSmoothingEnabled=!1),this.preRender(O,t),this.renderedTiles.length=0;let F,T,k,j=Object.keys(C).map(Number);j.sort(jn.j2),1!==i.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(F=[],T=[]):j=j.reverse();for(let e=j.length-1;e>=0;--e){const i=j[e],n=c.getTilePixelSize(i,h,r),s=d.getResolution(i)/p,o=n[0]*s*P,a=n[1]*s*P,l=d.getTileCoordForCoordAndZ((0,mt.getTopLeft)(S),i),u=d.getTileCoordExtent(l),g=(0,Tn.apply)(this.tempTransform,[y*(u[0]-S[0])/p,y*(S[3]-u[3])/p]),m=y*c.getGutterForProjection(r),v=C[i];for(const e in v){const n=v[e],r=n.tileCoord,s=l[1]-r[1],h=Math.round(g[0]-(s-1)*o),u=l[2]-r[2],d=Math.round(g[1]-(u-1)*a),p=Math.round(g[0]-s*o),y=Math.round(g[1]-u*a),_=h-p,b=d-y,w=f===i,x=w&&1!==n.getAlpha((0,yn.sq)(this),t.time);let S=!1;if(!x)if(F){k=[p,y,p+_,y,p+_,y+b,p,y+b];for(let t=0,e=F.length;t<e;++t)if(f!==i&&i<T[t]){const e=F[t];(0,mt.intersects)([p,y,p+_,y+b],[e[0],e[3],e[4],e[7]])&&(S||(O.save(),S=!0),O.beginPath(),O.moveTo(k[0],k[1]),O.lineTo(k[2],k[3]),O.lineTo(k[4],k[5]),O.lineTo(k[6],k[7]),O.moveTo(e[6],e[7]),O.lineTo(e[4],e[5]),O.lineTo(e[2],e[3]),O.lineTo(e[0],e[1]),O.clip())}F.push(k),T.push(i)}else O.clearRect(p,y,_,b);this.drawTileImage(n,t,p,y,_,b,m,w),F&&!x?(S&&O.restore(),this.renderedTiles.unshift(n)):this.renderedTiles.push(n),this.updateUsedTiles(t.usedTiles,c,n)}}return this.renderedRevision=u,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!(0,mt.equals)(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=h,this.renderedProjection=r,this.manageTilePyramid(t,c,d,h,r,g,f,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(O,t),i.extent&&O.restore(),O.imageSmoothingEnabled=!0,I!==R.style.transform&&(R.style.transform=I),this.container}drawTileImage(t,e,i,n,r,s,o,a){const h=this.getTileImage(t);if(!h)return;const l=(0,yn.sq)(this),c=e.layerStatesArray[e.layerIndex],u=c.opacity*(a?t.getAlpha(l,e.time):1),d=u!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(h,o,o,h.width-2*o,h.height-2*o,i,n,r,s),d&&this.context.restore(),u!==c.opacity?e.animate=!0:a&&t.endTransition(l)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(t,e,i){const n=(0,yn.sq)(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const n=(0,yn.sq)(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}manageTilePyramid(t,e,i,n,r,s,o,a,h){const l=(0,yn.sq)(e);l in t.wantedTiles||(t.wantedTiles[l]={});const c=t.wantedTiles[l],u=t.tileQueue,d=i.getMinZoom(),f=t.viewState.rotation,p=f?(0,mt.getRotatedViewport)(t.viewState.center,t.viewState.resolution,f,t.size):void 0;let g,m,y,v,_,b,w=0;for(b=d;b<=o;++b)for(m=i.getTileRangeForExtentAndZ(s,b,m),y=i.getResolution(b),v=m.minX;v<=m.maxX;++v)for(_=m.minY;_<=m.maxY;++_)f&&!i.tileCoordIntersectsViewport([b,v,_],p)||(o-b<=a?(++w,g=e.getTile(b,v,_,n,r),0==g.getState()&&(c[g.getKey()]=!0,u.isKeyQueued(g.getKey())||u.enqueue([g,l,i.getTileCoordCenter(g.tileCoord),y])),void 0!==h&&h(g)):e.useTile(b,v,_,r));e.updateCacheSize(w,r)}},sr=class extends Ln{constructor(t){super(t)}createRenderer(){return new rr(this)}},or=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return(0,vn.h)(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return(0,vn.h)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,vn.h)(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}};function ar(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function hr(t,e,i){return t+"/"+e+"/"+i}function lr(t){return hr(t[0],t[1],t[2])}function cr(t){return(t[1]<<t[0])+t[2]}const ur=class extends or{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey().split("/").map(Number)[0];this.forEach((e=>{e.tileCoord[0]!==t&&(this.remove(lr(e.tileCoord)),e.release())}))}};class dr extends an.Z{constructor(t){super(),this.projection=(0,yt.U2)(t.projection),this.attributions_=fr(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,i){e.viewResolver=t,e.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=fr(t),this.changed()}setState(t){this.state_=t,this.changed()}}function fr(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const pr=dr;var gr=o(3746);const mr=[0,0,0],yr=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,vn.h)((0,jn.pT)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(let t=0,i=this.resolutions_.length-1;t<i;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,vn.h)(this.origins_.length==this.resolutions_.length,20));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=(0,mt.getTopLeft)(i)),(0,vn.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,vn.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,(0,vn.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const n=new ir(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){const t=this.getTileRangeForExtentAndZ(i,e);n.minX=Math.max(t.minX,n.minX),n.maxX=Math.min(t.maxX,n.maxX),n.minY=Math.max(t.minY,n.minY),n.maxY=Math.min(t.maxY,n.maxY)}return n}),this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e);for(let t=n.minX,r=n.maxX;t<=r;++t)for(let r=n.minY,s=n.maxY;r<=s;++r)i([e,t,r])}forEachTileCoordParentTileRange(t,e,i,n){let r,s,o,a=null,h=t[0]-1;for(2===this.zoomFactor_?(s=t[1],o=t[2]):a=this.getTileCoordExtent(t,n);h>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),o=Math.floor(o/2),r=er(s,s,o,o,i)):r=this.getTileRangeForExtentAndZ(a,h,i),e(h,r))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],n=2*t[2];return er(i,i+1,n,n+1,e)}const n=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],r=t[1],s=t[2];if(e===n)return er(r,s,r,s,i);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-n),o=Math.floor(r*t),a=Math.floor(s*t);return e<n?er(o,o,a,a,i):er(o,Math.floor(t*(r+1))-1,a,Math.floor(t*(s+1))-1,i)}const o=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e,i)}getTileRangeExtent(t,e,i){const n=this.getOrigin(t),r=this.getResolution(t),s=(0,nr.Pq)(this.getTileSize(t),this.tmpSize_),o=n[0]+e.minX*s[0]*r,a=n[0]+(e.maxX+1)*s[0]*r,h=n[1]+e.minY*s[1]*r,l=n[1]+(e.maxY+1)*s[1]*r;return(0,mt.createOrUpdate)(o,h,a,l,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,mr);const n=mr[1],r=mr[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,mr),er(n,mr[1],r,mr[2],i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=(0,nr.Pq)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=(0,nr.Pq)(this.getTileSize(t[0]),this.tmpSize_),s=i[0]+t[1]*r[0]*n,o=i[1]-(t[2]+1)*r[1]*n,a=s+r[0]*n,h=o+r[1]*n;return(0,mt.createOrUpdate)(s,o,a,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,r){const s=this.getZForResolution(i),o=i/this.getResolution(s),a=this.getOrigin(s),h=(0,nr.Pq)(this.getTileSize(s),this.tmpSize_);let l=o*(t-a[0])/i/h[0],c=o*(a[1]-e)/i/h[1];return n?(l=(0,_n.mD)(l,5)-1,c=(0,_n.mD)(c,5)-1):(l=(0,_n.GW)(l,5),c=(0,_n.GW)(c,5)),ar(s,l,c,r)}getTileCoordForXYAndZ_(t,e,i,n,r){const s=this.getOrigin(i),o=this.getResolution(i),a=(0,nr.Pq)(this.getTileSize(i),this.tmpSize_);let h=(t-s[0])/o/a[0],l=(s[1]-e)/o/a[1];return n?(h=(0,_n.mD)(h,5)-1,l=(0,_n.mD)(l,5)-1):(h=(0,_n.GW)(h,5),l=(0,_n.GW)(l,5)),ar(i,h,l,r)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=(0,jn.h7)(this.resolutions_,t,e||0);return(0,_n.uZ)(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,gr.mV)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i}};function vr(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,i,n){return function(t,e,i,n){n=void 0!==n?n:"top-left";const r=_r(t,undefined,i);return new yr({extent:t,origin:(0,mt.getCorner)(t,n),resolutions:r,tileSize:i})}(br(t),0,void 0,void 0)}(t),t.setDefaultTileGrid(e)),e}function _r(t,e,i,n){e=void 0!==e?e:42,i=(0,nr.Pq)(void 0!==i?i:256);const r=(0,mt.getHeight)(t),s=(0,mt.getWidth)(t);n=n>0?n:Math.max(s/i[0],r/i[1]);const o=e+1,a=new Array(o);for(let t=0;t<o;++t)a[t]=n/Math.pow(2,t);return a}function br(t){let e=(t=(0,yt.U2)(t)).getExtent();if(!e){const i=180*yt.Wm.degrees/t.getMetersPerUnit();e=(0,mt.createOrUpdate)(-i,-i,i,i)}return e}class wr extends On.ZP{constructor(t,e){super(t),this.tile=e}}const xr=class extends pr{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;this.tileGrid&&(0,nr.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new ur(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,n){const r=this.getTileCacheForProjection(t);if(!r)return!1;let s,o,a,h=!0;for(let t=i.minX;t<=i.maxX;++t)for(let l=i.minY;l<=i.maxY;++l)o=hr(e,t,l),a=!1,r.containsKey(o)&&(s=r.get(o),a=2===s.getState(),a&&(a=!1!==n(s))),a||(h=!1);return h}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,n,r){return(0,yn.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:vr(t)}getTileCacheForProjection(t){const e=this.getProjection();return(0,vn.h)(null===e||(0,yt.OP)(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),s=(0,nr.Pq)(n.getTileSize(t),this.tmpSize);return 1==r?s:(0,nr.bA)(s,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,i){const n=e[0],r=t.getTileCoordCenter(e),s=br(i);if(!(0,mt.containsCoordinate)(s,r)){const e=(0,mt.getWidth)(s),i=Math.ceil((s[0]-r[0])/e);return r[0]+=e*i,t.getTileCoordForCoordAndZ(r,n)}return e}(i,t,e)),function(t,e){const i=t[0],n=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const s=e.getFullTileRange(i);return!s||s.containsXY(n,r)}(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,n){}};function Sr(t,e){const i=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,h){if(o)return t.replace(i,o[0].toString()).replace(n,o[1].toString()).replace(r,o[2].toString()).replace(s,(function(){const t=o[0],i=e.getFullTileRange(t);return(0,vn.h)(i,55),(i.getHeight()-o[2]-1).toString()}))}}function Mr(t){return 1===t.length?t[0]:function(e,i,n){if(!e)return;const r=cr(e),s=(0,_n.$W)(r,t.length);return t[s](e,i,n)}}function Cr(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const n=i[1].charCodeAt(0),r=i[2].charCodeAt(0);let s;for(s=n;s<=r;++s)e.push(t.replace(i[0],String.fromCharCode(s)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const n=parseInt(i[2],10);for(let r=parseInt(i[1],10);r<=n;r++)e.push(t.replace(i[0],r.toString()));return e}return e.push(t),e}class Ar extends xr{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Ar.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=(0,yn.sq)(e),n=e.getState();let r;1==n?(this.tileLoadingKeys_[i]=!0,r="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=3==n?"tileloaderror":2==n?"tileloadend":void 0),null!=r&&this.dispatchEvent(new wr(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=Cr(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){const i=t.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=Sr(t[r],e);return Mr(n)}(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const n=hr(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const Lr=Ar;function Nr(t,e){t.getImage().src=e}const Er=class extends Lr{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Nr,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:Yn,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const t in this.tileCacheForProjection){const n=this.tileCacheForProjection[t];n.expireCache(n==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!(0,yt.OP)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!(0,yt.OP)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,yt.OP)(e,t)))return this.tileGrid;const i=(0,yn.sq)(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=vr(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||(0,yt.OP)(e,t))return this.tileCache;const i=(0,yn.sq)(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new ur(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,e,i,n,r,s){const o=[t,e,i],a=this.getTileCoordForTileUrlFunction(o,r),h=a?this.tileUrlFunction(a,n,r):void 0,l=new this.tileClass(o,void 0!==h?0:4,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=s,l.addEventListener(xn.Z.CHANGE,this.handleTileChange.bind(this)),l}getTile(t,e,i,n,r){const s=this.getProjection();if(!s||!r||(0,yt.OP)(s,r))return this.getTileInternal(t,e,i,n,s||r);const o=this.getTileCacheForProjection(r),a=[t,e,i];let h;const l=lr(a);o.containsKey(l)&&(h=o.get(l));const c=this.getKey();if(h&&h.key==c)return h;const u=this.getTileGridForProjection(s),d=this.getTileGridForProjection(r),f=this.getTileCoordForTileUrlFunction(a,r),p=new $n(s,u,r,d,a,f,this.getTilePixelRatio(n),this.getGutter(),((t,e,i,n)=>this.getTileInternal(t,e,i,n,s)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return p.key=c,h?(p.interimTile=h,p.refreshInterimChain(),o.replace(l,p)):o.set(l,p),p}getTileInternal(t,e,i,n,r){let s=null;const o=hr(t,e,i),a=this.getKey();if(this.tileCache.containsKey(o)){if(s=this.tileCache.get(o),s.key!=a){const h=s;s=this.createTile_(t,e,i,n,r,a),0==h.getState()?s.interimTile=h.interimTile:s.interimTile=h,s.refreshInterimChain(),this.tileCache.replace(o,s)}}else s=this.createTile_(t,e,i,n,r,a),this.tileCache.set(o,s);return s}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const i=(0,yt.U2)(t);if(i){const t=(0,yn.sq)(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};function Pr(t,e){const i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));const n=i.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+n}const Ir=class extends Er{constructor(t){const e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",i=t.tileGrid;let n=t.urls;void 0===n&&void 0!==t.url&&(n=Cr(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:n,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=Mr(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction(Mr(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==e&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?Pr(t,i):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t}));const n=this.tileGrid,r=this.dimensions_;return function(i,s,o){if(!i)return;const a={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};Object.assign(a,r);let h=t;return h="KVP"==e?Pr(h,a):h.replace(/\{(\w+?)\}/g,(function(t,e){return a[e]})),h}}},Or=class extends Er{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:function(t){const e=t||{},i=e.extent||(0,yt.U2)("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:_r(i,e.maxZoom,e.tileSize,e.maxResolution)};return new yr(n)}({extent:br(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}};var Rr=o(1798);class Fr extends Rr.Z{constructor(t,e,i,n,r,s,o){const a=t.getExtent(),h=e.getExtent(),l=h?(0,mt.getIntersection)(i,h):i,c=Jn(t,e,(0,mt.getCenter)(l),n),u=new Hn(t,e,l,a,.5*c,n),d=s(u.calculateSourceExtent(),c,r),f=d?Nn.default.IDLE:Nn.default.EMPTY,p=d?d.getPixelRatio():1;super(i,n,p,f),this.targetProj_=e,this.maxSourceExtent_=a,this.triangulation_=u,this.targetResolution_=n,this.targetExtent_=i,this.sourceImage_=d,this.sourcePixelRatio_=p,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Nn.default.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==Nn.default.LOADED){const t=(0,mt.getWidth)(this.targetExtent_)/this.targetResolution_,e=(0,mt.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=Qn(t,e,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==Nn.default.IDLE){this.state=Nn.default.LOADING,this.changed();const t=this.sourceImage_.getState();t==Nn.default.LOADED||t==Nn.default.ERROR?this.reproject_():(this.sourceListenerKey_=(0,Sn.oL)(this.sourceImage_,xn.Z.CHANGE,(function(t){const e=this.sourceImage_.getState();e!=Nn.default.LOADED&&e!=Nn.default.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}unlistenSource_(){(0,Sn.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Tr=Fr;class kr extends On.ZP{constructor(t,e){super(t),this.image=e}}function jr(t,e){t.getImage().src=e}const Dr=class extends pr{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();return e&&(t=e[(0,jn.h7)(e,t,0)]),t}getImage(t,e,i,n){const r=this.getProjection();if(!r||!n||(0,yt.OP)(r,n))return r&&(n=r),this.getImageInternal(t,e,i,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,yt.OP)(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&(0,mt.equals)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Tr(r,n,t,e,i,((t,e,i)=>this.getImageInternal(t,e,i,r)),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,i,n){return(0,yn.O3)()}handleImageChange(t){const e=t.target;let i;switch(e.getState()){case Nn.default.LOADING:this.loading=!0,i="imageloadstart";break;case Nn.default.LOADED:this.loading=!1,i="imageloadend";break;case Nn.default.ERROR:this.loading=!1,i="imageloaderror";break;default:return}this.hasListener(i)&&this.dispatchEvent(new kr(i,e))}},Br="1.3.0";function qr(t,e){const i=(""+t).split("."),n=(""+e).split(".");for(let t=0;t<Math.max(i.length,n.length);t++){const e=parseInt(i[t]||"0",10),r=parseInt(n[t]||"0",10);if(e>r)return 1;if(r>e)return-1}return 0}const Gr=[101,101],zr=class extends Dr{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:jr,this.params_=Object.assign({},t.params),this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}getFeatureInfoUrl(t,e,i,n){if(void 0===this.url_)return;const r=(0,yt.U2)(i),s=this.getProjection();s&&s!==r&&(e=Jn(s,r,t,e),t=(0,yt.vs)(t,r,s));const o=(0,mt.getForViewAndSize)(t,e,0,Gr),a={SERVICE:"WMS",VERSION:Br,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(a,this.params_,n);const h=(0,_n.GW)((t[0]-o[0])/e,4),l=(0,_n.GW)((o[3]-t[1])/e,4);return a[this.v13_?"I":"X"]=h,a[this.v13_?"J":"Y"]=l,this.getRequestUrl_(o,Gr,1,s||r,a)}getLegendUrl(t,e){if(void 0===this.url_)return;const i={SERVICE:"WMS",VERSION:Br,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS;if(Array.isArray(t)&&1!==t.length)return;i.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,n=28e-5;i.SCALE=t*e/n}return Object.assign(i,e),Pr(this.url_,i)}getParams(){return this.params_}getImageInternal(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);const r=e/i,s=(0,mt.getCenter)(t),o=(0,_n.mD)((0,mt.getWidth)(t)/r,4),a=(0,_n.mD)((0,mt.getHeight)(t)/r,4),h=(0,mt.getForViewAndSize)(s,r,0,[o,a]),l=(0,_n.mD)(this.ratio_*(0,mt.getWidth)(t)/r,4),c=(0,_n.mD)(this.ratio_*(0,mt.getHeight)(t)/r,4),u=(0,mt.getForViewAndSize)(s,r,0,[l,c]),d=this.image_;if(d&&this.renderedRevision_==this.getRevision()&&d.getResolution()==e&&d.getPixelRatio()==i&&(0,mt.containsExtent)(d.getExtent(),h))return d;const f={SERVICE:"WMS",VERSION:Br,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(f,this.params_),this.imageSize_[0]=(0,_n.NM)((0,mt.getWidth)(u)/r,4),this.imageSize_[1]=(0,_n.NM)((0,mt.getHeight)(u)/r,4);const p=this.getRequestUrl_(u,this.imageSize_,i,n,f);return this.image_=new Wn.Z(u,e,i,p,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(xn.Z.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(t,e,i,n,r){if((0,vn.h)(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=i)switch(this.serverType_){case"geoserver":const t=90*i+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+t:r.FORMAT_OPTIONS="dpi:"+t;break;case"mapserver":r.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":r.DPI=90*i;break;default:(0,vn.h)(!1,8)}r.WIDTH=e[0],r.HEIGHT=e[1];const s=n.getAxisOrientation();let o;return o=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,r.BBOX=o.join(","),Pr(this.url_,r)}getUrl(){return this.url_}setImageLoadFunction(t){this.image_=null,this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){const t=this.params_.VERSION||Br;this.v13_=qr(t,"1.3")>=0}},Ur=class extends Er{constructor(t){t=t||{};const e=Object.assign({},t.params),i=!("TRANSPARENT"in e)||e.TRANSPARENT;super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,mt.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,n){const r=(0,yt.U2)(i),s=this.getProjection();let o=this.getTileGrid();o||(o=this.getTileGridForProjection(r));const a=o.getZForResolution(e,this.zDirection),h=o.getTileCoordForCoordAndZ(t,a);if(o.getResolutions().length<=h[0])return;let l=o.getResolution(h[0]),c=o.getTileCoordExtent(h,this.tmpExtent_),u=(0,nr.Pq)(o.getTileSize(h[0]),this.tmpSize);const d=this.gutter_;0!==d&&(u=(0,nr.f3)(u,d,this.tmpSize),c=(0,mt.buffer)(c,l*d,c)),s&&s!==r&&(l=Jn(s,r,t,l),c=(0,yt.$A)(c,r,s),t=(0,yt.vs)(t,r,s));const f={SERVICE:"WMS",VERSION:Br,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(f,this.params_,n);const p=Math.floor((t[0]-c[0])/l),g=Math.floor((c[3]-t[1])/l);return f[this.v13_?"I":"X"]=p,f[this.v13_?"J":"Y"]=g,this.getRequestUrl_(h,u,c,1,s||r,f)}getLegendUrl(t,e){if(void 0===this.urls[0])return;const i={SERVICE:"WMS",VERSION:Br,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS;if(Array.isArray(t)&&1!==t.length)return;i.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,n=28e-5;i.SCALE=t*e/n}return Object.assign(i,e),Pr(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,n,r,s){const o=this.urls;if(!o)return;if(s.WIDTH=e[0],s.HEIGHT=e[1],s[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(s.STYLES=""),1!=n)switch(this.serverType_){case"geoserver":const t=90*n+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+t:s.FORMAT_OPTIONS="dpi:"+t;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:(0,vn.h)(!1,52)}const a=r.getAxisOrientation(),h=i;if(this.v13_&&"ne"==a.substr(0,2)){let t;t=i[0],h[0]=i[1],h[1]=t,t=i[2],h[2]=i[3],h[3]=t}let l;return s.BBOX=h.join(","),l=1==o.length?o[0]:o[(0,_n.$W)(cr(t),o.length)],Pr(l,s)}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||Br;this.v13_=qr(t,"1.3")>=0}tileUrlFunction(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);const r=n.getResolution(t[0]);let s=n.getTileCoordExtent(t,this.tmpExtent_),o=(0,nr.Pq)(n.getTileSize(t[0]),this.tmpSize);const a=this.gutter_;0!==a&&(o=(0,nr.f3)(o,a,this.tmpSize),s=(0,mt.buffer)(s,r*a,s)),1!=e&&(o=(0,nr.bA)(o,e,this.tmpSize));const h={SERVICE:"WMS",VERSION:Br,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(h,this.params_),this.getRequestUrl_(t,o,s,e,i,h)}};var Wr=o(1090),Yr=o(2083),Hr=o(7538),Vr=o(2967),Xr=o(3042),Zr=o(8527),Kr=o(226),Jr=o(9241),Qr=o(9405);class $r extends Vr.ZP{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let e=this.getLayout();const i=t,n=[],r=[];for(let t=0,s=i.length;t<s;++t){const s=i[t];0===t&&(e=s.getLayout()),(0,jn.l7)(n,s.getFlatCoordinates()),r.push(n.length)}this.setFlatCoordinates(e,n),this.ends_=r}}appendLineString(t){this.flatCoordinates?(0,jn.l7)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new $r(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<(0,mt.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,Xr.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,Xr.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))}getCoordinateAtM(t,e,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,i=void 0!==i&&i,(0,Qr.dG)(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return(0,Jr.o1)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Yr.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[];let r=0;for(let s=0,o=e.length;s<o;++s){const o=e[s],a=new Yr.default(t.slice(r,o),i);n.push(a),r=o}return n}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const n=this.ends_,r=this.stride;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=(0,Qr.WW)(e,i,o,r,.5);(0,jn.l7)(t,a),i=o}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,Kr.UJ)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new $r(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return(0,gr.AW)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,Zr._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const ts=$r;var es=o(188);class is extends Vr.ZP{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?(0,jn.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new is(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<(0,mt.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;const r=this.flatCoordinates,s=this.stride;for(let o=0,a=r.length;o<a;o+=s){const a=(0,_n.bI)(t,e,r[o],r[o+1]);if(a<n){n=a;for(let t=0;t<s;++t)i[t]=r[o+t];i.length=s}}return n}getCoordinates(){return(0,Jr.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new es.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,n=[];for(let r=0,s=t.length;r<s;r+=i){const s=new es.default(t.slice(r,r+i),e);n.push(s)}return n}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let n=0,r=e.length;n<r;n+=i){const i=e[n],r=e[n+1];if((0,mt.containsXY)(t,i,r))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,Zr.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}const ns=is;var rs=o(2033),ss=o(3448),os=o(3157),as=o(4078),hs=o(9679);class ls extends Vr.ZP{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let n=this.getLayout();const r=t,s=[],o=[];for(let t=0,e=r.length;t<e;++t){const e=r[t];0===t&&(n=e.getLayout());const i=s.length,a=e.getEnds();for(let t=0,e=a.length;t<e;++t)a[t]+=i;(0,jn.l7)(s,e.getFlatCoordinates()),o.push(a)}e=n,t=s,i=o}void 0!==e&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;(0,jn.l7)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,n=e.length;t<n;++t)e[t]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const i=new ls(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,n){return n<(0,mt.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,Xr.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,Xr.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return(0,hs.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,as.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,os.dL)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,Jr.ug)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=function(t,e,i,n){const r=[];let s=(0,mt.createEmpty)();for(let o=0,a=i.length;o<a;++o){const a=i[o];s=(0,mt.createOrUpdateFromFlatCoordinates)(t,e,a[0],n),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,ss.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new ns(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,os.Oj)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,os.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,Kr.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new ls(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1];if(0!==e)for(let t=0,n=i.length;t<n;++t)i[t]-=e;return new rs.default(this.flatCoordinates.slice(e,n),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[];let r=0;for(let s=0,o=i.length;s<o;++s){const o=i[s].slice(),a=o[o.length-1];if(0!==r)for(let t=0,e=o.length;t<e;++t)o[t]-=r;const h=new rs.default(e.slice(r,a),t,o);n.push(h),r=a}return n}getType(){return"MultiPolygon"}intersectsExtent(t){return(0,gr.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,Zr.QT)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}const cs=ls,us=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?(0,yt.U2)(e.dataProjection):this.readProjection(t);e.extent&&i&&"tile-pixels"===i.getUnits()&&(i=(0,yt.U2)(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return(0,yn.O3)()}readFeature(t,e){return(0,yn.O3)()}readFeatures(t,e){return(0,yn.O3)()}readGeometry(t,e){return(0,yn.O3)()}readProjection(t){return(0,yn.O3)()}writeFeature(t,e){return(0,yn.O3)()}writeFeatures(t,e){return(0,yn.O3)()}writeGeometry(t,e){return(0,yn.O3)()}};function ds(t,e,i){const n=i?(0,yt.U2)(i.featureProjection):null,r=i?(0,yt.U2)(i.dataProjection):null;let s;if(s=n&&r&&!(0,yt.OP)(n,r)?(e?t.clone():t).transform(e?n:r,e?r:n):t,e&&i&&void 0!==i.decimals){const e=Math.pow(10,i.decimals),n=function(t){for(let i=0,n=t.length;i<n;++i)t[i]=Math.round(t[i]*e)/e;return t};s===t&&(s=t.clone()),s.applyTransform(n)}return s}function fs(t,e){const i=e?(0,yt.U2)(e.featureProjection):null,n=e?(0,yt.U2)(e.dataProjection):null;return i&&n&&!(0,yt.OP)(i,n)?(0,yt.$A)(t,n,i):t}const ps="http://www.w3.org/2001/XMLSchema-instance";function gs(t,e){return Os().createElementNS(t,e)}function ms(t,e){return ys(t,e,[]).join("")}function ys(t,e,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{let n;for(n=t.firstChild;n;n=n.nextSibling)ys(n,e,i)}return i}function vs(t){return"documentElement"in t}function _s(t){return(new DOMParser).parseFromString(t,"application/xml")}function bs(t,e){return function(i,n){const r=t.call(void 0!==e?e:this,i,n);if(void 0!==r){const t=n[n.length-1];(0,jn.l7)(t,r)}}}function ws(t,e){return function(i,n){const r=t.call(void 0!==e?e:this,i,n);void 0!==r&&n[n.length-1].push(r)}}function xs(t,e){return function(i,n){const r=t.call(void 0!==e?e:this,i,n);void 0!==r&&(n[n.length-1]=r)}}function Ss(t,e,i){return function(n,r){const s=t.call(void 0!==i?i:this,n,r);void 0!==s&&(r[r.length-1][void 0!==e?e:n.localName]=s)}}function Ms(t,e){return function(i,n,r){t.call(void 0!==e?e:this,i,n,r),r[r.length-1].node.appendChild(i)}}function Cs(t,e){return function(i,n,r){const s=n[n.length-1].node;let o=t;return void 0===o&&(o=r),gs(void 0!==e?e:s.namespaceURI,o)}}const As=Cs();function Ls(t,e,i,n){let r;for(r=e.firstElementChild;r;r=r.nextElementSibling){const e=t[r.namespaceURI];if(void 0!==e){const t=e[r.localName];void 0!==t&&t.call(n,r,i)}}}function Ns(t,e,i,n,r){return n.push(t),Ls(e,i,n,r),n.pop()}function Es(t,e,i,n,r,s,o){return r.push(t),function(t,e,i,n,r,s){const o=(void 0!==r?r:i).length;let a,h;for(let l=0;l<o;++l)a=i[l],void 0!==a&&(h=e.call(void 0!==s?s:this,a,n,void 0!==r?r[l]:void 0),void 0!==h&&t[h.namespaceURI][h.localName].call(s,h,a,n))}(e,i,n,r,s,o),r.pop()}let Ps,Is;function Os(){return void 0===Is&&"undefined"!=typeof document&&(Is=document.implementation.createDocument("","",null)),Is}const Rs=class extends us{constructor(){super(),this.xmlSerializer_=(void 0===Ps&&"undefined"!=typeof XMLSerializer&&(Ps=new XMLSerializer),Ps)}getType(){return"xml"}readFeature(t,e){if(!t)return null;if("string"==typeof t){const i=_s(t);return this.readFeatureFromDocument(i,e)}return vs(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}readFeatureFromDocument(t,e){const i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(!t)return[];if("string"==typeof t){const i=_s(t);return this.readFeaturesFromDocument(i,e)}return vs(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}readFeaturesFromDocument(t,e){const i=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&(0,jn.l7)(i,this.readFeaturesFromNode(n,e));return i}readFeaturesFromNode(t,e){return(0,yn.O3)()}readGeometry(t,e){if(!t)return null;if("string"==typeof t){const i=_s(t);return this.readGeometryFromDocument(i,e)}return vs(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(!t)return null;if("string"==typeof t){const e=_s(t);return this.readProjectionFromDocument(e)}return vs(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(t,e){return null}},Fs="http://www.opengis.net/gml",Ts=/^\s*$/;class ks extends Rs{constructor(t){super(),t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:ws(this.readFeaturesInternal),featureMembers:xs(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,e){const i=t.localName;let n=null;if("FeatureCollection"==i)n=Ns([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==i||"featureMember"==i||"member"==i){const r=e[0];let s=r.featureType,o=r.featureNS;const a="p",h="p0";if(!s&&t.childNodes){s=[],o={};for(let e=0,i=t.childNodes.length;e<i;++e){const i=t.childNodes[e];if(1===i.nodeType){const t=i.nodeName.split(":").pop();if(!s.includes(t)){let e="",n=0;const r=i.namespaceURI;for(const t in o){if(o[t]===r){e=t;break}++n}e||(e=a+n,o[e]=r),s.push(e+":"+t)}}}"featureMember"!=i&&(r.featureType=s,r.featureNS=o)}if("string"==typeof o){const t=o;o={},o[h]=t}const l={},c=Array.isArray(s)?s:[s];for(const t in o){const e={};for(let n=0,r=c.length;n<r;++n)(c[n].includes(":")?c[n].split(":")[0]:h)===t&&(e[c[n].split(":").pop()]="featureMembers"==i?ws(this.readFeatureElement,this):xs(this.readFeatureElement,this));l[o[t]]=e}n=Ns("featureMember"==i||"member"==i?void 0:[],l,t,e)}return null===n&&(n=[]),n}readGeometryOrExtent(t,e){const i=e[0];return i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Ns(null,this.GEOMETRY_PARSERS,t,e,this)}readExtentElement(t,e){const i=e[0],n=this.readGeometryOrExtent(t,e);return n?fs(n,i):void 0}readGeometryElement(t,e){const i=e[0],n=this.readGeometryOrExtent(t,e);return n?ds(n,!1,i):void 0}readFeatureElementInternal(t,e,i){let n;const r={};for(let s=t.firstElementChild;s;s=s.nextElementSibling){let t;const o=s.localName;0===s.childNodes.length||1===s.childNodes.length&&(3===s.firstChild.nodeType||4===s.firstChild.nodeType)?(t=ms(s,!1),Ts.test(t)&&(t=void 0)):(i&&(t="boundedBy"===o?this.readExtentElement(s,e):this.readGeometryElement(s,e)),t?"boundedBy"!==o&&(n=o):t=this.readFeatureElementInternal(s,e,!1));const a=s.attributes.length;if(a>0){t={_content_:t};for(let e=0;e<a;e++)t[s.attributes[e].name]=s.attributes[e].value}r[o]?(r[o]instanceof Array||(r[o]=[r[o]]),r[o].push(t)):r[o]=t}if(!i)return r;const s=new Wr.default(r);n&&s.setGeometryName(n);const o=t.getAttribute("fid")||function(t,e,i){return t.getAttributeNS(e,"id")||""}(t,this.namespace);return o&&s.setId(o),s}readFeatureElement(t,e){return this.readFeatureElementInternal(t,e,!0)}readPoint(t,e){const i=this.readFlatCoordinatesFromNode(t,e);if(i)return new es.default(i,"XYZ")}readMultiPoint(t,e){const i=Ns([],this.MULTIPOINT_PARSERS,t,e,this);if(i)return new ns(i)}readMultiLineString(t,e){const i=Ns([],this.MULTILINESTRING_PARSERS,t,e,this);if(i)return new ts(i)}readMultiPolygon(t,e){const i=Ns([],this.MULTIPOLYGON_PARSERS,t,e,this);if(i)return new cs(i)}pointMemberParser(t,e){Ls(this.POINTMEMBER_PARSERS,t,e,this)}lineStringMemberParser(t,e){Ls(this.LINESTRINGMEMBER_PARSERS,t,e,this)}polygonMemberParser(t,e){Ls(this.POLYGONMEMBER_PARSERS,t,e,this)}readLineString(t,e){const i=this.readFlatCoordinatesFromNode(t,e);if(i)return new Yr.default(i,"XYZ")}readFlatLinearRing(t,e){const i=Ns(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);if(i)return i}readLinearRing(t,e){const i=this.readFlatCoordinatesFromNode(t,e);if(i)return new Hr.Z(i,"XYZ")}readPolygon(t,e){const i=Ns([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(i&&i[0]){const t=i[0],e=[t.length];let n,r;for(n=1,r=i.length;n<r;++n)(0,jn.l7)(t,i[n]),e.push(t.length);return new rs.default(t,"XYZ",e)}}readFlatCoordinatesFromNode(t,e){return Ns(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}readGeometryFromNode(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null}readFeaturesFromNode(t,e){const i={featureType:this.featureType,featureNS:this.featureNS};return i&&Object.assign(i,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[i])||[]}readProjectionFromNode(t){return(0,yt.U2)(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}ks.prototype.namespace=Fs,ks.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},ks.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},ks.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},ks.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:ws(ks.prototype.pointMemberParser),pointMembers:ws(ks.prototype.pointMemberParser)}},ks.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:ws(ks.prototype.lineStringMemberParser),lineStringMembers:ws(ks.prototype.lineStringMemberParser)}},ks.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:ws(ks.prototype.polygonMemberParser),polygonMembers:ws(ks.prototype.polygonMemberParser)}},ks.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:ws(ks.prototype.readFlatCoordinatesFromNode)}},ks.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:ws(ks.prototype.readLineString)}},ks.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:ws(ks.prototype.readPolygon)}},ks.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:xs(ks.prototype.readFlatLinearRing)}};const js=ks;function Ds(t){return Bs(ms(t,!1))}function Bs(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function qs(t,e){t.appendChild(Os().createTextNode(e))}const Gs=Fs+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",zs={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Us extends js{constructor(t){super(t=t||{}),this.FEATURE_COLLECTION_PARSERS[Fs].featureMember=ws(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:Gs}readFlatCoordinates(t,e){const i=ms(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName;let r="enu";if(n){const t=(0,yt.U2)(n);t&&(r=t.getAxisOrientation())}const s=i.trim().split(/\s+/),o=[];for(let t=0,e=s.length;t<e;t++){const e=s[t].split(/,+/),i=parseFloat(e[0]),n=parseFloat(e[1]),a=3===e.length?parseFloat(e[2]):0;"en"===r.substr(0,2)?o.push(i,n,a):o.push(n,i,a)}return o}readBox(t,e){const i=Ns([null],this.BOX_PARSERS_,t,e,this);return(0,mt.createOrUpdate)(i[1][0],i[1][1],i[1][3],i[1][4])}innerBoundaryIsParser(t,e){const i=Ns(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)}outerBoundaryIsParser(t,e){const i=Ns(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)}GEOMETRY_NODE_FACTORY_(t,e,i){const n=e[e.length-1],r=n.multiSurface,s=n.surface,o=n.multiCurve;return Array.isArray(t)?i="Envelope":"MultiPolygon"===(i=t.getType())&&!0===r?i="MultiSurface":"Polygon"===i&&!0===s?i="Surface":"MultiLineString"===i&&!0===o&&(i="MultiCurve"),gs("http://www.opengis.net/gml",i)}writeFeatureElement(t,e,i){const n=e.getId();n&&t.setAttribute("fid",n);const r=i[i.length-1],s=r.featureNS,o=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[s]={});const a=[],h=[];if(e.hasProperties()){const t=e.getProperties();for(const e in t){const i=t[e];null!==i&&(a.push(e),h.push(i),e==o||"function"==typeof i.getSimplifiedGeometry?e in r.serializers[s]||(r.serializers[s][e]=Ms(this.writeGeometryElement,this)):e in r.serializers[s]||(r.serializers[s][e]=Ms(qs)))}}const l=Object.assign({},r);l.node=t,Es(l,r.serializers,Cs(void 0,s),h,i,a)}writeCurveOrLineString(t,e,i){const n=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){const n=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(n),this.writeCoordinates_(n,e,i)}else if("Curve"===t.nodeName){const n=gs(t.namespaceURI,"segments");t.appendChild(n),this.writeCurveSegments_(n,e,i)}}writeLineStringOrCurveMember(t,e,i){const n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeCurveOrLineString(n,e,i))}writeMultiCurveOrLineString(t,e,i){const n=i[i.length-1],r=n.hasZ,s=n.srsName,o=n.curve;s&&t.setAttribute("srsName",s);const a=e.getLineStrings();Es({node:t,hasZ:r,srsName:s,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)}writeGeometryElement(t,e,i){const n=i[i.length-1],r=Object.assign({},n);let s;r.node=t,s=Array.isArray(e)?fs(e,n):ds(e,!0,n),Es(r,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],i,void 0,this)}createCoordinatesNode_(t){const e=gs(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e}writeCoordinates_(t,e,i){const n=i[i.length-1],r=n.hasZ,s=n.srsName,o=e.getCoordinates(),a=o.length,h=new Array(a);for(let t=0;t<a;++t){const e=o[t];h[t]=this.getCoords_(e,s,r)}qs(t,h.join(" "))}writeCurveSegments_(t,e,i){const n=gs(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString(n,e,i)}writeSurfaceOrPolygon(t,e,i){const n=i[i.length-1],r=n.hasZ,s=n.srsName;if("PolygonPatch"!==t.nodeName&&s&&t.setAttribute("srsName",s),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){const n=e.getLinearRings();Es({node:t,hasZ:r,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,n,i,void 0,this)}else if("Surface"===t.nodeName){const n=gs(t.namespaceURI,"patches");t.appendChild(n),this.writeSurfacePatches_(n,e,i)}}RING_NODE_FACTORY_(t,e,i){const n=e[e.length-1],r=n.node,s=n.exteriorWritten;return void 0===s&&(n.exteriorWritten=!0),gs(r.namespaceURI,void 0!==s?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,e,i){const n=gs(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon(n,e,i)}writeRing(t,e,i){const n=gs(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing(n,e,i)}getCoords_(t,e,i){let n="enu";e&&(n=(0,yt.U2)(e).getAxisOrientation());let r="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return i&&(r+=","+(t[2]||0)),r}writePoint(t,e,i){const n=i[i.length-1],r=n.hasZ,s=n.srsName;s&&t.setAttribute("srsName",s);const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o);const a=e.getCoordinates();qs(o,this.getCoords_(a,s,r))}writeMultiPoint(t,e,i){const n=i[i.length-1],r=n.hasZ,s=n.srsName;s&&t.setAttribute("srsName",s);const o=e.getPoints();Es({node:t,hasZ:r,srsName:s},this.POINTMEMBER_SERIALIZERS,Cs("pointMember"),o,i,void 0,this)}writePointMember(t,e,i){const n=gs(t.namespaceURI,"Point");t.appendChild(n),this.writePoint(n,e,i)}writeLinearRing(t,e,i){const n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);const r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,i)}writeMultiSurfaceOrPolygon(t,e,i){const n=i[i.length-1],r=n.hasZ,s=n.srsName,o=n.surface;s&&t.setAttribute("srsName",s);const a=e.getPolygons();Es({node:t,hasZ:r,srsName:s,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)}writeSurfaceOrPolygonMember(t,e,i){const n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeSurfaceOrPolygon(n,e,i))}writeEnvelope(t,e,i){const n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);const r=[e[0]+" "+e[1],e[2]+" "+e[3]];Es({node:t},this.ENVELOPE_SERIALIZERS,As,r,i,["lowerCorner","upperCorner"],this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,i){const n=e[e.length-1].node;return gs("http://www.opengis.net/gml",zs[n.nodeName])}}Us.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:xs(Us.prototype.readFlatCoordinates)}},Us.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:Us.prototype.innerBoundaryIsParser,outerBoundaryIs:Us.prototype.outerBoundaryIsParser}},Us.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:ws(Us.prototype.readFlatCoordinates)}},Us.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:xs(js.prototype.readPoint),MultiPoint:xs(js.prototype.readMultiPoint),LineString:xs(js.prototype.readLineString),MultiLineString:xs(js.prototype.readMultiLineString),LinearRing:xs(js.prototype.readLinearRing),Polygon:xs(js.prototype.readPolygon),MultiPolygon:xs(js.prototype.readMultiPolygon),Box:xs(Us.prototype.readBox)}},Us.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ms(Us.prototype.writeCurveOrLineString),MultiCurve:Ms(Us.prototype.writeMultiCurveOrLineString),Point:Ms(Us.prototype.writePoint),MultiPoint:Ms(Us.prototype.writeMultiPoint),LineString:Ms(Us.prototype.writeCurveOrLineString),MultiLineString:Ms(Us.prototype.writeMultiCurveOrLineString),LinearRing:Ms(Us.prototype.writeLinearRing),Polygon:Ms(Us.prototype.writeSurfaceOrPolygon),MultiPolygon:Ms(Us.prototype.writeMultiSurfaceOrPolygon),Surface:Ms(Us.prototype.writeSurfaceOrPolygon),MultiSurface:Ms(Us.prototype.writeMultiSurfaceOrPolygon),Envelope:Ms(Us.prototype.writeEnvelope)}},Us.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ms(Us.prototype.writeLineStringOrCurveMember),curveMember:Ms(Us.prototype.writeLineStringOrCurveMember)}},Us.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Ms(Us.prototype.writeRing),innerBoundaryIs:Ms(Us.prototype.writeRing)}},Us.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ms(Us.prototype.writePointMember)}},Us.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ms(Us.prototype.writeSurfaceOrPolygonMember),polygonMember:Ms(Us.prototype.writeSurfaceOrPolygonMember)}},Us.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ms(qs),upperCorner:Ms(qs)}};const Ws=Us,Ys=Fs+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",Hs={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Vs extends js{constructor(t){super(t=t||{}),this.surface_=void 0!==t.surface&&t.surface,this.curve_=void 0!==t.curve&&t.curve,this.multiCurve_=void 0===t.multiCurve||t.multiCurve,this.multiSurface_=void 0===t.multiSurface||t.multiSurface,this.schemaLocation=t.schemaLocation?t.schemaLocation:Ys,this.hasZ=void 0!==t.hasZ&&t.hasZ}readMultiCurve(t,e){const i=Ns([],this.MULTICURVE_PARSERS,t,e,this);if(i)return new ts(i)}readFlatCurveRing(t,e){const i=Ns([],this.MULTICURVE_PARSERS,t,e,this),n=[];for(let t=0,e=i.length;t<e;++t)(0,jn.l7)(n,i[t].getFlatCoordinates());return n}readMultiSurface(t,e){const i=Ns([],this.MULTISURFACE_PARSERS,t,e,this);if(i)return new cs(i)}curveMemberParser(t,e){Ls(this.CURVEMEMBER_PARSERS,t,e,this)}surfaceMemberParser(t,e){Ls(this.SURFACEMEMBER_PARSERS,t,e,this)}readPatch(t,e){return Ns([null],this.PATCHES_PARSERS,t,e,this)}readSegment(t,e){return Ns([],this.SEGMENTS_PARSERS,t,e,this)}readPolygonPatch(t,e){return Ns([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)}readLineStringSegment(t,e){return Ns([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}interiorParser(t,e){const i=Ns(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)}exteriorParser(t,e){const i=Ns(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)}readSurface(t,e){const i=Ns([null],this.SURFACE_PARSERS,t,e,this);if(i&&i[0]){const t=i[0],e=[t.length];let n,r;for(n=1,r=i.length;n<r;++n)(0,jn.l7)(t,i[n]),e.push(t.length);return new rs.default(t,"XYZ",e)}}readCurve(t,e){const i=Ns([null],this.CURVE_PARSERS,t,e,this);if(i)return new Yr.default(i,"XYZ")}readEnvelope(t,e){const i=Ns([null],this.ENVELOPE_PARSERS,t,e,this);return(0,mt.createOrUpdate)(i[1][0],i[1][1],i[2][0],i[2][1])}readFlatPos(t,e){let i=ms(t,!1);const n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,r=[];let s;for(;s=n.exec(i);)r.push(parseFloat(s[1])),i=i.substr(s[0].length);if(""!==i)return;const o=e[0].srsName;let a="enu";if(o&&(a=(0,yt.U2)(o).getAxisOrientation()),"neu"===a){let t,e;for(t=0,e=r.length;t<e;t+=3){const e=r[t],i=r[t+1];r[t]=i,r[t+1]=e}}const h=r.length;return 2==h&&r.push(0),0!==h?r:void 0}readFlatPosList(t,e){const i=ms(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],r=n.srsName,s=n.srsDimension;let o="enu";r&&(o=(0,yt.U2)(r).getAxisOrientation());const a=i.split(/\s+/);let h,l,c,u=2;t.getAttribute("srsDimension")?u=Bs(t.getAttribute("srsDimension")):t.getAttribute("dimension")?u=Bs(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?u=Bs(t.parentNode.getAttribute("srsDimension")):s&&(u=Bs(s));const d=[];for(let t=0,e=a.length;t<e;t+=u)h=parseFloat(a[t]),l=parseFloat(a[t+1]),c=3===u?parseFloat(a[t+2]):0,"en"===o.substr(0,2)?d.push(h,l,c):d.push(l,h,c);return d}writePos_(t,e,i){const n=i[i.length-1],r=n.hasZ,s=r?"3":"2";t.setAttribute("srsDimension",s);const o=n.srsName;let a="enu";o&&(a=(0,yt.U2)(o).getAxisOrientation());const h=e.getCoordinates();let l;l="en"===a.substr(0,2)?h[0]+" "+h[1]:h[1]+" "+h[0],r&&(l+=" "+(h[2]||0)),qs(t,l)}getCoords_(t,e,i){let n="enu";e&&(n=(0,yt.U2)(e).getAxisOrientation());let r="en"===n.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return i&&(r+=" "+(t[2]||0)),r}writePosList_(t,e,i){const n=i[i.length-1],r=n.hasZ,s=r?"3":"2";t.setAttribute("srsDimension",s);const o=n.srsName,a=e.getCoordinates(),h=a.length,l=new Array(h);let c;for(let t=0;t<h;++t)c=a[t],l[t]=this.getCoords_(c,o,r);qs(t,l.join(" "))}writePoint(t,e,i){const n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);const r=gs(t.namespaceURI,"pos");t.appendChild(r),this.writePos_(r,e,i)}writeEnvelope(t,e,i){const n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);const r=[e[0]+" "+e[1],e[2]+" "+e[3]];Es({node:t},this.ENVELOPE_SERIALIZERS,As,r,i,["lowerCorner","upperCorner"],this)}writeLinearRing(t,e,i){const n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);const r=gs(t.namespaceURI,"posList");t.appendChild(r),this.writePosList_(r,e,i)}RING_NODE_FACTORY_(t,e,i){const n=e[e.length-1],r=n.node,s=n.exteriorWritten;return void 0===s&&(n.exteriorWritten=!0),gs(r.namespaceURI,void 0!==s?"interior":"exterior")}writeSurfaceOrPolygon(t,e,i){const n=i[i.length-1],r=n.hasZ,s=n.srsName;if("PolygonPatch"!==t.nodeName&&s&&t.setAttribute("srsName",s),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){const n=e.getLinearRings();Es({node:t,hasZ:r,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,n,i,void 0,this)}else if("Surface"===t.nodeName){const n=gs(t.namespaceURI,"patches");t.appendChild(n),this.writeSurfacePatches_(n,e,i)}}writeCurveOrLineString(t,e,i){const n=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){const n=gs(t.namespaceURI,"posList");t.appendChild(n),this.writePosList_(n,e,i)}else if("Curve"===t.nodeName){const n=gs(t.namespaceURI,"segments");t.appendChild(n),this.writeCurveSegments_(n,e,i)}}writeMultiSurfaceOrPolygon(t,e,i){const n=i[i.length-1],r=n.hasZ,s=n.srsName,o=n.surface;s&&t.setAttribute("srsName",s);const a=e.getPolygons();Es({node:t,hasZ:r,srsName:s,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)}writeMultiPoint(t,e,i){const n=i[i.length-1],r=n.srsName,s=n.hasZ;r&&t.setAttribute("srsName",r);const o=e.getPoints();Es({node:t,hasZ:s,srsName:r},this.POINTMEMBER_SERIALIZERS,Cs("pointMember"),o,i,void 0,this)}writeMultiCurveOrLineString(t,e,i){const n=i[i.length-1],r=n.hasZ,s=n.srsName,o=n.curve;s&&t.setAttribute("srsName",s);const a=e.getLineStrings();Es({node:t,hasZ:r,srsName:s,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)}writeRing(t,e,i){const n=gs(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing(n,e,i)}writeSurfaceOrPolygonMember(t,e,i){const n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeSurfaceOrPolygon(n,e,i))}writePointMember(t,e,i){const n=gs(t.namespaceURI,"Point");t.appendChild(n),this.writePoint(n,e,i)}writeLineStringOrCurveMember(t,e,i){const n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeCurveOrLineString(n,e,i))}writeSurfacePatches_(t,e,i){const n=gs(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon(n,e,i)}writeCurveSegments_(t,e,i){const n=gs(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString(n,e,i)}writeGeometryElement(t,e,i){const n=i[i.length-1],r=Object.assign({},n);let s;r.node=t,s=Array.isArray(e)?fs(e,n):ds(e,!0,n),Es(r,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],i,void 0,this)}writeFeatureElement(t,e,i){const n=e.getId();n&&t.setAttribute("fid",n);const r=i[i.length-1],s=r.featureNS,o=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[s]={});const a=[],h=[];if(e.hasProperties()){const t=e.getProperties();for(const e in t){const i=t[e];null!==i&&(a.push(e),h.push(i),e==o||"function"==typeof i.getSimplifiedGeometry?e in r.serializers[s]||(r.serializers[s][e]=Ms(this.writeGeometryElement,this)):e in r.serializers[s]||(r.serializers[s][e]=Ms(qs)))}}const l=Object.assign({},r);l.node=t,Es(l,r.serializers,Cs(void 0,s),h,i,a)}writeFeatureMembers_(t,e,i){const n=i[i.length-1],r=n.featureType,s=n.featureNS,o={};o[s]={},o[s][r]=Ms(this.writeFeatureElement,this);const a=Object.assign({},n);a.node=t,Es(a,o,Cs(r,s),e,i)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,i){const n=e[e.length-1].node;return gs(this.namespace,Hs[n.nodeName])}GEOMETRY_NODE_FACTORY_(t,e,i){const n=e[e.length-1],r=n.multiSurface,s=n.surface,o=n.curve,a=n.multiCurve;return Array.isArray(t)?i="Envelope":"MultiPolygon"===(i=t.getType())&&!0===r?i="MultiSurface":"Polygon"===i&&!0===s?i="Surface":"LineString"===i&&!0===o?i="Curve":"MultiLineString"===i&&!0===a&&(i="MultiCurve"),gs(this.namespace,i)}writeGeometryNode(t,e){e=this.adaptOptions(e);const i=gs(this.namespace,"geom"),n={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object.assign(n,e),this.writeGeometryElement(i,t,[n]),i}writeFeaturesNode(t,e){e=this.adaptOptions(e);const i=gs(this.namespace,"featureMembers");i.setAttributeNS(ps,"xsi:schemaLocation",this.schemaLocation);const n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object.assign(n,e),this.writeFeatureMembers_(i,t,[n]),i}}Vs.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:xs(Vs.prototype.readFlatPos),posList:xs(Vs.prototype.readFlatPosList),coordinates:xs(Ws.prototype.readFlatCoordinates)}},Vs.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Vs.prototype.interiorParser,exterior:Vs.prototype.exteriorParser}},Vs.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:xs(js.prototype.readPoint),MultiPoint:xs(js.prototype.readMultiPoint),LineString:xs(js.prototype.readLineString),MultiLineString:xs(js.prototype.readMultiLineString),LinearRing:xs(js.prototype.readLinearRing),Polygon:xs(js.prototype.readPolygon),MultiPolygon:xs(js.prototype.readMultiPolygon),Surface:xs(Vs.prototype.readSurface),MultiSurface:xs(Vs.prototype.readMultiSurface),Curve:xs(Vs.prototype.readCurve),MultiCurve:xs(Vs.prototype.readMultiCurve),Envelope:xs(Vs.prototype.readEnvelope)}},Vs.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:ws(Vs.prototype.curveMemberParser),curveMembers:ws(Vs.prototype.curveMemberParser)}},Vs.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:ws(Vs.prototype.surfaceMemberParser),surfaceMembers:ws(Vs.prototype.surfaceMemberParser)}},Vs.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:ws(js.prototype.readLineString),Curve:ws(Vs.prototype.readCurve)}},Vs.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:ws(js.prototype.readPolygon),Surface:ws(Vs.prototype.readSurface)}},Vs.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:xs(Vs.prototype.readPatch)}},Vs.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:xs(Vs.prototype.readSegment)}},Vs.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:ws(Vs.prototype.readFlatPosList),upperCorner:ws(Vs.prototype.readFlatPosList)}},Vs.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:xs(Vs.prototype.readPolygonPatch)}},Vs.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:bs(Vs.prototype.readLineStringSegment)}},js.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:xs(js.prototype.readFlatLinearRing),Ring:xs(Vs.prototype.readFlatCurveRing)}},Vs.prototype.writeFeatures,Vs.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Ms(Vs.prototype.writeRing),interior:Ms(Vs.prototype.writeRing)}},Vs.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ms(qs),upperCorner:Ms(qs)}},Vs.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ms(Vs.prototype.writeSurfaceOrPolygonMember),polygonMember:Ms(Vs.prototype.writeSurfaceOrPolygonMember)}},Vs.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ms(Vs.prototype.writePointMember)}},Vs.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ms(Vs.prototype.writeLineStringOrCurveMember),curveMember:Ms(Vs.prototype.writeLineStringOrCurveMember)}},Vs.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ms(Vs.prototype.writeCurveOrLineString),MultiCurve:Ms(Vs.prototype.writeMultiCurveOrLineString),Point:Ms(Vs.prototype.writePoint),MultiPoint:Ms(Vs.prototype.writeMultiPoint),LineString:Ms(Vs.prototype.writeCurveOrLineString),MultiLineString:Ms(Vs.prototype.writeMultiCurveOrLineString),LinearRing:Ms(Vs.prototype.writeLinearRing),Polygon:Ms(Vs.prototype.writeSurfaceOrPolygon),MultiPolygon:Ms(Vs.prototype.writeMultiSurfaceOrPolygon),Surface:Ms(Vs.prototype.writeSurfaceOrPolygon),MultiSurface:Ms(Vs.prototype.writeMultiSurfaceOrPolygon),Envelope:Ms(Vs.prototype.writeEnvelope)}};const Xs=Vs;class Zs extends Xs{constructor(t){super(t=t||{}),this.schemaLocation=t.schemaLocation?t.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}}Zs.prototype.namespace="http://www.opengis.net/gml/3.2",Zs.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:xs(Xs.prototype.readFlatPos),posList:xs(Xs.prototype.readFlatPosList),coordinates:xs(Ws.prototype.readFlatCoordinates)}},Zs.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Xs.prototype.interiorParser,exterior:Xs.prototype.exteriorParser}},Zs.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:xs(js.prototype.readPoint),MultiPoint:xs(js.prototype.readMultiPoint),LineString:xs(js.prototype.readLineString),MultiLineString:xs(js.prototype.readMultiLineString),LinearRing:xs(js.prototype.readLinearRing),Polygon:xs(js.prototype.readPolygon),MultiPolygon:xs(js.prototype.readMultiPolygon),Surface:xs(Zs.prototype.readSurface),MultiSurface:xs(Xs.prototype.readMultiSurface),Curve:xs(Zs.prototype.readCurve),MultiCurve:xs(Xs.prototype.readMultiCurve),Envelope:xs(Zs.prototype.readEnvelope)}},Zs.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:ws(Xs.prototype.curveMemberParser),curveMembers:ws(Xs.prototype.curveMemberParser)}},Zs.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:ws(Xs.prototype.surfaceMemberParser),surfaceMembers:ws(Xs.prototype.surfaceMemberParser)}},Zs.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:ws(js.prototype.readLineString),Curve:ws(Xs.prototype.readCurve)}},Zs.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:ws(js.prototype.readPolygon),Surface:ws(Xs.prototype.readSurface)}},Zs.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:xs(Xs.prototype.readPatch)}},Zs.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:xs(Xs.prototype.readSegment)}},Zs.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:ws(Xs.prototype.readFlatPosList),upperCorner:ws(Xs.prototype.readFlatPosList)}},Zs.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:xs(Xs.prototype.readPolygonPatch)}},Zs.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:bs(Xs.prototype.readLineStringSegment)}},Zs.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:ws(js.prototype.pointMemberParser),pointMembers:ws(js.prototype.pointMemberParser)}},Zs.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:ws(js.prototype.lineStringMemberParser),lineStringMembers:ws(js.prototype.lineStringMemberParser)}},Zs.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:ws(js.prototype.polygonMemberParser),polygonMembers:ws(js.prototype.polygonMemberParser)}},Zs.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:ws(js.prototype.readFlatCoordinatesFromNode)}},Zs.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:ws(js.prototype.readLineString)}},Zs.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:ws(js.prototype.readPolygon)}},Zs.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:xs(js.prototype.readFlatLinearRing),Ring:xs(Zs.prototype.readFlatCurveRing)}},Zs.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Ms(Xs.prototype.writeRing),interior:Ms(Xs.prototype.writeRing)}},Zs.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Ms(qs),upperCorner:Ms(qs)}},Zs.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Ms(Xs.prototype.writeSurfaceOrPolygonMember),polygonMember:Ms(Xs.prototype.writeSurfaceOrPolygonMember)}},Zs.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Ms(Xs.prototype.writePointMember)}},Zs.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Ms(Xs.prototype.writeLineStringOrCurveMember),curveMember:Ms(Xs.prototype.writeLineStringOrCurveMember)}},Zs.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Ms(Xs.prototype.writeCurveOrLineString),MultiCurve:Ms(Xs.prototype.writeMultiCurveOrLineString),Point:Ms(Zs.prototype.writePoint),MultiPoint:Ms(Xs.prototype.writeMultiPoint),LineString:Ms(Xs.prototype.writeCurveOrLineString),MultiLineString:Ms(Xs.prototype.writeMultiCurveOrLineString),LinearRing:Ms(Xs.prototype.writeLinearRing),Polygon:Ms(Xs.prototype.writeSurfaceOrPolygon),MultiPolygon:Ms(Xs.prototype.writeMultiSurfaceOrPolygon),Surface:Ms(Xs.prototype.writeSurfaceOrPolygon),MultiSurface:Ms(Xs.prototype.writeMultiSurfaceOrPolygon),Envelope:Ms(Xs.prototype.writeEnvelope)}};const Ks=Zs,Js=class{constructor(t){this.tagName_=t}getTagName(){return this.tagName_}},Qs=class extends Js{constructor(t,e){super(t),this.conditions=e,(0,vn.h)(this.conditions.length>=2,57)}},$s=class extends Qs{constructor(t){super("And",Array.prototype.slice.call(arguments))}},to=class extends Js{constructor(t,e,i){if(super("BBOX"),this.geometryName=t,this.extent=e,4!==e.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=i}},eo={"http://www.opengis.net/gml":{boundedBy:Ss(js.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:ws(js.prototype.readFeaturesInternal)}},io={"http://www.opengis.net/wfs":{totalInserted:Ss(Ds),totalUpdated:Ss(Ds),totalDeleted:Ss(Ds)},"http://www.opengis.net/wfs/2.0":{totalInserted:Ss(Ds),totalUpdated:Ss(Ds),totalDeleted:Ss(Ds)}},no={"http://www.opengis.net/wfs":{TransactionSummary:Ss(go,"transactionSummary"),InsertResults:Ss(_o,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Ss(go,"transactionSummary"),InsertResults:Ss(_o,"insertIds")}},ro={"http://www.opengis.net/wfs":{PropertyName:Ms(qs)},"http://www.opengis.net/wfs/2.0":{PropertyName:Ms(qs)}},so={"http://www.opengis.net/wfs":{Insert:Ms(bo),Update:Ms(Mo),Delete:Ms(So),Property:Ms(Co),Native:Ms(Ao)},"http://www.opengis.net/wfs/2.0":{Insert:Ms(bo),Update:Ms(Mo),Delete:Ms(So),Property:Ms(Co),Native:Ms(Ao)}},oo="feature",ao="http://www.w3.org/2000/xmlns/",ho={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},lo={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},co={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},uo={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},fo={"2.0.0":Ks,"1.1.0":Xs,"1.0.0":Ws};function po(t,e,i,n){Es(n,so,Cs(t),e,i)}function go(t,e){return Ns({},io,t,e)}const mo={"http://www.opengis.net/ogc":{FeatureId:ws((function(t,e){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:ws((function(t,e){return t.getAttribute("fid")}))}};function yo(t,e){Ls(mo,t,e)}const vo={"http://www.opengis.net/wfs":{Feature:yo},"http://www.opengis.net/wfs/2.0":{Feature:yo}};function _o(t,e){return Ns([],vo,t,e)}function bo(t,e,i){const n=i[i.length-1],r=n.featureType,s=n.featureNS,o=n.gmlVersion,a=gs(s,r);t.appendChild(a),2===o?Ws.prototype.writeFeatureElement(a,e,i):3===o?Xs.prototype.writeFeatureElement(a,e,i):Ks.prototype.writeFeatureElement(a,e,i)}function wo(t,e,i){const n=i[i.length-1].version,r=ho[n],s=gs(r,"Filter"),o=gs(r,"FeatureId");s.appendChild(o),o.setAttribute("fid",e),t.appendChild(s)}function xo(t,e){const i=(t=t||oo)+":";return e.startsWith(i)?e:i+e}function So(t,e,i){const n=i[i.length-1];(0,vn.h)(void 0!==e.getId(),26);const r=n.featureType,s=n.featurePrefix,o=n.featureNS,a=xo(s,r);t.setAttribute("typeName",a),t.setAttributeNS(ao,"xmlns:"+s,o);const h=e.getId();void 0!==h&&wo(t,h,i)}function Mo(t,e,i){const n=i[i.length-1];(0,vn.h)(void 0!==e.getId(),27);const r=n.version,s=n.featureType,o=n.featurePrefix,a=n.featureNS,h=xo(o,s),l=e.getGeometryName();t.setAttribute("typeName",h),t.setAttributeNS(ao,"xmlns:"+o,a);const c=e.getId();if(void 0!==c){const s=e.getKeys(),o=[];for(let t=0,i=s.length;t<i;t++){const i=e.get(s[t]);if(void 0!==i){let e=s[t];i&&"function"==typeof i.getSimplifiedGeometry&&(e=l),o.push({name:e,value:i})}}Es({version:r,gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},so,Cs("Property"),o,i),wo(t,c,i)}}function Co(t,e,i){const n=i[i.length-1],r=n.version,s=lo[r],o=gs(s,"Name"),a=n.gmlVersion;if(t.appendChild(o),qs(o,e.name),void 0!==e.value&&null!==e.value){const n=gs(s,"Value");t.appendChild(n),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===a?Ws.prototype.writeGeometryElement(n,e.value,i):3===a?Xs.prototype.writeGeometryElement(n,e.value,i):Ks.prototype.writeGeometryElement(n,e.value,i):qs(n,e.value)}}function Ao(t,e,i){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&qs(t,e.value)}const Lo={"http://www.opengis.net/wfs":{Query:Ms(No)},"http://www.opengis.net/wfs/2.0":{Query:Ms(No)},"http://www.opengis.net/ogc":{During:Ms(Oo),And:Ms(Ro),Or:Ms(Ro),Not:Ms(Fo),BBOX:Ms(Eo),Contains:Ms(Po),Intersects:Ms(Po),Within:Ms(Po),DWithin:Ms(Io),PropertyIsEqualTo:Ms(To),PropertyIsNotEqualTo:Ms(To),PropertyIsLessThan:Ms(To),PropertyIsLessThanOrEqualTo:Ms(To),PropertyIsGreaterThan:Ms(To),PropertyIsGreaterThanOrEqualTo:Ms(To),PropertyIsNull:Ms(ko),PropertyIsBetween:Ms(jo),PropertyIsLike:Ms(Do)},"http://www.opengis.net/fes/2.0":{During:Ms(Oo),And:Ms(Ro),Or:Ms(Ro),Not:Ms(Fo),BBOX:Ms(Eo),Contains:Ms(Po),Disjoint:Ms(Po),Intersects:Ms(Po),ResourceId:Ms((function(t,e,i){t.setAttribute("rid",e.rid)})),Within:Ms(Po),DWithin:Ms(Io),PropertyIsEqualTo:Ms(To),PropertyIsNotEqualTo:Ms(To),PropertyIsLessThan:Ms(To),PropertyIsLessThanOrEqualTo:Ms(To),PropertyIsGreaterThan:Ms(To),PropertyIsGreaterThanOrEqualTo:Ms(To),PropertyIsNull:Ms(ko),PropertyIsBetween:Ms(jo),PropertyIsLike:Ms(Do)}};function No(t,e,i){const n=i[i.length-1],r=n.version,s=n.featurePrefix,o=n.featureNS,a=n.propertyNames,h=n.srsName;let l,c;l=s?xo(s,e):e,c="2.0.0"===r?"typeNames":"typeName",t.setAttribute(c,l),h&&t.setAttribute("srsName",h),o&&t.setAttributeNS(ao,"xmlns:"+s,o);const u=Object.assign({},n);u.node=t,Es(u,ro,Cs("PropertyName"),a,i);const d=n.filter;if(d){const e=gs(Wo(r),"Filter");t.appendChild(e),function(t,e,i){const n=i[i.length-1],r={node:t};Object.assign(r,{context:n}),Es(r,Lo,Cs(e.getTagName()),[e],i)}(e,d,i)}}function Eo(t,e,i){const n=i[i.length-1],r=n.context.version;n.srsName=e.srsName;const s=fo[r];Go(r,t,e.geometryName),s.prototype.writeGeometryElement(t,e.extent,i)}function Po(t,e,i){const n=i[i.length-1],r=n.context.version;n.srsName=e.srsName;const s=fo[r];Go(r,t,e.geometryName),s.prototype.writeGeometryElement(t,e.geometry,i)}function Io(t,e,i){const n=i[i.length-1].context.version;Po(t,e,i);const r=gs(Wo(n),"Distance");qs(r,e.distance.toString()),"2.0.0"===n?r.setAttribute("uom",e.unit):r.setAttribute("units",e.unit),t.appendChild(r)}function Oo(t,e,i){const n=i[i.length-1].context.version;Bo(co[n],"ValueReference",t,e.propertyName);const r=gs(Fs,"TimePeriod");t.appendChild(r);const s=gs(Fs,"begin");r.appendChild(s),zo(s,e.begin);const o=gs(Fs,"end");r.appendChild(o),zo(o,e.end)}function Ro(t,e,i){const n=i[i.length-1].context,r={node:t};Object.assign(r,{context:n});const s=e.conditions;for(let t=0,e=s.length;t<e;++t){const e=s[t];Es(r,Lo,Cs(e.getTagName()),[e],i)}}function Fo(t,e,i){const n=i[i.length-1].context,r={node:t};Object.assign(r,{context:n});const s=e.condition;Es(r,Lo,Cs(s.getTagName()),[s],i)}function To(t,e,i){const n=i[i.length-1].context.version;void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Go(n,t,e.propertyName),qo(n,t,""+e.expression)}function ko(t,e,i){Go(i[i.length-1].context.version,t,e.propertyName)}function jo(t,e,i){const n=i[i.length-1].context.version,r=Wo(n);Go(n,t,e.propertyName);const s=gs(r,"LowerBoundary");t.appendChild(s),qo(n,s,""+e.lowerBoundary);const o=gs(r,"UpperBoundary");t.appendChild(o),qo(n,o,""+e.upperBoundary)}function Do(t,e,i){const n=i[i.length-1].context.version;t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Go(n,t,e.propertyName),qo(n,t,""+e.pattern)}function Bo(t,e,i,n){const r=gs(t,e);qs(r,n),i.appendChild(r)}function qo(t,e,i){Bo(Wo(t),"Literal",e,i)}function Go(t,e,i){"2.0.0"===t?Bo(co[t],"ValueReference",e,i):Bo(ho[t],"PropertyName",e,i)}function zo(t,e){const i=gs(Fs,"TimeInstant");t.appendChild(i);const n=gs(Fs,"timePosition");i.appendChild(n),qs(n,e)}function Uo(t,e,i){const n=i[i.length-1],r=Object.assign({},n);r.node=t,Es(r,Lo,Cs("Query"),e,i)}function Wo(t){let e;return e="2.0.0"===t?co[t]:ho[t],e}const Yo=class extends Rs{constructor(t){super(),t=t||{},this.version_=t.version?t.version:"1.1.0",this.featureType_=t.featureType,this.featureNS_=t.featureNS,this.gmlFormat_=t.gmlFormat?t.gmlFormat:new fo[this.version_],this.schemaLocation_=t.schemaLocation?t.schemaLocation:uo[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(t){this.featureType_=t}readFeaturesFromNode(t,e){const i={node:t};Object.assign(i,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(i,this.getReadOptions(t,e||{}));const n=[i];let r;r="2.0.0"===this.version_?eo:this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let s=Ns([],r,t,n,this.gmlFormat_);return s||(s=[]),s}readTransactionResponse(t){if(t){if("string"==typeof t){const e=_s(t);return this.readTransactionResponseFromDocument(e)}return vs(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}}readFeatureCollectionMetadata(t){if(t){if("string"==typeof t){const e=_s(t);return this.readFeatureCollectionMetadataFromDocument(e)}return vs(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}}readFeatureCollectionMetadataFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)}readFeatureCollectionMetadataFromNode(t){const e={},i=Bs(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=i,Ns(e,eo,t,[],this.gmlFormat_)}readTransactionResponseFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)}readTransactionResponseFromNode(t){return Ns({},no,t,[])}writeGetFeature(t){const e=gs(lo[this.version_],"GetFeature");e.setAttribute("service","WFS"),e.setAttribute("version",this.version_),t.handle&&e.setAttribute("handle",t.handle),t.outputFormat&&e.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&e.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&e.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&e.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&e.setAttribute("count",String(t.count)),void 0!==t.viewParams&&e.setAttribute("viewParams",t.viewParams),e.setAttributeNS(ps,"xsi:schemaLocation",this.schemaLocation_);const i={node:e};if(Object.assign(i,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),(0,vn.h)(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){let n=t.filter;t.bbox&&((0,vn.h)(t.geometryName,12),n=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,n)),Object.assign(i,{geometryName:t.geometryName,filter:n}),Uo(e,t.featureTypes,[i])}else t.featureTypes.forEach((n=>{const r=this.combineBboxAndFilter(n.geometryName,n.bbox,t.srsName,t.filter);Object.assign(i,{geometryName:n.geometryName,filter:r}),Uo(e,[n.name],[i])}));return e}combineBboxAndFilter(t,e,i,n){const r=function(t,e,i){return new to(t,e,i)}(t,e,i);return n?function(t){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply($s,e))}(n,r):r}writeTransaction(t,e,i,n){const r=[],s=n.version?n.version:this.version_,o=gs(lo[s],"Transaction");let a;o.setAttribute("service","WFS"),o.setAttribute("version",s),n&&(a=n.gmlOptions?n.gmlOptions:{},n.handle&&o.setAttribute("handle",n.handle)),o.setAttributeNS(ps,"xsi:schemaLocation",uo[s]);const h=function(t,e,i,n){const r=n.featurePrefix?n.featurePrefix:oo;let s;"1.0.0"===i?s=2:"1.1.0"===i?s=3:"2.0.0"===i&&(s=3.2);return Object.assign({node:t},{version:i,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:r,gmlVersion:s,hasZ:n.hasZ,srsName:n.srsName},e)}(o,a,s,n);return t&&po("Insert",t,r,h),e&&po("Update",e,r,h),i&&po("Delete",i,r,h),n.nativeElements&&po("Native",n.nativeElements,r,h),o}readProjectionFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null}readProjectionFromNode(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(let e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){const t=[{}];return this.gmlFormat_.readGeometryElement(e,t),(0,yt.U2)(t.pop().srsName)}return null}};var Ho=o(1694);class Vo extends Ho.Z{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Sn.bN),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push((0,Sn.oL)(this.geometries_[t],xn.Z.CHANGE,this.changed,this))}clone(){const t=new Vo(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<(0,mt.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)n=r[s].closestPointXY(t,e,i,n);return n}containsXY(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0;return!1}computeExtent(t){(0,mt.createOrUpdateEmpty)(t);const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)(0,mt.extend)(t,e[i].getExtent());return t}getGeometries(){return Xo(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let n=!1;for(let r=0,s=i.length;r<s;++r){const s=i[r],o=s.getSimplifiedGeometry(t);e.push(o),o!==s&&(n=!0)}if(n){const t=new Vo(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()}scale(t,e,i){i||(i=(0,mt.getCenter)(this.getExtent()));const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(Xo(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Xo(t){const e=[];for(let i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}const Zo=Vo;function Ko(t){if("string"==typeof t){return JSON.parse(t)||null}return null!==t?t:null}const Jo=class extends us{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Ko(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Ko(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return(0,yn.O3)()}readFeaturesFromObject(t,e){return(0,yn.O3)()}readGeometry(t,e){return this.readGeometryFromObject(Ko(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return(0,yn.O3)()}readProjection(t){return this.readProjectionFromObject(Ko(t))}readProjectionFromObject(t){return(0,yn.O3)()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return(0,yn.O3)()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return(0,yn.O3)()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return(0,yn.O3)()}};var Qo=o(9374);function $o(t,e){if(!t)return null;let i;switch(t.type){case"Point":i=function(t){return new es.default(t.coordinates)}(t);break;case"LineString":i=function(t){return new Yr.default(t.coordinates)}(t);break;case"Polygon":i=function(t){return new rs.default(t.coordinates)}(t);break;case"MultiPoint":i=function(t){return new ns(t.coordinates)}(t);break;case"MultiLineString":i=function(t){return new ts(t.coordinates)}(t);break;case"MultiPolygon":i=function(t){return new cs(t.coordinates)}(t);break;case"GeometryCollection":i=function(t,e){const i=t.geometries.map((function(t){return $o(t,undefined)}));return new Zo(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return ds(i,!1,e)}function ta(t,e){const i=(t=ds(t,!0,e)).getType();let n;switch(i){case"Point":n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":n=function(t,e){let i;return e&&(i=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case"MultiPoint":n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":n=function(t,e){let i;return e&&(i=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case"GeometryCollection":n=function(t,e){delete(e=Object.assign({},e)).featureProjection;return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){return ta(t,e)}))}}(t,e);break;case"Circle":n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return n}const ea=class extends Jo{constructor(t){t=t||{},super(),this.dataProjection=(0,yt.U2)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=(0,yt.U2)(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const n=$o(i.geometry,e),r=new Wr.default;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(n),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r}readFeaturesFromObject(t,e){let i=null;if("FeatureCollection"===t.type){i=[];const n=t.features;for(let t=0,r=n.length;t<r;++t)i.push(this.readFeatureFromObject(n[t],e))}else i=[this.readFeatureFromObject(t,e)];return i}readGeometryFromObject(t,e){return $o(t,e)}readProjectionFromObject(t){const e=t.crs;let i;return e?"name"==e.type?i=(0,yt.U2)(e.properties.name):"EPSG"===e.type?i=(0,yt.U2)("EPSG:"+e.properties.code):(0,vn.h)(!1,36):i=this.dataProjection,i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},n=t.getId();if(void 0!==n&&(i.id=n),!t.hasProperties())return i;const r=t.getProperties(),s=t.getGeometry();return s&&(i.geometry=ta(s,e),delete r[t.getGeometryName()]),(0,Qo.x)(r)||(i.properties=r),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return ta(t,this.adaptOptions(e))}};var ia=o(6813);const na="add",ra="remove",sa="length";class oa extends On.ZP{constructor(t,e,i){super(t),this.element=e,this.index=i}}class aa extends an.Z{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(sa)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new oa(na,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new oa(ra,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new oa(ra,i,t)),this.dispatchEvent(new oa(na,e,t))}updateLength_(){this.set(sa,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new ia.Z(58)}}const ha=aa;var la=o(5990),ca=o(4331);const ua=class{constructor(t){this.rbush_=new ca(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,yn.sq)(e)]=i}load(t,e){const i=new Array(e.length);for(let n=0,r=e.length;n<r;n++){const r=t[n],s=e[n],o={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:s};i[n]=o,this.items_[(0,yn.sq)(s)]=o}this.rbush_.load(i)}remove(t){const e=(0,yn.sq)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[(0,yn.sq)(e)],n=[i.minX,i.minY,i.maxX,i.maxY];(0,mt.equals)(n,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let n=0,r=t.length;n<r;n++)if(i=e(t[n]),i)return i;return i}isEmpty(){return(0,Qo.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return(0,mt.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}},da="addfeature",fa="removefeature";var pa=o(6885);function ga(t,e){return[[-1/0,-1/0,1/0,1/0]]}function ma(t,e){return[t]}function ya(t,e){return function(i,n,r,s,o){const a=this;!function(t,e,i,n,r,s,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(i,n,r):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();let n;"json"==t||"text"==t?n=a.responseText:"xml"==t?(n=a.responseXML,n||(n=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==t&&(n=a.response),n?s(e.readFeatures(n,{extent:i,featureProjection:r}),e.readProjection(n)):o()}else o()},a.onerror=o,a.send()}(t,e,i,n,r,(function(t,e){a.addFeatures(t),void 0!==s&&s(t)}),o||pa.Zn)}}class va extends On.ZP{constructor(t,e,i){super(t),this.feature=e,this.features=i}}const _a=class extends pr{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=pa.Zn,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,vn.h)(this.format_,7),this.loader_=ya(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:ga;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,n;this.featuresRtree_=e?new ua:null,this.loadedExtentsRtree_=new ua,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?n=t.features:t.features&&(i=t.features,n=i.getArray()),e||void 0!==i||(i=new ha(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,yn.sq)(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new va(da,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[(0,Sn.oL)(e,xn.Z.CHANGE,this.handleFeatureChange_,this),(0,Sn.oL)(e,la.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&((0,vn.h)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],n=[];for(let e=0,n=t.length;e<n;e++){const n=t[e],r=(0,yn.sq)(n);this.addToIndex_(r,n)&&i.push(n)}for(let t=0,r=i.length;t<r;t++){const r=i[t],s=(0,yn.sq)(r);this.setupChangeEvents_(s,r);const o=r.getGeometry();if(o){const t=o.getExtent();e.push(t),n.push(r)}else this.nullGeometryFeatures_[s]=r}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(da))for(let t=0,e=i.length;t<e;t++)this.dispatchEvent(new va(da,i[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(da,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(fa,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(na,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(ra,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(Sn.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)};this.featuresRtree_.forEach(t);for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new va("clear");this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){if(i.getGeometry().intersectsCoordinate(t))return e(i)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){const t=e(i);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,Qo.x)(this.nullGeometryFeatures_)||(0,jn.l7)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=(0,mt.wrapAndSliceX)(t,e);return[].concat(...i.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],n=t[1];let r=null;const s=[NaN,NaN];let o=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||pa.uX,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),h=o;if(o=e.closestPointXY(i,n,s,o),o<h){r=t;const e=Math.sqrt(o);a[0]=i-e,a[1]=n-e,a[2]=i+e,a[3]=n+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=(0,yn.sq)(e),n=e.getGeometry();if(n){const t=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new va("changefeature",e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:(0,yn.sq)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,Qo.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const n=this.loadedExtentsRtree_,r=this.strategy_(t,e,i);for(let t=0,s=r.length;t<s;++t){const s=r[t];n.forEachInExtent(s,(function(t){return(0,mt.containsExtent)(t.extent,s)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new va("featuresloadstart")),this.loader_.call(this,s,e,i,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new va("featuresloadend",void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new va("featuresloaderror"))})),n.insert(s,{extent:s.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,(function(e){if((0,mt.equals)(e.extent,t))return i=e,!0})),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=(0,yn.sq)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=(0,yn.sq)(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(Sn.bN),delete this.featureChangeKeys_[e];const n=t.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new va(fa,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){(0,vn.h)(this.format_,7),this.url_=t,this.setLoader(ya(t,this.format_))}},ba=class extends Mn{constructor(t){super(t=t||{})}},wa=class extends qn{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,n=t.viewState,r=n.resolution,s=this.getLayer().getSource(),o=t.viewHints;let a=t.extent;if(void 0!==e.extent&&(a=(0,mt.getIntersection)(a,(0,yt.dY)(e.extent,n.projection))),!o[0]&&!o[1]&&!(0,mt.isEmpty)(a))if(s){const t=n.projection,e=s.getImage(a,r,i,t);e&&(this.loadImage(e)?this.image_=e:e.getState()===Nn.default.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=(0,Tn.apply)(e.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!(0,mt.containsCoordinate)(r,n))return null;const s=this.image_.getExtent(),o=this.image_.getImage(),a=(0,mt.getWidth)(s),h=Math.floor(o.width*((n[0]-s[0])/a));if(h<0||h>=o.width)return null;const l=(0,mt.getHeight)(s),c=Math.floor(o.height*((s[3]-n[1])/l));return c<0||c>=o.height?null:this.getImageData(o,h,c)}renderFrame(t,e){const i=this.image_,n=i.getExtent(),r=i.getResolution(),s=i.getPixelRatio(),o=t.layerStatesArray[t.layerIndex],a=t.pixelRatio,h=t.viewState,l=h.center,c=a*r/(h.resolution*s),u=t.extent,d=h.resolution,f=h.rotation,p=Math.round((0,mt.getWidth)(u)/d*a),g=Math.round((0,mt.getHeight)(u)/d*a);(0,Tn.compose)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,f,-p/2,-g/2),(0,Tn.makeInverse)(this.inversePixelTransform,this.pixelTransform);const m=(0,Tn.toString)(this.pixelTransform);this.useContainer(e,m,this.getBackground(t));const y=this.context,v=y.canvas;v.width!=p||v.height!=g?(v.width=p,v.height=g):this.containerReused||y.clearRect(0,0,p,g);let _=!1,b=!0;if(o.extent){const e=(0,yt.dY)(o.extent,h.projection);b=(0,mt.intersects)(e,t.extent),_=b&&!(0,mt.containsExtent)(e,t.extent),_&&this.clipUnrotated(y,t,e)}const w=i.getImage(),x=(0,Tn.compose)(this.tempTransform,p/2,g/2,c,c,0,s*(n[0]-l[0])/r,s*(l[1]-n[3])/r);this.renderedResolution=r*a/s;const S=w.width*x[0],M=w.height*x[3];if(this.getLayer().getSource().getInterpolate()||(y.imageSmoothingEnabled=!1),this.preRender(y,t),b&&S>=.5&&M>=.5){const t=x[4],e=x[5],i=o.opacity;let n;1!==i&&(n=y.globalAlpha,y.globalAlpha=i),y.drawImage(w,0,0,+w.width,+w.height,t,e,S,M),1!==i&&(y.globalAlpha=n)}return this.postRender(y,t),_&&y.restore(),y.imageSmoothingEnabled=!0,m!==v.style.transform&&(v.style.transform=m),this.container}},xa=class extends ba{constructor(t){super(t)}createRenderer(){return new wa(this)}getData(t){return super.getData(t)}};var Sa=o(7539),Ma=o(283),Ca=o(1345),Aa=o(4548),La=o(5393),Na=o(8958),Ea=o(1280);function Pa(t){return new Sa.default({fill:Ia(t,""),stroke:Oa(t,""),text:Ra(t),image:Fa(t)})}function Ia(t,e){const i=t[e+"fill-color"];if(i)return new Ca.default({color:i})}function Oa(t,e){const i=t[e+"stroke-width"],n=t[e+"stroke-color"];if(i||n)return new Na.default({width:i,color:n,lineCap:t[e+"stroke-line-cap"],lineJoin:t[e+"stroke-line-join"],lineDash:t[e+"stroke-line-dash"],lineDashOffset:t[e+"stroke-line-dash-offset"],miterLimit:t[e+"stroke-miter-limit"]})}function Ra(t){const e=t["text-value"];if(e)return new Ea.default({text:e,font:t["text-font"],maxAngle:t["text-max-angle"],offsetX:t["text-offset-x"],offsetY:t["text-offset-y"],overflow:t["text-overflow"],placement:t["text-placement"],scale:t["text-scale"],rotateWithView:t["text-rotate-with-view"],rotation:t["text-rotation"],textAlign:t["text-align"],justify:t["text-justify"],textBaseline:t["text-baseline"],padding:t["text-padding"],fill:Ia(t,"text-"),backgroundFill:Ia(t,"text-background-"),stroke:Oa(t,"text-"),backgroundStroke:Oa(t,"text-background-")})}function Fa(t){const e=t["icon-src"],i=t["icon-img"];if(e||i)return new Aa.default({src:e,img:i,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]});const n=t["shape-points"];if(n){const e="shape-";return new La.default({points:n,fill:Ia(t,e),stroke:Oa(t,e),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}const r=t["circle-radius"];if(r){const e="circle-";return new Ma.default({radius:r,fill:Ia(t,e),stroke:Oa(t,e),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}const Ta="renderOrder",ka=class extends Mn{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Ta)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new ca(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(Ta,t)}setStyle(t){let e;if(void 0===t)e=Sa.createDefaultStyle;else if(null===t)e=null;else if("function"==typeof t)e=t;else if(t instanceof Sa.default)e=t;else if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let e=0;e<i;++e){const i=t[e];i instanceof Sa.default?n[e]=i:n[e]=Pa(i)}e=n}else e=Pa(t);this.style_=e,this.styleFunction_=null===t?void 0:(0,Sa.toFunction)(this.style_),this.changed()}},ja={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Da=[ja.FILL],Ba=[ja.STROKE],qa=[ja.BEGIN_PATH],Ga=[ja.CLOSE_PATH],za=ja;var Ua=o(8716),Wa=o(5624),Ya=o(6620),Ha=o(4778);class Va extends Wa.Z{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates;let s=r.length;for(let o=0,a=t.length;o<a;o+=e)n[0]=t[o],n[1]=t[o+1],(0,mt.containsCoordinate)(i,n)&&(r[s++]=n[0],r[s++]=n[1]);return s}appendFlatLineCoordinates(t,e,i,n,r,s){const o=this.coordinates;let a=o.length;const h=this.getBufferedMaxExtent();s&&(e+=n);let l=t[e],c=t[e+1];const u=this.tmpCoordinate_;let d,f,p,g=!0;for(d=e+n;d<i;d+=n)u[0]=t[d],u[1]=t[d+1],p=(0,mt.coordinateRelationship)(h,u),p!==f?(g&&(o[a++]=l,o[a++]=c,g=!1),o[a++]=u[0],o[a++]=u[1]):p===Ua.Z.INTERSECTING?(o[a++]=u[0],o[a++]=u[1],g=!1):g=!0,l=u[0],c=u[1],f=p;return(r&&g||d===e+n)&&(o[a++]=l,o[a++]=c),a}drawCustomCoordinates_(t,e,i,n,r){for(let s=0,o=i.length;s<o;++s){const o=i[s],a=this.appendFlatLineCoordinates(t,e,o,n,!1,!1);r.push(a),e=o}return e}drawCustom(t,e,i,n){this.beginGeometry(t,e);const r=t.getType(),s=t.getStride(),o=this.coordinates.length;let a,h,l,c,u;switch(r){case"MultiPolygon":a=t.getOrientedFlatCoordinates(),c=[];const e=t.getEndss();u=0;for(let t=0,i=e.length;t<i;++t){const i=[];u=this.drawCustomCoordinates_(a,u,e[t],s,i),c.push(i)}this.instructions.push([za.CUSTOM,o,c,t,i,Jr.ug]),this.hitDetectionInstructions.push([za.CUSTOM,o,c,t,n||i,Jr.ug]);break;case"Polygon":case"MultiLineString":l=[],a="Polygon"==r?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(a,0,t.getEnds(),s,l),this.instructions.push([za.CUSTOM,o,l,t,i,Jr.o1]),this.hitDetectionInstructions.push([za.CUSTOM,o,l,t,n||i,Jr.o1]);break;case"LineString":case"Circle":a=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(a,0,a.length,s,!1,!1),this.instructions.push([za.CUSTOM,o,h,t,i,Jr.Ml]),this.hitDetectionInstructions.push([za.CUSTOM,o,h,t,n||i,Jr.Ml]);break;case"MultiPoint":a=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(a,s),h>o&&(this.instructions.push([za.CUSTOM,o,h,t,i,Jr.Ml]),this.hitDetectionInstructions.push([za.CUSTOM,o,h,t,n||i,Jr.Ml]));break;case"Point":a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),h=this.coordinates.length,this.instructions.push([za.CUSTOM,o,h,t,i]),this.hitDetectionInstructions.push([za.CUSTOM,o,h,t,n||i])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[za.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[za.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let n,r,s=-1;for(e=0;e<i;++e)n=t[e],r=n[0],r==za.END_GEOMETRY?s=e:r==za.BEGIN_GEOMETRY&&(n[2]=e,(0,jn.FZ)(this.hitDetectionInstructions,s,e),s=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillStyle=(0,Ya.y)(e||Ha.bL)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=(0,Ya.y)(t||Ha.Tx);const n=e.getLineCap();i.lineCap=void 0!==n?n:Ha.mb;const r=e.getLineDash();i.lineDash=r?r.slice():Ha.X9;const s=e.getLineDashOffset();i.lineDashOffset=s||Ha.He;const o=e.getLineJoin();i.lineJoin=void 0!==o?o:Ha.rc;const a=e.getWidth();i.lineWidth=void 0!==a?a:Ha.yC;const h=e.getMiterLimit();i.miterLimit=void 0!==h?h:Ha.V4,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[za.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[za.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,n=t.lineCap,r=t.lineDash,s=t.lineDashOffset,o=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!(0,jn.fS)(t.currentLineDash,r)||t.currentLineDashOffset!=s||t.currentLineJoin!=o||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=s,t.currentLineJoin=o,t.currentLineWidth=a,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[za.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,mt.clone)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,mt.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Xa=Va,Za=class extends Xa{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){const r=this.state,s=void 0!==r.fillStyle,o=void 0!==r.strokeStyle,a=i.length;this.instructions.push(qa),this.hitDetectionInstructions.push(qa);for(let r=0;r<a;++r){const s=i[r],a=this.coordinates.length,h=this.appendFlatLineCoordinates(t,e,s,n,!0,!o),l=[za.MOVE_TO_LINE_TO,a,h];this.instructions.push(l),this.hitDetectionInstructions.push(l),o&&(this.instructions.push(Ga),this.hitDetectionInstructions.push(Ga)),e=s}return s&&(this.instructions.push(Da),this.hitDetectionInstructions.push(Da)),o&&(this.instructions.push(Ba),this.hitDetectionInstructions.push(Ba)),e}drawCircle(t,e){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0===n&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([za.SET_FILL_STYLE,Ha.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([za.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const s=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,o,!1,!1);const h=[za.CIRCLE,a];this.instructions.push(qa,h),this.hitDetectionInstructions.push(qa,h),void 0!==i.fillStyle&&(this.instructions.push(Da),this.hitDetectionInstructions.push(Da)),void 0!==i.strokeStyle&&(this.instructions.push(Ba),this.hitDetectionInstructions.push(Ba)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0===n&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([za.SET_FILL_STYLE,Ha.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([za.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const s=t.getEnds(),o=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(o,0,s,a),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0===n&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([za.SET_FILL_STYLE,Ha.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([za.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const s=t.getEndss(),o=t.getOrientedFlatCoordinates(),a=t.getStride();let h=0;for(let t=0,e=s.length;t<e;++t)h=this.drawFlatCoordinatess_(o,h,s[t],a);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,n=e.length;i<n;++i)e[i]=(0,Kr.uZ)(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};function Ka(t,e,i,n,r){let s,o,a,h,l,c,u,d,f,p,g=i,m=i,y=0,v=0,_=i;for(o=i;o<n;o+=r){const i=e[o],n=e[o+1];void 0!==l&&(f=i-l,p=n-c,h=Math.sqrt(f*f+p*p),void 0!==u&&(v+=a,s=Math.acos((u*f+d*p)/(a*h)),s>t&&(v>y&&(y=v,g=_,m=o),v=0,_=o-r)),a=h,u=f,d=p),l=i,c=n}return v+=h,v>y?[_,o]:[g,m]}const Ja={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Qa={Circle:Za,Default:Xa,Image:class extends Xa{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,s=this.appendFlatPointCoordinates(i,n);this.instructions.push([za.DRAW_IMAGE,r,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([za.DRAW_IMAGE,r,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,s=this.appendFlatPointCoordinates(i,n);this.instructions.push([za.DRAW_IMAGE,r,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([za.DRAW_IMAGE,r,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends Xa{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const r=this.coordinates.length,s=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),o=[za.MOVE_TO_LINE_TO,r,s];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(t,e){const i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0===n||void 0===r)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([za.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ha.X9,Ha.He],qa);const s=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(s,0,s.length,o),this.hitDetectionInstructions.push(Ba),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0===n||void 0===r)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([za.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],qa);const s=t.getEnds(),o=t.getFlatCoordinates(),a=t.getStride();let h=0;for(let t=0,e=s.length;t<e;++t)h=this.drawFlatCoordinates_(o,h,s[t],a);this.hitDetectionInstructions.push(Ba),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Ba),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Ba),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(qa)}},Polygon:Za,Text:class extends Xa{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""===this.text_||!r||!i&&!n)return;const s=this.coordinates;let o=s.length;const a=t.getType();let h=null,l=t.getStride();if("line"!==r.placement||"LineString"!=a&&"MultiLineString"!=a&&"Polygon"!=a&&"MultiPolygon"!=a){let i=r.overflow?null:[];switch(a){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),l=2;break;case"Polygon":h=t.getFlatInteriorPoint(),r.overflow||i.push(h[2]/this.resolution),l=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();h=[];for(let t=0,n=e.length;t<n;t+=3)r.overflow||i.push(e[t+2]/this.resolution),h.push(e[t],e[t+1]);if(0===h.length)return;l=2}const n=this.appendFlatPointCoordinates(h,l);if(n===o)return;if(i&&(n-o)/2!=h.length/l){let t=o/2;i=i.filter(((e,i)=>{const n=s[2*(t+i)]===h[i*l]&&s[2*(t+i)+1]===h[i*l+1];return n||--t,n}))}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let c=r.padding;if(c!=Ha.oB&&(r.scale[0]<0||r.scale[1]<0)){let t=r.padding[0],e=r.padding[1],i=r.padding[2],n=r.padding[3];r.scale[0]<0&&(e=-e,n=-n),r.scale[1]<0&&(t=-t,i=-i),c=[t,e,i,n]}const u=this.pixelRatio;this.instructions.push([za.DRAW_IMAGE,o,n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,c==Ha.oB?Ha.oB:c.map((function(t){return t*u})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const d=1/u;this.hitDetectionInstructions.push([za.DRAW_IMAGE,o,n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[d,d],NaN,void 0,this.declutterImageWithText_,c,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(e)}else{if(!(0,mt.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;let i;if(h=t.getFlatCoordinates(),"LineString"==a)i=[h.length];else if("MultiLineString"==a)i=t.getEnds();else if("Polygon"==a)i=t.getEnds().slice(0,1);else if("MultiPolygon"==a){const e=t.getEndss();i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t][0])}this.beginGeometry(t,e);const n=r.textAlign;let c,u=0;for(let t=0,e=i.length;t<e;++t){if(null==n){const e=Ka(r.maxAngle,h,u,i[t],l);u=e[0],c=e[1]}else c=i[t];for(let t=u;t<c;t+=l)s.push(h[t],h[t+1]);const e=s.length;u=i[t],this.drawChars_(o,e),o=e}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||Ha.PH,justify:e.justify,textBaseline:e.textBaseline||Ha.ru,scale:e.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,r=this.strokeKey_,s=this.textKey_,o=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,h=Ja[n.textBaseline],l=this.textOffsetY_*a,c=this.text_,u=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([za.DRAW_CHARS,t,e,h,n.overflow,o,n.maxAngle,a,l,r,u*a,c,s,1]),this.hitDetectionInstructions.push([za.DRAW_CHARS,t,e,h,n.overflow,o,n.maxAngle,1,l,r,u,c,s,1/a])}setTextStyle(t,e){let i,n,r;if(t){const e=t.getFill();e?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=(0,Ya.y)(e.getColor()||Ha.bL)):(n=null,this.textFillState_=n);const s=t.getStroke();if(s){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const t=s.getLineDash(),e=s.getLineDashOffset(),i=s.getWidth(),n=s.getMiterLimit();r.lineCap=s.getLineCap()||Ha.mb,r.lineDash=t?t.slice():Ha.X9,r.lineDashOffset=void 0===e?Ha.He:e,r.lineJoin=s.getLineJoin()||Ha.rc,r.lineWidth=void 0===i?Ha.yC:i,r.miterLimit=void 0===n?Ha.V4:n,r.strokeStyle=(0,Ya.y)(s.getColor()||Ha.Tx)}else r=null,this.textStrokeState_=r;i=this.textState_;const o=t.getFont()||Ha.Df;(0,Ha.Qx)(o);const a=t.getScaleArray();i.overflow=t.getOverflow(),i.font=o,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Ha.ru,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Ha.oB,i.scale=void 0===a?[1,1]:a;const h=t.getOffsetX(),l=t.getOffsetY(),c=t.getRotateWithView(),u=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===h?0:h,this.textOffsetY_=void 0===l?0:l,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===u?0:u,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:(0,yn.sq)(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+(0,yn.sq)(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}},$a=class{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const n in i){const r=i[n].finish();t[e][n]=r}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);let r=n[e];return void 0===r&&(r=new(0,Qa[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=r),r}};var th=o(6442);function eh(t,e,i,n,r,s,o,a,h,l,c,u){let d=t[e],f=t[e+1],p=0,g=0,m=0,y=0;function v(){p=d,g=f,d=t[e+=n],f=t[e+1],y+=m,m=Math.sqrt((d-p)*(d-p)+(f-g)*(f-g))}do{v()}while(e<i-n&&y+m<s);let _=0===m?0:(s-y)/m;const b=(0,_n.t7)(p,d,_),w=(0,_n.t7)(g,f,_),x=e-n,S=y,M=s+a*h(l,r,c);for(;e<i-n&&y+m<M;)v();_=0===m?0:(M-y)/m;const C=(0,_n.t7)(p,d,_),A=(0,_n.t7)(g,f,_);let L;if(u){const t=[b,w,C,A];(0,th.U1)(t,0,4,2,u,t,t),L=t[0]>t[2]}else L=b>C;const N=Math.PI,E=[],P=x+n===e;let I;if(m=0,y=S,d=t[e=x],f=t[e+1],P){v(),I=Math.atan2(f-g,d-p),L&&(I+=I>0?-N:N);const t=(C+b)/2,e=(A+w)/2;return E[0]=[t,e,(M-s)/2,I,r],E}for(let t=0,u=(r=r.replace(/\n/g," ")).length;t<u;){v();let b=Math.atan2(f-g,d-p);if(L&&(b+=b>0?-N:N),void 0!==I){let t=b-I;if(t+=t>N?-2*N:t<-N?2*N:0,Math.abs(t)>o)return null}I=b;const w=t;let x=0;for(;t<u;++t){const o=a*h(l,r[L?u-t-1:t],c);if(e+n<i&&y+m<s+x+o/2)break;x+=o}if(t===w)continue;const S=L?r.substring(u-w,u-t):r.substring(w,t);_=0===m?0:(s+x/2-y)/m;const M=(0,_n.t7)(p,d,_),C=(0,_n.t7)(g,f,_);E.push([M,C,x/2,b,S]),s+=x}return E}var ih=o(7374);const nh=(0,mt.createEmpty)(),rh=[],sh=[],oh=[],ah=[];function hh(t){return t[3].declutterBox}const lh=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ch(t,e){return"start"!==e&&"end"!==e||lh.test(t)||(e="start"===e?"left":"right"),Ja[e]}function uh(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}const dh=class{constructor(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,Tn.create)(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,n){const r=t+e+i+n;if(this.labels_[r])return this.labels_[r];const s=n?this.strokeStates[n]:null,o=i?this.fillStates[i]:null,a=this.textStates[e],h=this.pixelRatio,l=[a.scale[0]*h,a.scale[1]*h],c=Array.isArray(t),u=a.justify?Ja[a.justify]:ch(Array.isArray(t)?t[0]:t,a.textAlign||Ha.PH),d=n&&s.lineWidth?s.lineWidth:0,f=c?t:t.split("\n").reduce(uh,[]),{width:p,height:g,widths:m,heights:y,lineWidths:v}=(0,Ha.Zw)(a,f),_=p+d,b=[],w=(_+2)*l[0],x=(g+d)*l[1],S={width:w<0?Math.floor(w):Math.ceil(w),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:b};1==l[0]&&1==l[1]||b.push("scale",l),n&&(b.push("strokeStyle",s.strokeStyle),b.push("lineWidth",d),b.push("lineCap",s.lineCap),b.push("lineJoin",s.lineJoin),b.push("miterLimit",s.miterLimit),b.push("setLineDash",[s.lineDash]),b.push("lineDashOffset",s.lineDashOffset)),i&&b.push("fillStyle",o.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const M=.5-u;let C=u*_+M*d;const A=[],L=[];let N,E=0,P=0,I=0,O=0;for(let t=0,e=f.length;t<e;t+=2){const e=f[t];if("\n"===e){P+=E,E=0,C=u*_+M*d,++O;continue}const r=f[t+1]||a.font;r!==N&&(n&&A.push("font",r),i&&L.push("font",r),N=r),E=Math.max(E,y[I]);const s=[e,C+M*m[I]+u*(m[I]-v[O]),.5*(d+E)+P];C+=m[I],n&&A.push("strokeText",s),i&&L.push("fillText",s),++I}return Array.prototype.push.apply(b,A),Array.prototype.push.apply(b,L),this.labels_[r]=S,S}replayTextBackground_(t,e,i,n,r,s,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),s&&(this.alignFill_=s[2],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,r,s,o,a,h,l,c,u,d,f,p,g){let m=i-(o*=u[0]),y=n-(a*=u[1]);const v=r+h>t?t-h:r,_=s+l>e?e-l:s,b=f[3]+v*u[0]+f[1],w=f[0]+_*u[1]+f[2],x=m-f[3],S=y-f[0];let M;return(p||0!==c)&&(rh[0]=x,ah[0]=x,rh[1]=S,sh[1]=S,sh[0]=x+b,oh[0]=sh[0],oh[1]=S+w,ah[1]=oh[1]),0!==c?(M=(0,Tn.compose)((0,Tn.create)(),i,n,1,1,c,-i,-n),(0,Tn.apply)(M,rh),(0,Tn.apply)(M,sh),(0,Tn.apply)(M,oh),(0,Tn.apply)(M,ah),(0,mt.createOrUpdate)(Math.min(rh[0],sh[0],oh[0],ah[0]),Math.min(rh[1],sh[1],oh[1],ah[1]),Math.max(rh[0],sh[0],oh[0],ah[0]),Math.max(rh[1],sh[1],oh[1],ah[1]),nh)):(0,mt.createOrUpdate)(Math.min(x,x+b),Math.min(S,S+w),Math.max(x,x+b),Math.max(S,S+w),nh),d&&(m=Math.round(m),y=Math.round(y)),{drawImageX:m,drawImageY:y,drawImageW:v,drawImageH:_,originX:h,originY:l,declutterBox:{minX:nh[0],minY:nh[1],maxX:nh[2],maxY:nh[3],value:g},canvasTransform:M,scale:u}}replayImageOrLabel_(t,e,i,n,r,s,o){const a=!(!s&&!o),h=n.declutterBox,l=t.canvas,c=o?o[2]*n.scale[0]/2:0;return h.minX-c<=l.width/e&&h.maxX+c>=0&&h.minY-c<=l.height/e&&h.maxY+c>=0&&(a&&this.replayTextBackground_(t,rh,sh,oh,ah,s,o),(0,Ha._f)(t,n.canvasTransform,r,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){if(this.alignFill_){const e=(0,Tn.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,n){const r=this.textStates[e],s=this.createLabel(t,e,n,i),o=this.strokeStates[i],a=this.pixelRatio,h=ch(Array.isArray(t)?t[0]:t,r.textAlign||Ha.PH),l=Ja[r.textBaseline||Ha.ru],c=o&&o.lineWidth?o.lineWidth:0;return{label:s,anchorX:h*(s.width/a-2*r.scale[0])+2*(.5-h)*c,anchorY:l*s.height/a+2*(.5-l)*c}}execute_(t,e,i,n,r,s,o,a){let h;this.pixelCoordinates_&&(0,jn.fS)(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=(0,th.vT)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,Tn.setFromArray)(this.renderedTransform_,i));let l=0;const c=n.length;let u,d,f,p,g,m,y,v,_,b,w,x,S=0,M=0,C=0,A=null,L=null;const N=this.coordinateCache_,E=this.viewRotation_,P=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,I={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:E},O=this.instructions!=n||this.overlaps?0:200;let R,F,T,k;for(;l<c;){const i=n[l];switch(i[0]){case za.BEGIN_GEOMETRY:R=i[1],k=i[3],R.getGeometry()?void 0===o||(0,mt.intersects)(o,k.getExtent())?++l:l=i[2]+1:l=i[2];break;case za.BEGIN_PATH:M>O&&(this.fill_(t),M=0),C>O&&(t.stroke(),C=0),M||C||(t.beginPath(),p=NaN,g=NaN),++l;break;case za.CIRCLE:S=i[1];const n=h[S],c=h[S+1],j=h[S+2]-n,D=h[S+3]-c,B=Math.sqrt(j*j+D*D);t.moveTo(n+B,c),t.arc(n,c,B,0,2*Math.PI,!0),++l;break;case za.CLOSE_PATH:t.closePath(),++l;break;case za.CUSTOM:S=i[1],u=i[2];const q=i[3],G=i[4],z=6==i.length?i[5]:void 0;I.geometry=q,I.feature=R,l in N||(N[l]=[]);const U=N[l];z?z(h,S,u,2,U):(U[0]=h[S],U[1]=h[S+1],U.length=2),G(U,I),++l;break;case za.DRAW_IMAGE:S=i[1],u=i[2],v=i[3],d=i[4],f=i[5];let W=i[6];const Y=i[7],H=i[8],V=i[9],X=i[10];let Z=i[11];const K=i[12];let J=i[13];const Q=i[14],$=i[15];if(!v&&i.length>=20){_=i[19],b=i[20],w=i[21],x=i[22];const t=this.drawLabelWithPointPlacement_(_,b,w,x);v=t.label,i[3]=v;const e=i[23];d=(t.anchorX-e)*this.pixelRatio,i[4]=d;const n=i[24];f=(t.anchorY-n)*this.pixelRatio,i[5]=f,W=v.height,i[6]=W,J=v.width,i[13]=J}let tt,et,it,nt;i.length>25&&(tt=i[25]),i.length>17?(et=i[16],it=i[17],nt=i[18]):(et=Ha.oB,it=!1,nt=!1),X&&P?Z+=E:X||P||(Z-=E);let rt=0;for(;S<u;S+=2){if(tt&&tt[rt++]<J/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(v.width,v.height,h[S],h[S+1],J,W,d,f,H,V,Z,K,r,et,it||nt,R),n=[t,e,v,i,Y,it?A:null,nt?L:null];if(a){if("none"===Q)continue;if("obstacle"===Q){a.insert(i.declutterBox);continue}{let t,e;if($){const i=u-S;if(!$[i]){$[i]=n;continue}if(t=$[i],delete $[i],e=hh(t),a.collides(e))continue}if(a.collides(i.declutterBox))continue;t&&(a.insert(e),this.replayImageOrLabel_.apply(this,t)),a.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,n)}++l;break;case za.DRAW_CHARS:const st=i[1],ot=i[2],at=i[3],ht=i[4];x=i[5];const lt=i[6],ct=i[7],ut=i[8];w=i[9];const dt=i[10];_=i[11],b=i[12];const ft=[i[13],i[13]],pt=this.textStates[b],gt=pt.font,yt=[pt.scale[0]*ct,pt.scale[1]*ct];let vt;gt in this.widths_?vt=this.widths_[gt]:(vt={},this.widths_[gt]=vt);const _t=(0,ih.W)(h,st,ot,2),bt=Math.abs(yt[0])*(0,Ha.Kd)(gt,_,vt);if(ht||bt<=_t){const i=this.textStates[b].textAlign,n=eh(h,st,ot,2,_,(_t-bt)*Ja[i],lt,Math.abs(yt[0]),Ha.Kd,gt,vt,P?0:this.viewRotation_);t:if(n){const i=[];let r,s,o,h,l;if(w)for(r=0,s=n.length;r<s;++r){l=n[r],o=l[4],h=this.createLabel(o,b,"",w),d=l[2]+(yt[0]<0?-dt:dt),f=at*h.height+2*(.5-at)*dt*yt[1]/yt[0]-ut;const s=this.calculateImageOrLabelDimensions_(h.width,h.height,l[0],l[1],h.width,h.height,d,f,0,0,l[3],ft,!1,Ha.oB,!1,R);if(a&&a.collides(s.declutterBox))break t;i.push([t,e,h,s,1,null,null])}if(x)for(r=0,s=n.length;r<s;++r){l=n[r],o=l[4],h=this.createLabel(o,b,x,""),d=l[2],f=at*h.height-ut;const s=this.calculateImageOrLabelDimensions_(h.width,h.height,l[0],l[1],h.width,h.height,d,f,0,0,l[3],ft,!1,Ha.oB,!1,R);if(a&&a.collides(s.declutterBox))break t;i.push([t,e,h,s,1,null,null])}a&&a.load(i.map(hh));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++l;break;case za.END_GEOMETRY:if(void 0!==s){R=i[1];const t=s(R,k);if(t)return t}++l;break;case za.FILL:O?M++:this.fill_(t),++l;break;case za.MOVE_TO_LINE_TO:for(S=i[1],u=i[2],F=h[S],T=h[S+1],m=F+.5|0,y=T+.5|0,m===p&&y===g||(t.moveTo(F,T),p=m,g=y),S+=2;S<u;S+=2)F=h[S],T=h[S+1],m=F+.5|0,y=T+.5|0,S!=u-2&&m===p&&y===g||(t.lineTo(F,T),p=m,g=y);++l;break;case za.SET_FILL_STYLE:A=i,this.alignFill_=i[2],M&&(this.fill_(t),M=0,C&&(t.stroke(),C=0)),t.fillStyle=i[1],++l;break;case za.SET_STROKE_STYLE:L=i,C&&(t.stroke(),C=0),this.setStrokeStyle_(t,i),++l;break;case za.STROKE:O?C++:t.stroke(),++l;break;default:++l}}M&&this.fill_(t),C&&t.stroke()}execute(t,e,i,n,r,s){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,r,void 0,void 0,s)}executeHitDetection(t,e,i,n,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,r)}},fh=["Polygon","Circle","LineString","Image","Text","Default"],ph={},gh=class{constructor(t,e,i,n,r,s){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,Tn.create)(),this.createExecutors_(r)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);const n=t[e];for(const t in n){const e=n[t];i[t]=new dh(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,n=t.length;e<n;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,r,s){const o=2*(n=Math.round(n))+1,a=(0,Tn.compose)(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=(0,it.E4)(o,o,void 0,{willReadFrequently:!0}));const l=this.hitDetectionContext_;let c;l.canvas.width!==o||l.canvas.height!==o?(l.canvas.width=o,l.canvas.height=o):h||l.clearRect(0,0,o,o),void 0!==this.renderBuffer_&&(c=(0,mt.createEmpty)(),(0,mt.extendCoordinate)(c,t),(0,mt.buffer)(c,e*(this.renderBuffer_+n),c));const u=function(t){if(void 0!==ph[t])return ph[t];const e=2*t+1,i=t*t,n=new Array(i+1);for(let r=0;r<=t;++r)for(let s=0;s<=t;++s){const o=r*r+s*s;if(o>i)break;let a=n[o];a||(a=[],n[o]=a),a.push(4*((t+r)*e+(t+s))+3),r>0&&a.push(4*((t-r)*e+(t+s))+3),s>0&&(a.push(4*((t+r)*e+(t-s))+3),r>0&&a.push(4*((t-r)*e+(t-s))+3))}const r=[];for(let t=0,e=n.length;t<e;++t)n[t]&&r.push(...n[t]);return ph[t]=r,r}(n);let d;function f(t,e){const i=l.getImageData(0,0,o,o).data;for(let a=0,h=u.length;a<h;a++)if(i[u[a]]>0){if(!s||"Image"!==d&&"Text"!==d||s.includes(t)){const i=(u[a]-3)/4,s=n-i%o,h=n-(i/o|0),l=r(t,e,s*s+h*h);if(l)return l}l.clearRect(0,0,o,o);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);let g,m,y,v,_;for(p.sort(jn.j2),g=p.length-1;g>=0;--g){const t=p[g].toString();for(y=this.executorsByZIndex_[t],m=fh.length-1;m>=0;--m)if(d=fh[m],v=y[d],void 0!==v&&(_=v.executeHitDetection(l,a,i,f,c),_))return _}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],n=e[1],r=e[2],s=e[3],o=[i,n,i,s,r,s,r,n];return(0,th.vT)(o,0,8,2,t,o),o}isEmpty(){return(0,Qo.x)(this.executorsByZIndex_)}execute(t,e,i,n,r,s,o){const a=Object.keys(this.executorsByZIndex_).map(Number);let h,l,c,u,d,f;for(a.sort(jn.j2),this.maxExtent_&&(t.save(),this.clip(t,i)),s=s||fh,o&&a.reverse(),h=0,l=a.length;h<l;++h){const l=a[h].toString();for(d=this.executorsByZIndex_[l],c=0,u=s.length;c<u;++c)f=d[s[c]],void 0!==f&&f.execute(t,e,i,n,r,o)}this.maxExtent_&&t.restore()}};var mh=o(5069);const yh=.5;var vh=o(6234),_h=o(1900);const bh=class extends qn{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,mt.createEmpty)(),this.wrappedRenderedExtent_=(0,mt.createEmpty)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const n=e.extent,r=e.viewState,s=r.center,o=r.resolution,a=r.projection,h=r.rotation,l=a.getExtent(),c=this.getLayer().getSource(),u=e.pixelRatio,d=e.viewHints,f=!(d[0]||d[1]),p=this.compositionContext_,g=Math.round(e.size[0]*u),m=Math.round(e.size[1]*u),y=c.getWrapX()&&a.canWrapX(),v=y?(0,mt.getWidth)(l):null,_=y?Math.ceil((n[2]-l[2])/v)+1:1;let b=y?Math.floor((n[0]-l[0])/v):0;do{const e=this.getRenderTransform(s,o,h,u,g,m,b*v);t.execute(p,1,e,h,f,void 0,i)}while(++b<_)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,it.E4)(this.context.canvas.width,this.context.canvas.height,Dn);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,it.jy)(this.compositionContext_),Dn.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];(0,Tn.makeScale)(this.pixelTransform,1/i,1/i),(0,Tn.makeInverse)(this.inversePixelTransform,this.pixelTransform);const r=(0,Tn.toString)(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const s=this.context,o=s.canvas,a=this.replayGroup_,h=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!h||h.isEmpty()))return null;const l=Math.round(t.size[0]*i),c=Math.round(t.size[1]*i);o.width!=l||o.height!=c?(o.width=l,o.height=c,o.style.transform!==r&&(o.style.transform=r)):this.containerReused||s.clearRect(0,0,l,c),this.preRender(s,t);const u=t.viewState,d=u.projection;this.opacity_=n.opacity,this.setupCompositionContext_();let f=!1,p=!0;if(n.extent&&this.clipping){const e=(0,yt.dY)(n.extent,d);p=(0,mt.intersects)(e,t.extent),f=p&&!(0,mt.containsExtent)(e,t.extent),f&&this.clipUnrotated(this.compositionContext_,t,e)}return p&&this.renderWorlds(a,t),f&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(s,t),this.renderedRotation_!==u.rotation&&(this.renderedRotation_=u.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise((e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];(0,Tn.apply)(this.pixelTransform,t);const e=this.renderedCenter_,i=this.renderedResolution_,n=this.renderedRotation_,r=this.renderedProjection_,s=this.wrappedRenderedExtent_,o=this.getLayer(),a=[],h=t[0]*yh,l=t[1]*yh;a.push(this.getRenderTransform(e,i,n,yh,h,l,0).slice());const c=o.getSource(),u=r.getExtent();if(c.getWrapX()&&r.canWrapX()&&!(0,mt.containsExtent)(u,s)){let t=s[0];const r=(0,mt.getWidth)(u);let o,c=0;for(;t<u[0];)--c,o=r*c,a.push(this.getRenderTransform(e,i,n,yh,h,l,o).slice()),t+=r;for(c=0,t=s[2];t>u[2];)++c,o=r*c,a.push(this.getRenderTransform(e,i,n,yh,h,l,o).slice()),t-=r}this.hitDetectionImageData_=function(t,e,i,n,r,s,o){const a=t[0]*yh,h=t[1]*yh,l=(0,it.E4)(a,h);l.imageSmoothingEnabled=!1;const c=l.canvas,u=new mh.default(l,yh,r,null,o),d=i.length,f=Math.floor(16777215/d),p={};for(let t=1;t<=d;++t){const e=i[t-1],o=e.getStyleFunction()||n;if(!n)continue;let a=o(e,s);if(!a)continue;Array.isArray(a)||(a=[a]);const h=(t*f).toString(16).padStart(7,"#00000");for(let t=0,i=a.length;t<i;++t){const i=a[t],n=i.getGeometryFunction()(e);if(!n||!(0,mt.intersects)(r,n.getExtent()))continue;const s=i.clone(),o=s.getFill();o&&o.setColor(h);const l=s.getStroke();l&&(l.setColor(h),l.setLineDash(null)),s.setText(void 0);const c=i.getImage();if(c&&0!==c.getOpacity()){const t=c.getImageSize();if(!t)continue;const e=(0,it.E4)(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=h,e.fillRect(0,0,i.width,i.height),s.setImage(new Aa.default({img:i,imgSize:t,anchor:c.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:c.getOrigin(),opacity:1,size:c.getSize(),scale:c.getScale(),rotation:c.getRotation(),rotateWithView:c.getRotateWithView()}))}const u=s.getZIndex()||0;let d=p[u];d||(d={},p[u]=d,d.Polygon=[],d.Circle=[],d.LineString=[],d.Point=[]);const f=n.getType();if("GeometryCollection"===f){const t=n.getGeometriesArrayRecursive();for(let e=0,i=t.length;e<i;++e){const i=t[e];d[i.getType().replace("Multi","")].push(i,s)}}else d[f.replace("Multi","")].push(n,s)}}const g=Object.keys(p).map(Number).sort(jn.j2);for(let t=0,i=g.length;t<i;++t){const i=p[g[t]];for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t+=2){u.setStyle(n[t+1]);for(let i=0,r=e.length;i<r;++i)u.setTransform(e[i]),u.drawGeometry(n[t])}}}return l.getImageData(0,0,c.width,c.height)}(t,a,this.renderedFeatures_,o.getStyleFunction(),s,i,n)}e(function(t,e,i){const n=[];if(i){const r=Math.floor(Math.round(t[0])*yh),s=Math.floor(Math.round(t[1])*yh),o=4*((0,_n.uZ)(r,0,i.width-1)+(0,_n.uZ)(s,0,i.height-1)*i.width),a=i.data[o],h=i.data[o+1],l=i.data[o+2]+256*(h+256*a),c=Math.floor(16777215/e.length);l&&l%c==0&&n.push(e[l/c-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,i,n,r){if(!this.replayGroup_)return;const s=e.viewState.resolution,o=e.viewState.rotation,a=this.getLayer(),h={},l=function(t,e,i){const s=(0,yn.sq)(t),o=h[s];if(o){if(!0!==o&&i<o.distanceSq){if(0===i)return h[s]=!0,r.splice(r.lastIndexOf(o),1),n(t,a,e);o.geometry=e,o.distanceSq=i}}else{if(0===i)return h[s]=!0,n(t,a,e);r.push(h[s]={feature:t,layer:a,geometry:e,distanceSq:i,callback:n})}};let c;const u=[this.replayGroup_];return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup),u.some((n=>c=n.forEachFeatureAtCoordinate(t,s,o,i,l,n===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((t=>t.value)):null))),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const n=t.viewHints[0],r=t.viewHints[1],s=e.getUpdateWhileAnimating(),o=e.getUpdateWhileInteracting();if(this.ready&&!s&&n||!o&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,h=t.viewState,l=h.projection,c=h.resolution,u=t.pixelRatio,d=e.getRevision(),f=e.getRenderBuffer();let p=e.getRenderOrder();void 0===p&&(p=vh.eR);const g=h.center.slice(),m=(0,mt.buffer)(a,f*c),y=m.slice(),v=[m.slice()],_=l.getExtent();if(i.getWrapX()&&l.canWrapX()&&!(0,mt.containsExtent)(_,t.extent)){const t=(0,mt.getWidth)(_),e=Math.max((0,mt.getWidth)(m)/2,t);m[0]=_[0]-e,m[2]=_[2]+e,(0,_h.Cf)(g,l);const i=(0,mt.wrapX)(v[0],l);i[0]<_[0]&&i[2]<_[2]?v.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>_[0]&&i[2]>_[2]&&v.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==p&&(0,mt.containsExtent)(this.wrappedRenderedExtent_,m))return(0,jn.fS)(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new $a((0,vh.Qz)(c,u),m,c,u);let w;this.getLayer().getDeclutter()&&(w=new $a((0,vh.Qz)(c,u),m,c,u));const x=(0,yt.Cs)();let S;if(x){for(let t=0,e=v.length;t<e;++t){const e=v[t],n=(0,yt.Fj)(e,l);i.loadFeatures(n,(0,yt.on)(c,l),x)}S=(0,yt.WO)(x,l)}else for(let t=0,e=v.length;t<e;++t)i.loadFeatures(v[t],c,l);const M=(0,vh.se)(c,u);let C=!0;const A=t=>{let i;const n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,c)),i){const e=this.renderFeature(t,M,i,b,S,w);C=C&&!e}},L=(0,yt.Fj)(m,l),N=i.getFeaturesInExtent(L);p&&N.sort(p);for(let t=0,e=N.length;t<e;++t)A(N[t]);this.renderedFeatures_=N,this.ready=C;const E=b.finish(),P=new gh(m,c,u,i.getOverlaps(),E,e.getRenderBuffer());return w&&(this.declutterExecutorGroup=new gh(m,c,u,i.getOverlaps(),w.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=p,this.renderedExtent_=y,this.wrappedRenderedExtent_=m,this.renderedCenter_=g,this.renderedProjection_=l,this.replayGroup_=P,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,r,s){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let a=0,h=i.length;a<h;++a)o=(0,vh.Pn)(n,t,i[a],e,this.boundHandleStyleImageChange_,r,s)||o;else o=(0,vh.Pn)(n,t,i,e,this.boundHandleStyleImageChange_,r,s);return o}},wh=class extends ka{constructor(t){super(t)}createRenderer(){return new bh(this)}};var xh=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.scheduler=e,n.work=i,n.pending=!1,n}return s(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i=!1,n=void 0;try{this.work(t)}catch(t){i=!0,n=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,n=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&i.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,i){return t.call(this)||this}return s(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(m)),Sh=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=function(){return Date.now()},t}(),Mh=function(t){function e(i,n){void 0===n&&(n=Sh.now);var r=t.call(this,i,(function(){return e.delegate&&e.delegate!==r?e.delegate.now():n()}))||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return s(e,t),e.prototype.schedule=function(i,n,r){return void 0===n&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(i,n,r):t.prototype.schedule.call(this,i,n,r)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(Sh),Ch=new Mh(xh);function Ah(t){var e=t.subscriber,i=t.counter,n=t.period;e.next(i),this.schedule({subscriber:e,counter:i+1,period:n},n)}var Lh=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Nh=function(t){function e(e,i){var n=t.call(this)||this;return n.subject=e,n.subscriber=i,n.closed=!1,n}return s(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(m),Eh=function(t){function e(e){var i=t.call(this,e)||this;return i.destination=e,i}return s(e,t),e}(_),Ph=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return s(e,t),e.prototype[v]=function(){return new Eh(this)},e.prototype.lift=function(t){var e=new Ih(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new Lh;if(!this.isStopped)for(var e=this.observers,i=e.length,n=e.slice(),r=0;r<i;r++)n[r].next(t)},e.prototype.error=function(t){if(this.closed)throw new Lh;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,n=e.slice(),r=0;r<i;r++)n[r].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Lh;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),n=0;n<e;n++)i[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new Lh;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new Lh;return this.hasError?(t.error(this.thrownError),m.EMPTY):this.isStopped?(t.complete(),m.EMPTY):(this.observers.push(t),new Nh(this,t))},e.prototype.asObservable=function(){var t=new L;return t.source=this,t},e.create=function(t,e){return new Ih(t,e)},e}(L),Ih=function(t){function e(e,i){var n=t.call(this)||this;return n.destination=e,n.source=i,n}return s(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):m.EMPTY},e}(Ph);function Oh(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof e?function(n){return n.pipe(Oh((function(i,n){return k(t(i,n)).pipe(w((function(t,r){return e(i,t,n,r)})))}),i))}:("number"==typeof e&&(i=e),function(e){return e.lift(new Rh(t,i))})}var Rh=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Fh(t,this.project,this.concurrent))},t}(),Fh=function(t){function e(e,i,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e)||this;return r.project=i,r.concurrent=n,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return s(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new j(this),i=this.destination;i.add(e);var n=B(t,e);n!==e&&i.add(n)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(D);function Th(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Oh(C,t)}var kh=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var i=t.prototype._subscribe.call(this,e);return i&&!i.closed&&e.next(this._value),i},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Lh;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(Ph);function jh(){return Th(1)}function Dh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jh()(ut.apply(void 0,t))}function Bh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1];return nt(i)?(t.pop(),function(e){return Dh(t,e,i)}):function(e){return Dh(t,e)}}var qh={leading:!0,trailing:!1},Gh=function(){function t(t,e,i,n){this.duration=t,this.scheduler=e,this.leading=i,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new zh(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),zh=function(t){function e(e,i,n,r,s){var o=t.call(this,e)||this;return o.duration=i,o.scheduler=n,o.leading=r,o.trailing=s,o._hasTrailingValue=!1,o._trailingValue=null,o}return s(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Uh,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(_);function Uh(t){t.subscriber.clearThrottle()}function Wh(t,e){return function(i){return i.lift(new Yh(t,e))}}var Yh=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Hh(t,this.predicate,this.thisArg))},t}(),Hh=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.predicate=i,r.thisArg=n,r.count=0,r}return s(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(_),Vh=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),Xh=new L((function(t){return t.complete()}));function Zh(t){return t?function(t){return new L((function(e){return t.schedule((function(){return e.complete()}))}))}(t):Xh}function Kh(t){return function(e){return 0===t?Zh():e.lift(new Jh(t))}}var Jh=function(){function t(t){if(this.total=t,this.total<0)throw new Vh}return t.prototype.call=function(t,e){return e.subscribe(new Qh(t,this.total))},t}(),Qh=function(t){function e(e,i){var n=t.call(this,e)||this;return n.total=i,n.count=0,n}return s(e,t),e.prototype._next=function(t){var e=this.total,i=++this.count;i<=e&&(this.destination.next(t),i===e&&(this.destination.complete(),this.unsubscribe()))},e}(_);const $h=class extends yr{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}},tl=1/0,el=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,Qo.Z)(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){(0,vn.h)(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=tl&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,r=e[t],s=i[t],o=t;for(;t<n>>1;){const r=this.getLeftChildIndex_(t),s=this.getRightChildIndex_(t),o=s<n&&i[s]<i[r]?s:r;e[t]=e[o],i[t]=i[o],t=o}e[t]=r,i[t]=s,this.siftDown_(o,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,r=i[e],s=n[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(n[t]>s))break;i[e]=i[t],n[e]=n[t],e=t}i[e]=r,n[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const r=e.length;let s,o,a;for(o=0;o<r;++o)s=e[o],a=t(s),a==tl?delete this.queuedElements_[this.keyFunction_(s)]:(i[n]=a,e[n++]=s);e.length=n,i.length=n,this.heapify_()}},il=class extends el{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(xn.Z.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(2===i||3===i||4===i){3!==i&&e.removeEventListener(xn.Z.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,n,r,s=0;for(;this.tilesLoading_<t&&s<e&&this.getCount()>0;)n=this.dequeue()[0],r=n.getKey(),i=n.getState(),0!==i||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++s,n.load())}};function nl(t,e){switch(t){case"in":return 1/e;case"cm":return gt/e;case"mm":return 25.4/e;case"m":return.0254/e;case"px":return 1;default:throw new Error(`Invalid real world unit: ${t}`)}}function rl(t,e,i){return t/nl(e,i)}function sl(t,e,i){return t*nl(e,i)}function ol(t,e,i){const n=(0,yt.U2)(t);return e*gt/i/n.getMetersPerUnit()/100}function al(t,e,i){let n=0,r={...t,layerStatesArray:[{layer:e,managed:!0,maxResolution:null,maxZoom:null,minResolution:0,minZoom:null,opacity:void 0!==i?i:1,sourceState:"",visible:!0,zIndex:0}],get time(){return n+=1e4,n}};return r.tileQueue=new il(((t,e,i,n)=>function(t,e,i,n,r){if(!t||!(i in t.wantedTiles))return tl;if(!t.wantedTiles[i][e.getKey()])return tl;const s=t.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}(r,t,e,i,n)),(()=>{})),r}function hl(t){this.containerReused=!1,this.canvas=t.canvas,this.context=t,this.container={firstElementChild:t.canvas,style:{opacity:1}}}var ll=o(3772),cl=o.n(ll);const ul=(void 0===(dl=500)&&(dl=0),void 0===fl&&(fl=Ch),(d(pl=dl)||!(pl-parseFloat(pl)+1>=0)||dl<0)&&(dl=0),fl&&"function"==typeof fl.schedule||(fl=Ch),new L((function(t){return t.add(fl.schedule(Ah,dl,{subscriber:t,counter:0,period:dl})),t})));var dl,fl,pl;const gl=new Ph;function ml(t,e,i,n){const r=i.size[0],s=i.size[1],o=(0,it.E4)(r,s);let a,h,l,c;o.canvas.style={},h=new sr({source:e}),e.setTileLoadFunction((function(t,e){const n=t.getImage();if(tt()){const t=h.getSource().getTilePixelSize(0,i.pixelRatio,i.viewState.projection);n.hintImageSize(t[0],t[1])}n.src=e})),h.getSource().on("tileloaderror",(function(t){c=t.target.getUrls()[0]})),a=al(i,h,n),l=h.getRenderer(),l.useContainer=hl.bind(l,o),l.renderFrame(a,o.canvas);const u=Object.keys(a.tileQueue.queuedElements_).length,d=ul.pipe(Bh(!0),U((()=>(a.tileQueue.reprioritize(),a.tileQueue.loadMoreTiles(12,4),a.tileQueue.getTilesLoading())),!0),w((()=>{let t=1-Object.keys(a.tileQueue.queuedElements_).length/u;return 1===t&&a.tileQueue.getTilesLoading()>0&&(t-=.001),1===t?(l.renderFrame(a,o.canvas),[1,o.canvas,c]):[t,null,c]})),function(t,e,i){return void 0===e&&(e=Ch),void 0===i&&(i=qh),function(t){return t.lift(new Gh(500,e,i.leading,i.trailing))}}(0,void 0,{leading:!0,trailing:!0}));return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return nt(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof r&&(i=t.pop()),null===n&&1===t.length&&t[0]instanceof L?t[0]:Th(i)(at(t,n))}(d,gl.pipe(Wh((e=>e===t)),w((()=>[-1,null,void 0])))).pipe(U((([t])=>-1!==t&&1!==t),!0))}function yl(t){return t.tiled?{LAYERS:t.layer,VERSION:t.version||"1.3.0",TILED:!0,...t.customParams}:{LAYERS:t.layer,VERSION:t.version||"1.3.0",...t.customParams}}function vl(t,e,i,n){const r=e.split("-")[1],s=e.split("-")[0],o=Math.round(4*n/25.4);t.translate("left"===r?o:t.canvas.width-o-i[0],"top"===s?o:t.canvas.height-o-i[1])}function _l(t){return t.layers.filter((t=>!!t.attribution)).map((t=>t.attribution)).join(", ")||"Unknown source"}class bl{constructor(t,e){this.image_=t,this.dpi_=e}getImage(){return this.image_}getRealWorldDimensions(t){return[sl(this.image_.width,t,this.dpi_),sl(this.image_.height,t,this.dpi_)]}getDpi(){return this.dpi_}}const wl=130,xl=["M 12.940954,-48.296291 A 50,50 0 0 1 49.809735,-4.3577871","M -49.809735,-4.3577863 A 50,50 0 0 1 -12.940952,-48.296291","M -4.3577877,49.809735 A 50,50 0 0 1 -49.809735,4.3577867","M 49.809735,4.3577872 A 50,50 0 0 1 4.3577854,49.809735","M -5.2916667,-43.38024 V -56.609407 L 5.2916667,-43.38024 v -13.229167","M -21.166667,31.75 0,-31.75 21.166667,31.75 0,15.875 Z"],Sl=["M 0,-31.75 21.166667,31.75 0,15.875 Z"],Ml=["m 8,-50 a 8,8 0 0 1 -8,8 8,8 0 0 1 -8,-8 8,8 0 0 1 8,-8 8,8 0 0 1 8,8 z","M 50,0 A 50,50 0 0 1 0,50 50,50 0 0 1 -50,0 50,50 0 0 1 0,-50 50,50 0 0 1 50,0 Z"],Cl=["M -21.166667,31.75 0,-31.75 21.166667,31.75 0,15.875 Z"];function Al(t){return rl(30,"mm",t)}function Ll(t){t.lineCap="round",t.lineJoin="round",t.fillStyle="rgb(255, 255, 255)",t.strokeStyle="rgb(255, 255, 255)",t.lineWidth=8,Ml.forEach((e=>{t.stroke(new Path2D(e))})),Cl.forEach((e=>{t.fill(new Path2D(e))})),t.fillStyle="rgb(0, 0, 0)",t.strokeStyle="rgb(0, 0, 0)",t.lineWidth=3,xl.forEach((e=>{t.stroke(new Path2D(e))})),Sl.forEach((e=>{t.fill(new Path2D(e))}))}function Nl(t,e){const i=e||rl(40,"mm",t.dpi),n=[1,2,5],r="object"==typeof t.scaleBar&&t.scaleBar.units||"metric",s=(0,yt.mi)(t.center,t.projection),o=ol(t.projection,t.scale,t.dpi),a="degrees"===r?r:"m";let h=(0,yt._Q)(t.projection,o,s,a),l=i*h,c="";if("degrees"===r){const t=yt.Wm[r];l*=t,l<t/60?(c="",h*=3600):l<t?(c="",h*=60):c=""}else"imperial"===r?l<.9144?(c="in",h/=.0254):l<1609.344?(c="ft",h/=.3048):(c="mi",h/=1609.344):"nautical"===r?(h/=1852,c="nm"):"metric"===r?l<.001?(c="m",h*=1e6):l<1?(c="mm",h*=1e3):l<1e3?c="m":(c="km",h/=1e3):"us"===r&&(l<.9144?(c="in",h*=39.37):l<1609.344?(c="ft",h/=.30480061):(c="mi",h/=1609.3472));let u,d,f,p=3*Math.floor(Math.log(i*h)/Math.log(10));for(;;){f=Math.floor(p/3);const t=Math.pow(10,f);if(u=n[(p%3+3)%3]*t,d=Math.round(u/h),isNaN(d))return;if(d>=i)break;++p}return{widthMm:sl(d,"mm",t.dpi),scaleIndication:`${u} ${c}`}}function El(t,e,i){i.font="6px Arial";const n=i.measureText(t.scaleIndication).width;return[rl(t.widthMm+n+1,"mm",e),rl(11,"mm",e)]}function Pl(t,e){const i=e.widthMm,n="#FFFFFF";t.lineJoin="round",t.lineCap="round",t.lineWidth=1,t.font="6px Arial",t.translate(.5,.5),t.textAlign="left",t.strokeStyle=n,t.fillStyle="#000000",t.textBaseline="top",t.strokeText("0",0,0),t.fillText("0",0,0),t.strokeText(e.scaleIndication,i,0),t.fillText(e.scaleIndication,i,0),t.translate(6*.3,7),t.strokeRect(0,0,i,3),t.fillRect(0,0,i,3),t.fillStyle=n,t.fillRect(.25*i,.5,.25*i,2),t.fillRect(.75*i,.5,.25*i-.5,2)}let Il=0;async function Ol(t){!function(t){if(t)for(const e of t)on(e.name,e.proj4,e.bbox)}(t.projectionDefinitions);const e=function(t){const{size:e,dpi:i}=t;if(!e[2]||"px"===e[2])return[e[0],e[1]];let n,r;switch(e[2]){case"in":n=i*e[0],r=i*e[1];break;case"cm":n=i*e[0]/gt,r=i*e[1]/gt;break;case"mm":n=i*e[0]/25.4,r=i*e[1]/25.4;break;case"m":n=i*e[0]*100/gt,r=i*e[1]*100/gt;break;default:n=e[0],r=e[1]}return[Math.round(n),Math.round(r)]}(t),i=await async function(t,e){let i=(0,yt.U2)(t.projection);if(!i&&t.projection.startsWith("EPSG:")){const e=t.projection.split(":"),{name:n,proj4def:r,bbox:s}=await async function(t){const e=await fetch("https://epsg.io/?format=json&q="+t),i=(await e.json()).results;if(i&&i.length>0)for(let t=0,e=i.length;t<e;t++){const e=i[t];if(e){const t=e.code,i=e.proj4,n=e.bbox;if(t&&t.length>0&&i&&i.length>0&&n&&4==n.length)return{name:"EPSG:"+t,proj4def:i,bbox:n}}}}(e[1]);on(n,r,s),i=(0,yt.U2)(t.projection)}const n=ol(t.projection,t.scale,t.dpi),r={center:(0,yt.mi)(t.center,i),resolution:n,projection:i,rotation:0,zoom:1};return{animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:[],mapId:"",renderTargets:{},extent:(0,mt.getForViewAndSize)(r.center,r.resolution,r.rotation,e),index:0,layerIndex:0,layerStatesArray:[],pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:e,time:Date.now(),usedTiles:{},viewState:r,viewHints:[0,0],wantedTiles:{},tileQueue:null}}(t,e),n={id:Il++,spec:t,status:"pending",progress:0,sourceLoadErrors:[]},r=(0,it.E4)(e[0],e[1]),s=t.layers.length?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=void 0,n=void 0;return nt(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(i=t.pop()),1===t.length&&d(t[0])&&(t=t[0]),at(t,n).lift(new lt(i))}(t.layers.map((t=>function(t,e,i){switch(e.type){case"XYZ":return function(t,e,i){return ml(t,new Or({crossOrigin:"anonymous",url:e.url,transition:0}),i,e.opacity)}(t,e,i);case"WMS":return function(t,e,i){if(e.tiled)return ml(t,new Ur({crossOrigin:"anonymous",url:e.url,params:yl(e),transition:0}),i,e.opacity);const n=i.size[0],r=i.size[1],s=(0,it.E4)(n,r);let o,a,h;s.canvas.style={};const l=new kh([0,null,void 0]),c=new zr({crossOrigin:"anonymous",url:e.url,params:yl(e),ratio:1});return a=new xa({source:c}),c.setImageLoadFunction((function(e,i){const s=e.getImage();tt()&&s.hintImageSize(n,r),gl.pipe(Wh((e=>e===t)),Kh(1),J((()=>{l.next([-1,null,void 0]),l.complete(),s.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}))).subscribe(),s.src=i})),o=al(i,a,e.opacity),h=a.getRenderer(),h.useContainer=hl.bind(h,s),a.getSource().once("imageloaderror",(function(t){const e=t.target.getUrl();l.next([1,s.canvas,e]),l.complete()})),a.getSource().once("imageloadend",(()=>{h.prepareFrame({...o,time:Date.now()}),h.renderFrame({...o,time:Date.now()},s.canvas),l.next([1,s.canvas,void 0]),l.complete()})),h.prepareFrame({...o,time:Date.now()}),l}(t,e,i);case"WMTS":return function(t,e,i){let{tileGrid:n,projection:r}=e,{resolutions:s,extent:o,matrixIds:a}=n;o=o||br(r),a=a||Array(s.length).fill(0).map(((t,e)=>`${e}`));const h=new $h({...n,extent:o,matrixIds:a});return ml(t,new Ir({...e,tileGrid:h,projection:r,transition:0,crossOrigin:"anonymous"}),i,e.opacity)}(t,e,i);case"WFS":return function(t,e,i){const n=i.size[0],r=i.size[1],s=(0,it.E4)(n,r);let o,a;s.canvas.style={};const h=e.version||"1.1.0",l="geojson"===e.format?new ea:new Yo({version:h}),c=new kh([0,null]);let u=new _a({format:l,loader:function(i,n,r){const d=r.getCode(),f=function(t,e,i,n,r,s){if("http"!==t.substring(0,4))return t;const o=new URL(t),a="2.0.0"===e?"typenames":"typename";return o.searchParams.set("SERVICE","WFS"),o.searchParams.set("version",e),o.searchParams.set("request","GetFeature"),o.searchParams.set(a,i),o.searchParams.set("srsName",r),o.searchParams.set("bbox",`${s.join(",")},${r}`),"geojson"===n&&o.searchParams.set("outputFormat","application/json"),o.href}(e.url,h,e.layer,e.format,d,i);fetch(f).then((t=>{if(t.status>=400)throw new Error;return t.text()})).then((t=>{u.addFeatures(l.readFeatures(t)),0!==u.getFeatures().length&&(a.prepareFrame({...o,time:Date.now()}),a.renderFrame({...o,time:Date.now()},s.canvas)),c.next([1,s.canvas]),c.complete()})).catch((()=>{c.next([1,s.canvas,e.url]),c.complete()})),gl.pipe(Wh((e=>e===t)),Kh(1),J((()=>{c.next([-1,null]),c.complete()}))).subscribe()},strategy:ma}),d=new wh({source:u});return e.style&&(new(cl())).writeStyle(e.style).then((({output:t})=>d.setStyle(t))).catch((t=>console.log(t))),o=al(i,d),a=d.getRenderer(),a.useContainer=hl.bind(a,s),a.prepareFrame({...o,time:Date.now()}),c}(t,e,i);case"GeoJSON":return function(t,e){const i=e.size[0],n=e.size[1],r=(0,it.E4)(i,n);r.canvas.style={};const s=new _a({features:(new ea).readFeatures(t.geojson)}),o=new wh({source:s});let a=al(e,o),h=o.getRenderer();h.useContainer=hl.bind(h,r);const l=new kh([0,null]);return(t.style?(new(cl())).writeStyle(t.style).then((({output:t})=>o.setStyle(t))).catch((t=>console.log(t))):Promise.resolve()).then((()=>{h.prepareFrame({...a,time:Date.now()}),h.renderFrame({...a,time:Date.now()},r.canvas),l.next([1,r.canvas]),l.complete()})),l}(e,i)}}(n.id,t,i)))):ut([]);s.pipe(q((e=>{const i=e.every((([t])=>1===t)),n=e.some((([t])=>-1===t));let s=[];if(i){for(let t=0;t<e.length;t++){const i=e[t][1],n=e[t][2];0!==i.width&&0!==i.height&&(r.drawImage(i,0,0),n&&s.push({url:n}))}return t.northArrow&&function(t,e,i){const n=Al(i);t.save(),vl(t,!0===e?"top-right":e,[n,n],i),t.translate(n/2,n/2),t.scale(n/wl,n/wl),Ll(t),t.restore()}(r,t.northArrow,t.dpi),("object"==typeof t.scaleBar&&t.scaleBar.position||t.scaleBar)&&function(t,e){const i=Nl(e),n="object"==typeof e.scaleBar?e.scaleBar.position:e.scaleBar,[r,s]=El(i,e.dpi,t);t.save(),vl(t,"boolean"==typeof n?"bottom-left":n,[r,s],e.dpi);const o=rl(1,"mm",e.dpi);t.scale(o,o),Pl(t,i),t.restore()}(r,t),t.attributions&&function(t,e){const i=e.dpi/25.4;t.miterLimit=2,t.strokeStyle="#ffffff",t.fillStyle="#000000",t.lineWidth=1,t.lineJoin="round",t.lineCap="round",t.textBaseline="top",t.font="6px Arial";const n=_l(e);t.save(),vl(t,!0===e.attributions?"bottom-right":e.attributions,[t.measureText(n).width*i,6*i*.85],e.dpi),t.scale(i,i),t.strokeText(n,0,0),t.fillText(n,0,0)}(r,t),(o=r.canvas,tt()?k(o.convertToBlob()):new L((t=>{o.toBlob((e=>{t.next(e),t.complete()}),"image/png")}))).pipe(w((t=>[1,t,s])))}if(n)return ut([-1,null,s]);{const t=e.reduce(((t,[e])=>e+t),0)/e.length;return ut([Math.min(.999,parseFloat(t.toFixed(4))),null,s])}var o})),w((([t,e,i])=>({...n,progress:t,imageBlob:e,status:1===t?"finished":-1===t?"canceled":"ongoing",sourceLoadErrors:i}))),U((t=>t.progress<1&&-1!==t.progress),!0)).subscribe((t=>{return e=ft,i={status:t},void(tt()?self.clients.matchAll({type:"window"}).then((t=>{t.forEach((t=>{t.postMessage({...i,type:e})}))})):window.dispatchEvent(new CustomEvent("inkmap.toMain",{detail:{...i,type:e}})));var e,i}))}function Rl(t,e){const i=document.createElement("a"),n=URL.createObjectURL(t);i.setAttribute("download",e),i.setAttribute("href",n),i.click()}et.subscribe((t=>{switch(t.type){case dt:Ol(t.spec);break;case pt:!function(t){gl.next(t)}(t.jobId);break;default:console.log("[inkmap] Unhandled message",t)}}));const Fl=new Promise((t=>{HTMLCanvasElement.prototype.transferControlToOffscreen?navigator.serviceWorker.register("inkmap-worker.js").then((()=>{setTimeout((()=>{navigator.serviceWorker.controller||t(!1),t(!0)}),100)}),(()=>{console.log("[inkmap] Service worker was not found. See https://github.com/camptocamp/inkmap for using multi-threading"),t(!1)})):t(!1)}));function Tl(t,e){Fl.then((i=>{i?navigator.serviceWorker.controller.postMessage({...e,type:t}):window.dispatchEvent(new CustomEvent("inkmap.toPrinter",{detail:{...e,type:t}}))}))}Fl.then((t=>console.log("[inkmap] Ready, "+(t?"using worker":"using main thread"))));const kl=k(Fl).pipe(q((t=>(t?H(navigator.serviceWorker,"message").pipe(X("data")):H(window,"inkmap.toMain").pipe(X("detail"))).pipe(J((t=>console.log("[inkmap] message to main:",t)))))));var jl,Dl=function(){function t(t,e,i){void 0===i&&(i=!1),this.accumulator=t,this.seed=e,this.hasSeed=i}return t.prototype.call=function(t,e){return e.subscribe(new Bl(t,this.accumulator,this.seed,this.hasSeed))},t}(),Bl=function(t){function e(e,i,n,r){var s=t.call(this,e)||this;return s.accumulator=i,s._seed=n,s.hasSeed=r,s.index=0,s}return s(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.accumulator(this.seed,t,i)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(_),ql=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.scheduler=e,n.work=i,n}return s(e,t),e.prototype.schedule=function(e,i){return void 0===i&&(i=0),i>0?t.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,i){return i>0||this.closed?t.prototype.execute.call(this,e,i):this._execute(e,i)},e.prototype.requestAsyncId=function(e,i,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?t.prototype.requestAsyncId.call(this,e,i,n):e.flush(this)},e}(xh),Gl=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(Mh))(ql);jl||(jl={});var zl=function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},t.prototype.accept=function(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){switch(this.kind){case"N":return ut(this.value);case"E":return t=this.error,new L((function(e){return e.error(t)}));case"C":return Zh()}var t;throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),Ul=function(t){function e(e,i,n){void 0===n&&(n=0);var r=t.call(this,e)||this;return r.scheduler=i,r.delay=n,r}return s(e,t),e.dispatch=function(t){var e=t.notification,i=t.destination;e.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new Wl(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(zl.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(zl.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(zl.createComplete()),this.unsubscribe()},e}(_),Wl=function(){return function(t,e){this.notification=t,this.destination=e}}(),Yl=function(t){function e(e,i,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===i&&(i=Number.POSITIVE_INFINITY);var r=t.call(this)||this;return r.scheduler=n,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=e<1?1:e,r._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return s(e,t),e.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var i=this._events;i.push(e),i.length>this._bufferSize&&i.shift()}t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new Hl(this._getNow(),e)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,i=this._infiniteTimeWindow,n=i?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=n.length;if(this.closed)throw new Lh;if(this.isStopped||this.hasError?e=m.EMPTY:(this.observers.push(t),e=new Nh(this,t)),r&&t.add(t=new Ul(t,r)),i)for(var o=0;o<s&&!t.closed;o++)t.next(n[o]);else for(o=0;o<s&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||Gl).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,i=this._windowTime,n=this._events,r=n.length,s=0;s<r&&!(t-n[s].time<i);)s++;return r>e&&(s=Math.max(s,r-e)),s>0&&n.splice(0,s),n},e}(Ph),Hl=function(){return function(t,e){this.time=t,this.value=e}}();function Vl(){return function(t){return t.lift(new Xl)}}var Xl=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Zl(t))},t}(),Zl=function(t){function e(e){var i=t.call(this,e)||this;return i.hasPrev=!1,i}return s(e,t),e.prototype._next=function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)},e}(_),Kl=o(8446),Jl=o.n(Kl);const Ql=kl.pipe(Wh((t=>t.type===ft)),w((t=>t.status)),function(t,e){var i=!1;return arguments.length>=2&&(i=!0),function(n){return n.lift(new Dl(t,e,i))}}(((t,e)=>[...t.filter((t=>t.id!==e.id)),e]),[]),Bh([]),function(t,e,i){var n;return n=t&&"object"==typeof t?t:{bufferSize:t,windowTime:void 0,refCount:!1,scheduler:void 0},function(t){return t.lift(function(t){var e,i,n=t.bufferSize,r=void 0===n?Number.POSITIVE_INFINITY:n,s=t.windowTime,o=void 0===s?Number.POSITIVE_INFINITY:s,a=t.refCount,h=t.scheduler,l=0,c=!1,u=!1;return function(t){var n;l++,!e||c?(c=!1,e=new Yl(r,o,h),n=e.subscribe(this),i=t.subscribe({next:function(t){e.next(t)},error:function(t){c=!0,e.error(t)},complete:function(){u=!0,i=void 0,e.complete()}}),u&&(i=void 0)):n=e.subscribe(this),this.add((function(){l--,n.unsubscribe(),n=void 0,i&&!u&&a&&0===l&&(i.unsubscribe(),i=void 0,e=void 0)}))}}(n))}}({bufferSize:1,refCount:!0})),$l=Ql.pipe(Vl(),q((([t,e])=>k(e.filter((e=>!t.some((t=>t.id===e.id))))))));function tc(t){return Ql.pipe(w((e=>e.find((e=>e.id===t)))),Wh((t=>!!t)))}function ec(t){return Tl(dt,{spec:t}),$l.pipe(Wh((e=>Jl()(e.spec,t))),Kh(1),w((t=>t.id)))}var ic=o(7260),nc=o.n(ic);function rc(t){const e=t.layers.filter((t=>"WMS"===t.type)),i=t.layers.filter((t=>"WFS"===t.type||"GeoJSON"===t.type)).map((t=>t.style)),n=[];return e.forEach((e=>{const i=new URL(e.url);i.searchParams.set("REQUEST","GetLegendGraphic"),i.searchParams.set("SERVICE","WMS"),i.searchParams.set("VERSION",e.version||"1.3.0"),i.searchParams.set("LAYER",e.layer),i.searchParams.set("FORMAT","image/png"),i.searchParams.set("DPI",(t.dpi||("1.1.1"===e.version?72:91)).toString()),t.scale&&i.searchParams.set("SCALE",t.scale.toString()),n.push({url:i.toString(),title:e.layer})})),new(nc())({maxColumnWidth:290,maxColumnHeight:840,overflow:"auto",styles:i,remoteLegends:n,size:[595,842]})}function sc(t){return ec(t).pipe(q((t=>tc(t))),U((t=>t.progress<1),!0),w((t=>t.imageBlob))).toPromise()}function oc(t){return ec(t).toPromise()}function ac(t){return tc(t).pipe(U((t=>t.progress<1&&-1!==t.progress),!0))}const hc=document.getElementById("example-01"),lc=hc.querySelector("custom-button"),cc=hc.querySelector("print-spec");cc.onValidityCheck((t=>lc.enabled=t)),lc.addEventListener("click",(async()=>{lc.showSpinner();const t=await sc(cc.value);lc.hideSpinner(),Rl(t,"inkmap.png")}));const uc=document.getElementById("example-02"),dc=uc.querySelector("custom-button"),fc=uc.querySelector("custom-progress"),pc=uc.querySelector("print-spec");pc.onValidityCheck((t=>dc.enabled=t)),dc.addEventListener("click",(async()=>{dc.showSpinner(),fc.progress=0,fc.status="pending",ac(await oc(pc.value)).subscribe((t=>{fc.progress=t.progress,fc.status=t.status,1===t.progress&&(dc.hideSpinner(),Rl(t.imageBlob,"inkmap.png"))}))}));const gc=document.getElementById("example-03"),mc=gc.querySelector("custom-button"),yc=gc.querySelector("custom-progress"),vc=gc.querySelector("print-spec"),_c=gc.querySelector(".cancel-btn");let bc;vc.onValidityCheck((t=>mc.enabled=t)),mc.addEventListener("click",(async()=>{mc.showSpinner(),yc.progress=0,yc.status="pending",bc=await oc(vc.value),ac(bc).subscribe((t=>{yc.progress=t.progress,yc.status=t.status,1!==t.progress&&-1!==t.progress||mc.hideSpinner(),1===t.progress&&Rl(t.imageBlob,"inkmap.png")}))})),_c.addEventListener("click",(async()=>{!function(t){Tl(pt,{jobId:t})}(bc)}));const wc=document.getElementById("example-04"),xc=wc.querySelector("custom-button"),Sc=wc.querySelector("progress-bars"),Mc=wc.querySelector("print-spec");Mc.onValidityCheck((t=>xc.enabled=t)),Ql.pipe(Vl(),w((([t,e])=>e.filter((e=>!t.find((t=>t.id===e.id&&1==t.progress))))))).subscribe((t=>{Sc.jobsStatus=t})),xc.addEventListener("click",(async()=>{const t=await oc(Mc.value);ac(t).subscribe((e=>{1===e.progress&&Rl(e.imageBlob,`inkmap-${t}.png`)}))}));var Cc=o(1002),Ac=Uint8Array,Lc=Uint16Array,Nc=Uint32Array,Ec=new Ac([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Pc=new Ac([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ic=new Ac([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Oc=function(t,e){for(var i=new Lc(31),n=0;n<31;++n)i[n]=e+=1<<t[n-1];var r=new Nc(i[30]);for(n=1;n<30;++n)for(var s=i[n];s<i[n+1];++s)r[s]=s-i[n]<<5|n;return[i,r]},Rc=Oc(Ec,2),Fc=Rc[0],Tc=Rc[1];Fc[28]=258,Tc[258]=28;for(var kc=Oc(Pc,0),jc=kc[0],Dc=kc[1],Bc=new Lc(32768),qc=0;qc<32768;++qc){var Gc=(43690&qc)>>>1|(21845&qc)<<1;Gc=(61680&(Gc=(52428&Gc)>>>2|(13107&Gc)<<2))>>>4|(3855&Gc)<<4,Bc[qc]=((65280&Gc)>>>8|(255&Gc)<<8)>>>1}var zc=function(t,e,i){for(var n=t.length,r=0,s=new Lc(e);r<n;++r)++s[t[r]-1];var o,a=new Lc(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;if(i){o=new Lc(1<<e);var h=15-e;for(r=0;r<n;++r)if(t[r])for(var l=r<<4|t[r],c=e-t[r],u=a[t[r]-1]++<<c,d=u|(1<<c)-1;u<=d;++u)o[Bc[u]>>>h]=l}else for(o=new Lc(n),r=0;r<n;++r)o[r]=Bc[a[t[r]-1]++]>>>15-t[r];return o},Uc=new Ac(288);for(qc=0;qc<144;++qc)Uc[qc]=8;for(qc=144;qc<256;++qc)Uc[qc]=9;for(qc=256;qc<280;++qc)Uc[qc]=7;for(qc=280;qc<288;++qc)Uc[qc]=8;var Wc=new Ac(32);for(qc=0;qc<32;++qc)Wc[qc]=5;var Yc=zc(Uc,9,0),Hc=zc(Uc,9,1),Vc=zc(Wc,5,0),Xc=zc(Wc,5,1),Zc=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},Kc=function(t,e,i){var n=e/8>>0;return(t[n]|t[n+1]<<8)>>>(7&e)&i},Jc=function(t,e){var i=e/8>>0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>>(7&e)},Qc=function(t){return(t/8>>0)+(7&t&&1)},$c=function(t,e,i){(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length);var n=new(t instanceof Lc?Lc:t instanceof Nc?Nc:Ac)(i-e);return n.set(t.subarray(e,i)),n},tu=function(t,e,i){i<<=7&e;var n=e/8>>0;t[n]|=i,t[n+1]|=i>>>8},eu=function(t,e,i){i<<=7&e;var n=e/8>>0;t[n]|=i,t[n+1]|=i>>>8,t[n+2]|=i>>>16},iu=function(t,e){for(var i=[],n=0;n<t.length;++n)t[n]&&i.push({s:n,f:t[n]});var r=i.length,s=i.slice();if(!r)return[new Ac(0),0];if(1==r){var o=new Ac(i[0].s+1);return o[i[0].s]=1,[o,1]}i.sort((function(t,e){return t.f-e.f})),i.push({s:-1,f:25001});var a=i[0],h=i[1],l=0,c=1,u=2;for(i[0]={s:-1,f:a.f+h.f,l:a,r:h};c!=r-1;)a=i[i[l].f<i[u].f?l++:u++],h=i[l!=c&&i[l].f<i[u].f?l++:u++],i[c++]={s:-1,f:a.f+h.f,l:a,r:h};var d=s[0].s;for(n=1;n<r;++n)s[n].s>d&&(d=s[n].s);var f=new Lc(d+1),p=nu(i[c-1],f,0);if(p>e){n=0;var g=0,m=p-e,y=1<<m;for(s.sort((function(t,e){return f[e.s]-f[t.s]||t.f-e.f}));n<r;++n){var v=s[n].s;if(!(f[v]>e))break;g+=y-(1<<p-f[v]),f[v]=e}for(g>>>=m;g>0;){var _=s[n].s;f[_]<e?g-=1<<e-f[_]++-1:++n}for(;n>=0&&g;--n){var b=s[n].s;f[b]==e&&(--f[b],++g)}p=e}return[new Ac(f),p]},nu=function(t,e,i){return-1==t.s?Math.max(nu(t.l,e,i+1),nu(t.r,e,i+1)):e[t.s]=i},ru=function(t){for(var e=t.length;e&&!t[--e];);for(var i=new Lc(++e),n=0,r=t[0],s=1,o=function(t){i[n++]=t},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[i.subarray(0,n),e]},su=function(t,e){for(var i=0,n=0;n<e.length;++n)i+=t[n]*e[n];return i},ou=function(t,e,i){var n=i.length,r=Qc(e+2);t[r]=255&n,t[r+1]=n>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<n;++s)t[r+s+4]=i[s];return 8*(r+4+n)},au=function(t,e,i,n,r,s,o,a,h,l,c){tu(e,c++,i),++r[256];for(var u=iu(r,15),d=u[0],f=u[1],p=iu(s,15),g=p[0],m=p[1],y=ru(d),v=y[0],_=y[1],b=ru(g),w=b[0],x=b[1],S=new Lc(19),M=0;M<v.length;++M)S[31&v[M]]++;for(M=0;M<w.length;++M)S[31&w[M]]++;for(var C=iu(S,7),A=C[0],L=C[1],N=19;N>4&&!A[Ic[N-1]];--N);var E,P,I,O,R=l+5<<3,F=su(r,Uc)+su(s,Wc)+o,T=su(r,d)+su(s,g)+o+14+3*N+su(S,A)+(2*S[16]+3*S[17]+7*S[18]);if(R<=F&&R<=T)return ou(e,c,t.subarray(h,h+l));if(tu(e,c,1+(T<F)),c+=2,T<F){E=zc(d,f,0),P=d,I=zc(g,m,0),O=g;var k=zc(A,L,0);for(tu(e,c,_-257),tu(e,c+5,x-1),tu(e,c+10,N-4),c+=14,M=0;M<N;++M)tu(e,c+3*M,A[Ic[M]]);c+=3*N;for(var j=[v,w],D=0;D<2;++D){var B=j[D];for(M=0;M<B.length;++M){var q=31&B[M];tu(e,c,k[q]),c+=A[q],q>15&&(tu(e,c,B[M]>>>5&127),c+=B[M]>>>12)}}}else E=Yc,P=Uc,I=Vc,O=Wc;for(M=0;M<a;++M)if(n[M]>255){q=n[M]>>>18&31,eu(e,c,E[q+257]),c+=P[q+257],q>7&&(tu(e,c,n[M]>>>23&31),c+=Ec[q]);var G=31&n[M];eu(e,c,I[G]),c+=O[G],G>3&&(eu(e,c,n[M]>>>5&8191),c+=Pc[G])}else eu(e,c,E[n[M]]),c+=P[n[M]];return eu(e,c,E[256]),c+P[256]},hu=new Nc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),lu=new Ac(0),cu=function(t,e,i,n,r){return function(t,e,i,n,r,s){var o=t.length,a=new Ac(n+o+5*(1+Math.floor(o/7e3))+r),h=a.subarray(n,a.length-r),l=0;if(!e||o<8)for(var c=0;c<=o;c+=65535){var u=c+65535;u<o?l=ou(h,l,t.subarray(c,u)):(h[c]=s,l=ou(h,l,t.subarray(c,o)))}else{for(var d=hu[e-1],f=d>>>13,p=8191&d,g=(1<<i)-1,m=new Lc(32768),y=new Lc(g+1),v=Math.ceil(i/3),_=2*v,b=function(e){return(t[e]^t[e+1]<<v^t[e+2]<<_)&g},w=new Nc(25e3),x=new Lc(288),S=new Lc(32),M=0,C=0,A=(c=0,0),L=0,N=0;c<o;++c){var E=b(c),P=32767&c,I=y[E];if(m[P]=I,y[E]=P,L<=c){var O=o-c;if((M>7e3||A>24576)&&O>423){l=au(t,h,0,w,x,S,C,A,N,c-N,l),A=M=C=0,N=c;for(var R=0;R<286;++R)x[R]=0;for(R=0;R<30;++R)S[R]=0}var F=2,T=0,k=p,j=P-I&32767;if(O>2&&E==b(c-j))for(var D=Math.min(f,O)-1,B=Math.min(32767,c),q=Math.min(258,O);j<=B&&--k&&P!=I;){if(t[c+F]==t[c+F-j]){for(var G=0;G<q&&t[c+G]==t[c+G-j];++G);if(G>F){if(F=G,T=j,G>D)break;var z=Math.min(j,G-2),U=0;for(R=0;R<z;++R){var W=c-j+R+32768&32767,Y=W-m[W]+32768&32767;Y>U&&(U=Y,I=W)}}}j+=(P=I)-(I=m[P])+32768&32767}if(T){w[A++]=268435456|Tc[F]<<18|Dc[T];var H=31&Tc[F],V=31&Dc[T];C+=Ec[H]+Pc[V],++x[257+H],++S[V],L=c+F,++M}else w[A++]=t[c],++x[t[c]]}}l=au(t,h,s,w,x,S,C,A,N,c-N,l),s||(l=ou(h,l,lu))}return $c(a,0,n+Qc(l)+r)}(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,i,n,!r)};function uu(t,e){void 0===e&&(e={});var i=function(){var t=1,e=0;return{p:function(i){for(var n=t,r=e,s=i.length,o=0;o!=s;){for(var a=Math.min(o+5552,s);o<a;++o)r+=n+=i[o];n%=65521,r%=65521}t=n,e=r},d:function(){return(t>>>8<<16|(255&e)<<8|e>>>8)+2*((255&t)<<23)}}}();i.p(t);var n=cu(t,e,2,4);return function(t,e){var i=e.level,n=0==i?0:i<6?1:9==i?3:2;t[0]=120,t[1]=n<<6|(n?32-2*n:1)}(n,e),function(t,e,i){for(;i;++e)t[e]=i,i>>>=8}(n,n.length-4,i.d()),n}function du(t,e){return function(t,e,i){var n=t.length,r=!e||i,s=!i||i.i;i||(i={}),e||(e=new Ac(3*n));var o=function(t){var i=e.length;if(t>i){var n=new Ac(Math.max(2*i,t));n.set(e),e=n}},a=i.f||0,h=i.p||0,l=i.b||0,c=i.l,u=i.d,d=i.m,f=i.n,p=8*n;do{if(!c){i.f=a=Kc(t,h,1);var g=Kc(t,h+1,3);if(h+=3,!g){var m=t[(L=Qc(h)+4)-4]|t[L-3]<<8,y=L+m;if(y>n){if(s)throw"unexpected EOF";break}r&&o(l+m),e.set(t.subarray(L,y),l),i.b=l+=m,i.p=h=8*y;continue}if(1==g)c=Hc,u=Xc,d=9,f=5;else{if(2!=g)throw"invalid block type";var v=Kc(t,h,31)+257,_=Kc(t,h+10,15)+4,b=v+Kc(t,h+5,31)+1;h+=14;for(var w=new Ac(b),x=new Ac(19),S=0;S<_;++S)x[Ic[S]]=Kc(t,h+3*S,7);h+=3*_;var M=Zc(x),C=(1<<M)-1;if(!s&&h+b*(M+7)>p)break;var A=zc(x,M,1);for(S=0;S<b;){var L,N=A[Kc(t,h,C)];if(h+=15&N,(L=N>>>4)<16)w[S++]=L;else{var E=0,P=0;for(16==L?(P=3+Kc(t,h,3),h+=2,E=w[S-1]):17==L?(P=3+Kc(t,h,7),h+=3):18==L&&(P=11+Kc(t,h,127),h+=7);P--;)w[S++]=E}}var I=w.subarray(0,v),O=w.subarray(v);d=Zc(I),f=Zc(O),c=zc(I,d,1),u=zc(O,f,1)}if(h>p)throw"unexpected EOF"}r&&o(l+131072);for(var R=(1<<d)-1,F=(1<<f)-1,T=d+f+18;s||h+T<p;){var k=(E=c[Jc(t,h)&R])>>>4;if((h+=15&E)>p)throw"unexpected EOF";if(!E)throw"invalid length/literal";if(k<256)e[l++]=k;else{if(256==k){c=null;break}var j=k-254;if(k>264){var D=Ec[S=k-257];j=Kc(t,h,(1<<D)-1)+Fc[S],h+=D}var B=u[Jc(t,h)&F],q=B>>>4;if(!B)throw"invalid distance";if(h+=15&B,O=jc[q],q>3&&(D=Pc[q],O+=Jc(t,h)&(1<<D)-1,h+=D),h>p)throw"unexpected EOF";r&&o(l+131072);for(var G=l+j;l<G;l+=4)e[l]=e[l-O],e[l+1]=e[l+1-O],e[l+2]=e[l+2-O],e[l+3]=e[l+3-O];l=G}}i.l=c,i.p=h,i.b=l,c&&(a=1,i.m=d,i.d=u,i.n=f)}while(!a);return l==e.length?e:$c(e,0,l)}((function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"}(t),t.subarray(2,-4)),e)}var fu=function(){return"undefined"!=typeof window?window:void 0!==o.g?o.g:"undefined"!=typeof self?self:this}();function pu(){fu.console&&"function"==typeof fu.console.log&&fu.console.log.apply(fu.console,arguments)}var gu={log:pu,warn:function(t){fu.console&&("function"==typeof fu.console.warn?fu.console.warn.apply(fu.console,arguments):pu.call(null,arguments))},error:function(t){fu.console&&("function"==typeof fu.console.error?fu.console.error.apply(fu.console,arguments):pu(t))}};function mu(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){wu(n.response,e,i)},n.onerror=function(){gu.error("could not download file")},n.send()}function yu(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function vu(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var _u,bu,wu=fu.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,Cc.Z)(window))||window!==fu?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(t,e,i){var n=fu.URL||fu.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener","string"==typeof t?(r.href=t,r.origin!==location.origin?yu(r.href)?mu(t,e,i):vu(r,r.target="_blank"):vu(r)):(r.href=n.createObjectURL(t),setTimeout((function(){n.revokeObjectURL(r.href)}),4e4),setTimeout((function(){vu(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,i){if(e=e||t.name||"download","string"==typeof t)if(yu(t))mu(t,e,i);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout((function(){vu(n)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!==(0,Cc.Z)(e)&&(gu.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,i),e)}:function(t,e,i,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof t)return mu(t,e,i);var r="application/octet-stream"===t.type,s=/constructor/i.test(fu.HTMLElement)||fu.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&s)&&"object"===("undefined"==typeof FileReader?"undefined":(0,Cc.Z)(FileReader))){var a=new FileReader;a.onloadend=function(){var t=a.result;t=o?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=t:location=t,n=null},a.readAsDataURL(t)}else{var h=fu.URL||fu.webkitURL,l=h.createObjectURL(t);n?n.location=l:location.href=l,n=null,setTimeout((function(){h.revokeObjectURL(l)}),4e4)}});function xu(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],n=0;n<i.length;n++){var r=i[n].re,s=i[n].process,o=r.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i}}function Su(t,e){var i=t[0],n=t[1],r=t[2],s=t[3];i=Cu(i,n,r,s,e[0],7,-680876936),s=Cu(s,i,n,r,e[1],12,-389564586),r=Cu(r,s,i,n,e[2],17,606105819),n=Cu(n,r,s,i,e[3],22,-1044525330),i=Cu(i,n,r,s,e[4],7,-176418897),s=Cu(s,i,n,r,e[5],12,1200080426),r=Cu(r,s,i,n,e[6],17,-1473231341),n=Cu(n,r,s,i,e[7],22,-45705983),i=Cu(i,n,r,s,e[8],7,1770035416),s=Cu(s,i,n,r,e[9],12,-1958414417),r=Cu(r,s,i,n,e[10],17,-42063),n=Cu(n,r,s,i,e[11],22,-1990404162),i=Cu(i,n,r,s,e[12],7,1804603682),s=Cu(s,i,n,r,e[13],12,-40341101),r=Cu(r,s,i,n,e[14],17,-1502002290),i=Au(i,n=Cu(n,r,s,i,e[15],22,1236535329),r,s,e[1],5,-165796510),s=Au(s,i,n,r,e[6],9,-1069501632),r=Au(r,s,i,n,e[11],14,643717713),n=Au(n,r,s,i,e[0],20,-373897302),i=Au(i,n,r,s,e[5],5,-701558691),s=Au(s,i,n,r,e[10],9,38016083),r=Au(r,s,i,n,e[15],14,-660478335),n=Au(n,r,s,i,e[4],20,-405537848),i=Au(i,n,r,s,e[9],5,568446438),s=Au(s,i,n,r,e[14],9,-1019803690),r=Au(r,s,i,n,e[3],14,-187363961),n=Au(n,r,s,i,e[8],20,1163531501),i=Au(i,n,r,s,e[13],5,-1444681467),s=Au(s,i,n,r,e[2],9,-51403784),r=Au(r,s,i,n,e[7],14,1735328473),i=Lu(i,n=Au(n,r,s,i,e[12],20,-1926607734),r,s,e[5],4,-378558),s=Lu(s,i,n,r,e[8],11,-2022574463),r=Lu(r,s,i,n,e[11],16,1839030562),n=Lu(n,r,s,i,e[14],23,-35309556),i=Lu(i,n,r,s,e[1],4,-1530992060),s=Lu(s,i,n,r,e[4],11,1272893353),r=Lu(r,s,i,n,e[7],16,-155497632),n=Lu(n,r,s,i,e[10],23,-1094730640),i=Lu(i,n,r,s,e[13],4,681279174),s=Lu(s,i,n,r,e[0],11,-358537222),r=Lu(r,s,i,n,e[3],16,-722521979),n=Lu(n,r,s,i,e[6],23,76029189),i=Lu(i,n,r,s,e[9],4,-640364487),s=Lu(s,i,n,r,e[12],11,-421815835),r=Lu(r,s,i,n,e[15],16,530742520),i=Nu(i,n=Lu(n,r,s,i,e[2],23,-995338651),r,s,e[0],6,-198630844),s=Nu(s,i,n,r,e[7],10,1126891415),r=Nu(r,s,i,n,e[14],15,-1416354905),n=Nu(n,r,s,i,e[5],21,-57434055),i=Nu(i,n,r,s,e[12],6,1700485571),s=Nu(s,i,n,r,e[3],10,-1894986606),r=Nu(r,s,i,n,e[10],15,-1051523),n=Nu(n,r,s,i,e[1],21,-2054922799),i=Nu(i,n,r,s,e[8],6,1873313359),s=Nu(s,i,n,r,e[15],10,-30611744),r=Nu(r,s,i,n,e[6],15,-1560198380),n=Nu(n,r,s,i,e[13],21,1309151649),i=Nu(i,n,r,s,e[4],6,-145523070),s=Nu(s,i,n,r,e[11],10,-1120210379),r=Nu(r,s,i,n,e[2],15,718787259),n=Nu(n,r,s,i,e[9],21,-343485551),t[0]=ku(i,t[0]),t[1]=ku(n,t[1]),t[2]=ku(r,t[2]),t[3]=ku(s,t[3])}function Mu(t,e,i,n,r,s){return e=ku(ku(e,t),ku(n,s)),ku(e<<r|e>>>32-r,i)}function Cu(t,e,i,n,r,s,o){return Mu(e&i|~e&n,t,e,r,s,o)}function Au(t,e,i,n,r,s,o){return Mu(e&n|i&~n,t,e,r,s,o)}function Lu(t,e,i,n,r,s,o){return Mu(e^i^n,t,e,r,s,o)}function Nu(t,e,i,n,r,s,o){return Mu(i^(e|~n),t,e,r,s,o)}function Eu(t){var e,i=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Su(n,Pu(t.substring(e-64,e)));t=t.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(Su(n,r),e=0;e<16;e++)r[e]=0;return r[14]=8*i,Su(n,r),n}function Pu(t){var e,i=[];for(e=0;e<64;e+=4)i[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return i}_u=fu.atob.bind(fu),bu=fu.btoa.bind(fu);var Iu="0123456789abcdef".split("");function Ou(t){for(var e="",i=0;i<4;i++)e+=Iu[t>>8*i+4&15]+Iu[t>>8*i&15];return e}function Ru(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Fu(t){return Eu(t).map(Ru).join("")}var Tu="5d41402abc4b2a76b9719d911017c592"!=function(t){for(var e=0;e<t.length;e++)t[e]=Ou(t[e]);return t.join("")}(Eu("hello"));function ku(t,e){if(Tu){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}return t+e&4294967295}function ju(t,e){var i,n,r,s;if(t!==i){for(var o=(r=t,s=1+(256/t.length>>0),new Array(s+1).join(r)),a=[],h=0;h<256;h++)a[h]=h;var l=0;for(h=0;h<256;h++){var c=a[h];l=(l+c+o.charCodeAt(h))%256,a[h]=a[l],a[l]=c}i=t,n=a}else a=n;var u=e.length,d=0,f=0,p="";for(h=0;h<u;h++)f=(f+(c=a[d=(d+1)%256]))%256,a[d]=a[f],a[f]=c,o=a[(a[d]+a[f])%256],p+=String.fromCharCode(e.charCodeAt(h)^o);return p}var Du={print:4,modify:8,copy:16,"annot-forms":32};function Bu(t,e,i,n){this.v=1,this.r=2;var r=192;t.forEach((function(t){if(void 0!==Du.perm)throw new Error("Invalid permission: "+t);r+=Du[t]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^r)),this.encryptionKey=Fu(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=ju(this.encryptionKey,this.padding)}function qu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",i=t.length,n=0;n<i;n++){var r=t.charCodeAt(n);e+=r<33||35===r||37===r||40===r||41===r||47===r||60===r||62===r||91===r||93===r||123===r||125===r||r>126?"#"+("0"+r.toString(16)).slice(-2):t[n]}return e}function Gu(t){if("object"!==(0,Cc.Z)(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,i,n){if(n=n||!1,"string"!=typeof t||"function"!=typeof i||"boolean"!=typeof n)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[i,!!n],r},this.unsubscribe=function(t){for(var i in e)if(e[i][t])return delete e[i][t],0===Object.keys(e[i]).length&&delete e[i],!0;return!1},this.publish=function(i){if(e.hasOwnProperty(i)){var n=Array.prototype.slice.call(arguments,1),r=[];for(var s in e[i]){var o=e[i][s];try{o[0].apply(t,n)}catch(i){fu.console&&gu.error("jsPDF PubSub Error",i.message,i)}o[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function zu(t){if(!(this instanceof zu))return new zu(t);var e="opacity,stroke-opacity".split(",");for(var i in t)t.hasOwnProperty(i)&&e.indexOf(i)>=0&&(this[i]=t[i]);this.id="",this.objectNumber=-1}function Uu(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Wu(t,e,i,n,r){if(!(this instanceof Wu))return new Wu(t,e,i,n,r);this.type="axial"===t?2:3,this.coords=e,this.colors=i,Uu.call(this,n,r)}function Yu(t,e,i,n,r){if(!(this instanceof Yu))return new Yu(t,e,i,n,r);this.boundingBox=t,this.xStep=e,this.yStep=i,this.stream="",this.cloneIndex=0,Uu.call(this,n,r)}function Hu(t){var e,i="string"==typeof arguments[0]?arguments[0]:"p",n=arguments[1],r=arguments[2],s=arguments[3],o=[],a=1,h=16,l="S",c=null;"object"===(0,Cc.Z)(t=t||{})&&(i=t.orientation,n=t.unit||n,r=t.format||r,s=t.compress||t.compressPdf||s,null!==(c=t.encryption||null)&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(h=t.floatPrecision),l=t.defaultPathOperation||"S"),o=t.filters||(!0===s?["FlateEncode"]:o),n=n||"mm",i=(""+(i||"P")).toLowerCase();var u=t.putOnlyUsedFonts||!1,d={},f={internal:{},__private__:{}};f.__private__.PubSub=Gu;var p="1.3",g=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(t){p=t};var m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return m};var y=f.__private__.getPageFormat=function(t){return m[t]};r=r||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},_=v.COMPAT;function b(){this.saveGraphicsState(),Q(new Ot(ft,0,0,-ft,0,Ai()*ft).toString()+" cm"),this.setFontSize(this.getFontSize()/ft),l="n",_=v.ADVANCED}function w(){this.restoreGraphicsState(),l="S",_=v.COMPAT}var x=f.__private__.combineFontStyleAndFontWeight=function(t,e){if("bold"==t&&"normal"==e||"bold"==t&&400==e||"normal"==t&&"italic"==e||"bold"==t&&"italic"==e)throw new Error("Invalid Combination of fontweight and fontstyle");return e&&(t=400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"),t};f.advancedAPI=function(t){var e=_===v.COMPAT;return e&&b.call(this),"function"!=typeof t||(t(this),e&&w.call(this)),this},f.compatAPI=function(t){var e=_===v.ADVANCED;return e&&w.call(this),"function"!=typeof t||(t(this),e&&b.call(this)),this},f.isAdvancedAPI=function(){return _===v.ADVANCED};var S,M=function(t){if(_!==v.ADVANCED)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=f.roundToPrecision=f.__private__.roundToPrecision=function(t,i){var n=e||i;if(isNaN(t)||isNaN(n))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(n).replace(/0+$/,"")};S=f.hpf=f.__private__.hpf="number"==typeof h?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,h)}:"smart"===h?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,16)};var A=f.f2=f.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return C(t,2)},L=f.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return C(t,3)},N=f.scale=f.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return _===v.COMPAT?t*ft:_===v.ADVANCED?t:void 0},E=function(t){return _===v.COMPAT?Ai()-t:_===v.ADVANCED?t:void 0},P=function(t){return N(E(t))};f.__private__.setPrecision=f.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var I,O="00000000000000000000000000000000",R=f.__private__.getFileId=function(){return O},F=f.__private__.setFileId=function(t){return O=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():O.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==c&&(Fe=new Bu(c.userPermissions,c.userPassword,c.ownerPassword,O)),O};f.setFileId=function(t){return F(t),this},f.getFileId=function(){return R()};var T=f.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),i=e<0?"+":"-",n=Math.floor(Math.abs(e/60)),r=Math.abs(e%60),s=[i,q(n),"'",q(r),"'"].join("");return["D:",t.getFullYear(),q(t.getMonth()+1),q(t.getDate()),q(t.getHours()),q(t.getMinutes()),q(t.getSeconds()),s].join("")},k=f.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),i=parseInt(t.substr(6,2),10)-1,n=parseInt(t.substr(8,2),10),r=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),o=parseInt(t.substr(14,2),10);return new Date(e,i,n,r,s,o,0)},j=f.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=T(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return I=e},D=f.__private__.getCreationDate=function(t){var e=I;return"jsDate"===t&&(e=k(I)),e};f.setCreationDate=function(t){return j(t),this},f.getCreationDate=function(t){return D(t)};var B,q=f.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},G=f.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},z=0,U=[],W=[],Y=0,H=[],V=[],X=!1,Z=W,K=function(){z=0,Y=0,W=[],U=[],H=[],qt=jt(),Gt=jt()};f.__private__.setCustomOutputDestination=function(t){X=!0,Z=t};var J=function(t){X||(Z=t)};f.__private__.resetCustomOutputDestination=function(){X=!1,Z=W};var Q=f.__private__.out=function(t){return t=t.toString(),Y+=t.length+1,Z.push(t),Z},$=f.__private__.write=function(t){return Q(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},tt=f.__private__.getArrayBuffer=function(t){for(var e=t.length,i=new ArrayBuffer(e),n=new Uint8Array(i);e--;)n[e]=t.charCodeAt(e);return i},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return et};var it=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(t){return it=_===v.ADVANCED?t/ft:t,this};var nt,rt=f.__private__.getFontSize=f.getFontSize=function(){return _===v.COMPAT?it:it*ft},st=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(t){return st=t,this},f.__private__.getR2L=f.getR2L=function(){return st};var ot,at=f.__private__.setZoomMode=function(t){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t))nt=t;else if(isNaN(t)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');nt=t}else nt=parseInt(t,10)};f.__private__.getZoomMode=function(){return nt};var ht,lt=f.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');ot=t};f.__private__.getPageMode=function(){return ot};var ct=f.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');ht=t};f.__private__.getLayoutMode=function(){return ht},f.__private__.setDisplayMode=f.setDisplayMode=function(t,e,i){return at(t),ct(e),lt(i),this};var ut={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(t){if(-1===Object.keys(ut).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ut[t]},f.__private__.getDocumentProperties=function(){return ut},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(t){for(var e in ut)ut.hasOwnProperty(e)&&t[e]&&(ut[e]=t[e]);return this},f.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(ut).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ut[t]=e};var dt,ft,pt,gt,mt,yt={},vt={},_t=[],bt={},wt={},xt={},St={},Mt=null,Ct=0,At=[],Lt=new Gu(f),Nt=t.hotfixes||[],Et={},Pt={},It=[],Ot=function t(e,i,n,r,s,o){if(!(this instanceof t))return new t(e,i,n,r,s,o);isNaN(e)&&(e=1),isNaN(i)&&(i=0),isNaN(n)&&(n=0),isNaN(r)&&(r=1),isNaN(s)&&(s=0),isNaN(o)&&(o=0),this._matrix=[e,i,n,r,s,o]};Object.defineProperty(Ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ot.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ot.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(t)},Ot.prototype.multiply=function(t){var e=t.sx*this.sx+t.shy*this.shx,i=t.sx*this.shy+t.shy*this.sy,n=t.shx*this.sx+t.sy*this.shx,r=t.shx*this.shy+t.sy*this.sy,s=t.tx*this.sx+t.ty*this.shx+this.tx,o=t.tx*this.shy+t.ty*this.sy+this.ty;return new Ot(e,i,n,r,s,o)},Ot.prototype.decompose=function(){var t=this.sx,e=this.shy,i=this.shx,n=this.sy,r=this.tx,s=this.ty,o=Math.sqrt(t*t+e*e),a=(t/=o)*i+(e/=o)*n;i-=t*a,n-=e*a;var h=Math.sqrt(i*i+n*n);return a/=h,t*(n/=h)<e*(i/=h)&&(t=-t,e=-e,a=-a,o=-o),{scale:new Ot(o,0,0,h,0,0),translate:new Ot(1,0,0,1,r,s),rotate:new Ot(t,e,-e,t,0,0),skew:new Ot(1,0,a,1,0,0)}},Ot.prototype.toString=function(t){return this.join(" ")},Ot.prototype.inversed=function(){var t=this.sx,e=this.shy,i=this.shx,n=this.sy,r=this.tx,s=this.ty,o=1/(t*n-e*i),a=n*o,h=-e*o,l=-i*o,c=t*o;return new Ot(a,h,l,c,-a*r-l*s,-h*r-c*s)},Ot.prototype.applyToPoint=function(t){var e=t.x*this.sx+t.y*this.shx+this.tx,i=t.x*this.shy+t.y*this.sy+this.ty;return new vi(e,i)},Ot.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),i=this.applyToPoint(new vi(t.x+t.w,t.y+t.h));return new _i(e.x,e.y,i.x-e.x,i.y-e.y)},Ot.prototype.clone=function(){var t=this.sx,e=this.shy,i=this.shx,n=this.sy,r=this.tx,s=this.ty;return new Ot(t,e,i,n,r,s)},f.Matrix=Ot;var Rt=f.matrixMult=function(t,e){return e.multiply(t)},Ft=new Ot(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Ft;var Tt=function(t,e){if(!wt[t]){var i=(e instanceof Wu?"Sh":"P")+(Object.keys(bt).length+1).toString(10);e.id=i,wt[t]=i,bt[i]=e,Lt.publish("addPattern",e)}};f.ShadingPattern=Wu,f.TilingPattern=Yu,f.addShadingPattern=function(t,e){return M("addShadingPattern()"),Tt(t,e),this},f.beginTilingPattern=function(t){M("beginTilingPattern()"),wi(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},f.endTilingPattern=function(t,e){M("endTilingPattern()"),e.stream=V[B].join("\n"),Tt(t,e),Lt.publish("endTilingPattern",e),It.pop().restore()};var kt=f.__private__.newObject=function(){var t=jt();return Dt(t,!0),t},jt=f.__private__.newObjectDeferred=function(){return z++,U[z]=function(){return Y},z},Dt=function(t,e){return e="boolean"==typeof e&&e,U[t]=Y,e&&Q(t+" 0 obj"),t},Bt=f.__private__.newAdditionalObject=function(){var t={objId:jt(),content:""};return H.push(t),t},qt=jt(),Gt=jt(),zt=f.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5!==e.length||"k"!==e[4]&&"K"!==e[4]||(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var i=parseFloat(e[0]);e=[i,i,i,"r"]}for(var n="#",r=0;r<3;r++)n+=("0"+Math.floor(255*parseFloat(e[r])).toString(16)).slice(-2);return n},Ut=f.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var i=t.ch1,n=t.ch2,r=t.ch3,s=t.ch4,o="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof i&&"#"!==i.charAt(0)){var a=new xu(i);if(a.ok)i=a.toHex();else if(!/^\d*\.?\d*$/.test(i))throw new Error('Invalid color "'+i+'" passed to jsPDF.encodeColorString.')}if("string"==typeof i&&/^#[0-9A-Fa-f]{3}$/.test(i)&&(i="#"+i[1]+i[1]+i[2]+i[2]+i[3]+i[3]),"string"==typeof i&&/^#[0-9A-Fa-f]{6}$/.test(i)){var h=parseInt(i.substr(1),16);i=h>>16&255,n=h>>8&255,r=255&h}if(void 0===n||void 0===s&&i===n&&n===r)e="string"==typeof i?i+" "+o[0]:2===t.precision?A(i/255)+" "+o[0]:L(i/255)+" "+o[0];else if(void 0===s||"object"===(0,Cc.Z)(s)){if(s&&!isNaN(s.a)&&0===s.a)return["1.","1.","1.",o[1]].join(" ");e="string"==typeof i?[i,n,r,o[1]].join(" "):2===t.precision?[A(i/255),A(n/255),A(r/255),o[1]].join(" "):[L(i/255),L(n/255),L(r/255),o[1]].join(" ")}else e="string"==typeof i?[i,n,r,s,o[2]].join(" "):2===t.precision?[A(i),A(n),A(r),A(s),o[2]].join(" "):[L(i),L(n),L(r),L(s),o[2]].join(" ");return e},Wt=f.__private__.getFilters=function(){return o},Yt=f.__private__.putStream=function(t){var e=(t=t||{}).data||"",i=t.filters||Wt(),n=t.alreadyAppliedFilters||[],r=t.addLength1||!1,s=e.length,o=t.objectId,a=function(t){return t};if(null!==c&&void 0===o)throw new Error("ObjectId must be passed to putStream for file encryption");null!==c&&(a=Fe.encryptor(o,0));var h={};!0===i&&(i=["FlateEncode"]);var l=t.additionalKeyValues||[],u=(h=void 0!==Hu.API.processDataByFilters?Hu.API.processDataByFilters(e,i):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(n)?n.join(" "):n.toString());if(0!==h.data.length&&(l.push({key:"Length",value:h.data.length}),!0===r&&l.push({key:"Length1",value:s})),0!=u.length)if(u.split("/").length-1==1)l.push({key:"Filter",value:u});else{l.push({key:"Filter",value:"["+u+"]"});for(var d=0;d<l.length;d+=1)if("DecodeParms"===l[d].key){for(var f=[],p=0;p<h.reverseChain.split("/").length-1;p+=1)f.push("null");f.push(l[d].value),l[d].value="["+f.join(" ")+"]"}}Q("<<");for(var g=0;g<l.length;g++)Q("/"+l[g].key+" "+l[g].value);Q(">>"),0!==h.data.length&&(Q("stream"),Q(a(h.data)),Q("endstream"))},Ht=f.__private__.putPage=function(t){var e=t.number,i=t.data,n=t.objId,r=t.contentsObjId;Dt(n,!0),Q("<</Type /Page"),Q("/Parent "+t.rootDictionaryObjId+" 0 R"),Q("/Resources "+t.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(S(t.mediaBox.bottomLeftX))+" "+parseFloat(S(t.mediaBox.bottomLeftY))+" "+S(t.mediaBox.topRightX)+" "+S(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&Q("/CropBox ["+S(t.cropBox.bottomLeftX)+" "+S(t.cropBox.bottomLeftY)+" "+S(t.cropBox.topRightX)+" "+S(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&Q("/BleedBox ["+S(t.bleedBox.bottomLeftX)+" "+S(t.bleedBox.bottomLeftY)+" "+S(t.bleedBox.topRightX)+" "+S(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&Q("/TrimBox ["+S(t.trimBox.bottomLeftX)+" "+S(t.trimBox.bottomLeftY)+" "+S(t.trimBox.topRightX)+" "+S(t.trimBox.topRightY)+"]"),null!==t.artBox&&Q("/ArtBox ["+S(t.artBox.bottomLeftX)+" "+S(t.artBox.bottomLeftY)+" "+S(t.artBox.topRightX)+" "+S(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&Q("/UserUnit "+t.userUnit),Lt.publish("putPage",{objId:n,pageContext:At[e],pageNumber:e,page:i}),Q("/Contents "+r+" 0 R"),Q(">>"),Q("endobj");var s=i.join("\n");return _===v.ADVANCED&&(s+="\nQ"),Dt(r,!0),Yt({data:s,filters:Wt(),objectId:r}),Q("endobj"),n},Vt=f.__private__.putPages=function(){var t,e,i=[];for(t=1;t<=Ct;t++)At[t].objId=jt(),At[t].contentsObjId=jt();for(t=1;t<=Ct;t++)i.push(Ht({number:t,data:V[t],objId:At[t].objId,contentsObjId:At[t].contentsObjId,mediaBox:At[t].mediaBox,cropBox:At[t].cropBox,bleedBox:At[t].bleedBox,trimBox:At[t].trimBox,artBox:At[t].artBox,userUnit:At[t].userUnit,rootDictionaryObjId:qt,resourceDictionaryObjId:Gt}));Dt(qt,!0),Q("<</Type /Pages");var n="/Kids [";for(e=0;e<Ct;e++)n+=i[e]+" 0 R ";Q(n+"]"),Q("/Count "+Ct),Q(">>"),Q("endobj"),Lt.publish("postPutPages")},Xt=function(t){Lt.publish("putFont",{font:t,out:Q,newObject:kt,putStream:Yt}),!0!==t.isAlreadyPutted&&(t.objectNumber=kt(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+qu(t.postScriptName)),Q("/Subtype /Type1"),"string"==typeof t.encoding&&Q("/Encoding /"+t.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},Zt=function(){for(var t in yt)yt.hasOwnProperty(t)&&(!1===u||!0===u&&d.hasOwnProperty(t))&&Xt(yt[t])},Kt=function(t){t.objectNumber=kt();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[S(t.x),S(t.y),S(t.x+t.width),S(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var i=t.pages[1].join("\n");Yt({data:i,additionalKeyValues:e,objectId:t.objectNumber}),Q("endobj")},Jt=function(){for(var t in Et)Et.hasOwnProperty(t)&&Kt(Et[t])},Qt=function(t,e){var i,n=[],r=1/(e-1);for(i=0;i<1;i+=r)n.push(i);if(n.push(1),0!=t[0].offset){var s={offset:0,color:t[0].color};t.unshift(s)}if(1!=t[t.length-1].offset){var o={offset:1,color:t[t.length-1].color};t.push(o)}for(var a="",h=0,l=0;l<n.length;l++){for(i=n[l];i>t[h+1].offset;)h++;var c=t[h].offset,u=(i-c)/(t[h+1].offset-c),d=t[h].color,f=t[h+1].color;a+=G(Math.round((1-u)*d[0]+u*f[0]).toString(16))+G(Math.round((1-u)*d[1]+u*f[1]).toString(16))+G(Math.round((1-u)*d[2]+u*f[2]).toString(16))}return a.trim()},$t=function(t,e){e||(e=21);var i=kt(),n=Qt(t.colors,e),r=[];r.push({key:"FunctionType",value:"0"}),r.push({key:"Domain",value:"[0.0 1.0]"}),r.push({key:"Size",value:"["+e+"]"}),r.push({key:"BitsPerSample",value:"8"}),r.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),r.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Yt({data:n,additionalKeyValues:r,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:i}),Q("endobj"),t.objectNumber=kt(),Q("<< /ShadingType "+t.type),Q("/ColorSpace /DeviceRGB");var s="/Coords ["+S(parseFloat(t.coords[0]))+" "+S(parseFloat(t.coords[1]))+" ";2===t.type?s+=S(parseFloat(t.coords[2]))+" "+S(parseFloat(t.coords[3])):s+=S(parseFloat(t.coords[2]))+" "+S(parseFloat(t.coords[3]))+" "+S(parseFloat(t.coords[4]))+" "+S(parseFloat(t.coords[5])),Q(s+="]"),t.matrix&&Q("/Matrix ["+t.matrix.toString()+"]"),Q("/Function "+i+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},te=function(t,e){var i=jt(),n=kt();e.push({resourcesOid:i,objectOid:n}),t.objectNumber=n;var r=[];r.push({key:"Type",value:"/Pattern"}),r.push({key:"PatternType",value:"1"}),r.push({key:"PaintType",value:"1"}),r.push({key:"TilingType",value:"1"}),r.push({key:"BBox",value:"["+t.boundingBox.map(S).join(" ")+"]"}),r.push({key:"XStep",value:S(t.xStep)}),r.push({key:"YStep",value:S(t.yStep)}),r.push({key:"Resources",value:i+" 0 R"}),t.matrix&&r.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),Yt({data:t.stream,additionalKeyValues:r,objectId:t.objectNumber}),Q("endobj")},ee=function(t){var e;for(e in bt)bt.hasOwnProperty(e)&&(bt[e]instanceof Wu?$t(bt[e]):bt[e]instanceof Yu&&te(bt[e],t))},ie=function(t){for(var e in t.objectNumber=kt(),Q("<<"),t)switch(e){case"opacity":Q("/ca "+A(t[e]));break;case"stroke-opacity":Q("/CA "+A(t[e]))}Q(">>"),Q("endobj")},ne=function(){var t;for(t in xt)xt.hasOwnProperty(t)&&ie(xt[t])},re=function(){for(var t in Q("/XObject <<"),Et)Et.hasOwnProperty(t)&&Et[t].objectNumber>=0&&Q("/"+t+" "+Et[t].objectNumber+" 0 R");Lt.publish("putXobjectDict"),Q(">>")},se=function(){Fe.oid=kt(),Q("<<"),Q("/Filter /Standard"),Q("/V "+Fe.v),Q("/R "+Fe.r),Q("/U <"+Fe.toHexString(Fe.U)+">"),Q("/O <"+Fe.toHexString(Fe.O)+">"),Q("/P "+Fe.P),Q(">>"),Q("endobj")},oe=function(){for(var t in Q("/Font <<"),yt)yt.hasOwnProperty(t)&&(!1===u||!0===u&&d.hasOwnProperty(t))&&Q("/"+t+" "+yt[t].objectNumber+" 0 R");Q(">>")},ae=function(){if(Object.keys(bt).length>0){for(var t in Q("/Shading <<"),bt)bt.hasOwnProperty(t)&&bt[t]instanceof Wu&&bt[t].objectNumber>=0&&Q("/"+t+" "+bt[t].objectNumber+" 0 R");Lt.publish("putShadingPatternDict"),Q(">>")}},he=function(t){if(Object.keys(bt).length>0){for(var e in Q("/Pattern <<"),bt)bt.hasOwnProperty(e)&&bt[e]instanceof f.TilingPattern&&bt[e].objectNumber>=0&&bt[e].objectNumber<t&&Q("/"+e+" "+bt[e].objectNumber+" 0 R");Lt.publish("putTilingPatternDict"),Q(">>")}},le=function(){if(Object.keys(xt).length>0){var t;for(t in Q("/ExtGState <<"),xt)xt.hasOwnProperty(t)&&xt[t].objectNumber>=0&&Q("/"+t+" "+xt[t].objectNumber+" 0 R");Lt.publish("putGStateDict"),Q(">>")}},ce=function(t){Dt(t.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),oe(),ae(),he(t.objectOid),le(),re(),Q(">>"),Q("endobj")},ue=function(){var t=[];Zt(),ne(),Jt(),ee(t),Lt.publish("putResources"),t.forEach(ce),ce({resourcesOid:Gt,objectOid:Number.MAX_SAFE_INTEGER}),Lt.publish("postPutResources")},de=function(){Lt.publish("putAdditionalObjects");for(var t=0;t<H.length;t++){var e=H[t];Dt(e.objId,!0),Q(e.content),Q("endobj")}Lt.publish("postPutAdditionalObjects")},fe=function(t){vt[t.fontName]=vt[t.fontName]||{},vt[t.fontName][t.fontStyle]=t.id},pe=function(t,e,i,n,r){var s={id:"F"+(Object.keys(yt).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:i,encoding:n,isStandardFont:r||!1,metadata:{}};return Lt.publish("addFont",{font:s,instance:this}),yt[s.id]=s,fe(s),s.id},ge=function(t){for(var e=0,i=et.length;e<i;e++){var n=pe.call(this,t[e][0],t[e][1],t[e][2],et[e][3],!0);!1===u&&(d[n]=!0);var r=t[e][0].split("-");fe({id:n,fontName:r[0],fontStyle:r[1]||""})}Lt.publish("addFonts",{fonts:yt,dictionary:vt})},me=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var i="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!fu.console)throw new Error(i);fu.console.error(i,t),fu.alert&&alert(i)}},t.foo.bar=t,t.foo},ye=function(t,e){var i,n,r,s,o,a,h,l,c;if(r=(e=e||{}).sourceEncoding||"Unicode",o=e.outputEncoding,(e.autoencode||o)&&yt[dt].metadata&&yt[dt].metadata[r]&&yt[dt].metadata[r].encoding&&(s=yt[dt].metadata[r].encoding,!o&&yt[dt].encoding&&(o=yt[dt].encoding),!o&&s.codePages&&(o=s.codePages[0]),"string"==typeof o&&(o=s[o]),o)){for(h=!1,a=[],i=0,n=t.length;i<n;i++)(l=o[t.charCodeAt(i)])?a.push(String.fromCharCode(l)):a.push(t[i]),a[i].charCodeAt(0)>>8&&(h=!0);t=a.join("")}for(i=t.length;void 0===h&&0!==i;)t.charCodeAt(i-1)>>8&&(h=!0),i--;if(!h)return t;for(a=e.noBOM?[]:[254,255],i=0,n=t.length;i<n;i++){if((c=(l=t.charCodeAt(i))>>8)>>8)throw new Error("Character at position "+i+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(c),a.push(l-(c<<8))}return String.fromCharCode.apply(void 0,a)},ve=f.__private__.pdfEscape=f.pdfEscape=function(t,e){return ye(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_e=f.__private__.beginPage=function(t){V[++Ct]=[],At[Ct]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},xe(Ct),J(V[B])},be=function(t,e){var n,s,o;switch(i=e||i,"string"==typeof t&&(n=y(t.toLowerCase()),Array.isArray(n)&&(s=n[0],o=n[1])),Array.isArray(t)&&(s=t[0]*ft,o=t[1]*ft),isNaN(s)&&(s=r[0],o=r[1]),(s>14400||o>14400)&&(gu.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),s=Math.min(14400,s),o=Math.min(14400,o)),r=[s,o],i.substr(0,1)){case"l":o>s&&(r=[o,s]);break;case"p":s>o&&(r=[o,s])}_e(r),ei($e),Q(li),0!==gi&&Q(gi+" J"),0!==mi&&Q(mi+" j"),Lt.publish("addPage",{pageNumber:Ct})},we=function(t){t>0&&t<=Ct&&(V.splice(t,1),At.splice(t,1),Ct--,B>Ct&&(B=Ct),this.setPage(B))},xe=function(t){t>0&&t<=Ct&&(B=t)},Se=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return V.length-1},Me=function(t,e,i){var n,r=void 0;return i=i||{},t=void 0!==t?t:yt[dt].fontName,e=void 0!==e?e:yt[dt].fontStyle,n=t.toLowerCase(),void 0!==vt[n]&&void 0!==vt[n][e]?r=vt[n][e]:void 0!==vt[t]&&void 0!==vt[t][e]?r=vt[t][e]:!1===i.disableWarning&&gu.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),r||i.noFallback||null==(r=vt.times[e])&&(r=vt.times.normal),r},Ce=f.__private__.putInfo=function(){var t=kt(),e=function(t){return t};for(var i in null!==c&&(e=Fe.encryptor(t,0)),Q("<<"),Q("/Producer ("+ve(e("jsPDF "+Hu.version))+")"),ut)ut.hasOwnProperty(i)&&ut[i]&&Q("/"+i.substr(0,1).toUpperCase()+i.substr(1)+" ("+ve(e(ut[i]))+")");Q("/CreationDate ("+ve(e(I))+")"),Q(">>"),Q("endobj")},Ae=f.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||qt;switch(kt(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+e+" 0 R"),nt||(nt="fullwidth"),nt){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var i=""+nt;"%"===i.substr(i.length-1)&&(nt=parseInt(nt)/100),"number"==typeof nt&&Q("/OpenAction [3 0 R /XYZ null null "+A(nt)+"]")}switch(ht||(ht="continuous"),ht){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}ot&&Q("/PageMode /"+ot),Lt.publish("putCatalog"),Q(">>"),Q("endobj")},Le=f.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(z+1)),Q("/Root "+z+" 0 R"),Q("/Info "+(z-1)+" 0 R"),null!==c&&Q("/Encrypt "+Fe.oid+" 0 R"),Q("/ID [ <"+O+"> <"+O+"> ]"),Q(">>")},Ne=f.__private__.putHeader=function(){Q("%PDF-"+p),Q("%")},Ee=f.__private__.putXRef=function(){var t="0000000000";Q("xref"),Q("0 "+(z+1)),Q("0000000000 65535 f ");for(var e=1;e<=z;e++)"function"==typeof U[e]?Q((t+U[e]()).slice(-10)+" 00000 n "):void 0!==U[e]?Q((t+U[e]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Pe=f.__private__.buildDocument=function(){K(),J(W),Lt.publish("buildDocument"),Ne(),Vt(),de(),ue(),null!==c&&se(),Ce(),Ae();var t=Y;return Ee(),Le(),Q("startxref"),Q(""+t),Q("%%EOF"),J(V[B]),W.join("\n")},Ie=f.__private__.getBlob=function(t){return new Blob([tt(t)],{type:"application/pdf"})},Oe=f.output=f.__private__.output=me((function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return Pe();case"save":f.save(e.filename);break;case"arraybuffer":return tt(Pe());case"blob":return Ie(Pe());case"bloburi":case"bloburl":if(void 0!==fu.URL&&"function"==typeof fu.URL.createObjectURL)return fu.URL&&fu.URL.createObjectURL(Ie(Pe()))||void 0;gu.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var i="",n=Pe();try{i=bu(n)}catch(t){i=bu(unescape(encodeURIComponent(n)))}return"data:application/pdf;filename="+e.filename+";base64,"+i;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(fu)){var r="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';e.pdfObjectUrl&&(r=e.pdfObjectUrl,s="");var o='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+r+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",a=fu.open();return null!==a&&a.document.write(o),a}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(fu)){var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',l=fu.open();if(null!==l){l.document.write(h);var c=this;l.document.documentElement.querySelector("#pdfViewer").onload=function(){l.document.title=e.filename,l.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(c.output("bloburl"))}}return l}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(fu))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',d=fu.open();if(null!==d&&(d.document.write(u),d.document.title=e.filename),d||"undefined"==typeof safari)return d;break;case"datauri":case"dataurl":return fu.document.location.href=this.output("datauristring",e);default:return null}})),Re=function(t){return!0===Array.isArray(Nt)&&Nt.indexOf(t)>-1};switch(n){case"pt":ft=1;break;case"mm":ft=72/25.4;break;case"cm":ft=72/2.54;break;case"in":ft=72;break;case"px":ft=1==Re("px_scaling")?.75:96/72;break;case"pc":case"em":ft=12;break;case"ex":ft=6;break;default:if("number"!=typeof n)throw new Error("Invalid unit: "+n);ft=n}var Fe=null;j(),F();var Te=function(t){return null!==c?Fe.encryptor(t,0):function(t){return t}},ke=f.__private__.getPageInfo=f.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:At[t].objId,pageNumber:t,pageContext:At[t]}},je=f.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in At)if(At[e].objId===t)break;return ke(e)},De=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:At[B].objId,pageNumber:B,pageContext:At[B]}};f.addPage=function(){return be.apply(this,arguments),this},f.setPage=function(){return xe.apply(this,arguments),J.call(this,V[B]),this},f.insertPage=function(t){return this.addPage(),this.movePage(B,t),this},f.movePage=function(t,e){var i,n;if(t>e){i=V[t],n=At[t];for(var r=t;r>e;r--)V[r]=V[r-1],At[r]=At[r-1];V[e]=i,At[e]=n,this.setPage(e)}else if(t<e){i=V[t],n=At[t];for(var s=t;s<e;s++)V[s]=V[s+1],At[s]=At[s+1];V[e]=i,At[e]=n,this.setPage(e)}return this},f.deletePage=function(){return we.apply(this,arguments),this},f.__private__.text=f.text=function(t,e,i,n,r){var s,o,a,h,l,c,u,f,p,g=(n=n||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof i||Array.isArray(i))){var m=i;i=e,e=t,t=m}if(arguments[3]instanceof Ot==0?(a=arguments[4],h=arguments[5],"object"===(0,Cc.Z)(u=arguments[3])&&null!==u||("string"==typeof a&&(h=a,a=null),"string"==typeof u&&(h=u,u=null),"number"==typeof u&&(a=u,u=null),n={flags:u,angle:a,align:h})):(M("The transform parameter of text() with a Matrix value"),p=r),isNaN(e)||isNaN(i)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return g;var y="",b=!1,w="number"==typeof n.lineHeightFactor?n.lineHeightFactor:Qe,x=g.internal.scaleFactor;function C(t){return t=t.split("\t").join(Array(n.TabLen||9).join(" ")),ve(t,u)}function A(t){for(var e,i=t.concat(),n=[],r=i.length;r--;)"string"==typeof(e=i.shift())?n.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?n.push(e[0]):n.push([e[0],e[1],e[2]]);return n}function L(t,e){var i;if("string"==typeof t)i=e(t)[0];else if(Array.isArray(t)){for(var n,r,s=t.concat(),o=[],a=s.length;a--;)"string"==typeof(n=s.shift())?o.push(e(n)[0]):Array.isArray(n)&&"string"==typeof n[0]&&(r=e(n[0],n[1],n[2]),o.push([r[0],r[1],r[2]]));i=o}return i}var E=!1,P=!0;if("string"==typeof t)E=!0;else if(Array.isArray(t)){var I=t.concat();o=[];for(var O,R=I.length;R--;)("string"!=typeof(O=I.shift())||Array.isArray(O)&&"string"!=typeof O[0])&&(P=!1);E=P}if(!1===E)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var F=it/g.internal.scaleFactor,T=F*(w-1);switch(n.baseline){case"bottom":i-=T;break;case"top":i+=F-T;break;case"hanging":i+=F-2*T;break;case"middle":i+=F/2-T}if((c=n.maxWidth||0)>0&&("string"==typeof t?t=g.splitTextToSize(t,c):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(g.splitTextToSize(e,c))}),[]))),s={text:t,x:e,y:i,options:n,mutex:{pdfEscape:ve,activeFontKey:dt,fonts:yt,activeFontSize:it}},Lt.publish("preProcessText",s),t=s.text,a=(n=s.options).angle,p instanceof Ot==0&&a&&"number"==typeof a){a*=Math.PI/180,0===n.rotationDirection&&(a=-a),_===v.ADVANCED&&(a=-a);var k=Math.cos(a),j=Math.sin(a);p=new Ot(k,j,-j,k,0,0)}else a&&a instanceof Ot&&(p=a);_!==v.ADVANCED||p||(p=Ft),void 0!==(l=n.charSpace||fi)&&(y+=S(N(l))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=n.horizontalScale)&&(y+=S(100*f)+" Tz\n"),n.lang;var D=-1,B=void 0!==n.renderingMode?n.renderingMode:n.stroke,q=g.internal.getCurrentPageInfo().pageContext;switch(B){case 0:case!1:case"fill":D=0;break;case 1:case!0:case"stroke":D=1;break;case 2:case"fillThenStroke":D=2;break;case 3:case"invisible":D=3;break;case 4:case"fillAndAddForClipping":D=4;break;case 5:case"strokeAndAddPathForClipping":D=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":D=6;break;case 7:case"addToPathForClipping":D=7}var G=void 0!==q.usedRenderingMode?q.usedRenderingMode:-1;-1!==D?y+=D+" Tr\n":-1!==G&&(y+="0 Tr\n"),-1!==D&&(q.usedRenderingMode=D),h=n.align||"left";var z,U=it*w,W=g.internal.pageSize.getWidth(),Y=yt[dt];l=n.charSpace||fi,c=n.maxWidth||0,u=Object.assign({autoencode:!0,noBOM:!0},n.flags);var H=[];if("[object Array]"===Object.prototype.toString.call(t)){var V;o=A(t),"left"!==h&&(z=o.map((function(t){return g.getStringUnitWidth(t,{font:Y,charSpace:l,fontSize:it,doKerning:!1})*it/x})));var X,Z=0;if("right"===h){e-=z[0],t=[],R=o.length;for(var K=0;K<R;K++)0===K?(X=si(e),V=oi(i)):(X=N(Z-z[K]),V=-U),t.push([o[K],X,V]),Z=z[K]}else if("center"===h){e-=z[0]/2,t=[],R=o.length;for(var J=0;J<R;J++)0===J?(X=si(e),V=oi(i)):(X=N((Z-z[J])/2),V=-U),t.push([o[J],X,V]),Z=z[J]}else if("left"===h){t=[],R=o.length;for(var $=0;$<R;$++)t.push(o[$])}else{if("justify"!==h)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');t=[],R=o.length,c=0!==c?c:W;for(var tt=0;tt<R;tt++)V=0===tt?oi(i):-U,X=0===tt?si(e):0,tt<R-1?H.push(S(N((c-z[tt])/(o[tt].split(" ").length-1)))):H.push(0),t.push([o[tt],X,V])}}var et="boolean"==typeof n.R2L?n.R2L:st;!0===et&&(t=L(t,(function(t,e,i){return[t.split("").reverse().join(""),e,i]}))),s={text:t,x:e,y:i,options:n,mutex:{pdfEscape:ve,activeFontKey:dt,fonts:yt,activeFontSize:it}},Lt.publish("postProcessText",s),t=s.text,b=s.mutex.isHex||!1;var nt=yt[dt].encoding;"WinAnsiEncoding"!==nt&&"StandardEncoding"!==nt||(t=L(t,(function(t,e,i){return[C(t),e,i]}))),o=A(t),t=[];for(var rt,ot,at,ht=0,lt=1,ct=Array.isArray(o[0])?lt:ht,ut="",ft=function(t,e,i){var r="";return i instanceof Ot?(i="number"==typeof n.angle?Rt(i,new Ot(1,0,0,1,t,e)):Rt(new Ot(1,0,0,1,t,e),i),_===v.ADVANCED&&(i=Rt(new Ot(1,0,0,-1,0,0),i)),r=i.join(" ")+" Tm\n"):r=S(t)+" "+S(e)+" Td\n",r},pt=0;pt<o.length;pt++){switch(ut="",ct){case lt:at=(b?"<":"(")+o[pt][0]+(b?">":")"),rt=parseFloat(o[pt][1]),ot=parseFloat(o[pt][2]);break;case ht:at=(b?"<":"(")+o[pt]+(b?">":")"),rt=si(e),ot=oi(i)}void 0!==H&&void 0!==H[pt]&&(ut=H[pt]+" Tw\n"),0===pt?t.push(ut+ft(rt,ot,p)+at):ct===ht?t.push(ut+at):ct===lt&&t.push(ut+ft(rt,ot,p)+at)}t=ct===ht?t.join(" Tj\nT* "):t.join(" Tj\n"),t+=" Tj\n";var gt="BT\n/";return gt+=dt+" "+it+" Tf\n",gt+=S(it*w)+" TL\n",gt+=ui+"\n",gt+=y,gt+=t,Q(gt+="ET"),d[dt]=!0,g};var Be=f.__private__.clip=f.clip=function(t){return Q("evenodd"===t?"W*":"W"),this};f.clipEvenOdd=function(){return Be("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Q("n"),this};var qe=f.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(t){return qe(t)&&(l=t),this};var Ge=f.__private__.getStyle=f.getStyle=function(t){var e=l;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},ze=f.close=function(){return Q("h"),this};f.stroke=function(){return Q("S"),this},f.fill=function(t){return Ue("f",t),this},f.fillEvenOdd=function(t){return Ue("f*",t),this},f.fillStroke=function(t){return Ue("B",t),this},f.fillStrokeEvenOdd=function(t){return Ue("B*",t),this};var Ue=function(t,e){"object"===(0,Cc.Z)(e)?He(e,t):Q(t)},We=function(t){null===t||_===v.ADVANCED&&void 0===t||(t=Ge(t),Q(t))};function Ye(t,e,i,n,r){var s=new Yu(e||this.boundingBox,i||this.xStep,n||this.yStep,this.gState,r||this.matrix);s.stream=this.stream;var o=t+"$$"+this.cloneIndex+++"$$";return Tt(o,s),s}var He=function(t,e){var i=wt[t.key],n=bt[i];if(n instanceof Wu)Q("q"),Q(Ve(e)),n.gState&&f.setGState(n.gState),Q(t.matrix.toString()+" cm"),Q("/"+i+" sh"),Q("Q");else if(n instanceof Yu){var r=new Ot(1,0,0,-1,0,Ai());t.matrix&&(r=r.multiply(t.matrix||Ft),i=Ye.call(n,t.key,t.boundingBox,t.xStep,t.yStep,r).id),Q("q"),Q("/Pattern cs"),Q("/"+i+" scn"),n.gState&&f.setGState(n.gState),Q(e),Q("Q")}},Ve=function(t){switch(t){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Xe=f.moveTo=function(t,e){return Q(S(N(t))+" "+S(P(e))+" m"),this},Ze=f.lineTo=function(t,e){return Q(S(N(t))+" "+S(P(e))+" l"),this},Ke=f.curveTo=function(t,e,i,n,r,s){return Q([S(N(t)),S(P(e)),S(N(i)),S(P(n)),S(N(r)),S(P(s)),"c"].join(" ")),this};f.__private__.line=f.line=function(t,e,i,n,r){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n)||!qe(r))throw new Error("Invalid arguments passed to jsPDF.line");return _===v.COMPAT?this.lines([[i-t,n-e]],t,e,[1,1],r||"S"):this.lines([[i-t,n-e]],t,e,[1,1]).stroke()},f.__private__.lines=f.lines=function(t,e,i,n,r,s){var o,a,h,l,c,u,d,f,p,g,m,y;if("number"==typeof t&&(y=i,i=e,e=t,t=y),n=n||[1,1],s=s||!1,isNaN(e)||isNaN(i)||!Array.isArray(t)||!Array.isArray(n)||!qe(r)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(Xe(e,i),o=n[0],a=n[1],l=t.length,g=e,m=i,h=0;h<l;h++)2===(c=t[h]).length?(g=c[0]*o+g,m=c[1]*a+m,Ze(g,m)):(u=c[0]*o+g,d=c[1]*a+m,f=c[2]*o+g,p=c[3]*a+m,g=c[4]*o+g,m=c[5]*a+m,Ke(u,d,f,p,g,m));return s&&ze(),We(r),this},f.path=function(t){for(var e=0;e<t.length;e++){var i=t[e],n=i.c;switch(i.op){case"m":Xe(n[0],n[1]);break;case"l":Ze(n[0],n[1]);break;case"c":Ke.apply(this,n);break;case"h":ze()}}return this},f.__private__.rect=f.rect=function(t,e,i,n,r){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n)||!qe(r))throw new Error("Invalid arguments passed to jsPDF.rect");return _===v.COMPAT&&(n=-n),Q([S(N(t)),S(P(e)),S(N(i)),S(N(n)),"re"].join(" ")),We(r),this},f.__private__.triangle=f.triangle=function(t,e,i,n,r,s,o){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n)||isNaN(r)||isNaN(s)||!qe(o))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[i-t,n-e],[r-i,s-n],[t-r,e-s]],t,e,[1,1],o,!0),this},f.__private__.roundedRect=f.roundedRect=function(t,e,i,n,r,s,o){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n)||isNaN(r)||isNaN(s)||!qe(o))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var a=4/3*(Math.SQRT2-1);return r=Math.min(r,.5*i),s=Math.min(s,.5*n),this.lines([[i-2*r,0],[r*a,0,r,s-s*a,r,s],[0,n-2*s],[0,s*a,-r*a,s,-r,s],[2*r-i,0],[-r*a,0,-r,-s*a,-r,-s],[0,2*s-n],[0,-s*a,r*a,-s,r,-s]],t+r,e,[1,1],o,!0),this},f.__private__.ellipse=f.ellipse=function(t,e,i,n,r){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n)||!qe(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*i,o=4/3*(Math.SQRT2-1)*n;return Xe(t+i,e),Ke(t+i,e-o,t+s,e-n,t,e-n),Ke(t-s,e-n,t-i,e-o,t-i,e),Ke(t-i,e+o,t-s,e+n,t,e+n),Ke(t+s,e+n,t+i,e+o,t+i,e),We(r),this},f.__private__.circle=f.circle=function(t,e,i,n){if(isNaN(t)||isNaN(e)||isNaN(i)||!qe(n))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,i,i,n)},f.setFont=function(t,e,i){return i&&(e=x(e,i)),dt=Me(t,e,{disableWarning:!1}),this};var Je=f.__private__.getFont=f.getFont=function(){return yt[Me.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var t,e,i={};for(t in vt)if(vt.hasOwnProperty(t))for(e in i[t]=[],vt[t])vt[t].hasOwnProperty(e)&&i[t].push(e);return i},f.addFont=function(t,e,i,n,r){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?r=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(i=x(i,n)),r=r||"Identity-H",pe.call(this,t,e,i,r)};var Qe,$e=t.lineWidth||.200025,ti=f.__private__.getLineWidth=f.getLineWidth=function(){return $e},ei=f.__private__.setLineWidth=f.setLineWidth=function(t){return $e=t,Q(S(N(t))+" w"),this};f.__private__.setLineDash=Hu.API.setLineDash=Hu.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return S(N(t))})).join(" "),e=S(N(e)),Q("["+t+"] "+e+" d"),this};var ii=f.__private__.getLineHeight=f.getLineHeight=function(){return it*Qe};f.__private__.getLineHeight=f.getLineHeight=function(){return it*Qe};var ni=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(Qe=t),this},ri=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Qe};ni(t.lineHeight);var si=f.__private__.getHorizontalCoordinate=function(t){return N(t)},oi=f.__private__.getVerticalCoordinate=function(t){return _===v.ADVANCED?t:At[B].mediaBox.topRightY-At[B].mediaBox.bottomLeftY-N(t)},ai=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(t){return S(si(t))},hi=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(t){return S(oi(t))},li=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return zt(li)},f.__private__.setStrokeColor=f.setDrawColor=function(t,e,i,n){return li=Ut({ch1:t,ch2:e,ch3:i,ch4:n,pdfColorType:"draw",precision:2}),Q(li),this};var ci=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return zt(ci)},f.__private__.setFillColor=f.setFillColor=function(t,e,i,n){return ci=Ut({ch1:t,ch2:e,ch3:i,ch4:n,pdfColorType:"fill",precision:2}),Q(ci),this};var ui=t.textColor||"0 g",di=f.__private__.getTextColor=f.getTextColor=function(){return zt(ui)};f.__private__.setTextColor=f.setTextColor=function(t,e,i,n){return ui=Ut({ch1:t,ch2:e,ch3:i,ch4:n,pdfColorType:"text",precision:3}),this};var fi=t.charSpace,pi=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(fi||0)};f.__private__.setCharSpace=f.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fi=t,this};var gi=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(t){var e=f.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gi=e,Q(e+" J"),this};var mi=0;f.__private__.setLineJoin=f.setLineJoin=function(t){var e=f.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mi=e,Q(e+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(S(N(t))+" M"),this},f.GState=zu,f.setGState=function(t){(t="string"==typeof t?xt[St[t]]:yi(null,t)).equals(Mt)||(Q("/"+t.id+" gs"),Mt=t)};var yi=function(t,e){if(!t||!St[t]){var i=!1;for(var n in xt)if(xt.hasOwnProperty(n)&&xt[n].equals(e)){i=!0;break}if(i)e=xt[n];else{var r="GS"+(Object.keys(xt).length+1).toString(10);xt[r]=e,e.id=r}return t&&(St[t]=e.id),Lt.publish("addGState",e),e}};f.addGState=function(t,e){return yi(t,e),this},f.saveGraphicsState=function(){return Q("q"),_t.push({key:dt,size:it,color:ui}),this},f.restoreGraphicsState=function(){Q("Q");var t=_t.pop();return dt=t.key,it=t.size,ui=t.color,Mt=null,this},f.setCurrentTransformationMatrix=function(t){return Q(t.toString()+" cm"),this},f.comment=function(t){return Q("#"+t),this};var vi=function(t,e){var i=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var n=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(t){r=t.toString()}}),this},_i=function(t,e,i,n){vi.call(this,t,e),this.type="rect";var r=i||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var s=n||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(t){isNaN(t)||(s=parseFloat(t))}}),this},bi=function(){this.page=Ct,this.currentPage=B,this.pages=V.slice(0),this.pagesContext=At.slice(0),this.x=pt,this.y=gt,this.matrix=mt,this.width=Mi(B),this.height=Ai(B),this.outputDestination=Z,this.id="",this.objectNumber=-1};bi.prototype.restore=function(){Ct=this.page,B=this.currentPage,At=this.pagesContext,V=this.pages,pt=this.x,gt=this.y,mt=this.matrix,Ci(B,this.width),Li(B,this.height),Z=this.outputDestination};var wi=function(t,e,i,n,r){It.push(new bi),Ct=B=0,V=[],pt=t,gt=e,mt=r,_e([i,n])},xi=function(t){if(Pt[t])It.pop().restore();else{var e=new bi,i="Xo"+(Object.keys(Et).length+1).toString(10);e.id=i,Pt[t]=i,Et[i]=e,Lt.publish("addFormObject",e),It.pop().restore()}};for(var Si in f.beginFormObject=function(t,e,i,n,r){return wi(t,e,i,n,r),this},f.endFormObject=function(t){return xi(t),this},f.doFormObject=function(t,e){var i=Et[Pt[t]];return Q("q"),Q(e.toString()+" cm"),Q("/"+i.id+" Do"),Q("Q"),this},f.getFormObject=function(t){var e=Et[Pt[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},f.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(wu(Ie(Pe()),t),"function"==typeof wu.unload&&fu.setTimeout&&setTimeout(wu.unload,911),this):new Promise((function(e,i){try{var n=wu(Ie(Pe()),t);"function"==typeof wu.unload&&fu.setTimeout&&setTimeout(wu.unload,911),e(n)}catch(t){i(t.message)}}))},Hu.API)Hu.API.hasOwnProperty(Si)&&("events"===Si&&Hu.API.events.length?function(t,e){var i,n,r;for(r=e.length-1;-1!==r;r--)i=e[r][0],n=e[r][1],t.subscribe.apply(t,[i].concat("function"==typeof n?[n]:n))}(Lt,Hu.API.events):f[Si]=Hu.API[Si]);var Mi=f.getPageWidth=function(t){return(At[t=t||B].mediaBox.topRightX-At[t].mediaBox.bottomLeftX)/ft},Ci=f.setPageWidth=function(t,e){At[t].mediaBox.topRightX=e*ft+At[t].mediaBox.bottomLeftX},Ai=f.getPageHeight=function(t){return(At[t=t||B].mediaBox.topRightY-At[t].mediaBox.bottomLeftY)/ft},Li=f.setPageHeight=function(t,e){At[t].mediaBox.topRightY=e*ft+At[t].mediaBox.bottomLeftY};return f.internal={pdfEscape:ve,getStyle:Ge,getFont:Je,getFontSize:rt,getCharSpace:pi,getTextColor:di,getLineHeight:ii,getLineHeightFactor:ri,getLineWidth:ti,write:$,getHorizontalCoordinate:si,getVerticalCoordinate:oi,getCoordinateString:ai,getVerticalCoordinateString:hi,collections:{},newObject:kt,newAdditionalObject:Bt,newObjectDeferred:jt,newObjectDeferredBegin:Dt,getFilters:Wt,putStream:Yt,events:Lt,scaleFactor:ft,pageSize:{getWidth:function(){return Mi(B)},setWidth:function(t){Ci(B,t)},getHeight:function(){return Ai(B)},setHeight:function(t){Li(B,t)}},encryptionOptions:c,encryption:Fe,getEncryptor:Te,output:Oe,getNumberOfPages:Se,pages:V,out:Q,f2:A,f3:L,getPageInfo:ke,getPageInfoByObjId:je,getCurrentPageInfo:De,getPDFVersion:g,Point:vi,Rectangle:_i,Matrix:Ot,hasHotfix:Re},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Mi(B)},set:function(t){Ci(B,t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Ai(B)},set:function(t){Li(B,t)},enumerable:!0,configurable:!0}),ge.call(f,et),dt="F1",be(r,i),Lt.publish("initialized"),f}Bu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Bu.prototype.toHexString=function(t){return t.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Bu.prototype.hexToBytes=function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(String.fromCharCode(parseInt(t.substr(i,2),16)));return e.join("")},Bu.prototype.processOwnerPassword=function(t,e){return ju(Fu(e).substr(0,5),t)},Bu.prototype.encryptor=function(t,e){var i=Fu(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(t){return ju(i,t)}},zu.prototype.equals=function(t){var e,i="id,objectNumber,equals";if(!t||(0,Cc.Z)(t)!==(0,Cc.Z)(this))return!1;var n=0;for(e in this)if(!(i.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e))return!1;if(this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&i.indexOf(e)<0&&n--;return 0===n},Hu.API={events:[]},Hu.version="2.5.1";var Vu=Hu.API,Xu=1,Zu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ku=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ju=function(t){return t.toFixed(2)},Qu=function(t){return t.toFixed(5)};Vu.__acroform__={};var $u=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},td=function(t){return t*Xu},ed=function(t){var e=new yd,i=Id.internal.getHeight(t)||0,n=Id.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ju(n)),Number(Ju(i))],e},id=Vu.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},nd=Vu.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},rd=Vu.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},sd=Vu.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return rd(t,e-1)},od=Vu.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return id(t,e-1)},ad=Vu.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return nd(t,e-1)},hd=Vu.__acroform__.calculateCoordinates=function(t,e){var i=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,r=t[0],s=t[1],o=t[2],a=t[3],h={};return h.lowerLeft_X=i(r)||0,h.lowerLeft_Y=n(s+a)||0,h.upperRight_X=i(r+o)||0,h.upperRight_Y=n(s)||0,[Number(Ju(h.lowerLeft_X)),Number(Ju(h.lowerLeft_Y)),Number(Ju(h.upperRight_X)),Number(Ju(h.upperRight_Y))]},ld=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],i=t._V||t.DV,n=cd(t,i),r=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+r+" "+Ju(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ed(t);return s.scope=t.scope,s.stream=e.join("\n"),s}},cd=function(t,e){var i=0===t.fontSize?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},r=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");r=t.multiline?r.map((function(t){return t.split("\n")})):r.map((function(t){return[t]}));var s=i,o=Id.internal.getHeight(t)||0;o=o<0?-o:o;var a=Id.internal.getWidth(t)||0;a=a<0?-a:a;var h=function(e,i,n){if(e+1<r.length){var s=i+" "+r[e+1][0];return ud(s,t,n).width<=a-4}return!1};s++;t:for(;s>0;){e="",s--;var l,c,u=ud("3",t,s).height,d=t.multiline?o-s:(o-u)/2,f=d+=2,p=0,g=0,m=0;if(s<=0){e="(...) Tj\n",e+="% Width of Text: "+ud(e,t,s=12).width+", FieldWidth:"+a+"\n";break}for(var y="",v=0,_=0;_<r.length;_++)if(r.hasOwnProperty(_)){var b=!1;if(1!==r[_].length&&m!==r[_].length-1){if((u+2)*(v+2)+2>o)continue t;y+=r[_][m],b=!0,g=_,_--}else{y=" "==(y+=r[_][m]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var w=parseInt(_),x=h(w,y,s),S=_>=r.length-1;if(x&&!S){y+=" ",m=0;continue}if(x||S){if(S)g=w;else if(t.multiline&&(u+2)*(v+2)+2>o)continue t}else{if(!t.multiline)continue t;if((u+2)*(v+2)+2>o)continue t;g=w}}for(var M="",C=p;C<=g;C++){var A=r[C];if(t.multiline){if(C===g){M+=A[m]+" ",m=(m+1)%A.length;continue}if(C===p){M+=A[A.length-1]+" ";continue}}M+=A[0]+" "}switch(M=" "==M.substr(M.length-1)?M.substr(0,M.length-1):M,c=ud(M,t,s).width,t.textAlign){case"right":l=a-c-2;break;case"center":l=(a-c)/2;break;default:l=2}e+=Ju(l)+" "+Ju(f)+" Td\n",e+="("+Zu(M)+") Tj\n",e+=-Ju(l)+" 0 Td\n",f=-(s+2),c=0,p=b?g:g+1,v++,y=""}break}return n.text=e,n.fontSize=s,n},ud=function(t,e,i){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:r}},dd={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},fd=function(t,e){var i={type:"reference",object:t};void 0===e.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===i.type&&t.object===i.object}))&&e.internal.getPageInfo(t.page).pageContext.annotations.push(i)},pd=Vu.__acroform__.arrayToPdfArray=function(t,e,i){var n=function(t){return t};if(Array.isArray(t)){for(var r="[",s=0;s<t.length;s++)switch(0!==s&&(r+=" "),(0,Cc.Z)(t[s])){case"boolean":case"number":case"object":r+=t[s].toString();break;case"string":"/"!==t[s].substr(0,1)?(void 0!==e&&i&&(n=i.internal.getEncryptor(e)),r+="("+Zu(n(t[s].toString()))+")"):r+=t[s].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},gd=function(t,e,i){var n=function(t){return t};return void 0!==e&&i&&(n=i.internal.getEncryptor(e)),(t=t||"").toString(),"("+Zu(n(t))+")"},md=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};md.prototype.toString=function(){return this.objId+" 0 R"},md.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},md.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"scope"!=t&&"objId"!=t&&"_"!=t.substring(0,1)}));for(var i in e)if(!1===Object.getOwnPropertyDescriptor(this,e[i]).configurable){var n=e[i],r=this[n];r&&(Array.isArray(r)?t.push({key:n,value:pd(r,this.objId,this.scope)}):r instanceof md?(r.scope=this.scope,t.push({key:n,value:r.objId+" 0 R"})):"function"!=typeof r&&t.push({key:n,value:r}))}return t};var yd=function(){md.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};$u(yd,md);var vd=function(){md.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Zu(e(t))+")"}},set:function(e){t=e}})};$u(vd,md);var _d=function t(){md.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(e,3))},set:function(t){!0===Boolean(t)?this.F=od(e,3):this.F=ad(e,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');i=t}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==n.length)return n},set:function(t){n=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(t){n[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(t){n[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(t){n[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(t){n[3]=t}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Ld)return;s="FieldObject"+t.FieldNum++}var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Zu(e(s))+")"},set:function(t){s=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(t){s=t}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(t){o=t}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(t){h=t}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===l?50/Xu:l},set:function(t){l=t}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(t){c=t}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Ld||this instanceof Ed))return gd(u,this.objId,this.scope)},set:function(t){t=t.toString(),u=t}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Md==0?gd(d,this.objId,this.scope):d},set:function(t){t=t.toString(),d=this instanceof Md==0?"("===t.substr(0,1)?Ku(t.substr(1,t.length-2)):Ku(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Md==1?Ku(d.substr(1,d.length-1)):d},set:function(t){t=t.toString(),d=this instanceof Md==1?"/"+t:t}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(t){this.V=t}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Md==0?gd(f,this.objId,this.scope):f},set:function(t){t=t.toString(),f=this instanceof Md==0?"("===t.substr(0,1)?Ku(t.substr(1,t.length-2)):Ku(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Md==1?Ku(f.substr(1,f.length-1)):f},set:function(t){t=t.toString(),f=this instanceof Md==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(t){t=Boolean(t),g=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(t){p=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,1))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,1):this.Ff=ad(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,2))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,2):this.Ff=ad(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,3))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,3):this.Ff=ad(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');m=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(m){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:m=2;break;case"center":case 1:m=1;break;default:m=0}}})};$u(_d,md);var bd=function(){_d.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return pd(e,this.objId,this.scope)},set:function(t){var i,n;n=[],"string"==typeof(i=t)&&(n=function(t,e,i){i||(i=1);for(var n,r=[];n=e.exec(t);)r.push(n[i]);return r}(i,/\((.*?)\)/g)),e=n}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,i){for(i=i||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==i););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,18))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,18):this.Ff=ad(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,19))},set:function(t){!0===this.combo&&(!0===Boolean(t)?this.Ff=od(this.Ff,19):this.Ff=ad(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=od(this.Ff,20),e.sort()):this.Ff=ad(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,22))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,22):this.Ff=ad(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,23):this.Ff=ad(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,27))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,27):this.Ff=ad(this.Ff,27)}}),this.hasAppearanceStream=!1};$u(bd,_d);var wd=function(){bd.call(this),this.fontName="helvetica",this.combo=!1};$u(wd,bd);var xd=function(){wd.call(this),this.combo=!0};$u(xd,wd);var Sd=function(){xd.call(this),this.edit=!0};$u(Sd,xd);var Md=function(){_d.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,15))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,15):this.Ff=ad(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,16))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,16):this.Ff=ad(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,17))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,17):this.Ff=ad(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,26):this.Ff=ad(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var i,n=[];for(i in n.push("<<"),e)n.push("/"+i+" ("+Zu(t(e[i]))+")");return n.push(">>"),n.join("\n")}},set:function(t){"object"===(0,Cc.Z)(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};$u(Md,_d);var Cd=function(){Md.call(this),this.pushButton=!0};$u(Cd,Md);var Ad=function(){Md.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};$u(Ad,Md);var Ld=function(){var t,e;_d.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var i,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};this.scope&&(t=this.scope.internal.getEncryptor(this.objId));var e,i=[];for(e in i.push("<<"),n)i.push("/"+e+" ("+Zu(t(n[e]))+")");return i.push(">>"),i.join("\n")},set:function(t){"object"===(0,Cc.Z)(t)&&(n=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(t){"string"==typeof t&&(n.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Id.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$u(Ld,_d),Ad.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var i=this.Kids[e];i.appearanceStreamContent=t.createAppearanceStream(i.optionName),i.caption=t.getCA()}},Ad.prototype.createOption=function(t){var e=new Ld;return e.Parent=this,e.optionName=t,this.Kids.push(e),Fd.call(this.scope,e),e};var Nd=function(){Md.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Id.CheckBox.createAppearanceStream()};$u(Nd,Md);var Ed=function(){_d.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,13))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,13):this.Ff=ad(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,21))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,21):this.Ff=ad(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,23):this.Ff=ad(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,24))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,24):this.Ff=ad(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,25))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,25):this.Ff=ad(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,26):this.Ff=ad(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$u(Ed,_d);var Pd=function(){Ed.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,14))},set:function(t){!0===Boolean(t)?this.Ff=od(this.Ff,14):this.Ff=ad(this.Ff,14)}}),this.password=!0};$u(Pd,Ed);var Id={CheckBox:{createAppearanceStream:function(){return{N:{On:Id.CheckBox.YesNormal},D:{On:Id.CheckBox.YesPushDown,Off:Id.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ed(t);e.scope=t.scope;var i=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=cd(t,t.caption);return i.push("0.749023 g"),i.push("0 0 "+Ju(Id.internal.getWidth(t))+" "+Ju(Id.internal.getHeight(t))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+n+" "+Ju(s.fontSize)+" Tf "+r),i.push("BT"),i.push(s.text),i.push("ET"),i.push("Q"),i.push("EMC"),e.stream=i.join("\n"),e},YesNormal:function(t){var e=ed(t);e.scope=t.scope;var i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),r=[],s=Id.internal.getHeight(t),o=Id.internal.getWidth(t),a=cd(t,t.caption);return r.push("1 g"),r.push("0 0 "+Ju(o)+" "+Ju(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Ju(o-1)+" "+Ju(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+i+" "+Ju(a.fontSize)+" Tf "+n),r.push(a.text),r.push("ET"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=ed(t);e.scope=t.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Ju(Id.internal.getWidth(t))+" "+Ju(Id.internal.getHeight(t))+" re"),i.push("f"),e.stream=i.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Id.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Id.RadioButton.Circle.YesNormal,e.D[t]=Id.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ed(t);e.scope=t.scope;var i=[],n=Id.internal.getWidth(t)<=Id.internal.getHeight(t)?Id.internal.getWidth(t)/4:Id.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var r=Id.internal.Bezier_C,s=Number((n*r).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+Qu(Id.internal.getWidth(t)/2)+" "+Qu(Id.internal.getHeight(t)/2)+" cm"),i.push(n+" 0 m"),i.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),i.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),i.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),i.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join("\n"),e},YesPushDown:function(t){var e=ed(t);e.scope=t.scope;var i=[],n=Id.internal.getWidth(t)<=Id.internal.getHeight(t)?Id.internal.getWidth(t)/4:Id.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),s=Number((r*Id.internal.Bezier_C).toFixed(5)),o=Number((n*Id.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Qu(Id.internal.getWidth(t)/2)+" "+Qu(Id.internal.getHeight(t)/2)+" cm"),i.push(r+" 0 m"),i.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),i.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),i.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),i.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+Qu(Id.internal.getWidth(t)/2)+" "+Qu(Id.internal.getHeight(t)/2)+" cm"),i.push(n+" 0 m"),i.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),i.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),i.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),i.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=ed(t);e.scope=t.scope;var i=[],n=Id.internal.getWidth(t)<=Id.internal.getHeight(t)?Id.internal.getWidth(t)/4:Id.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),s=Number((r*Id.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Qu(Id.internal.getWidth(t)/2)+" "+Qu(Id.internal.getHeight(t)/2)+" cm"),i.push(r+" 0 m"),i.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),i.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),i.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),i.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Id.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Id.RadioButton.Cross.YesNormal,e.D[t]=Id.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ed(t);e.scope=t.scope;var i=[],n=Id.internal.calculateCross(t);return i.push("q"),i.push("1 1 "+Ju(Id.internal.getWidth(t)-2)+" "+Ju(Id.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(Ju(n.x1.x)+" "+Ju(n.x1.y)+" m"),i.push(Ju(n.x2.x)+" "+Ju(n.x2.y)+" l"),i.push(Ju(n.x4.x)+" "+Ju(n.x4.y)+" m"),i.push(Ju(n.x3.x)+" "+Ju(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join("\n"),e},YesPushDown:function(t){var e=ed(t);e.scope=t.scope;var i=Id.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ju(Id.internal.getWidth(t))+" "+Ju(Id.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ju(Id.internal.getWidth(t)-2)+" "+Ju(Id.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ju(i.x1.x)+" "+Ju(i.x1.y)+" m"),n.push(Ju(i.x2.x)+" "+Ju(i.x2.y)+" l"),n.push(Ju(i.x4.x)+" "+Ju(i.x4.y)+" m"),n.push(Ju(i.x3.x)+" "+Ju(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=ed(t);e.scope=t.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Ju(Id.internal.getWidth(t))+" "+Ju(Id.internal.getHeight(t))+" re"),i.push("f"),e.stream=i.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+i}};Id.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Id.internal.getWidth(t),i=Id.internal.getHeight(t),n=Math.min(e,i);return{x1:{x:(e-n)/2,y:(i-n)/2+n},x2:{x:(e-n)/2+n,y:(i-n)/2},x3:{x:(e-n)/2,y:(i-n)/2},x4:{x:(e-n)/2+n,y:(i-n)/2+n}}}},Id.internal.getWidth=function(t){var e=0;return"object"===(0,Cc.Z)(t)&&(e=td(t.Rect[2])),e},Id.internal.getHeight=function(t){var e=0;return"object"===(0,Cc.Z)(t)&&(e=td(t.Rect[3])),e};var Od,Rd,Fd=Vu.addField=function(t){if(function(t,e){if(e.scope=t,void 0!==t.internal&&(void 0===t.internal.acroformPlugin||!1===t.internal.acroformPlugin.isInitialized)){if(_d.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(dd)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Xu=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new vd,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){var e;(e=t).internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})),t.internal.events.subscribe("buildDocument",(function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];n.objId=void 0,n.hasAnnotation&&fd(n,t)}}(t)})),t.internal.events.subscribe("putCatalog",(function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(t)})),t.internal.events.subscribe("postPutPages",(function(e){!function(t,e){var i=!t;for(var n in t||(e.internal.newObjectDeferredBegin(e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(n)){var r=t[n],s=[],o=r.Rect;if(r.Rect&&(r.Rect=hd(r.Rect,e)),e.internal.newObjectDeferredBegin(r.objId,!0),r.DA=Id.createDefaultAppearanceStream(r),"object"===(0,Cc.Z)(r)&&"function"==typeof r.getKeyValueListForStream&&(s=r.getKeyValueListForStream()),r.Rect=o,r.hasAppearanceStream&&!r.appearanceStreamContent){var a=ld(r);s.push({key:"AP",value:"<</N "+a+">>"}),e.internal.acroformPlugin.xForms.push(a)}if(r.appearanceStreamContent){var h="";for(var l in r.appearanceStreamContent)if(r.appearanceStreamContent.hasOwnProperty(l)){var c=r.appearanceStreamContent[l];if(h+="/"+l+" ",h+="<<",Object.keys(c).length>=1||Array.isArray(c)){for(var n in c)if(c.hasOwnProperty(n)){var u=c[n];"function"==typeof u&&(u=u.call(e,r)),h+="/"+n+" "+u+" ",e.internal.acroformPlugin.xForms.indexOf(u)>=0||e.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=c)&&(u=u.call(e,r)),h+="/"+n+" "+u,e.internal.acroformPlugin.xForms.indexOf(u)>=0||e.internal.acroformPlugin.xForms.push(u);h+=">>"}s.push({key:"AP",value:"<<\n"+h+">>"})}e.internal.putStream({additionalKeyValues:s,objectId:r.objId}),e.internal.out("endobj")}i&&function(t,e){for(var i in t)if(t.hasOwnProperty(i)){var n=i,r=t[i];e.internal.newObjectDeferredBegin(r.objId,!0),"object"===(0,Cc.Z)(r)&&"function"==typeof r.putStream&&r.putStream(),delete t[n]}}(e.internal.acroformPlugin.xForms,e)}(e,t)})),t.internal.acroformPlugin.isInitialized=!0}}(this,t),!(t instanceof _d))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};function Td(t){return t.reduce((function(t,e,i){return t[e]=i,t}),{})}Vu.AcroFormChoiceField=bd,Vu.AcroFormListBox=wd,Vu.AcroFormComboBox=xd,Vu.AcroFormEditBox=Sd,Vu.AcroFormButton=Md,Vu.AcroFormPushButton=Cd,Vu.AcroFormRadioButton=Ad,Vu.AcroFormCheckBox=Nd,Vu.AcroFormTextField=Ed,Vu.AcroFormPasswordField=Pd,Vu.AcroFormAppearance=Id,Vu.AcroForm={ChoiceField:bd,ListBox:wd,ComboBox:xd,EditBox:Sd,Button:Md,PushButton:Cd,RadioButton:Ad,CheckBox:Nd,TextField:Ed,PasswordField:Pd,Appearance:Id},Hu.AcroForm={ChoiceField:bd,ListBox:wd,ComboBox:xd,EditBox:Sd,Button:Md,PushButton:Cd,RadioButton:Ad,CheckBox:Nd,TextField:Ed,PasswordField:Pd,Appearance:Id},Hu.AcroForm,function(t){t.__addimage__={};var e="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(t,n){var r,s,o,a,h,l=e;if("RGBA"===(n=n||e)||void 0!==t.data&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t)return"RGBA";if(x(t))for(h in i)for(o=i[h],r=0;r<o.length;r+=1){for(a=!0,s=0;s<o[r].length;s+=1)if(void 0!==o[r][s]&&o[r][s]!==t[s]){a=!1;break}if(!0===a){l=h;break}}else for(h in i)for(o=i[h],r=0;r<o.length;r+=1){for(a=!0,s=0;s<o[r].length;s+=1)if(void 0!==o[r][s]&&o[r][s]!==t.charCodeAt(s)){a=!1;break}if(!0===a){l=h;break}}return l===e&&n!==e&&(l=n),l},r=function t(e){for(var i=this.internal.write,n=this.internal.putStream,r=(0,this.internal.getFilters)();-1!==r.indexOf("FlateEncode");)r.splice(r.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:e.width}),s.push({key:"Height",value:e.height}),e.colorSpace===m.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===m.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var o="",a=0,h=e.transparency.length;a<h;a++)o+=e.transparency[a]+" "+e.transparency[a]+" ";s.push({key:"Mask",value:"["+o+"]"})}void 0!==e.sMask&&s.push({key:"SMask",value:e.objectId+1+" 0 R"});var l=void 0!==e.filter?["/"+e.filter]:void 0;if(n({data:e.data,additionalKeyValues:s,alreadyAppliedFilters:l,objectId:e.objectId}),i("endobj"),"sMask"in e&&void 0!==e.sMask){var c="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,u={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:c,data:e.sMask};"filter"in e&&(u.filter=e.filter),t.call(this,u)}if(e.colorSpace===m.INDEXED){var d=this.internal.newObject();n({data:M(new Uint8Array(e.palette)),objectId:d}),i("endobj")}},s=function(){var t=this.internal.collections.addImage_images;for(var e in t)r.call(this,t[e])},o=function(){var t,e=this.internal.collections.addImage_images,i=this.internal.write;for(var n in e)i("/I"+(t=e[n]).index,t.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},h=function(){var t=this.internal.collections.addImage_images;return a.call(this),t},l=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(e){return"function"==typeof t["process"+e.toUpperCase()]},u=function(t){return"object"===(0,Cc.Z)(t)&&1===t.nodeType},d=function(e,i){if("IMG"===e.nodeName&&e.hasAttribute("src")){var n=""+e.getAttribute("src");if(0===n.indexOf("data:image/"))return _u(unescape(n).split("base64,").pop());var r=t.loadFile(n,!0);if(void 0!==r)return r}if("CANVAS"===e.nodeName){if(0===e.width||0===e.height)throw new Error("Given canvas must have data. Canvas width: "+e.width+", height: "+e.height);var s;switch(i){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;default:s="image/jpeg"}return _u(e.toDataURL(s,1).split("base64,").pop())}},f=function(t){var e=this.internal.collections.addImage_images;if(e)for(var i in e)if(t===e[i].alias)return e[i]},p=function(t,e,i){return t||e||(t=-96,e=-96),t<0&&(t=-1*i.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*i.height*72/e/this.internal.scaleFactor),0===t&&(t=e*i.width/i.height),0===e&&(e=t*i.height/i.width),[t,e]},g=function(t,e,i,n,r,s){var o=p.call(this,i,n,r),a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=h.call(this);if(i=o[0],n=o[1],c[r.index]=r,s){s*=Math.PI/180;var u=Math.cos(s),d=Math.sin(s),f=function(t){return t.toFixed(4)},g=[f(u),f(d),f(-1*d),f(u),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,a(t),l(e+n),"cm"].join(" ")),this.internal.write(g.join(" ")),this.internal.write([a(i),"0","0",a(n),"0","0","cm"].join(" "))):this.internal.write([a(i),"0","0",a(n),a(t),l(e+n),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+r.index+" Do"),this.internal.write("Q")},m=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=t.__addimage__.sHashCode=function(t){var e,i,n=0;if("string"==typeof t)for(i=t.length,e=0;e<i;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;else if(x(t))for(i=t.byteLength/2,e=0;e<i;e++)n=(n<<5)-n+t[e],n|=0;return n},_=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},b=t.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),i=null;if(2===e.length){var n=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);Array.isArray(n)&&(i={mimeType:n[1],charset:n[2],data:e[1]})}return i},w=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return w()&&t instanceof ArrayBuffer};var x=t.__addimage__.isArrayBufferView=function(t){return w()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},S=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,i=new Uint8Array(e),n=0;n<e;n++)i[n]=t.charCodeAt(n);return i},M=t.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",i=x(t)?t:new Uint8Array(t),n=0;n<i.length;n+=8192)e+=String.fromCharCode.apply(null,i.subarray(n,n+8192));return e};t.addImage=function(){var t,i,n,r,s,o,h,l,c;if("number"==typeof arguments[1]?(i=e,n=arguments[1],r=arguments[2],s=arguments[3],o=arguments[4],h=arguments[5],l=arguments[6],c=arguments[7]):(i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5],h=arguments[6],l=arguments[7],c=arguments[8]),"object"===(0,Cc.Z)(t=arguments[0])&&!u(t)&&"imageData"in t){var d=t;t=d.imageData,i=d.format||i||e,n=d.x||n||0,r=d.y||r||0,s=d.w||d.width||s,o=d.h||d.height||o,h=d.alias||h,l=d.compression||l,c=d.rotation||d.angle||c}var f=this.internal.getFilters();if(void 0===l&&-1!==f.indexOf("FlateEncode")&&(l="SLOW"),isNaN(n)||isNaN(r))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var p=C.call(this,t,i,h,l);return g.call(this,n,r,s,o,p,c),this};var C=function(i,r,s,o){var a,h,p;if("string"==typeof i&&n(i)===e){i=unescape(i);var g=A(i,!1);(""!==g||void 0!==(g=t.loadFile(i,!0)))&&(i=g)}if(u(i)&&(i=d(i,r)),r=n(i,r),!c(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(p=s)||0===p.length)&&(s=function(t){return"string"==typeof t||x(t)?v(t):x(t.data)?v(t.data):null}(i)),(a=f.call(this,s))||(w()&&(i instanceof Uint8Array||"RGBA"===r||(h=i,i=S(i))),a=this["process"+r.toUpperCase()](i,l.call(this),s,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:y.NONE}(o),h)),!a)throw new Error("An unknown error occurred whilst processing the image.");return a},A=t.__addimage__.convertBase64ToBinaryString=function(t,e){var i;e="boolean"!=typeof e||e;var n,r="";if("string"==typeof t){n=null!==(i=b(t))?i.data:t;try{r=_u(n)}catch(t){if(e)throw _(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};t.getImageProperties=function(i){var r,s,o="";if(u(i)&&(i=d(i)),"string"==typeof i&&n(i)===e&&(""===(o=A(i,!1))&&(o=t.loadFile(i)||""),i=o),s=n(i),!c(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(!w()||i instanceof Uint8Array||(i=S(i)),!(r=this["process"+s.toUpperCase()](i)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=s,r}}(Hu.API),Od=Hu.API,Rd=function(t){if(void 0!==t&&""!=t)return!0},Hu.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),Od.events.push(["putPage",function(t){for(var e,i,n,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(t.objId),a=t.pageContext.annotations,h=!1,l=0;l<a.length&&!h;l++)switch((e=a[l]).type){case"link":(Rd(e.options.url)||Rd(e.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(0!=h){this.internal.write("/Annots [");for(var c=0;c<a.length;c++){e=a[c];var u=this.internal.pdfEscape,d=this.internal.getEncryptor(t.objId);switch(e.type){case"reference":this.internal.write(" "+e.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(f.objId),m=e.title||"Note";n="<</Type /Annot /Subtype /Text "+(i="/Rect ["+r(e.bounds.x)+" "+s(e.bounds.y+e.bounds.h)+" "+r(e.bounds.x+e.bounds.w)+" "+s(e.bounds.y)+"] ")+"/Contents ("+u(g(e.contents))+")",n+=" /Popup "+p.objId+" 0 R",n+=" /P "+o.objId+" 0 R",n+=" /T ("+u(g(m))+") >>",f.content=n;var y=f.objId+" 0 R";n="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+r(e.bounds.x+30)+" "+s(e.bounds.y+e.bounds.h)+" "+r(e.bounds.x+e.bounds.w+30)+" "+s(e.bounds.y)+"] ")+" /Parent "+y,e.open&&(n+=" /Open true"),n+=" >>",p.content=n,this.internal.write(f.objId,"0 R",p.objId,"0 R");break;case"freetext":i="/Rect ["+r(e.bounds.x)+" "+s(e.bounds.y)+" "+r(e.bounds.x+e.bounds.w)+" "+s(e.bounds.y+e.bounds.h)+"] ";var v=e.color||"#000000";n="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+u(d(e.contents))+")",n+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",n+=" /Border [0 0 0]",n+=" >>",this.internal.write(n);break;case"link":if(e.options.name){var _=this.annotations._nameMap[e.options.name];e.options.pageNumber=_.page,e.options.top=_.y}else e.options.top||(e.options.top=0);if(i="/Rect ["+e.finalBounds.x+" "+e.finalBounds.y+" "+e.finalBounds.w+" "+e.finalBounds.h+"] ",n="",e.options.url)n="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+u(d(e.options.url))+") >>";else if(e.options.pageNumber)switch(n="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(e.options.pageNumber).objId+" 0 R",e.options.magFactor=e.options.magFactor||"XYZ",e.options.magFactor){case"Fit":n+=" /Fit]";break;case"FitH":n+=" /FitH "+e.options.top+"]";break;case"FitV":e.options.left=e.options.left||0,n+=" /FitV "+e.options.left+"]";break;default:var b=s(e.options.top);e.options.left=e.options.left||0,void 0===e.options.zoom&&(e.options.zoom=0),n+=" /XYZ "+e.options.left+" "+b+" "+e.options.zoom+"]"}""!=n&&(n+=" >>",this.internal.write(n))}}this.internal.write("]")}}]),Od.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},Od.link=function(t,e,i,n,r){var s=this.internal.getCurrentPageInfo(),o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:o(t),y:a(e),w:o(t+i),h:a(e+n)},options:r,type:"link"})},Od.textWithLink=function(t,e,i,n){var r,s,o=this.getTextWidth(t),a=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==n.maxWidth){s=n.maxWidth;var h=this.splitTextToSize(t,s).length;r=Math.ceil(a*h)}else s=o,r=a;return this.text(t,e,i,n),i+=.2*a,"center"===n.align&&(e-=o/2),"right"===n.align&&(e-=o),this.link(e,i-a,s,r,n),o},Od.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},o=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},a=t.__arabicParser__.isArabicEndLetter=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length<=2},h=t.__arabicParser__.isArabicAlfLetter=function(t){return o(t)&&r.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=1};var l=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return o(t)&&s(t)&&4==e[t.charCodeAt(0)].length},u=t.__arabicParser__.resolveLigatures=function(t){var e=0,n=i,r="",s=0;for(e=0;e<t.length;e+=1)void 0!==n[t.charCodeAt(e)]?(s++,"number"==typeof(n=n[t.charCodeAt(e)])&&(r+=String.fromCharCode(n),n=i,s=0),e===t.length-1&&(n=i,r+=t.charAt(e-(s-1)),e-=s-1,s=0)):(n=i,r+=t.charAt(e-s),e-=s,s=0);return r};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==n[t.charCodeAt(0)]};var d=t.__arabicParser__.getCorrectForm=function(t,e,i){return o(t)?!1===s(t)?-1:!l(t)||!o(e)&&!o(i)||!o(i)&&a(e)||a(t)&&!o(e)||a(t)&&h(e)||a(t)&&a(e)?0:c(t)&&o(e)&&!a(e)&&o(i)&&l(i)?3:a(t)||!o(i)?1:2:-1},f=function(t){var i=0,n=0,r=0,s="",a="",h="",l=(t=t||"").split("\\s+"),c=[];for(i=0;i<l.length;i+=1){for(c.push(""),n=0;n<l[i].length;n+=1)s=l[i][n],a=l[i][n-1],h=l[i][n+1],o(s)?(r=d(s,a,h),c[i]+=-1!==r?String.fromCharCode(e[s.charCodeAt(0)][r]):s):c[i]+=s;c[i]=u(c[i])}return c.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,i=[];if(Array.isArray(e)){var n=0;for(i=[],n=0;n<e.length;n+=1)Array.isArray(e[n])?i.push([f(e[n][0]),e[n][1],e[n][2]]):i.push([f(e[n])]);t=i}else t=f(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",p])}(Hu.API),Hu.API.autoPrint=function(t){var e;return"javascript"===((t=t||{}).variant=t.variant||"non-conform",t.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))),this},function(t){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(t){i=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var n=[];Object.defineProperty(this,"childNodes",{get:function(){return n},set:function(t){n=t}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){var i;if("2d"!==(t=t||"2d"))return null;for(i in e)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=e[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Hu.API),function(t){var e={left:0,top:0,bottom:0,right:0},i=!1,n=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var i=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var n=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var r=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(t){s=t}});var o=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return o},set:function(t){o=t}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return n.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,e){n.call(this);var i=(e=e||{}).fontSize||this.getFontSize(),r=e.font||this.getFont(),s=e.scaleFactor||this.internal.scaleFactor,o=0,a=0,h=0,l=this;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var c=e.maxWidth;c>0?"string"==typeof t?t=this.splitTextToSize(t,c):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(l.splitTextToSize(e,c))}),[])):t=Array.isArray(t)?t:[t];for(var u=0;u<t.length;u++)o<(h=this.getStringUnitWidth(t[u],{font:r})*i)&&(o=h);return 0!==o&&(a=t.length),{w:o/=s,h:Math.max((a*i*this.getLineHeightFactor()-i*(this.getLineHeightFactor()-1))/s,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var t=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var t;t=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var r=this.internal.__cell__.lastCell,o=this.internal.__cell__.padding,a=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,l=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===t.lineNumber?(t.x=(r.x||0)+(r.width||0),t.y=r.y||0):r.y+r.height+t.height+a.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=a.top,l&&h&&(this.printHeaderRow(t.lineNumber,!0),t.y+=h[0].height)):t.y=r.y+r.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===i?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-o,t.y+o,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+o,{align:"center",baseline:"top",maxWidth:t.width-o-o}):this.text(t.text,t.x+o,t.y+o,{align:"left",baseline:"top",maxWidth:t.width-o-o})),this.internal.__cell__.lastCell=t,this};t.table=function(t,i,h,l,c){if(n.call(this),!h)throw new Error("No data for PDF table.");var u,d,f,p,g=[],m=[],y=[],v={},_={},b=[],w=[],x=(c=c||{}).autoSize||!1,S=!1!==c.printHeaders,M=c.css&&void 0!==c.css["font-size"]?16*c.css["font-size"]:c.fontSize||12,C=c.margins||Object.assign({width:this.getPageWidth()},e),A="number"==typeof c.padding?c.padding:3,L=c.headerBackgroundColor||"#c8c8c8",N=c.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=N,this.setFontSize(M),null==l)m=g=Object.keys(h[0]),y=g.map((function(){return"left"}));else if(Array.isArray(l)&&"object"===(0,Cc.Z)(l[0]))for(g=l.map((function(t){return t.name})),m=l.map((function(t){return t.prompt||t.name||""})),y=l.map((function(t){return t.align||"left"})),u=0;u<l.length;u+=1)_[l[u].name]=l[u].width*(19.049976/25.4);else Array.isArray(l)&&"string"==typeof l[0]&&(m=g=l,y=g.map((function(){return"left"})));if(x||Array.isArray(l)&&"string"==typeof l[0])for(u=0;u<g.length;u+=1){for(v[p=g[u]]=h.map((function(t){return t[p]})),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(m[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),d=v[p],this.setFont(void 0,"normal"),f=0;f<d.length;f+=1)b.push(this.getTextDimensions(d[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_[p]=Math.max.apply(null,b)+A+A,b=[]}if(S){var E={};for(u=0;u<g.length;u+=1)E[g[u]]={},E[g[u]].text=m[u],E[g[u]].align=y[u];var P=a.call(this,E,_);w=g.map((function(e){return new s(t,i,_[e],P,E[e].text,void 0,E[e].align)})),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var I=l.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(u=0;u<h.length;u+=1){"rowStart"in c&&c.rowStart instanceof Function&&c.rowStart({row:u,data:h[u]},this);var O=a.call(this,h[u],_);for(f=0;f<g.length;f+=1){var R=h[u][g[f]];"cellStart"in c&&c.cellStart instanceof Function&&c.cellStart({row:u,col:f,data:R},this),o.call(this,new s(t,i,_[g[f]],O,R,u+2,I[g[f]]))}}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=i,this};var a=function(t,e){var i=this.internal.__cell__.padding,n=this.internal.__cell__.table_font_size,r=this.internal.scaleFactor;return Object.keys(t).map((function(n){var r=t[n];return this.splitTextToSize(r.hasOwnProperty("text")?r.text:r,e[n]-i-i)}),this).map((function(t){return this.getLineHeightFactor()*t.length*n/r+i+i}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){n.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(i=!0,"function"==typeof this.internal.__cell__.headerFunction){var a=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(a[0],a[1],a[2],a[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],l=0;l<this.internal.__cell__.tableHeaderRow.length;l+=1){r=this.internal.__cell__.tableHeaderRow[l].clone(),e&&(r.y=this.internal.__cell__.margins.top||0,h.push(r)),r.lineNumber=t;var c=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,r),this.setTextColor(c)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),i=!1}}(Hu.API);var kd={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jd=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Dd=Td(jd),Bd=[100,200,300,400,500,600,700,800,900],qd=Td(Bd);function Gd(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),i=function(t){return kd[t=t||"normal"]?t:"normal"}(t.style),n=function(t){return t?"number"==typeof t?t>=100&&t<=900&&t%100==0?t:400:/^\d00$/.test(t)?parseInt(t):"bold"===t?700:400:400}(t.weight),r=function(t){return"number"==typeof Dd[t=t||"normal"]?t:"normal"}(t.stretch);return{family:e,style:i,weight:n,stretch:r,src:t.src||[],ref:t.ref||{name:e,style:[r,i,n].join(" ")}}}function zd(t,e,i,n){var r;for(r=i;r>=0&&r<e.length;r+=n)if(t[e[r]])return t[e[r]];for(r=i;r>=0&&r<e.length;r-=n)if(t[e[r]])return t[e[r]]}var Ud={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Wd={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Yd(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Hd(t){return t.trimLeft()}function Vd(t,e){for(var i=0;i<t.length;){if(t.charAt(i)===e)return[t.substring(0,i),t.substring(i+1)];i+=1}return null}function Xd(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],t.substring(e[0].length)]}var Zd,Kd,Jd,Qd=["times"];!function(t){var e,i,n,r,s,o,a,h,l,c=function(t){return t=t||{},this.isStrokeTransparent=t.isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new h,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new o,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new o,this.lineDashOffset=t.lineDashOffset||0,this.lineDash=t.lineDash||[],this.margin=t.margin||[0,0,0,0],this.prevPageLastElemOffset=t.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new u(this),e=this.internal.f2,i=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,h=this.internal.Matrix,l=new c}]);var u=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var e=t;Object.defineProperty(this,"pdf",{get:function(){return e}});var i=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return i},set:function(t){i=Boolean(t)}});var n=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(t){isNaN(t)||(r=t)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(t){isNaN(t)||(s=t)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(t){var e;"number"==typeof t?e=[t,t,t,t]:((e=new Array(4))[0]=t[0],e[1]=t.length>=2?t[1]:e[0],e[2]=t.length>=3?t[2]:e[0],e[3]=t.length>=4?t[3]:e[1]),l.margin=e}});var o=!1;Object.defineProperty(this,"autoPaging",{get:function(){return o},set:function(t){o=t}});var a=0;Object.defineProperty(this,"lastBreak",{get:function(){return a},set:function(t){a=t}});var h=[];Object.defineProperty(this,"pageBreaks",{get:function(){return h},set:function(t){h=t}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(t){t instanceof c&&(l=t)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(t){l.path=t}});var u=[];Object.defineProperty(this,"ctxStack",{get:function(){return u},set:function(t){u=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=d(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=d(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}});var f=null;function p(t,e){if(null===f){var i=function(t){var e=[];return Object.keys(t).forEach((function(i){t[i].forEach((function(t){var n=null;switch(t){case"bold":n={family:i,weight:"bold"};break;case"italic":n={family:i,style:"italic"};break;case"bolditalic":n={family:i,weight:"bold",style:"italic"};break;case"":case"normal":n={family:i}}null!==n&&(n.ref={name:i,style:t},e.push(n))}))})),e}(t.getFontList());f=function(t){for(var e={},i=0;i<t.length;++i){var n=Gd(t[i]),r=n.family,s=n.stretch,o=n.style,a=n.weight;e[r]=e[r]||{},e[r][s]=e[r][s]||{},e[r][s][o]=e[r][s][o]||{},e[r][s][o][a]=n}return e}(i.concat(e))}return f}var g=null;Object.defineProperty(this,"fontFaces",{get:function(){return g},set:function(t){f=null,g=t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var i=e[1],n=(e[2],e[3]),r=e[4],s=(e[5],e[6]),o=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(r)[2];r="px"===o?Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor):"em"===o?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(r);var a=function(t){var e,i,n=[],r=t.trim();if(""===r)return Qd;if(r in Wd)return[Wd[r]];for(;""!==r;){switch(i=null,e=(r=Hd(r)).charAt(0)){case'"':case"'":i=Vd(r.substring(1),e);break;default:i=Xd(r)}if(null===i)return Qd;if(n.push(i[0]),""!==(r=Hd(i[1]))&&","!==r.charAt(0))return Qd;r=r.replace(/^,/,"")}return n}(s);if(this.fontFaces){var h=function(t,e,i){for(var n=(i=i||{}).defaultFontFamily||"times",r=Object.assign({},Ud,i.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(r[(s=Gd(e[a])).family]&&(s.family=r[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[n]))throw new Error("Could not find a font-family for the rule '"+Yd(s)+"' and default family '"+n+"'.");if(o=function(t,e){if(e[t])return e[t];var i=Dd[t],n=i<=Dd.normal?-1:1,r=zd(e,jd,i,n);if(!r)throw new Error("Could not find a matching font-stretch value for "+t);return r}(s.stretch,o),o=function(t,e){if(e[t])return e[t];for(var i=kd[t],n=0;n<i.length;++n)if(e[i[n]])return e[i[n]];throw new Error("Could not find a matching font-style for "+t)}(s.style,o),!(o=function(t,e){if(e[t])return e[t];if(400===t&&e[500])return e[500];if(500===t&&e[400])return e[400];var i=qd[t],n=zd(e,Bd,i,t<400?-1:1);if(!n)throw new Error("Could not find a matching font-weight for value "+t);return n}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Yd(s)+"'.");return o}(p(this.pdf,this.fontFaces),a.map((function(t){return{family:t,stretch:"normal",weight:n,style:i}})));this.pdf.setFont(h.ref.name,h.ref.style)}else{var l="";("bold"===n||parseInt(n,10)>=700||"bold"===i)&&(l="bold"),"italic"===i&&(l+="italic"),0===l.length&&(l="normal");for(var c="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},d=0;d<a.length;d++){if(void 0!==this.pdf.internal.getFont(a[d],l,{noFallback:!0,disableWarning:!0})){c=a[d];break}if("bolditalic"===l&&void 0!==this.pdf.internal.getFont(a[d],"bold",{noFallback:!0,disableWarning:!0}))c=a[d],l="bold";else if(void 0!==this.pdf.internal.getFont(a[d],"normal",{noFallback:!0,disableWarning:!0})){c=a[d],l="normal";break}}if(""===c)for(var f=0;f<a.length;f++)if(u[a[f]]){c=u[a[f]];break}c=""===c?"Times":c,this.pdf.setFont(c,l)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(t){this.ctx.lineDashOffset=t,j.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(t){this.ctx.lineDash=t,j.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};u.prototype.setLineDash=function(t){this.lineDash=t},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){b.call(this,"fill",!1)},u.prototype.stroke=function(){b.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw gu.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var i=this.ctx.transform.applyToPoint(new o(t,e));this.path.push({type:"mt",x:i.x,y:i.y}),this.ctx.lastPoint=new o(t,e)},u.prototype.closePath=function(){var t=new o(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===(0,Cc.Z)(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new o(this.path[e+1].x,this.path[e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(t.x,t.y)},u.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw gu.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var i=this.ctx.transform.applyToPoint(new o(t,e));this.path.push({type:"lt",x:i.x,y:i.y}),this.ctx.lastPoint=new o(i.x,i.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},u.prototype.quadraticCurveTo=function(t,e,i,n){if(isNaN(i)||isNaN(n)||isNaN(t)||isNaN(e))throw gu.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new o(i,n)),s=this.ctx.transform.applyToPoint(new o(t,e));this.path.push({type:"qct",x1:s.x,y1:s.y,x:r.x,y:r.y}),this.ctx.lastPoint=new o(r.x,r.y)},u.prototype.bezierCurveTo=function(t,e,i,n,r,s){if(isNaN(r)||isNaN(s)||isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n))throw gu.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var a=this.ctx.transform.applyToPoint(new o(r,s)),h=this.ctx.transform.applyToPoint(new o(t,e)),l=this.ctx.transform.applyToPoint(new o(i,n));this.path.push({type:"bct",x1:h.x,y1:h.y,x2:l.x,y2:l.y,x:a.x,y:a.y}),this.ctx.lastPoint=new o(a.x,a.y)},u.prototype.arc=function(t,e,i,n,r,s){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n)||isNaN(r))throw gu.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var a=this.ctx.transform.applyToPoint(new o(t,e));t=a.x,e=a.y;var h=this.ctx.transform.applyToPoint(new o(0,i)),l=this.ctx.transform.applyToPoint(new o(0,0));i=Math.sqrt(Math.pow(h.x-l.x,2)+Math.pow(h.y-l.y,2))}Math.abs(r-n)>=2*Math.PI&&(n=0,r=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:i,startAngle:n,endAngle:r,counterclockwise:s})},u.prototype.arcTo=function(t,e,i,n,r){throw new Error("arcTo not implemented.")},u.prototype.rect=function(t,e,i,n){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n))throw gu.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.lineTo(t,e),this.lineTo(t+i,e),this.lineTo(t,e)},u.prototype.fillRect=function(t,e,i,n){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n))throw gu.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,i,n),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},u.prototype.strokeRect=function(t,e,i,n){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n))throw gu.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(t,e,i,n),this.stroke())},u.prototype.clearRect=function(t,e,i,n){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n))throw gu.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,i,n))},u.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var n=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=n}},u.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(t){var e,i,n,r;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,i=0,n=0,r=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==s)e=parseInt(s[1]),i=parseInt(s[2]),n=parseInt(s[3]),r=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(s[1]),i=parseInt(s[2]),n=parseInt(s[3]),r=parseFloat(s[4]);else{if(r=1,"string"==typeof t&&"#"!==t.charAt(0)){var o=new xu(t);t=o.ok?o.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,i=t.substring(2,3),i+=i,n=t.substring(3,4),n+=n):(e=t.substring(1,3),i=t.substring(3,5),n=t.substring(5,7)),e=parseInt(e,16),i=parseInt(i,16),n=parseInt(n,16)}}return{r:e,g:i,b:n,a:r,style:t}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(t,e,i,n){if(isNaN(e)||isNaN(i)||"string"!=typeof t)throw gu.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(n=isNaN(n)?void 0:n,!f.call(this)){var r=F(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;N.call(this,{text:t,x:e,y:i,scale:s,angle:r,align:this.textAlign,maxWidth:n})}},u.prototype.strokeText=function(t,e,i,n){if(isNaN(e)||isNaN(i)||"string"!=typeof t)throw gu.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){n=isNaN(n)?void 0:n;var r=F(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;N.call(this,{text:t,x:e,y:i,scale:s,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:n})}},u.prototype.measureText=function(t){if("string"!=typeof t)throw gu.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,i=this.pdf.internal.scaleFactor,n=e.internal.getFontSize(),r=e.getStringUnitWidth(t)*n/e.internal.scaleFactor,s=function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this};return new s({width:r*=Math.round(96*i/72*1e4)/1e4})},u.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw gu.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var i=new h(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(i)},u.prototype.rotate=function(t){if(isNaN(t))throw gu.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new h(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},u.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw gu.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var i=new h(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(i)},u.prototype.transform=function(t,e,i,n,r,s){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(n)||isNaN(r)||isNaN(s))throw gu.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var o=new h(t,e,i,n,r,s);this.ctx.transform=this.ctx.transform.multiply(o)},u.prototype.setTransform=function(t,e,i,n,r,s){t=isNaN(t)?1:t,e=isNaN(e)?0:e,i=isNaN(i)?0:i,n=isNaN(n)?1:n,r=isNaN(r)?0:r,s=isNaN(s)?0:s,this.ctx.transform=new h(t,e,i,n,r,s)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(t,e,i,n,r,s,o,l,c){var u=this.pdf.getImageProperties(t),d=1,f=1,p=1,y=1;void 0!==n&&void 0!==l&&(p=l/n,y=c/r,d=u.width/n*l/n,f=u.height/r*c/r),void 0===s&&(s=e,o=i,e=0,i=0),void 0!==n&&void 0===l&&(l=n,c=r),void 0===n&&void 0===l&&(l=u.width,c=u.height);for(var b,x=this.ctx.transform.decompose(),S=F(x.rotate.shx),M=new h,C=(M=(M=(M=M.multiply(x.translate)).multiply(x.skew)).multiply(x.scale)).applyToRectangle(new a(s-e*p,o-i*y,n*d,r*f)),A=m.call(this,C),L=[],N=0;N<A.length;N+=1)-1===L.indexOf(A[N])&&L.push(A[N]);if(_(L),this.autoPaging)for(var E=L[0],P=L[L.length-1],I=E;I<P+1;I++){this.pdf.setPage(I);var O=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],R=1===I?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],k=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],j=1===I?0:T+(I-2)*k;if(0!==this.ctx.clip_path.length){var D=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(b,this.posX+this.margin[3],-j+R+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=D}var B=JSON.parse(JSON.stringify(C));B=v([B],this.posX+this.margin[3],-j+R+this.ctx.prevPageLastElemOffset)[0];var q=(I>E||I<P)&&g.call(this);q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],O,k,null).clip().discardPath()),this.pdf.addImage(t,"JPEG",B.x,B.y,B.w,B.h,null,null,S),q&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(t,"JPEG",C.x,C.y,C.w,C.h,null,null,S)};var m=function(t,e,i){var n=[];e=e||this.pdf.internal.pageSize.width,i=i||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var r=this.posY+this.ctx.prevPageLastElemOffset;switch(t.type){default:case"mt":case"lt":n.push(Math.floor((t.y+r)/i)+1);break;case"arc":n.push(Math.floor((t.y+r-t.radius)/i)+1),n.push(Math.floor((t.y+r+t.radius)/i)+1);break;case"qct":var s=T(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);n.push(Math.floor((s.y+r)/i)+1),n.push(Math.floor((s.y+s.h+r)/i)+1);break;case"bct":var o=k(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);n.push(Math.floor((o.y+r)/i)+1),n.push(Math.floor((o.y+o.h+r)/i)+1);break;case"rect":n.push(Math.floor((t.y+r)/i)+1),n.push(Math.floor((t.y+t.h+r)/i)+1)}for(var a=0;a<n.length;a+=1)for(;this.pdf.internal.getNumberOfPages()<n[a];)y.call(this);return n},y=function(){var t=this.fillStyle,e=this.strokeStyle,i=this.font,n=this.lineCap,r=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=i,this.lineCap=n,this.lineWidth=r,this.lineJoin=s},v=function(t,e,i){for(var n=0;n<t.length;n++)switch(t[n].type){case"bct":t[n].x2+=e,t[n].y2+=i;case"qct":t[n].x1+=e,t[n].y1+=i;default:t[n].x+=e,t[n].y+=i}return t},_=function(t){return t.sort((function(t,e){return t-e}))},b=function(t,e){for(var i,n,r=this.fillStyle,s=this.strokeStyle,o=this.lineCap,a=this.lineWidth,h=Math.abs(a*this.ctx.transform.scaleX),l=this.lineJoin,c=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),d=[],f=0;f<u.length;f++)if(void 0!==u[f].x)for(var p=m.call(this,u[f]),b=0;b<p.length;b+=1)-1===d.indexOf(p[b])&&d.push(p[b]);for(var x=0;x<d.length;x++)for(;this.pdf.internal.getNumberOfPages()<d[x];)y.call(this);if(_(d),this.autoPaging)for(var S=d[0],M=d[d.length-1],C=S;C<M+1;C++){this.pdf.setPage(C),this.fillStyle=r,this.strokeStyle=s,this.lineCap=o,this.lineWidth=h,this.lineJoin=l;var A=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],L=1===C?this.posY+this.margin[0]:this.margin[0],N=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],E=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],P=1===C?0:N+(C-2)*E;if(0!==this.ctx.clip_path.length){var I=this.path;i=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(i,this.posX+this.margin[3],-P+L+this.ctx.prevPageLastElemOffset),w.call(this,t,!0),this.path=I}if(n=JSON.parse(JSON.stringify(c)),this.path=v(n,this.posX+this.margin[3],-P+L+this.ctx.prevPageLastElemOffset),!1===e||0===C){var O=(C>S||C<M)&&g.call(this);O&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],A,E,null).clip().discardPath()),w.call(this,t,e),O&&this.pdf.restoreGraphicsState()}this.lineWidth=a}else this.lineWidth=h,w.call(this,t,e),this.lineWidth=a;this.path=c},w=function(t,e){if(("stroke"!==t||e||!p.call(this))&&("stroke"===t||e||!f.call(this))){for(var i,n,r=[],s=this.path,o=0;o<s.length;o++){var a=s[o];switch(a.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:a,deltas:[],abs:[]});break;case"lt":var h=r.length;if(s[o-1]&&!isNaN(s[o-1].x)&&(i=[a.x-s[o-1].x,a.y-s[o-1].y],h>0))for(;h>=0;h--)if(!0!==r[h-1].close&&!0!==r[h-1].begin){r[h-1].deltas.push(i),r[h-1].abs.push(a);break}break;case"bct":i=[a.x1-s[o-1].x,a.y1-s[o-1].y,a.x2-s[o-1].x,a.y2-s[o-1].y,a.x-s[o-1].x,a.y-s[o-1].y],r[r.length-1].deltas.push(i);break;case"qct":var l=s[o-1].x+2/3*(a.x1-s[o-1].x),c=s[o-1].y+2/3*(a.y1-s[o-1].y),u=a.x+2/3*(a.x1-a.x),d=a.y+2/3*(a.y1-a.y),g=a.x,m=a.y;i=[l-s[o-1].x,c-s[o-1].y,u-s[o-1].x,d-s[o-1].y,g-s[o-1].x,m-s[o-1].y],r[r.length-1].deltas.push(i);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(a)}}n=e?null:"stroke"===t?"stroke":"fill";for(var y=!1,v=0;v<r.length;v++)if(r[v].arc)for(var _=r[v].abs,b=0;b<_.length;b++){var w=_[b];"arc"===w.type?M.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,e,!y):E.call(this,w.x,w.y),y=!0}else if(!0===r[v].close)this.pdf.internal.out("h"),y=!1;else if(!0!==r[v].begin){var x=r[v].start.x,S=r[v].start.y;P.call(this,r[v].deltas,x,S),y=!0}n&&C.call(this,n),e&&A.call(this)}},x=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,i=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-i;case"top":return t+e-i;case"hanging":return t+e-2*i;case"middle":return t+e/2-i;default:return t}},S=function(t){return t+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(t,e,i,n,r,s,o,a,h){for(var l=O.call(this,i,n,r,s),c=0;c<l.length;c++){var u=l[c];0===c&&(h?L.call(this,u.x1+t,u.y1+e):E.call(this,u.x1+t,u.y1+e)),I.call(this,t,e,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}a?A.call(this):C.call(this,o)},C=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},A=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(t,e){this.pdf.internal.out(i(t)+" "+n(e)+" m")},N=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;default:e="left"}var i=this.pdf.getTextDimensions(t.text),n=x.call(this,t.y),r=S.call(this,n)-i.h,s=this.ctx.transform.applyToPoint(new o(t.x,n)),l=this.ctx.transform.decompose(),c=new h;c=(c=(c=c.multiply(l.translate)).multiply(l.skew)).multiply(l.scale);for(var u,d,f,p=this.ctx.transform.applyToRectangle(new a(t.x,n,i.w,i.h)),y=c.applyToRectangle(new a(t.x,r,i.w,i.h)),b=m.call(this,y),M=[],C=0;C<b.length;C+=1)-1===M.indexOf(b[C])&&M.push(b[C]);if(_(M),this.autoPaging)for(var A=M[0],L=M[M.length-1],N=A;N<L+1;N++){this.pdf.setPage(N);var E=1===N?this.posY+this.margin[0]:this.margin[0],P=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],I=this.pdf.internal.pageSize.height-this.margin[2],O=I-this.margin[0],R=this.pdf.internal.pageSize.width-this.margin[1],F=R-this.margin[3],T=1===N?0:P+(N-2)*O;if(0!==this.ctx.clip_path.length){var k=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(u,this.posX+this.margin[3],-1*T+E),w.call(this,"fill",!0),this.path=k}var j=v([JSON.parse(JSON.stringify(y))],this.posX+this.margin[3],-T+E+this.ctx.prevPageLastElemOffset)[0];t.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*t.scale),f=this.lineWidth,this.lineWidth=f*t.scale);var D="text"!==this.autoPaging;if(D||j.y+j.h<=I){if(D||j.y>=E&&j.x<=R){var B=D?t.text:this.pdf.splitTextToSize(t.text,t.maxWidth||R-j.x)[0],q=v([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-T+E+this.ctx.prevPageLastElemOffset)[0],G=D&&(N>A||N<L)&&g.call(this);G&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],F,O,null).clip().discardPath()),this.pdf.text(B,q.x,q.y,{angle:t.angle,align:e,renderingMode:t.renderingMode}),G&&this.pdf.restoreGraphicsState()}}else j.y<I&&(this.ctx.prevPageLastElemOffset+=I-j.y);t.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=f)}else t.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*t.scale),f=this.lineWidth,this.lineWidth=f*t.scale),this.pdf.text(t.text,s.x+this.posX,s.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=f)},E=function(t,e,r,s){r=r||0,s=s||0,this.pdf.internal.out(i(t+r)+" "+n(e+s)+" l")},P=function(t,e,i){return this.pdf.lines(t,e,i,null,null)},I=function(t,i,n,o,a,h,l,c){this.pdf.internal.out([e(r(n+t)),e(s(o+i)),e(r(a+t)),e(s(h+i)),e(r(l+t)),e(s(c+i)),"c"].join(" "))},O=function(t,e,i,n){for(var r=2*Math.PI,s=Math.PI/2;e>i;)e-=r;var o=Math.abs(i-e);o<r&&n&&(o=r-o);for(var a=[],h=n?-1:1,l=e;o>1e-5;){var c=l+h*Math.min(o,s);a.push(R.call(this,t,l,c)),o-=Math.abs(c-l),l=c}return a},R=function(t,e,i){var n=(i-e)/2,r=t*Math.cos(n),s=t*Math.sin(n),o=r,a=-s,h=o*o+a*a,l=h+o*r+a*s,c=4/3*(Math.sqrt(2*h*l)-l)/(o*s-a*r),u=o-c*a,d=a+c*o,f=u,p=-d,g=n+e,m=Math.cos(g),y=Math.sin(g);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:u*m-d*y,y2:u*y+d*m,x3:f*m-p*y,y3:f*y+p*m,x4:t*Math.cos(i),y4:t*Math.sin(i)}},F=function(t){return 180*t/Math.PI},T=function(t,e,i,n,r,s){var o=t+.5*(i-t),h=e+.5*(n-e),l=r+.5*(i-r),c=s+.5*(n-s),u=Math.min(t,r,o,l),d=Math.max(t,r,o,l),f=Math.min(e,s,h,c),p=Math.max(e,s,h,c);return new a(u,f,d-u,p-f)},k=function(t,e,i,n,r,s,o,h){var l,c,u,d,f,p,g,m,y,v,_,b,w,x,S=i-t,M=n-e,C=r-i,A=s-n,L=o-r,N=h-s;for(c=0;c<41;c++)y=(g=(u=t+(l=c/40)*S)+l*((f=i+l*C)-u))+l*(f+l*(r+l*L-f)-g),v=(m=(d=e+l*M)+l*((p=n+l*A)-d))+l*(p+l*(s+l*N-p)-m),0==c?(_=y,b=v,w=y,x=v):(_=Math.min(_,y),b=Math.min(b,v),w=Math.max(w,y),x=Math.max(x,v));return new a(Math.round(_),Math.round(b),Math.round(w-_),Math.round(x-b))},j=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var t,e,i=(t=this.ctx.lineDash,e=this.ctx.lineDashOffset,JSON.stringify({lineDash:t,lineDashOffset:e}));this.prevLineDash!==i&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=i)}}}(Hu.API),function(t){var e=function(t){var e,i,n,r,s,o,a,h,l,c;for(/[^\x00-\xFF]/.test(t),i=[],n=0,r=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;r>n;n+=4)0!==(s=(t.charCodeAt(n)<<24)+(t.charCodeAt(n+1)<<16)+(t.charCodeAt(n+2)<<8)+t.charCodeAt(n+3))?(o=(s=((s=((s=((s=(s-(c=s%85))/85)-(l=s%85))/85)-(h=s%85))/85)-(a=s%85))/85)%85,i.push(o+33,a+33,h+33,l+33,c+33)):i.push(122);return function(t,e){for(var i=e;i>0;i--)t.pop()}(i,e.length),String.fromCharCode.apply(String,i)+"~>"},i=function(t){var e,i,n,r,s,o=String,a="length",h=255,l="charCodeAt",c="slice",u="replace";for(t[c](-2),t=t[c](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),n=[],r=0,s=(t+=e="uuuuu"[c](t[a]%5||5))[a];s>r;r+=5)i=52200625*(t[l](r)-33)+614125*(t[l](r+1)-33)+7225*(t[l](r+2)-33)+85*(t[l](r+3)-33)+(t[l](r+4)-33),n.push(h&i>>24,h&i>>16,h&i>>8,h&i);return function(t,e){for(var i=e;i>0;i--)t.pop()}(n,e[a]),o.fromCharCode.apply(o,n)},n=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var i="",n=0;n<t.length;n+=2)i+=String.fromCharCode("0x"+(t[n]+t[n+1]));return i},r=function(t){for(var e=new Uint8Array(t.length),i=t.length;i--;)e[i]=t.charCodeAt(i);return(e=uu(e)).reduce((function(t,e){return t+String.fromCharCode(e)}),"")};t.processDataByFilters=function(t,s){var o=0,a=t||"",h=[];for("string"==typeof(s=s||[])&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":a=i(a),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":a=e(a),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":a=n(a),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":a=a.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":a=r(a),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:a,reverseChain:h.reverse().join(" ")}}}(Hu.API),function(t){t.loadFile=function(t,e,i){return function(t,e,i){e=!1!==e,i="function"==typeof i?i:function(){};var n=void 0;try{n=function(t,e,i){var n=new XMLHttpRequest,r=0,s=function(t){var e=t.length,i=[],n=String.fromCharCode;for(r=0;r<e;r+=1)i.push(n(255&t.charCodeAt(r)));return i.join("")};if(n.open("GET",t,!e),n.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(n.onload=function(){200===n.status?i(s(this.responseText)):i(void 0)}),n.send(null),e&&200===n.status)return s(n.responseText)}(t,e,i)}catch(t){}return n}(t,e,i)},t.loadImageFile=t.loadFile}(Hu.API),function(t){function e(){return(fu.html2canvas?Promise.resolve(fu.html2canvas):o.e(120).then(o.t.bind(o,1120,23))).catch((function(t){return Promise.reject(new Error("Could not load html2canvas: "+t))})).then((function(t){return t.default?t.default:t}))}function i(){return(fu.DOMPurify?Promise.resolve(fu.DOMPurify):o.e(856).then(o.t.bind(o,7856,23))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}var n=function(t){var e=(0,Cc.Z)(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},r=function(t,e){var i=document.createElement(t);for(var n in e.className&&(i.className=e.className),e.innerHTML&&e.dompurify&&(i.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)i.style[n]=e.style[n];return i},s=function t(e){var i=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),n=t.convert(Promise.resolve(),i);return(n=n.setProgress(1,t,1,[t])).set(e)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(t,e){return t.__proto__=e||s.prototype,t},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(n(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(i).then((function(e){return this.set({src:r("div",{innerHTML:t,dompurify:e})})}));case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},s.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,i){for(var n=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),r=e.firstChild;r;r=r.nextSibling)!0!==i&&1===r.nodeType&&"SCRIPT"===r.nodeName||n.appendChild(t(r,i));return 1===e.nodeType&&("CANVAS"===e.nodeName?(n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(n.value=e.value),n.addEventListener("load",(function(){n.scrollTop=e.scrollTop,n.scrollLeft=e.scrollLeft}),!0)),n}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},s.prototype.toCanvas=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},s.prototype.toContext2d=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=this.opt.jsPDF,i=this.opt.fontFaces,n="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,r=Object.assign({async:!0,allowTaint:!0,scale:n,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete r.onrendered,e.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,e.context2d.margin=this.opt.margin,e.context2d.fontFaces=i,i)for(var s=0;s<i.length;++s){var o=i[s],a=o.src.find((function(t){return"truetype"===t.format}));a&&e.addFont(a.url,o.ref.name,o.ref.style)}return r.windowHeight=r.windowHeight||0,r.windowHeight=0==r.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):r.windowHeight,e.context2d.save(!0),t(this.prop.container,r)})).then((function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},s.prototype.output=function(t,e,i){return"img"===(i=i||"pdf").toLowerCase()||"image"===i.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},s.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},s.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},s.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},s.prototype.set=function(t){if("object"!==n(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in s.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},s.prototype.get=function(t,e){return this.then((function(){var i=t in s.template.prop?this.prop[t]:this.opt[t];return e?e(i):i}))},s.prototype.setMargin=function(t){return this.then((function(){switch(n(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},s.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||Hu.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},s.prototype.setProgress=function(t,e,i,n){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=i&&(this.progress.n=i),null!=n&&(this.progress.stack=n),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(t,e,i,n){return this.setProgress(t?this.progress.val+t:null,e||null,i?this.progress.n+i:null,n?this.progress.stack.concat(n):null)},s.prototype.then=function(t,e){var i=this;return this.thenCore(t,e,(function(t,e){return i.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return i.updateProgress(null,t),e})).then(t,e).then((function(t){return i.updateProgress(1),t}))}))},s.prototype.thenCore=function(t,e,i){i=i||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var n=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:s.convert(Object.assign({},this),Promise.prototype),r=i.call(n,t,e);return s.convert(r,this.__proto__)},s.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},s.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},s.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return s.convert(e,this)},s.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},s.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Hu.getPageSize=function(t,e,i){if("object"===(0,Cc.Z)(t)){var n=t;t=n.orientation,e=n.unit||e,i=n.format||i}e=e||"mm",i=i||"a4",t=(""+(t||"P")).toLowerCase();var r,s=(""+i).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":r=1;break;case"mm":r=72/25.4;break;case"cm":r=72/2.54;break;case"in":r=72;break;case"px":r=.75;break;case"pc":case"em":r=12;break;case"ex":r=6;break;default:throw"Invalid unit: "+e}var a,h=0,l=0;if(o.hasOwnProperty(s))h=o[s][1]/r,l=o[s][0]/r;else try{h=i[1],l=i[0]}catch(t){throw new Error("Invalid format: "+i)}if("p"===t||"portrait"===t)t="p",l>h&&(a=l,l=h,h=a);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",h>l&&(a=l,l=h,h=a)}return{width:l,height:h,unit:e,k:r,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this,e.fontFaces=e.fontFaces?e.fontFaces.map(Gd):null;var i=new s(e);return e.worker?i:i.from(t).doCallback()}}(Hu.API),Hu.API.addJS=function(t){return Jd=t,this.internal.events.subscribe("postPutResources",(function(){Zd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Zd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Kd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Jd+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Zd&&void 0!==Kd&&this.internal.out("/Names <</JavaScript "+Zd+" 0 R>>")})),this},function(t){var e;t.events.push(["postPutResources",function(){var t=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=t.outline.render().split(/\r\n/),r=0;r<n.length;r++){var s=n[r],o=i.exec(s);if(null!=o){var a=o[1];t.internal.newObjectDeferredBegin(a,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,l=[];for(r=0;r<h;r++){var c=t.internal.newObject();l.push(c);var u=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var d=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<l.length;r++)t.internal.write("(page_"+(r+1)+")"+l[r]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+d+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,i){var n={title:e,options:i,children:[]};return null==t&&(t=this.root),t.children.push(n),n},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var i=0;i<e.children.length;i++)this.genIds_r(e.children[i])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,n=0;n<e.children.length;n++){var r=e.children[n];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(e)),n>0&&this.line("/Prev "+this.makeRef(e.children[n-1])),n<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[n+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var s=this.count=this.count_r({count:0},r);if(s>0&&this.line("/Count "+s),r.options&&r.options.pageNumber){var o=t.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var a=0;a<e.children.length;a++)this.renderItems(e.children[a])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var i=0;i<e.children.length;i++)t.count++,this.count_r(t,e.children[i]);return t.count}}])}(Hu.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(t,i,n,r,s,o){var a,h=this.decode.DCT_DECODE,l=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(a=function(t){for(var i,n=256*t.charCodeAt(4)+t.charCodeAt(5),r=t.length,s={width:0,height:0,numcomponents:1},o=4;o<r;o+=2){if(o+=n,-1!==e.indexOf(t.charCodeAt(o+1))){i=256*t.charCodeAt(o+5)+t.charCodeAt(o+6),s={width:256*t.charCodeAt(o+7)+t.charCodeAt(o+8),height:i,numcomponents:t.charCodeAt(o+9)};break}n=256*t.charCodeAt(o+2)+t.charCodeAt(o+3)}return s}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}l={data:t,width:a.width,height:a.height,colorSpace:o,bitsPerComponent:8,filter:h,index:i,alias:n}}return l}}(Hu.API);var $d,tf,ef,nf,rf,sf=function(){var t,e,i;function n(t){var e,i,n,r,s,o,a,h,l,c,u,d,f,p;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(e=this.readUInt32(),l=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},s=this.readUInt16(),r=this.readUInt16()||100,o.delay=1e3*s/r,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,e-=4),t=(null!=o?o.data:void 0)||this.imgData,d=0;0<=e?d<e:d>e;0<=e?++d:--d)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");if((c=n-this.transparency.indexed.length)>0)for(f=0;0<=c?f<c:f>c;0<=c?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":a=(u=this.read(e)).indexOf(0),h=String.fromCharCode.apply(String,u.slice(0,a)),this.text[h]=String.fromCharCode.apply(String,u.slice(a+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,i=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*i,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)i.push(this.data[this.pos++]);return i},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,i=new Uint8Array(this.width*this.height*e),n=0,r=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function s(s,o,a,h){var l,c,u,d,f,p,g,m,y,v,_,b,w,x,S,M,C,A,L,N,E,P=Math.ceil((r.width-s)/a),I=Math.ceil((r.height-o)/h),O=r.width==P&&r.height==I;for(x=e*P,b=O?i:new Uint8Array(x*I),p=t.length,w=0,c=0;w<I&&n<p;){switch(t[n++]){case 0:for(d=C=0;C<x;d=C+=1)b[c++]=t[n++];break;case 1:for(d=A=0;A<x;d=A+=1)l=t[n++],f=d<e?0:b[c-e],b[c++]=(l+f)%256;break;case 2:for(d=L=0;L<x;d=L+=1)l=t[n++],u=(d-d%e)/e,S=w&&b[(w-1)*x+u*e+d%e],b[c++]=(S+l)%256;break;case 3:for(d=N=0;N<x;d=N+=1)l=t[n++],u=(d-d%e)/e,f=d<e?0:b[c-e],S=w&&b[(w-1)*x+u*e+d%e],b[c++]=(l+Math.floor((f+S)/2))%256;break;case 4:for(d=E=0;E<x;d=E+=1)l=t[n++],u=(d-d%e)/e,f=d<e?0:b[c-e],0===w?S=M=0:(S=b[(w-1)*x+u*e+d%e],M=u&&b[(w-1)*x+(u-1)*e+d%e]),g=f+S-M,m=Math.abs(g-f),v=Math.abs(g-S),_=Math.abs(g-M),y=m<=v&&m<=_?f:v<=_?S:M,b[c++]=(l+y)%256;break;default:throw new Error("Invalid filter algorithm: "+t[n-1])}if(!O){var R=((o+w*h)*r.width+s)*e,F=w*x;for(d=0;d<P;d+=1){for(var T=0;T<e;T+=1)i[R++]=b[F++];R+=(a-1)*e}}w++}}return t=du(t),1==r.interlaceMethod?(s(0,0,8,8),s(4,0,8,8),s(0,4,4,8),s(2,0,4,4),s(0,2,2,4),s(1,0,2,2),s(0,1,1,2)):s(0,0,1,1),i},n.prototype.decodePalette=function(){var t,e,i,n,r,s,o,a,h;for(i=this.palette,s=this.transparency.indexed||[],r=new Uint8Array((s.length||0)+i.length),n=0,t=0,e=o=0,a=i.length;o<a;e=o+=3)r[n++]=i[e],r[n++]=i[e+1],r[n++]=i[e+2],r[n++]=null!=(h=s[t++])?h:255;return r},n.prototype.copyToImageData=function(t,e){var i,n,r,s,o,a,h,l,c,u,d;if(n=this.colors,c=null,i=this.hasAlphaChannel,this.palette.length&&(c=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),n=4,i=!0),l=(r=t.data||t).length,o=c||e,s=a=0,1===n)for(;s<l;)h=c?4*e[s/4]:a,u=o[h++],r[s++]=u,r[s++]=u,r[s++]=u,r[s++]=i?o[h++]:255,a=h;else for(;s<l;)h=c?4*e[s/4]:a,r[s++]=o[h++],r[s++]=o[h++],r[s++]=o[h++],r[s++]=i?o[h++]:255,a=h},n.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var r=function(){if("[object Window]"===Object.prototype.toString.call(fu)){try{e=fu.document.createElement("canvas"),i=e.getContext("2d")}catch(t){return!1}return!0}return!1};return r(),t=function(t){var n;if(!0===r())return i.width=t.width,i.height=t.height,i.clearRect(0,0,t.width,t.height),i.putImageData(t,0,0),(n=new Image).src=e.toDataURL(),n;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(e){var i,n,r,s,o,a,h,l;if(this.animation){for(l=[],n=o=0,a=(h=this.animation.frames).length;o<a;n=++o)i=h[n],r=e.createImageData(i.width,i.height),s=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(r,s),i.imageData=r,l.push(i.image=t(r));return l}},n.prototype.renderFrame=function(t,e){var i,n,r;return i=(n=this.animation.frames)[e],r=n[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=r?r.disposeOp:void 0)?t.clearRect(r.xOffset,r.yOffset,r.width,r.height):2===(null!=r?r.disposeOp:void 0)&&t.putImageData(r.imageData,r.xOffset,r.yOffset),0===i.blendOp&&t.clearRect(i.xOffset,i.yOffset,i.width,i.height),t.drawImage(i.image,i.xOffset,i.yOffset)},n.prototype.animate=function(t){var e,i,n,r,s,o,a=this;return i=0,o=this.animation,r=o.numFrames,n=o.frames,s=o.numPlays,(e=function(){var o,h;if(o=i++%r,h=n[o],a.renderFrame(t,o),r>1&&i/r<s)return a.animation._timeout=setTimeout(e,h.delay)})()},n.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},n.prototype.render=function(t){var e,i;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(i=e.createImageData(this.width,this.height),this.copyToImageData(i,this.decodePixels()),e.putImageData(i,0,0))},n}();function of(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var i=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,r=t[e++],s=r>>7,o=1<<1+(7&r);t[e++],t[e++];var a=null,h=null;s&&(a=e,h=o,e+=3*o);var l=!0,c=[],u=0,d=null,f=0,p=null;for(this.width=i,this.height=n;l&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((L=t[e++])>=0))throw Error("Invalid block size");if(0===L)break;e+=L}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var g=t[e++];u=t[e++]|t[e++]<<8,d=t[e++],0==(1&g)&&(d=null),f=g>>2&7,e++;break;case 254:for(;;){if(!((L=t[e++])>=0))throw Error("Invalid block size");if(0===L)break;e+=L}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var m=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,b=t[e++],w=b>>6&1,x=1<<1+(7&b),S=a,M=h,C=!1;b>>7&&(C=!0,S=e,M=x,e+=3*x);var A=e;for(e++;;){var L;if(!((L=t[e++])>=0))throw Error("Invalid block size");if(0===L)break;e+=L}c.push({x:m,y,width:v,height:_,has_local_palette:C,palette_offset:S,palette_size:M,data_offset:A,data_length:e-A,transparent_index:d,interlaced:!!w,delay:u,disposal:f});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return p},this.frameInfo=function(t){if(t<0||t>=c.length)throw new Error("Frame index out of range.");return c[t]},this.decodeAndBlitFrameBGRA=function(e,n){var r=this.frameInfo(e),s=r.width*r.height,o=new Uint8Array(s);af(t,r.data_offset,o,s);var a=r.palette_offset,h=r.transparent_index;null===h&&(h=256);var l=r.width,c=i-l,u=l,d=4*(r.y*i+r.x),f=4*((r.y+r.height)*i+r.x),p=d,g=4*c;!0===r.interlaced&&(g+=4*i*7);for(var m=8,y=0,v=o.length;y<v;++y){var _=o[y];if(0===u&&(u=l,(p+=g)>=f&&(g=4*c+4*i*(m-1),p=d+(l+c)*(m<<1),m>>=1)),_===h)p+=4;else{var b=t[a+3*_],w=t[a+3*_+1],x=t[a+3*_+2];n[p++]=x,n[p++]=w,n[p++]=b,n[p++]=255}--u}},this.decodeAndBlitFrameRGBA=function(e,n){var r=this.frameInfo(e),s=r.width*r.height,o=new Uint8Array(s);af(t,r.data_offset,o,s);var a=r.palette_offset,h=r.transparent_index;null===h&&(h=256);var l=r.width,c=i-l,u=l,d=4*(r.y*i+r.x),f=4*((r.y+r.height)*i+r.x),p=d,g=4*c;!0===r.interlaced&&(g+=4*i*7);for(var m=8,y=0,v=o.length;y<v;++y){var _=o[y];if(0===u&&(u=l,(p+=g)>=f&&(g=4*c+4*i*(m-1),p=d+(l+c)*(m<<1),m>>=1)),_===h)p+=4;else{var b=t[a+3*_],w=t[a+3*_+1],x=t[a+3*_+2];n[p++]=b,n[p++]=w,n[p++]=x,n[p++]=255}--u}}}function af(t,e,i,n){for(var r=t[e++],s=1<<r,o=s+1,a=o+1,h=r+1,l=(1<<h)-1,c=0,u=0,d=0,f=t[e++],p=new Int32Array(4096),g=null;;){for(;c<16&&0!==f;)u|=t[e++]<<c,c+=8,1===f?f=t[e++]:--f;if(c<h)break;var m=u&l;if(u>>=h,c-=h,m!==s){if(m===o)break;for(var y=m<a?m:g,v=0,_=y;_>s;)_=p[_]>>8,++v;var b=_;if(d+v+(y!==m?1:0)>n)return void gu.log("Warning, gif stream longer than expected.");i[d++]=b;var w=d+=v;for(y!==m&&(i[d++]=b),_=y;v--;)_=p[_],i[--w]=255&_,_>>=8;null!==g&&a<4096&&(p[a++]=g<<8|b,a>=l+1&&h<12&&(++h,l=l<<1|1)),g=m}else a=o+1,l=(1<<(h=r+1))-1,g=null}return d!==n&&gu.log("Warning, gif stream shorter than expected."),i}function hf(t){var e,i,n,r,s,o=Math.floor,a=new Array(64),h=new Array(64),l=new Array(64),c=new Array(64),u=new Array(65535),d=new Array(65535),f=new Array(64),p=new Array(64),g=[],m=0,y=7,v=new Array(64),_=new Array(64),b=new Array(64),w=new Array(256),x=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],I=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(t,e){for(var i=0,n=0,r=new Array,s=1;s<=16;s++){for(var o=1;o<=t[s];o++)r[e[n]]=[],r[e[n]][0]=i,r[e[n]][1]=s,n++,i++;i*=2}return r}function R(t){for(var e=t[0],i=t[1]-1;i>=0;)e&1<<i&&(m|=1<<y),i--,--y<0&&(255==m?(F(255),F(0)):F(m),y=7,m=0)}function F(t){g.push(t)}function T(t){F(t>>8&255),F(255&t)}function k(t,e,i,n,r){for(var s,o=r[0],a=r[240],h=function(t,e){var i,n,r,s,o,a,h,l,c,u,d=0;for(c=0;c<8;++c){i=t[d],n=t[d+1],r=t[d+2],s=t[d+3],o=t[d+4],a=t[d+5],h=t[d+6];var p=i+(l=t[d+7]),g=i-l,m=n+h,y=n-h,v=r+a,_=r-a,b=s+o,w=s-o,x=p+b,S=p-b,M=m+v,C=m-v;t[d]=x+M,t[d+4]=x-M;var A=.707106781*(C+S);t[d+2]=S+A,t[d+6]=S-A;var L=.382683433*((x=w+_)-(C=y+g)),N=.5411961*x+L,E=1.306562965*C+L,P=.707106781*(M=_+y),I=g+P,O=g-P;t[d+5]=O+N,t[d+3]=O-N,t[d+1]=I+E,t[d+7]=I-E,d+=8}for(d=0,c=0;c<8;++c){i=t[d],n=t[d+8],r=t[d+16],s=t[d+24],o=t[d+32],a=t[d+40],h=t[d+48];var R=i+(l=t[d+56]),F=i-l,T=n+h,k=n-h,j=r+a,D=r-a,B=s+o,q=s-o,G=R+B,z=R-B,U=T+j,W=T-j;t[d]=G+U,t[d+32]=G-U;var Y=.707106781*(W+z);t[d+16]=z+Y,t[d+48]=z-Y;var H=.382683433*((G=q+D)-(W=k+F)),V=.5411961*G+H,X=1.306562965*W+H,Z=.707106781*(U=D+k),K=F+Z,J=F-Z;t[d+40]=J+V,t[d+24]=J-V,t[d+8]=K+X,t[d+56]=K-X,d++}for(c=0;c<64;++c)u=t[c]*e[c],f[c]=u>0?u+.5|0:u-.5|0;return f}(t,e),l=0;l<64;++l)p[S[l]]=h[l];var c=p[0]-i;i=p[0],0==c?R(n[0]):(R(n[d[s=32767+c]]),R(u[s]));for(var g=63;g>0&&0==p[g];)g--;if(0==g)return R(o),i;for(var m,y=1;y<=g;){for(var v=y;0==p[y]&&y<=g;)++y;var _=y-v;if(_>=16){m=_>>4;for(var b=1;b<=m;++b)R(a);_&=15}s=32767+p[y],R(r[(_<<4)+d[s]]),R(u[s]),y++}return 63!=g&&R(o),i}function j(t){t=Math.min(Math.max(t,1),100),s!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],i=0;i<64;i++){var n=o((e[i]*t+50)/100);n=Math.min(Math.max(n,1),255),a[S[i]]=n}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var u=o((r[s]*t+50)/100);u=Math.min(Math.max(u,1),255),h[S[s]]=u}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,p=0;p<8;p++)for(var g=0;g<8;g++)l[f]=1/(a[S[f]]*d[p]*d[g]*8),c[f]=1/(h[S[f]]*d[p]*d[g]*8),f++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),s=t)}this.encode=function(t,s){s&&j(s),g=new Array,m=0,y=7,T(65496),T(65504),T(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),T(1),T(1),F(0),F(0),function(){T(65499),T(132),F(0);for(var t=0;t<64;t++)F(a[t]);F(1);for(var e=0;e<64;e++)F(h[e])}(),function(t,e){T(65472),T(17),F(8),T(e),T(t),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)}(t.width,t.height),function(){T(65476),T(418),F(0);for(var t=0;t<16;t++)F(M[t+1]);for(var e=0;e<=11;e++)F(C[e]);F(16);for(var i=0;i<16;i++)F(A[i+1]);for(var n=0;n<=161;n++)F(L[n]);F(1);for(var r=0;r<16;r++)F(N[r+1]);for(var s=0;s<=11;s++)F(E[s]);F(17);for(var o=0;o<16;o++)F(P[o+1]);for(var a=0;a<=161;a++)F(I[a])}(),T(65498),T(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var o=0,u=0,d=0;m=0,y=7,this.encode.displayName="_encode_";for(var f,p,w,S,O,D,B,q,G,z=t.data,U=t.width,W=t.height,Y=4*U,H=0;H<W;){for(f=0;f<Y;){for(O=Y*H+f,B=-1,q=0,G=0;G<64;G++)D=O+(q=G>>3)*Y+(B=4*(7&G)),H+q>=W&&(D-=Y*(H+1+q-W)),f+B>=Y&&(D-=f+B-Y+4),p=z[D++],w=z[D++],S=z[D++],v[G]=(x[p]+x[w+256>>0]+x[S+512>>0]>>16)-128,_[G]=(x[p+768>>0]+x[w+1024>>0]+x[S+1280>>0]>>16)-128,b[G]=(x[p+1280>>0]+x[w+1536>>0]+x[S+1792>>0]>>16)-128;o=k(v,l,o,e,n),u=k(_,c,u,i,r),d=k(b,c,d,i,r),f+=32}H+=8}if(y>=0){var V=[];V[1]=y+1,V[0]=(1<<y+1)-1,R(V)}return T(65497),new Uint8Array(g)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)w[e]=t(e)}(),e=O(M,C),i=O(N,E),n=O(A,L),r=O(P,I),function(){for(var t=1,e=2,i=1;i<=15;i++){for(var n=t;n<e;n++)d[32767+n]=i,u[32767+n]=[],u[32767+n][1]=i,u[32767+n][0]=n;for(var r=-(e-1);r<=-t;r++)d[32767+r]=i,u[32767+r]=[],u[32767+r][1]=i,u[32767+r][0]=e-1+r;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)x[t]=19595*t,x[t+256>>0]=38470*t,x[t+512>>0]=7471*t+32768,x[t+768>>0]=-11059*t,x[t+1024>>0]=-21709*t,x[t+1280>>0]=32768*t+8421375,x[t+1536>>0]=-27439*t,x[t+1792>>0]=-5329*t}(),j(t)}function lf(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function cf(t){function e(t){if(!t)throw Error("assert :P")}function i(t,e,i){for(var n=0;4>n;n++)if(t[e+n]!=i.charCodeAt(n))return!0;return!1}function n(t,e,i,n,r){for(var s=0;s<r;s++)t[e+s]=i[n+s]}function r(t,e,i,n){for(var r=0;r<n;r++)t[e+r]=i}function s(t){return new Int32Array(t)}function o(t,e){for(var i=[],n=0;n<t;n++)i.push(new e);return i}function a(t,e){var i=[];return function t(i,n,r){for(var s=r[n],o=0;o<s&&(i.push(r.length>n+1?[]:new e),!(r.length<n+1));o++)t(i[o],n+1,r)}(i,0,t),i}var h=function(){var t=this;function h(t,e){for(var i=1<<e-1>>>0;t&i;)i>>>=1;return i?(t&i-1)+i:t}function l(t,i,n,r,s){e(!(r%n));do{t[i+(r-=n)]=s}while(0<r)}function c(t,i,n,r,o){if(e(2328>=o),512>=o)var a=s(512);else if(null==(a=s(o)))return 0;return function(t,i,n,r,o,a){var c,d,f=i,p=1<<n,g=s(16),m=s(16);for(e(0!=o),e(null!=r),e(null!=t),e(0<n),d=0;d<o;++d){if(15<r[d])return 0;++g[r[d]]}if(g[0]==o)return 0;for(m[1]=0,c=1;15>c;++c){if(g[c]>1<<c)return 0;m[c+1]=m[c]+g[c]}for(d=0;d<o;++d)c=r[d],0<r[d]&&(a[m[c]++]=d);if(1==m[15])return(r=new u).g=0,r.value=a[0],l(t,f,1,p,r),p;var y,v=-1,_=p-1,b=0,w=1,x=1,S=1<<n;for(d=0,c=1,o=2;c<=n;++c,o<<=1){if(w+=x<<=1,0>(x-=g[c]))return 0;for(;0<g[c];--g[c])(r=new u).g=c,r.value=a[d++],l(t,f+b,o,S,r),b=h(b,c)}for(c=n+1,o=2;15>=c;++c,o<<=1){if(w+=x<<=1,0>(x-=g[c]))return 0;for(;0<g[c];--g[c]){if(r=new u,(b&_)!=v){for(f+=S,y=1<<(v=c)-n;15>v&&!(0>=(y-=g[v]));)++v,y<<=1;p+=S=1<<(y=v-n),t[i+(v=b&_)].g=y+n,t[i+v].value=f-i-v}r.g=c-n,r.value=a[d++],l(t,f+(b>>n),o,S,r),b=h(b,c)}}return w!=2*m[15]-1?0:p}(t,i,n,r,o,a)}function u(){this.value=this.g=0}function d(){this.value=this.g=0}function f(){this.G=o(5,u),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Di,d)}function p(t,i,n,r){e(null!=t),e(null!=i),e(2147483648>r),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=i,t.pa=n,t.Jd=i,t.Yc=n+r,t.Zc=4<=r?n+r-4+1:n,A(t)}function g(t,e){for(var i=0;0<e--;)i|=N(t,128)<<e;return i}function m(t,e){var i=g(t,e);return L(t)?-i:i}function y(t,i,n,r){var s,o=0;for(e(null!=t),e(null!=i),e(4294967288>r),t.Sb=r,t.Ra=0,t.u=0,t.h=0,4<r&&(r=4),s=0;s<r;++s)o+=i[n+s]<<8*s;t.Ra=o,t.bb=r,t.oa=i,t.pa=n}function v(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<Gi-8>>>0,++t.bb,t.u-=8;S(t)&&(t.h=1,t.u=0)}function _(t,i){if(e(0<=i),!t.h&&i<=qi){var n=x(t)&Bi[i];return t.u+=i,v(t),n}return t.h=1,t.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function x(t){return t.Ra>>>(t.u&Gi-1)>>>0}function S(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>Gi}function M(t,e){t.u=e,t.h=S(t)}function C(t){t.u>=zi&&(e(t.u>=zi),v(t))}function A(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function L(t){return g(t,1)}function N(t,e){var i=t.Ca;0>t.b&&A(t);var n=t.b,r=i*e>>>8,s=(t.I>>>n>r)+0;for(s?(i-=r,t.I-=r+1<<n>>>0):i=r+1,n=i,r=0;256<=n;)r+=8,n>>=8;return n=7^r+Ui[n],t.b-=n,t.Ca=(i<<n)-1,s}function E(t,e,i){t[e+0]=i>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=i>>0&255}function P(t,e){return t[e+0]<<0|t[e+1]<<8}function I(t,e){return P(t,e)|t[e+2]<<16}function O(t,e){return P(t,e)|P(t,e+2)<<16}function R(t,i){var n=1<<i;return e(null!=t),e(0<i),t.X=s(n),null==t.X?0:(t.Mb=32-i,t.Xa=i,1)}function F(t,i){e(null!=t),e(null!=i),e(t.Xa==i.Xa),n(i.X,0,t.X,0,1<<i.Xa)}function T(){this.X=[],this.Xa=this.Mb=0}function k(t,i,n,r){e(null!=n),e(null!=r);var s=n[0],o=r[0];return 0==s&&(s=(t*o+i/2)/i),0==o&&(o=(i*s+t/2)/t),0>=s||0>=o?0:(n[0]=s,r[0]=o,1)}function j(t,e){return t+(1<<e)-1>>>e}function D(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function B(e,i){t[i]=function(i,n,r,s,o,a,h){var l;for(l=0;l<o;++l){var c=t[e](a[h+l-1],r,s+l);a[h+l]=D(i[n+l],c)}}}function q(){this.ud=this.hd=this.jd=0}function G(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function z(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function U(t,e){return z(t+(t-e+.5>>1))}function W(t,e,i){return Math.abs(e-i)-Math.abs(t-i)}function Y(t,e,i,n,r,s,o){for(n=s[o-1],i=0;i<r;++i)s[o+i]=n=D(t[e+i],n)}function H(t,e,i,n,r){var s;for(s=0;s<i;++s){var o=t[e+s],a=o>>8&255,h=16711935&(h=(h=16711935&o)+((a<<16)+a));n[r+s]=(4278255360&o)+h>>>0}}function V(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function X(t,e,i,n,r,s){var o;for(o=0;o<n;++o){var a=e[i+o],h=a>>>8,l=a,c=255&(c=(c=a>>>16)+((t.jd<<24>>24)*(h<<24>>24)>>>5));l=255&(l=(l+=(t.hd<<24>>24)*(h<<24>>24)>>>5)+((t.ud<<24>>24)*(c<<24>>24)>>>5)),r[s+o]=(4278255360&a)+(c<<16)+l}}function Z(e,i,n,r,s){t[i]=function(t,e,i,n,o,a,h,l,c){for(n=h;n<l;++n)for(h=0;h<c;++h)o[a++]=s(i[r(t[e++])])},t[e]=function(e,i,o,a,h,l,c){var u=8>>e.b,d=e.Ea,f=e.K[0],p=e.w;if(8>u)for(e=(1<<e.b)-1,p=(1<<u)-1;i<o;++i){var g,m=0;for(g=0;g<d;++g)g&e||(m=r(a[h++])),l[c++]=s(f[m&p]),m>>=u}else t["VP8LMapColor"+n](a,h,f,p,l,c,i,o,d)}}function K(t,e,i,n,r){for(i=e+i;e<i;){var s=t[e++];n[r++]=s>>16&255,n[r++]=s>>8&255,n[r++]=s>>0&255}}function J(t,e,i,n,r){for(i=e+i;e<i;){var s=t[e++];n[r++]=s>>16&255,n[r++]=s>>8&255,n[r++]=s>>0&255,n[r++]=s>>24&255}}function Q(t,e,i,n,r){for(i=e+i;e<i;){var s=(o=t[e++])>>16&240|o>>12&15,o=o>>0&240|o>>28&15;n[r++]=s,n[r++]=o}}function $(t,e,i,n,r){for(i=e+i;e<i;){var s=(o=t[e++])>>16&248|o>>13&7,o=o>>5&224|o>>3&31;n[r++]=s,n[r++]=o}}function tt(t,e,i,n,r){for(i=e+i;e<i;){var s=t[e++];n[r++]=s>>0&255,n[r++]=s>>8&255,n[r++]=s>>16&255}}function et(t,e,i,r,s,o){if(0==o)for(i=e+i;e<i;)E(r,((o=t[e++])[0]>>24|o[1]>>8&65280|o[2]<<8&16711680|o[3]<<24)>>>0),s+=32;else n(r,s,t,e,i)}function it(e,i){t[i][0]=t[e+"0"],t[i][1]=t[e+"1"],t[i][2]=t[e+"2"],t[i][3]=t[e+"3"],t[i][4]=t[e+"4"],t[i][5]=t[e+"5"],t[i][6]=t[e+"6"],t[i][7]=t[e+"7"],t[i][8]=t[e+"8"],t[i][9]=t[e+"9"],t[i][10]=t[e+"10"],t[i][11]=t[e+"11"],t[i][12]=t[e+"12"],t[i][13]=t[e+"13"],t[i][14]=t[e+"0"],t[i][15]=t[e+"0"]}function nt(t){return t==Un||t==Wn||t==Yn||t==Hn}function rt(){this.eb=[],this.size=this.A=this.fb=0}function st(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ot(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rt,this.f.kb=new st,this.sd=null}function at(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ht(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function lt(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ct(t,e){var i=t.T,r=e.ba.f.RGBA,s=r.eb,o=r.fb+t.ka*r.A,a=yr[e.ba.S],h=t.y,l=t.O,c=t.f,u=t.N,d=t.ea,f=t.W,p=e.cc,g=e.dc,m=e.Mc,y=e.Nc,v=t.ka,_=t.ka+t.T,b=t.U,w=b+1>>1;for(0==v?a(h,l,null,null,c,u,d,f,c,u,d,f,s,o,null,null,b):(a(e.ec,e.fc,h,l,p,g,m,y,c,u,d,f,s,o-r.A,s,o,b),++i);v+2<_;v+=2)p=c,g=u,m=d,y=f,u+=t.Rc,f+=t.Rc,o+=2*r.A,a(h,(l+=2*t.fa)-t.fa,h,l,p,g,m,y,c,u,d,f,s,o-r.A,s,o,b);return l+=t.fa,t.j+_<t.o?(n(e.ec,e.fc,h,l,b),n(e.cc,e.dc,c,u,w),n(e.Mc,e.Nc,d,f,w),i--):1&_||a(h,l,null,null,c,u,d,f,c,u,d,f,s,o+r.A,null,null,b),i}function ut(t,i,n){var r=t.F,s=[t.J];if(null!=r){var o=t.U,a=i.ba.S,h=a==qn||a==Yn;i=i.ba.f.RGBA;var l=[0],c=t.ka;l[0]=t.T,t.Kb&&(0==c?--l[0]:(--c,s[0]-=t.width),t.j+t.ka+t.T==t.o&&(l[0]=t.o-t.j-c));var u=i.eb;c=i.fb+c*i.A,t=Cn(r,s[0],t.width,o,l,u,c+(h?0:3),i.A),e(n==l),t&&nt(a)&&Sn(u,c,h,o,l,i.A)}return 0}function dt(t){var e=t.ma,i=e.ba.S,n=11>i,r=i==jn||i==Bn||i==qn||i==Gn||12==i||nt(i);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!Ti(e.Oa,t,r?11:12))return 0;if(r&&nt(i)&&vi(),t.da)alert("todo:use_scaling");else{if(n){if(e.Ib=lt,t.Kb){if(i=t.U+1>>1,e.memory=s(t.U+2*i),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+i,e.Ib=ct,vi()}}else alert("todo:EmitYUV");r&&(e.Jb=ut,n&&mi())}if(n&&!Ir){for(t=0;256>t;++t)Or[t]=89858*(t-128)+Ar>>Cr,Tr[t]=-22014*(t-128)+Ar,Fr[t]=-45773*(t-128),Rr[t]=113618*(t-128)+Ar>>Cr;for(t=Lr;t<Nr;++t)e=76283*(t-16)+Ar>>Cr,kr[t-Lr]=Yt(e,255),jr[t-Lr]=Yt(e+8>>4,15);Ir=1}return 1}function ft(t){var i=t.ma,n=t.U,r=t.T;return e(!(1&t.ka)),0>=n||0>=r?0:(n=i.Ib(t,i),null!=i.Jb&&i.Jb(t,i,n),i.Dc+=n,1)}function pt(t){t.ma.memory=null}function gt(t,e,i,n){return 47!=_(t,8)?0:(e[0]=_(t,14)+1,i[0]=_(t,14)+1,n[0]=_(t,1),0!=_(t,3)?0:!t.h)}function mt(t,e){if(4>t)return t+1;var i=t-2>>1;return(2+(1&t)<<i)+_(e,i)+1}function yt(t,e){return 120<e?e-120:1<=(i=((i=Qn[e-1])>>4)*t+(8-(15&i)))?i:1;var i}function vt(t,e,i){var n=x(i),r=t[e+=255&n].g-8;return 0<r&&(M(i,i.u+8),n=x(i),e+=t[e].value,e+=n&(1<<r)-1),M(i,i.u+t[e].g),t[e].value}function _t(t,i,n){return n.g+=t.g,n.value+=t.value<<i>>>0,e(8>=n.g),t.g}function bt(t,i,n){var r=t.xc;return e((i=0==r?0:t.vc[t.md*(n>>r)+(i>>r)])<t.Wb),t.Ya[i]}function wt(t,i,r,s){var o=t.ab,a=t.c*i,h=t.C;i=h+i;var l=r,c=s;for(s=t.Ta,r=t.Ua;0<o--;){var u=t.gc[o],d=h,f=i,p=l,g=c,m=(c=s,l=r,u.Ea);switch(e(d<f),e(f<=u.nc),u.hc){case 2:Hi(p,g,(f-d)*m,c,l);break;case 0:var y=d,v=f,_=c,b=l,w=(A=u).Ea;0==y&&(Wi(p,g,null,null,1,_,b),Y(p,g+1,0,0,w-1,_,b+1),g+=w,b+=w,++y);for(var x=1<<A.b,S=x-1,M=j(w,A.b),C=A.K,A=A.w+(y>>A.b)*M;y<v;){var L=C,N=A,E=1;for(Yi(p,g,_,b-w,1,_,b);E<w;){var P=(E&~S)+x;P>w&&(P=w),(0,Ji[L[N++]>>8&15])(p,g+ +E,_,b+E-w,P-E,_,b+E),E=P}g+=w,b+=w,++y&S||(A+=M)}f!=u.nc&&n(c,l-m,c,l+(f-d-1)*m,m);break;case 1:for(m=p,v=g,w=(p=u.Ea)-(b=p&~(_=(g=1<<u.b)-1)),y=j(p,u.b),x=u.K,u=u.w+(d>>u.b)*y;d<f;){for(S=x,M=u,C=new q,A=v+b,L=v+p;v<A;)V(S[M++],C),Qi(C,m,v,g,c,l),v+=g,l+=g;v<L&&(V(S[M++],C),Qi(C,m,v,w,c,l),v+=w,l+=w),++d&_||(u+=y)}break;case 3:if(p==c&&g==l&&0<u.b){for(v=c,p=m=l+(f-d)*m-(b=(f-d)*j(u.Ea,u.b)),g=c,_=l,y=[],b=(w=b)-1;0<=b;--b)y[b]=g[_+b];for(b=w-1;0<=b;--b)v[p+b]=y[b];Vi(u,d,f,c,m,c,l)}else Vi(u,d,f,p,g,c,l)}l=s,c=r}c!=r&&n(s,r,l,c,a)}function xt(t,i){var n=t.V,r=t.Ba+t.c*t.C,s=i-t.C;if(e(i<=t.l.o),e(16>=s),0<s){var o=t.l,a=t.Ta,h=t.Ua,l=o.width;if(wt(t,s,n,r),s=h=[h],e((n=t.C)<(r=i)),e(o.v<o.va),r>o.o&&(r=o.o),n<o.j){var c=o.j-n;n=o.j,s[0]+=c*l}if(n>=r?n=0:(s[0]+=4*o.v,o.ka=n-o.j,o.U=o.va-o.v,o.T=r-n,n=1),n){if(h=h[0],11>(n=t.ca).S){var u=n.f.RGBA,d=(r=n.S,s=o.U,o=o.T,c=u.eb,u.A),f=o;for(u=u.fb+t.Ma*u.A;0<f--;){var p=a,g=h,m=s,y=c,v=u;switch(r){case kn:$i(p,g,m,y,v);break;case jn:tn(p,g,m,y,v);break;case Un:tn(p,g,m,y,v),Sn(y,v,0,m,1,0);break;case Dn:rn(p,g,m,y,v);break;case Bn:et(p,g,m,y,v,1);break;case Wn:et(p,g,m,y,v,1),Sn(y,v,0,m,1,0);break;case qn:et(p,g,m,y,v,0);break;case Yn:et(p,g,m,y,v,0),Sn(y,v,1,m,1,0);break;case Gn:en(p,g,m,y,v);break;case Hn:en(p,g,m,y,v),Mn(y,v,m,1,0);break;case zn:nn(p,g,m,y,v);break;default:e(0)}h+=l,u+=d}t.Ma+=o}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=n.height)}}t.C=i,e(t.C<=t.i)}function St(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var i=t.Ya[e].G,n=t.Ya[e].H;if(0<i[1][n[1]+0].g||0<i[2][n[2]+0].g||0<i[3][n[3]+0].g)return 0}return 1}function Mt(t,i,n,r,s,o){if(0!=t.Z){var a=t.qd,h=t.rd;for(e(null!=mr[t.Z]);i<n;++i)mr[t.Z](a,h,r,s,r,s,o),a=r,h=s,s+=o;t.qd=a,t.rd=h}}function Ct(t,i){var n=t.l.ma,r=0==n.Z||1==n.Z?t.l.j:t.C;if(r=t.C<r?r:t.C,e(i<=t.l.o),i>r){var s=t.l.width,o=n.ca,a=n.tb+s*r,h=t.V,l=t.Ba+t.c*r,c=t.gc;e(1==t.ab),e(3==c[0].hc),Zi(c[0],r,i,h,l,o,a),Mt(n,r,i,o,a,s)}t.C=t.Ma=i}function At(t,i,n,r,s,o,a){var h=t.$/r,l=t.$%r,c=t.m,u=t.s,d=n+t.$,f=d;s=n+r*s;var p=n+r*o,g=280+u.ua,m=t.Pb?h:16777216,y=0<u.ua?u.Wa:null,v=u.wc,_=d<p?bt(u,l,h):null;e(t.C<o),e(p<=s);var b=!1;t:for(;;){for(;b||d<p;){var w=0;if(h>=m){var A=d-n;e((m=t).Pb),m.wd=m.m,m.xd=A,0<m.s.ua&&F(m.s.Wa,m.s.vb),m=h+tr}if(l&v||(_=bt(u,l,h)),e(null!=_),_.Qb&&(i[d]=_.qb,b=!0),!b)if(C(c),_.jc){w=c,A=i;var L=d,N=_.pd[x(w)&Di-1];e(_.jc),256>N.g?(M(w,w.u+N.g),A[L]=N.value,w=0):(M(w,w.u+N.g-256),e(256<=N.value),w=N.value),0==w&&(b=!0)}else w=vt(_.G[0],_.H[0],c);if(c.h)break;if(b||256>w){if(!b)if(_.nd)i[d]=(_.qb|w<<8)>>>0;else{if(C(c),b=vt(_.G[1],_.H[1],c),C(c),A=vt(_.G[2],_.H[2],c),L=vt(_.G[3],_.H[3],c),c.h)break;i[d]=(L<<24|b<<16|w<<8|A)>>>0}if(b=!1,++d,++l>=r&&(l=0,++h,null!=a&&h<=o&&!(h%16)&&a(t,h),null!=y))for(;f<d;)w=i[f++],y.X[(506832829*w&4294967295)>>>y.Mb]=w}else if(280>w){if(w=mt(w-256,c),A=vt(_.G[4],_.H[4],c),C(c),A=yt(r,A=mt(A,c)),c.h)break;if(d-n<A||s-d<w)break t;for(L=0;L<w;++L)i[d+L]=i[d+L-A];for(d+=w,l+=w;l>=r;)l-=r,++h,null!=a&&h<=o&&!(h%16)&&a(t,h);if(e(d<=s),l&v&&(_=bt(u,l,h)),null!=y)for(;f<d;)w=i[f++],y.X[(506832829*w&4294967295)>>>y.Mb]=w}else{if(!(w<g))break t;for(b=w-280,e(null!=y);f<d;)w=i[f++],y.X[(506832829*w&4294967295)>>>y.Mb]=w;w=d,e(!(b>>>(A=y).Xa)),i[w]=A.X[b],b=!0}b||e(c.h==S(c))}if(t.Pb&&c.h&&d<s)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&F(t.s.vb,t.s.Wa);else{if(c.h)break t;null!=a&&a(t,h>o?o:h),t.a=0,t.$=d-n}return 1}return t.a=3,0}function Lt(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var i=t.Wa;null!=i&&(i.X=null),t.vb=null,e(null!=t)}function Nt(){var e=new oi;return null==e?null:(e.a=0,e.xb=gr,it("Predictor","VP8LPredictors"),it("Predictor","VP8LPredictors_C"),it("PredictorAdd","VP8LPredictorsAdd"),it("PredictorAdd","VP8LPredictorsAdd_C"),Hi=H,Qi=X,$i=K,tn=J,en=Q,nn=$,rn=tt,t.VP8LMapColor32b=Xi,t.VP8LMapColor8b=Ki,e)}function Et(t,i,n,a,h){var l=1,d=[t],p=[i],g=a.m,m=a.s,y=null,v=0;t:for(;;){if(n)for(;l&&_(g,1);){var b=d,w=p,S=a,A=1,L=S.m,N=S.gc[S.ab],E=_(L,2);if(S.Oc&1<<E)l=0;else{switch(S.Oc|=1<<E,N.hc=E,N.Ea=b[0],N.nc=w[0],N.K=[null],++S.ab,e(4>=S.ab),E){case 0:case 1:N.b=_(L,3)+2,A=Et(j(N.Ea,N.b),j(N.nc,N.b),0,S,N.K),N.K=N.K[0];break;case 3:var P,I=_(L,8)+1,O=16<I?0:4<I?1:2<I?2:3;if(b[0]=j(N.Ea,O),N.b=O,P=A=Et(I,1,0,S,N.K)){var F,T=I,k=N,B=1<<(8>>k.b),q=s(B);if(null==q)P=0;else{var G=k.K[0],z=k.w;for(q[0]=k.K[0][0],F=1;F<1*T;++F)q[F]=D(G[z+F],q[F-1]);for(;F<4*B;++F)q[F]=0;k.K[0]=null,k.K[0]=q,P=1}}A=P;break;case 2:break;default:e(0)}l=A}}if(d=d[0],p=p[0],l&&_(g,1)&&!(l=1<=(v=_(g,4))&&11>=v)){a.a=3;break t}var U;if(U=l)e:{var W,Y,H,V=a,X=d,Z=p,K=v,J=n,Q=V.m,$=V.s,tt=[null],et=1,it=0,nt=$n[K];i:for(;;){if(J&&_(Q,1)){var rt=_(Q,3)+2,st=j(X,rt),ot=j(Z,rt),at=st*ot;if(!Et(st,ot,0,V,tt))break i;for(tt=tt[0],$.xc=rt,W=0;W<at;++W){var ht=tt[W]>>8&65535;tt[W]=ht,ht>=et&&(et=ht+1)}}if(Q.h)break i;for(Y=0;5>Y;++Y){var lt=Zn[Y];!Y&&0<K&&(lt+=1<<K),it<lt&&(it=lt)}var ct=o(et*nt,u),ut=et,dt=o(ut,f);if(null==dt)var ft=null;else e(65536>=ut),ft=dt;var pt=s(it);if(null==ft||null==pt||null==ct){V.a=1;break i}var gt=ct;for(W=H=0;W<et;++W){var mt=ft[W],yt=mt.G,vt=mt.H,bt=0,wt=1,xt=0;for(Y=0;5>Y;++Y){lt=Zn[Y],yt[Y]=gt,vt[Y]=H,!Y&&0<K&&(lt+=1<<K);n:{var St,Mt=lt,Ct=V,Nt=pt,Pt=gt,It=H,Ot=0,Rt=Ct.m,Ft=_(Rt,1);if(r(Nt,0,0,Mt),Ft){var Tt=_(Rt,1)+1,kt=_(Rt,1),jt=_(Rt,0==kt?1:8);Nt[jt]=1,2==Tt&&(Nt[jt=_(Rt,8)]=1);var Dt=1}else{var Bt=s(19),qt=_(Rt,4)+4;if(19<qt){Ct.a=3;var Gt=0;break n}for(St=0;St<qt;++St)Bt[Jn[St]]=_(Rt,3);var zt=void 0,Ut=void 0,Wt=Ct,Yt=Bt,Ht=Mt,Vt=Nt,Xt=0,Zt=Wt.m,Kt=8,Jt=o(128,u);r:for(;c(Jt,0,7,Yt,19);){if(_(Zt,1)){var Qt=2+2*_(Zt,3);if((zt=2+_(Zt,Qt))>Ht)break r}else zt=Ht;for(Ut=0;Ut<Ht&&zt--;){C(Zt);var $t=Jt[0+(127&x(Zt))];M(Zt,Zt.u+$t.g);var te=$t.value;if(16>te)Vt[Ut++]=te,0!=te&&(Kt=te);else{var ee=16==te,ie=te-16,ne=Xn[ie],re=_(Zt,Vn[ie])+ne;if(Ut+re>Ht)break r;for(var se=ee?Kt:0;0<re--;)Vt[Ut++]=se}}Xt=1;break r}Xt||(Wt.a=3),Dt=Xt}(Dt=Dt&&!Rt.h)&&(Ot=c(Pt,It,8,Nt,Mt)),Dt&&0!=Ot?Gt=Ot:(Ct.a=3,Gt=0)}if(0==Gt)break i;if(wt&&1==Kn[Y]&&(wt=0==gt[H].g),bt+=gt[H].g,H+=Gt,3>=Y){var oe,ae=pt[0];for(oe=1;oe<lt;++oe)pt[oe]>ae&&(ae=pt[oe]);xt+=ae}}if(mt.nd=wt,mt.Qb=0,wt&&(mt.qb=(yt[3][vt[3]+0].value<<24|yt[1][vt[1]+0].value<<16|yt[2][vt[2]+0].value)>>>0,0==bt&&256>yt[0][vt[0]+0].value&&(mt.Qb=1,mt.qb+=yt[0][vt[0]+0].value<<8)),mt.jc=!mt.Qb&&6>xt,mt.jc){var he,le=mt;for(he=0;he<Di;++he){var ce=he,ue=le.pd[ce],de=le.G[0][le.H[0]+ce];256<=de.value?(ue.g=de.g+256,ue.value=de.value):(ue.g=0,ue.value=0,ce>>=_t(de,8,ue),ce>>=_t(le.G[1][le.H[1]+ce],16,ue),ce>>=_t(le.G[2][le.H[2]+ce],0,ue),_t(le.G[3][le.H[3]+ce],24,ue))}}}$.vc=tt,$.Wb=et,$.Ya=ft,$.yc=ct,U=1;break e}U=0}if(!(l=U)){a.a=3;break t}if(0<v){if(m.ua=1<<v,!R(m.Wa,v)){a.a=1,l=0;break t}}else m.ua=0;var fe=a,pe=d,ge=p,me=fe.s,ye=me.xc;if(fe.c=pe,fe.i=ge,me.md=j(pe,ye),me.wc=0==ye?-1:(1<<ye)-1,n){a.xb=pr;break t}if(null==(y=s(d*p))){a.a=1,l=0;break t}l=(l=At(a,y,0,d,p,p,null))&&!g.h;break t}return l?(null!=h?h[0]=y:(e(null==y),e(n)),a.$=0,n||Lt(m)):Lt(m),l}function Pt(t,i){var n=t.c*t.i,r=n+i+16*i;return e(t.c<=i),t.V=s(r),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+n+i,1)}function It(t,i){var n=t.C,r=i-n,s=t.V,o=t.Ba+t.c*n;for(e(i<=t.l.o);0<r;){var a=16<r?16:r,h=t.l.ma,l=t.l.width,c=l*a,u=h.ca,d=h.tb+l*n,f=t.Ta,p=t.Ua;wt(t,a,s,o),An(f,p,u,d,c),Mt(h,n,n+a,u,d,l),r-=a,s+=a*t.c,n+=a}e(n==i),t.C=t.Ma=i}function Ot(){this.ub=this.yd=this.td=this.Rb=0}function Rt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ft(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Tt(){this.Yb=function(){var t=[];return function t(e,i,n){for(var r=n[i],s=0;s<r&&(e.push(n.length>i+1?[]:0),!(n.length<i+1));s++)t(e[s],i+1,n)}(t,0,[3,11]),t}()}function kt(){this.jb=s(3),this.Wc=a([4,8],Tt),this.Xc=a([4,17],Tt)}function jt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Dt(){this.ld=this.La=this.dd=this.tc=0}function Bt(){this.Na=this.la=0}function qt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Gt(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dt),this.Y=0,this.ya=Array(new Gt),this.aa=0,this.l=new Ht}function Ut(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Wt(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new Ot,this.Kc=new Rt,this.ed=new jt,this.Qa=new Ft,this.Ic=this.$c=this.Aa=0,this.D=new zt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,b),this.ia=0,this.pb=o(4,qt),this.Pa=new kt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ut),this.Hd=0,this.rb=Array(new Bt),this.sb=0,this.wa=Array(new Dt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Gt),this.L=this.aa=0,this.gd=a([4,2],Dt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yt(t,e){return 0>t?0:t>e?e:t}function Ht(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Vt(){var t=new Wt;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,nr||(nr=Jt)),t}function Xt(t,e,i){return 0==t.a&&(t.a=e,t.sc=i,t.cb=0),0}function Zt(t,e,i){return 3<=i&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function Kt(t,i){if(null==t)return 0;if(t.a=0,t.sc="OK",null==i)return Xt(t,2,"null VP8Io passed to VP8GetHeaders()");var n=i.data,s=i.w,o=i.ha;if(4>o)return Xt(t,7,"Truncated header.");var a=n[s+0]|n[s+1]<<8|n[s+2]<<16,h=t.Od;if(h.Rb=!(1&a),h.td=a>>1&7,h.yd=a>>4&1,h.ub=a>>5,3<h.td)return Xt(t,3,"Incorrect keyframe parameters.");if(!h.yd)return Xt(t,4,"Frame not displayable.");s+=3,o-=3;var l=t.Kc;if(h.Rb){if(7>o)return Xt(t,7,"cannot parse picture header");if(!Zt(n,s,o))return Xt(t,3,"Bad code word");l.c=16383&(n[s+4]<<8|n[s+3]),l.Td=n[s+4]>>6,l.i=16383&(n[s+6]<<8|n[s+5]),l.Ud=n[s+6]>>6,s+=7,o-=7,t.za=l.c+15>>4,t.Ub=l.i+15>>4,i.width=l.c,i.height=l.i,i.Da=0,i.j=0,i.v=0,i.va=i.width,i.o=i.height,i.da=0,i.ib=i.width,i.hb=i.height,i.U=i.width,i.T=i.height,r((a=t.Pa).jb,0,255,a.jb.length),e(null!=(a=t.Qa)),a.Cb=0,a.Bb=0,a.Fb=1,r(a.Zb,0,0,a.Zb.length),r(a.Lb,0,0,a.Lb)}if(h.ub>o)return Xt(t,7,"bad partition length");p(a=t.m,n,s,h.ub),s+=h.ub,o-=h.ub,h.Rb&&(l.Ld=L(a),l.Kd=L(a)),l=t.Qa;var c,u=t.Pa;if(e(null!=a),e(null!=l),l.Cb=L(a),l.Cb){if(l.Bb=L(a),L(a)){for(l.Fb=L(a),c=0;4>c;++c)l.Zb[c]=L(a)?m(a,7):0;for(c=0;4>c;++c)l.Lb[c]=L(a)?m(a,6):0}if(l.Bb)for(c=0;3>c;++c)u.jb[c]=L(a)?g(a,8):255}else l.Bb=0;if(a.Ka)return Xt(t,3,"cannot parse segment header");if((l=t.ed).zd=L(a),l.Tb=g(a,6),l.wb=g(a,3),l.Pc=L(a),l.Pc&&L(a)){for(u=0;4>u;++u)L(a)&&(l.vd[u]=m(a,6));for(u=0;4>u;++u)L(a)&&(l.od[u]=m(a,6))}if(t.L=0==l.Tb?0:l.zd?1:2,a.Ka)return Xt(t,3,"cannot parse filter header");var d=o;if(o=c=s,s=c+d,l=d,t.Xb=(1<<g(t.m,2))-1,d<3*(u=t.Xb))n=7;else{for(c+=3*u,l-=3*u,d=0;d<u;++d){var f=n[o+0]|n[o+1]<<8|n[o+2]<<16;f>l&&(f=l),p(t.Jc[+d],n,c,f),c+=f,l-=f,o+=3}p(t.Jc[+u],n,c,l),n=c<s?0:5}if(0!=n)return Xt(t,n,"cannot parse partitions");for(n=g(c=t.m,7),o=L(c)?m(c,4):0,s=L(c)?m(c,4):0,l=L(c)?m(c,4):0,u=L(c)?m(c,4):0,c=L(c)?m(c,4):0,d=t.Qa,f=0;4>f;++f){if(d.Cb){var y=d.Zb[f];d.Fb||(y+=n)}else{if(0<f){t.pb[f]=t.pb[0];continue}y=n}var v=t.pb[f];v.Sc[0]=er[Yt(y+o,127)],v.Sc[1]=ir[Yt(y+0,127)],v.Eb[0]=2*er[Yt(y+s,127)],v.Eb[1]=101581*ir[Yt(y+l,127)]>>16,8>v.Eb[1]&&(v.Eb[1]=8),v.Qc[0]=er[Yt(y+u,117)],v.Qc[1]=ir[Yt(y+c,127)],v.lc=y+c}if(!h.Rb)return Xt(t,4,"Not a key frame.");for(L(a),h=t.Pa,n=0;4>n;++n){for(o=0;8>o;++o)for(s=0;3>s;++s)for(l=0;11>l;++l)u=N(a,lr[n][o][s][l])?g(a,8):ar[n][o][s][l],h.Wc[n][o].Yb[s][l]=u;for(o=0;17>o;++o)h.Xc[n][o]=h.Wc[n][cr[o]]}return t.kc=L(a),t.kc&&(t.Bd=g(a,8)),t.cb=1}function Jt(t,e,i,n,r,s,o){var a=e[r].Yb[i];for(i=0;16>r;++r){if(!N(t,a[i+0]))return r;for(;!N(t,a[i+1]);)if(a=e[++r].Yb[0],i=0,16==r)return 16;var h=e[r+1].Yb;if(N(t,a[i+2])){var l=t,c=0;if(N(l,(d=a)[(u=i)+3]))if(N(l,d[u+6])){for(a=0,u=2*(c=N(l,d[u+8]))+(d=N(l,d[u+9+c])),c=0,d=rr[u];d[a];++a)c+=c+N(l,d[a]);c+=3+(8<<u)}else N(l,d[u+7])?(c=7+2*N(l,165),c+=N(l,145)):c=5+N(l,159);else c=N(l,d[u+4])?3+N(l,d[u+5]):2;a=h[2]}else c=1,a=h[1];h=o+sr[r],0>(l=t).b&&A(l);var u,d=l.b,f=(u=l.Ca>>1)-(l.I>>d)>>31;--l.b,l.Ca+=f,l.Ca|=1,l.I-=(u+1&f)<<d,s[h]=((c^f)-f)*n[(0<r)+0]}return 16}function Qt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,r(t.zc,0,0,t.zc.length),t.ja=0}function $t(t,i){if(null==t)return 0;if(null==i)return Xt(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!Kt(t,i))return 0;if(e(t.cb),null==i.ac||i.ac(i)){i.ob&&(t.L=0);var a=Br[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=i.v-a>>4,t.zb=i.j-a>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=i.o+15+a>>4,t.Hb=i.va+15+a>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var h=t.ed;for(a=0;4>a;++a){var l;if(t.Qa.Cb){var c=t.Qa.Lb[a];t.Qa.Fb||(c+=h.Tb)}else c=h.Tb;for(l=0;1>=l;++l){var u=t.gd[a][l],d=c;if(h.Pc&&(d+=h.vd[0],l&&(d+=h.od[0])),0<(d=0>d?0:63<d?63:d)){var f=d;0<h.wb&&(f=4<h.wb?f>>2:f>>1)>9-h.wb&&(f=9-h.wb),1>f&&(f=1),u.dd=f,u.tc=2*d+f,u.ld=40<=d?2:15<=d?1:0}else u.tc=0;u.La=l}}}a=0}else Xt(t,6,"Frame setup failed"),a=t.a;if(a=0==a){if(a){t.$c=0,0<t.Aa||(t.Ic=Gr);t:{a=t.Ic,h=4*(f=t.za);var p=32*f,g=f+1,m=0<t.L?f*(0<t.Aa?2:1):0,y=(2==t.Aa?2:1)*f;if((u=h+832+(l=3*(16*a+Br[t.L])/2*p)+(c=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=u)a=0;else{if(u>t.Vb){if(t.Vb=0,t.Ec=s(u),t.Fc=0,null==t.Ec){a=Xt(t,1,"no memory during frame initialization.");break t}t.Vb=u}u=t.Ec,d=t.Fc,t.Ac=u,t.Bc=d,d+=h,t.Gd=o(p,Ut),t.Hd=0,t.rb=o(g+1,Bt),t.sb=1,t.wa=m?o(m,Dt):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=f),e(!0),t.oc=u,t.pc=d,d+=832,t.ya=o(y,Gt),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=f),t.R=16*f,t.B=8*f,f=(p=Br[t.L])*t.R,p=p/2*t.B,t.sa=u,t.ta=d+f,t.qa=t.sa,t.ra=t.ta+16*a*t.R+p,t.Ha=t.qa,t.Ia=t.ra+8*a*t.B+p,t.$c=0,d+=l,t.mb=c?u:null,t.nb=c?d:null,e(d+c<=t.Fc+t.Vb),Qt(t),r(t.Ac,t.Bc,0,h),a=1}}if(a){if(i.ka=0,i.y=t.sa,i.O=t.ta,i.f=t.qa,i.N=t.ra,i.ea=t.Ha,i.Vd=t.Ia,i.fa=t.R,i.Rc=t.B,i.F=null,i.J=0,!In){for(a=-255;255>=a;++a)Ln[255+a]=0>a?-a:a;for(a=-1020;1020>=a;++a)Nn[1020+a]=-128>a?-128:127<a?127:a;for(a=-112;112>=a;++a)En[112+a]=-16>a?-16:15<a?15:a;for(a=-255;510>=a;++a)Pn[255+a]=0>a?0:255<a?255:a;In=1}sn=le,on=se,hn=oe,ln=ae,cn=he,an=re,un=Xe,dn=Ze,fn=Qe,pn=$e,gn=Ke,mn=Je,yn=ti,vn=ei,_n=ze,bn=Ue,wn=We,xn=Ye,dr[0]=Me,dr[1]=ue,dr[2]=xe,dr[3]=Se,dr[4]=Ce,dr[5]=Le,dr[6]=Ae,dr[7]=Ne,dr[8]=Pe,dr[9]=Ee,ur[0]=ye,ur[1]=fe,ur[2]=pe,ur[3]=ge,ur[4]=ve,ur[5]=_e,ur[6]=be,fr[0]=Fe,fr[1]=de,fr[2]=Ie,fr[3]=Oe,fr[4]=ke,fr[5]=Te,fr[6]=je,a=1}else a=0}a&&(a=function(t,i){for(t.M=0;t.M<t.Va;++t.M){var o,a=t.Jc[t.M&t.Xb],h=t.m,l=t;for(o=0;o<l.za;++o){var c=h,u=l,d=u.Ac,f=u.Bc+4*o,p=u.zc,g=u.ya[u.aa+o];if(u.Qa.Bb?g.$b=N(c,u.Pa.jb[0])?2+N(c,u.Pa.jb[2]):N(c,u.Pa.jb[1]):g.$b=0,u.kc&&(g.Ad=N(c,u.Bd)),g.Za=!N(c,145)+0,g.Za){var m=g.Ob,y=0;for(u=0;4>u;++u){var v,_=p[0+u];for(v=0;4>v;++v){_=hr[d[f+v]][_];for(var b=or[N(c,_[0])];0<b;)b=or[2*b+N(c,_[b])];_=-b,d[f+v]=_}n(m,y,d,f,4),y+=4,p[0+u]=_}}else _=N(c,156)?N(c,128)?1:3:N(c,163)?2:0,g.Ob[0]=_,r(d,f,_,4),r(p,0,_,4);g.Dd=N(c,142)?N(c,114)?N(c,183)?1:3:2:0}if(l.m.Ka)return Xt(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(l=a,c=(h=t).rb[h.sb-1],d=h.rb[h.sb+h.ja],o=h.ya[h.aa+h.ja],f=h.kc?o.Ad:0)c.la=d.la=0,o.Za||(c.Na=d.Na=0),o.Hc=0,o.Gc=0,o.ia=0;else{var w,x;if(c=d,d=l,f=h.Pa.Xc,p=h.ya[h.aa+h.ja],g=h.pb[p.$b],u=p.ad,m=0,y=h.rb[h.sb-1],_=v=0,r(u,m,0,384),p.Za)var S=0,M=f[3];else{b=s(16);var C=c.Na+y.Na;if(C=nr(d,f[1],C,g.Eb,0,b,0),c.Na=y.Na=(0<C)+0,1<C)sn(b,0,u,m);else{var A=b[0]+3>>3;for(b=0;256>b;b+=16)u[m+b]=A}S=1,M=f[0]}var L=15&c.la,E=15&y.la;for(b=0;4>b;++b){var P=1&E;for(A=x=0;4>A;++A)L=L>>1|(P=(C=nr(d,M,C=P+(1&L),g.Sc,S,u,m))>S)<<7,x=x<<2|(3<C?3:1<C?2:0!=u[m+0]),m+=16;L>>=4,E=E>>1|P<<7,v=(v<<8|x)>>>0}for(M=L,S=E>>4,w=0;4>w;w+=2){for(x=0,L=c.la>>4+w,E=y.la>>4+w,b=0;2>b;++b){for(P=1&E,A=0;2>A;++A)C=P+(1&L),L=L>>1|(P=0<(C=nr(d,f[2],C,g.Qc,0,u,m)))<<3,x=x<<2|(3<C?3:1<C?2:0!=u[m+0]),m+=16;L>>=2,E=E>>1|P<<5}_|=x<<4*w,M|=L<<4<<w,S|=(240&E)<<w}c.la=M,y.la=S,p.Hc=v,p.Gc=_,p.ia=43690&_?0:g.ia,f=!(v|_)}if(0<h.L&&(h.wa[h.Y+h.ja]=h.gd[o.$b][o.Za],h.wa[h.Y+h.ja].La|=!f),l.Ka)return Xt(t,7,"Premature end-of-file encountered.")}if(Qt(t),h=i,l=1,o=(a=t).D,c=0<a.L&&a.M>=a.zb&&a.M<=a.Va,0==a.Aa)t:{if(o.M=a.M,o.uc=c,Ri(a,o),l=1,o=(x=a.D).Nb,c=(_=Br[a.L])*a.R,d=_/2*a.B,b=16*o*a.R,A=8*o*a.B,f=a.sa,p=a.ta-c+b,g=a.qa,u=a.ra-d+A,m=a.Ha,y=a.Ia-d+A,E=0==(L=x.M),v=L>=a.Va-1,2==a.Aa&&Ri(a,x),x.uc)for(P=(C=a).D.M,e(C.D.uc),x=C.yb;x<C.Hb;++x){S=x,M=P;var I=(O=(G=C).D).Nb;w=G.R;var O=O.wa[O.Y+S],R=G.sa,F=G.ta+16*I*w+16*S,T=O.dd,k=O.tc;if(0!=k)if(e(3<=k),1==G.L)0<S&&bn(R,F,w,k+4),O.La&&xn(R,F,w,k),0<M&&_n(R,F,w,k+4),O.La&&wn(R,F,w,k);else{var j=G.B,D=G.qa,B=G.ra+8*I*j+8*S,q=G.Ha,G=G.Ia+8*I*j+8*S;I=O.ld,0<S&&(dn(R,F,w,k+4,T,I),pn(D,B,q,G,j,k+4,T,I)),O.La&&(mn(R,F,w,k,T,I),vn(D,B,q,G,j,k,T,I)),0<M&&(un(R,F,w,k+4,T,I),fn(D,B,q,G,j,k+4,T,I)),O.La&&(gn(R,F,w,k,T,I),yn(D,B,q,G,j,k,T,I))}}if(a.ia&&alert("todo:DitherRow"),null!=h.put){if(x=16*L,L=16*(L+1),E?(h.y=a.sa,h.O=a.ta+b,h.f=a.qa,h.N=a.ra+A,h.ea=a.Ha,h.W=a.Ia+A):(x-=_,h.y=f,h.O=p,h.f=g,h.N=u,h.ea=m,h.W=y),v||(L-=_),L>h.o&&(L=h.o),h.F=null,h.J=null,null!=a.Fa&&0<a.Fa.length&&x<L&&(h.J=ui(a,h,x,L-x),h.F=a.mb,null==h.F&&0==h.F.length)){l=Xt(a,3,"Could not decode alpha data.");break t}x<h.j&&(_=h.j-x,x=h.j,e(!(1&_)),h.O+=a.R*_,h.N+=a.B*(_>>1),h.W+=a.B*(_>>1),null!=h.F&&(h.J+=h.width*_)),x<L&&(h.O+=h.v,h.N+=h.v>>1,h.W+=h.v>>1,null!=h.F&&(h.J+=h.v),h.ka=x-h.j,h.U=h.va-h.v,h.T=L-x,l=h.put(h))}o+1!=a.Ic||v||(n(a.sa,a.ta-c,f,p+16*a.R,c),n(a.qa,a.ra-d,g,u+8*a.B,d),n(a.Ha,a.Ia-d,m,y+8*a.B,d))}if(!l)return Xt(t,6,"Output aborted.")}return 1}(t,i)),null!=i.bc&&i.bc(i),a&=1}return a?(t.cb=0,a):0}function te(t,e,i,n,r){r=t[e+i+32*n]+(r>>3),t[e+i+32*n]=-256&r?0>r?0:255:r}function ee(t,e,i,n,r,s){te(t,e,0,i,n+r),te(t,e,1,i,n+s),te(t,e,2,i,n-s),te(t,e,3,i,n-r)}function ie(t){return(20091*t>>16)+t}function ne(t,e,i,n){var r,o=0,a=s(16);for(r=0;4>r;++r){var h=t[e+0]+t[e+8],l=t[e+0]-t[e+8],c=(35468*t[e+4]>>16)-ie(t[e+12]),u=ie(t[e+4])+(35468*t[e+12]>>16);a[o+0]=h+u,a[o+1]=l+c,a[o+2]=l-c,a[o+3]=h-u,o+=4,e++}for(r=o=0;4>r;++r)h=(t=a[o+0]+4)+a[o+8],l=t-a[o+8],c=(35468*a[o+4]>>16)-ie(a[o+12]),te(i,n,0,0,h+(u=ie(a[o+4])+(35468*a[o+12]>>16))),te(i,n,1,0,l+c),te(i,n,2,0,l-c),te(i,n,3,0,h-u),o++,n+=32}function re(t,e,i,n){var r=t[e+0]+4,s=35468*t[e+4]>>16,o=ie(t[e+4]),a=35468*t[e+1]>>16;ee(i,n,0,r+o,t=ie(t[e+1]),a),ee(i,n,1,r+s,t,a),ee(i,n,2,r-s,t,a),ee(i,n,3,r-o,t,a)}function se(t,e,i,n,r){ne(t,e,i,n),r&&ne(t,e+16,i,n+4)}function oe(t,e,i,n){on(t,e+0,i,n,1),on(t,e+32,i,n+128,1)}function ae(t,e,i,n){var r;for(t=t[e+0]+4,r=0;4>r;++r)for(e=0;4>e;++e)te(i,n,e,r,t)}function he(t,e,i,n){t[e+0]&&ln(t,e+0,i,n),t[e+16]&&ln(t,e+16,i,n+4),t[e+32]&&ln(t,e+32,i,n+128),t[e+48]&&ln(t,e+48,i,n+128+4)}function le(t,e,i,n){var r,o=s(16);for(r=0;4>r;++r){var a=t[e+0+r]+t[e+12+r],h=t[e+4+r]+t[e+8+r],l=t[e+4+r]-t[e+8+r],c=t[e+0+r]-t[e+12+r];o[0+r]=a+h,o[8+r]=a-h,o[4+r]=c+l,o[12+r]=c-l}for(r=0;4>r;++r)a=(t=o[0+4*r]+3)+o[3+4*r],h=o[1+4*r]+o[2+4*r],l=o[1+4*r]-o[2+4*r],c=t-o[3+4*r],i[n+0]=a+h>>3,i[n+16]=c+l>>3,i[n+32]=a-h>>3,i[n+48]=c-l>>3,n+=64}function ce(t,e,i){var n,r=e-32,s=Fn,o=255-t[r-1];for(n=0;n<i;++n){var a,h=s,l=o+t[e-1];for(a=0;a<i;++a)t[e+a]=h[l+t[r+a]];e+=32}}function ue(t,e){ce(t,e,4)}function de(t,e){ce(t,e,8)}function fe(t,e){ce(t,e,16)}function pe(t,e){var i;for(i=0;16>i;++i)n(t,e+32*i,t,e-32,16)}function ge(t,e){var i;for(i=16;0<i;--i)r(t,e,t[e-1],16),e+=32}function me(t,e,i){var n;for(n=0;16>n;++n)r(e,i+32*n,t,16)}function ye(t,e){var i,n=16;for(i=0;16>i;++i)n+=t[e-1+32*i]+t[e+i-32];me(n>>5,t,e)}function ve(t,e){var i,n=8;for(i=0;16>i;++i)n+=t[e-1+32*i];me(n>>4,t,e)}function _e(t,e){var i,n=8;for(i=0;16>i;++i)n+=t[e+i-32];me(n>>4,t,e)}function be(t,e){me(128,t,e)}function we(t,e,i){return t+2*e+i+2>>2}function xe(t,e){var i,r=e-32;for(r=new Uint8Array([we(t[r-1],t[r+0],t[r+1]),we(t[r+0],t[r+1],t[r+2]),we(t[r+1],t[r+2],t[r+3]),we(t[r+2],t[r+3],t[r+4])]),i=0;4>i;++i)n(t,e+32*i,r,0,r.length)}function Se(t,e){var i=t[e-1],n=t[e-1+32],r=t[e-1+64],s=t[e-1+96];E(t,e+0,16843009*we(t[e-1-32],i,n)),E(t,e+32,16843009*we(i,n,r)),E(t,e+64,16843009*we(n,r,s)),E(t,e+96,16843009*we(r,s,s))}function Me(t,e){var i,n=4;for(i=0;4>i;++i)n+=t[e+i-32]+t[e-1+32*i];for(n>>=3,i=0;4>i;++i)r(t,e+32*i,n,4)}function Ce(t,e){var i=t[e-1+0],n=t[e-1+32],r=t[e-1+64],s=t[e-1-32],o=t[e+0-32],a=t[e+1-32],h=t[e+2-32],l=t[e+3-32];t[e+0+96]=we(n,r,t[e-1+96]),t[e+1+96]=t[e+0+64]=we(i,n,r),t[e+2+96]=t[e+1+64]=t[e+0+32]=we(s,i,n),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=we(o,s,i),t[e+3+64]=t[e+2+32]=t[e+1+0]=we(a,o,s),t[e+3+32]=t[e+2+0]=we(h,a,o),t[e+3+0]=we(l,h,a)}function Ae(t,e){var i=t[e+1-32],n=t[e+2-32],r=t[e+3-32],s=t[e+4-32],o=t[e+5-32],a=t[e+6-32],h=t[e+7-32];t[e+0+0]=we(t[e+0-32],i,n),t[e+1+0]=t[e+0+32]=we(i,n,r),t[e+2+0]=t[e+1+32]=t[e+0+64]=we(n,r,s),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=we(r,s,o),t[e+3+32]=t[e+2+64]=t[e+1+96]=we(s,o,a),t[e+3+64]=t[e+2+96]=we(o,a,h),t[e+3+96]=we(a,h,h)}function Le(t,e){var i=t[e-1+0],n=t[e-1+32],r=t[e-1+64],s=t[e-1-32],o=t[e+0-32],a=t[e+1-32],h=t[e+2-32],l=t[e+3-32];t[e+0+0]=t[e+1+64]=s+o+1>>1,t[e+1+0]=t[e+2+64]=o+a+1>>1,t[e+2+0]=t[e+3+64]=a+h+1>>1,t[e+3+0]=h+l+1>>1,t[e+0+96]=we(r,n,i),t[e+0+64]=we(n,i,s),t[e+0+32]=t[e+1+96]=we(i,s,o),t[e+1+32]=t[e+2+96]=we(s,o,a),t[e+2+32]=t[e+3+96]=we(o,a,h),t[e+3+32]=we(a,h,l)}function Ne(t,e){var i=t[e+0-32],n=t[e+1-32],r=t[e+2-32],s=t[e+3-32],o=t[e+4-32],a=t[e+5-32],h=t[e+6-32],l=t[e+7-32];t[e+0+0]=i+n+1>>1,t[e+1+0]=t[e+0+64]=n+r+1>>1,t[e+2+0]=t[e+1+64]=r+s+1>>1,t[e+3+0]=t[e+2+64]=s+o+1>>1,t[e+0+32]=we(i,n,r),t[e+1+32]=t[e+0+96]=we(n,r,s),t[e+2+32]=t[e+1+96]=we(r,s,o),t[e+3+32]=t[e+2+96]=we(s,o,a),t[e+3+64]=we(o,a,h),t[e+3+96]=we(a,h,l)}function Ee(t,e){var i=t[e-1+0],n=t[e-1+32],r=t[e-1+64],s=t[e-1+96];t[e+0+0]=i+n+1>>1,t[e+2+0]=t[e+0+32]=n+r+1>>1,t[e+2+32]=t[e+0+64]=r+s+1>>1,t[e+1+0]=we(i,n,r),t[e+3+0]=t[e+1+32]=we(n,r,s),t[e+3+32]=t[e+1+64]=we(r,s,s),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=s}function Pe(t,e){var i=t[e-1+0],n=t[e-1+32],r=t[e-1+64],s=t[e-1+96],o=t[e-1-32],a=t[e+0-32],h=t[e+1-32],l=t[e+2-32];t[e+0+0]=t[e+2+32]=i+o+1>>1,t[e+0+32]=t[e+2+64]=n+i+1>>1,t[e+0+64]=t[e+2+96]=r+n+1>>1,t[e+0+96]=s+r+1>>1,t[e+3+0]=we(a,h,l),t[e+2+0]=we(o,a,h),t[e+1+0]=t[e+3+32]=we(i,o,a),t[e+1+32]=t[e+3+64]=we(n,i,o),t[e+1+64]=t[e+3+96]=we(r,n,i),t[e+1+96]=we(s,r,n)}function Ie(t,e){var i;for(i=0;8>i;++i)n(t,e+32*i,t,e-32,8)}function Oe(t,e){var i;for(i=0;8>i;++i)r(t,e,t[e-1],8),e+=32}function Re(t,e,i){var n;for(n=0;8>n;++n)r(e,i+32*n,t,8)}function Fe(t,e){var i,n=8;for(i=0;8>i;++i)n+=t[e+i-32]+t[e-1+32*i];Re(n>>4,t,e)}function Te(t,e){var i,n=4;for(i=0;8>i;++i)n+=t[e+i-32];Re(n>>3,t,e)}function ke(t,e){var i,n=4;for(i=0;8>i;++i)n+=t[e-1+32*i];Re(n>>3,t,e)}function je(t,e){Re(128,t,e)}function De(t,e,i){var n=t[e-i],r=t[e+0],s=3*(r-n)+On[1020+t[e-2*i]-t[e+i]],o=Rn[112+(s+4>>3)];t[e-i]=Fn[255+n+Rn[112+(s+3>>3)]],t[e+0]=Fn[255+r-o]}function Be(t,e,i,n){var r=t[e+0],s=t[e+i];return Tn[255+t[e-2*i]-t[e-i]]>n||Tn[255+s-r]>n}function qe(t,e,i,n){return 4*Tn[255+t[e-i]-t[e+0]]+Tn[255+t[e-2*i]-t[e+i]]<=n}function Ge(t,e,i,n,r){var s=t[e-3*i],o=t[e-2*i],a=t[e-i],h=t[e+0],l=t[e+i],c=t[e+2*i],u=t[e+3*i];return 4*Tn[255+a-h]+Tn[255+o-l]>n?0:Tn[255+t[e-4*i]-s]<=r&&Tn[255+s-o]<=r&&Tn[255+o-a]<=r&&Tn[255+u-c]<=r&&Tn[255+c-l]<=r&&Tn[255+l-h]<=r}function ze(t,e,i,n){var r=2*n+1;for(n=0;16>n;++n)qe(t,e+n,i,r)&&De(t,e+n,i)}function Ue(t,e,i,n){var r=2*n+1;for(n=0;16>n;++n)qe(t,e+n*i,1,r)&&De(t,e+n*i,1)}function We(t,e,i,n){var r;for(r=3;0<r;--r)ze(t,e+=4*i,i,n)}function Ye(t,e,i,n){var r;for(r=3;0<r;--r)Ue(t,e+=4,i,n)}function He(t,e,i,n,r,s,o,a){for(s=2*s+1;0<r--;){if(Ge(t,e,i,s,o))if(Be(t,e,i,a))De(t,e,i);else{var h=t,l=e,c=i,u=h[l-2*c],d=h[l-c],f=h[l+0],p=h[l+c],g=h[l+2*c],m=27*(v=On[1020+3*(f-d)+On[1020+u-p]])+63>>7,y=18*v+63>>7,v=9*v+63>>7;h[l-3*c]=Fn[255+h[l-3*c]+v],h[l-2*c]=Fn[255+u+y],h[l-c]=Fn[255+d+m],h[l+0]=Fn[255+f-m],h[l+c]=Fn[255+p-y],h[l+2*c]=Fn[255+g-v]}e+=n}}function Ve(t,e,i,n,r,s,o,a){for(s=2*s+1;0<r--;){if(Ge(t,e,i,s,o))if(Be(t,e,i,a))De(t,e,i);else{var h=t,l=e,c=i,u=h[l-c],d=h[l+0],f=h[l+c],p=Rn[112+(4+(g=3*(d-u))>>3)],g=Rn[112+(g+3>>3)],m=p+1>>1;h[l-2*c]=Fn[255+h[l-2*c]+m],h[l-c]=Fn[255+u+g],h[l+0]=Fn[255+d-p],h[l+c]=Fn[255+f-m]}e+=n}}function Xe(t,e,i,n,r,s){He(t,e,i,1,16,n,r,s)}function Ze(t,e,i,n,r,s){He(t,e,1,i,16,n,r,s)}function Ke(t,e,i,n,r,s){var o;for(o=3;0<o;--o)Ve(t,e+=4*i,i,1,16,n,r,s)}function Je(t,e,i,n,r,s){var o;for(o=3;0<o;--o)Ve(t,e+=4,1,i,16,n,r,s)}function Qe(t,e,i,n,r,s,o,a){He(t,e,r,1,8,s,o,a),He(i,n,r,1,8,s,o,a)}function $e(t,e,i,n,r,s,o,a){He(t,e,1,r,8,s,o,a),He(i,n,1,r,8,s,o,a)}function ti(t,e,i,n,r,s,o,a){Ve(t,e+4*r,r,1,8,s,o,a),Ve(i,n+4*r,r,1,8,s,o,a)}function ei(t,e,i,n,r,s,o,a){Ve(t,e+4,1,r,8,s,o,a),Ve(i,n+4,1,r,8,s,o,a)}function ii(){this.ba=new ot,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ht,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ni(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ri(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function si(){this.ua=0,this.Wa=new T,this.vb=new T,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new f,this.yc=new u}function oi(){this.xb=this.a=0,this.l=new Ht,this.ca=new ot,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new si,this.ab=0,this.gc=o(4,ri),this.Oc=0}function ai(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ht,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hi(t,e,i,n,r,s,o){for(t=null==t?0:t[e+0],e=0;e<o;++e)r[s+e]=t+i[n+e]&255,t=r[s+e]}function li(t,e,i,n,r,s,o){var a;if(null==t)hi(null,null,i,n,r,s,o);else for(a=0;a<o;++a)r[s+a]=t[e+a]+i[n+a]&255}function ci(t,e,i,n,r,s,o){if(null==t)hi(null,null,i,n,r,s,o);else{var a,h=t[e+0],l=h,c=h;for(a=0;a<o;++a)l=c+(h=t[e+a])-l,c=i[n+a]+(-256&l?0>l?0:255:l)&255,l=h,r[s+a]=c}}function ui(t,i,r,o){var a=i.width,h=i.o;if(e(null!=t&&null!=i),0>r||0>=o||r+o>h)return null;if(!t.Cc){if(null==t.ga){var l;if(t.ga=new ai,(l=null==t.ga)||(l=i.width*i.o,e(0==t.Gb.length),t.Gb=s(l),t.Uc=0,null==t.Gb?l=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,l=1),l=!l),!l){l=t.ga;var c=t.Fa,u=t.P,d=t.qc,f=t.mb,p=t.nb,g=u+1,m=d-1,v=l.l;if(e(null!=c&&null!=f&&null!=i),mr[0]=null,mr[1]=hi,mr[2]=li,mr[3]=ci,l.ca=f,l.tb=p,l.c=i.width,l.i=i.height,e(0<l.c&&0<l.i),1>=d)i=0;else if(l.$a=c[u+0]>>0&3,l.Z=c[u+0]>>2&3,l.Lc=c[u+0]>>4&3,u=c[u+0]>>6&3,0>l.$a||1<l.$a||4<=l.Z||1<l.Lc||u)i=0;else if(v.put=ft,v.ac=dt,v.bc=pt,v.ma=l,v.width=i.width,v.height=i.height,v.Da=i.Da,v.v=i.v,v.va=i.va,v.j=i.j,v.o=i.o,l.$a)t:{e(1==l.$a),i=Nt();e:for(;;){if(null==i){i=0;break t}if(e(null!=l),l.mc=i,i.c=l.c,i.i=l.i,i.l=l.l,i.l.ma=l,i.l.width=l.c,i.l.height=l.i,i.a=0,y(i.m,c,g,m),!Et(l.c,l.i,1,i,null))break e;if(1==i.ab&&3==i.gc[0].hc&&St(i.s)?(l.ic=1,c=i.c*i.i,i.Ta=null,i.Ua=0,i.V=s(c),i.Ba=0,null==i.V?(i.a=1,i=0):i=1):(l.ic=0,i=Pt(i,l.c)),!i)break e;i=1;break t}l.mc=null,i=0}else i=m>=l.c*l.i;l=!i}if(l)return null;1!=t.ga.Lc?t.Ga=0:o=h-r}e(null!=t.ga),e(r+o<=h);t:{if(i=(c=t.ga).c,h=c.l.o,0==c.$a){if(g=t.rc,m=t.Vc,v=t.Fa,u=t.P+1+r*i,d=t.mb,f=t.nb+r*i,e(u<=t.P+t.qc),0!=c.Z)for(e(null!=mr[c.Z]),l=0;l<o;++l)mr[c.Z](g,m,v,u,d,f,i),g=d,m=f,f+=i,u+=i;else for(l=0;l<o;++l)n(d,f,v,u,i),g=d,m=f,f+=i,u+=i;t.rc=g,t.Vc=m}else{if(e(null!=c.mc),i=r+o,e(null!=(l=c.mc)),e(i<=l.i),l.C>=i)i=1;else if(c.ic||mi(),c.ic){c=l.V,g=l.Ba,m=l.c;var _=l.i,b=(v=1,u=l.$/m,d=l.$%m,f=l.m,p=l.s,l.$),w=m*_,x=m*i,M=p.wc,A=b<x?bt(p,d,u):null;e(b<=w),e(i<=_),e(St(p));e:for(;;){for(;!f.h&&b<x;){if(d&M||(A=bt(p,d,u)),e(null!=A),C(f),256>(_=vt(A.G[0],A.H[0],f)))c[g+b]=_,++b,++d>=m&&(d=0,++u<=i&&!(u%16)&&Ct(l,u));else{if(!(280>_)){v=0;break e}_=mt(_-256,f);var L,N=vt(A.G[4],A.H[4],f);if(C(f),!(b>=(N=yt(m,N=mt(N,f)))&&w-b>=_)){v=0;break e}for(L=0;L<_;++L)c[g+b+L]=c[g+b+L-N];for(b+=_,d+=_;d>=m;)d-=m,++u<=i&&!(u%16)&&Ct(l,u);b<x&&d&M&&(A=bt(p,d,u))}e(f.h==S(f))}Ct(l,u>i?i:u);break e}!v||f.h&&b<w?(v=0,l.a=f.h?5:3):l.$=b,i=v}else i=At(l,l.V,l.Ba,l.c,l.i,i,It);if(!i){o=0;break t}}r+o>=h&&(t.Cc=1),o=1}if(!o)return null;if(t.Cc&&(null!=(o=t.ga)&&(o.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+r*a}function di(t,e,i,n,r,s){for(;0<r--;){var o,a=t,h=e+(i?1:0),l=t,c=e+(i?0:3);for(o=0;o<n;++o){var u=l[c+4*o];255!=u&&(u*=32897,a[h+4*o+0]=a[h+4*o+0]*u>>23,a[h+4*o+1]=a[h+4*o+1]*u>>23,a[h+4*o+2]=a[h+4*o+2]*u>>23)}e+=s}}function fi(t,e,i,n,r){for(;0<n--;){var s;for(s=0;s<i;++s){var o=t[e+2*s+0],a=15&(l=t[e+2*s+1]),h=4369*a,l=(240&l|l>>4)*h>>16;t[e+2*s+0]=(240&o|o>>4)*h>>16&240|(15&o|o<<4)*h>>16>>4&15,t[e+2*s+1]=240&l|a}e+=r}}function pi(t,e,i,n,r,s,o,a){var h,l,c=255;for(l=0;l<r;++l){for(h=0;h<n;++h){var u=t[e+h];s[o+4*h]=u,c&=u}e+=i,o+=a}return 255!=c}function gi(t,e,i,n,r){var s;for(s=0;s<r;++s)i[n+s]=t[e+s]>>8}function mi(){Sn=di,Mn=fi,Cn=pi,An=gi}function yi(i,n,r){t[i]=function(t,i,s,o,a,h,l,c,u,d,f,p,g,m,y,v,_){var b,w=_-1>>1,x=a[h+0]|l[c+0]<<16,S=u[d+0]|f[p+0]<<16;e(null!=t);var M=3*x+S+131074>>2;for(n(t[i+0],255&M,M>>16,g,m),null!=s&&(M=3*S+x+131074>>2,n(s[o+0],255&M,M>>16,y,v)),b=1;b<=w;++b){var C=a[h+b]|l[c+b]<<16,A=u[d+b]|f[p+b]<<16,L=x+C+S+A+524296,N=L+2*(C+S)>>3;M=N+x>>1,x=(L=L+2*(x+A)>>3)+C>>1,n(t[i+2*b-1],255&M,M>>16,g,m+(2*b-1)*r),n(t[i+2*b-0],255&x,x>>16,g,m+(2*b-0)*r),null!=s&&(M=L+S>>1,x=N+A>>1,n(s[o+2*b-1],255&M,M>>16,y,v+(2*b-1)*r),n(s[o+2*b+0],255&x,x>>16,y,v+(2*b+0)*r)),x=C,S=A}1&_||(M=3*x+S+131074>>2,n(t[i+_-1],255&M,M>>16,g,m+(_-1)*r),null!=s&&(M=3*S+x+131074>>2,n(s[o+_-1],255&M,M>>16,y,v+(_-1)*r)))}}function vi(){yr[kn]=vr,yr[jn]=br,yr[Dn]=_r,yr[Bn]=wr,yr[qn]=xr,yr[Gn]=Sr,yr[zn]=Mr,yr[Un]=br,yr[Wn]=wr,yr[Yn]=xr,yr[Hn]=Sr}function _i(t){return t&~Pr?0>t?0:255:t>>Er}function bi(t,e){return _i((19077*t>>8)+(26149*e>>8)-14234)}function wi(t,e,i){return _i((19077*t>>8)-(6419*e>>8)-(13320*i>>8)+8708)}function xi(t,e){return _i((19077*t>>8)+(33050*e>>8)-17685)}function Si(t,e,i,n,r){n[r+0]=bi(t,i),n[r+1]=wi(t,e,i),n[r+2]=xi(t,e)}function Mi(t,e,i,n,r){n[r+0]=xi(t,e),n[r+1]=wi(t,e,i),n[r+2]=bi(t,i)}function Ci(t,e,i,n,r){var s=wi(t,e,i);e=s<<3&224|xi(t,e)>>3,n[r+0]=248&bi(t,i)|s>>5,n[r+1]=e}function Ai(t,e,i,n,r){var s=240&xi(t,e)|15;n[r+0]=240&bi(t,i)|wi(t,e,i)>>4,n[r+1]=s}function Li(t,e,i,n,r){n[r+0]=255,Si(t,e,i,n,r+1)}function Ni(t,e,i,n,r){Mi(t,e,i,n,r),n[r+3]=255}function Ei(t,e,i,n,r){Si(t,e,i,n,r),n[r+3]=255}function Yt(t,e){return 0>t?0:t>e?e:t}function Pi(e,i,n){t[e]=function(t,e,r,s,o,a,h,l,c){for(var u=l+(-2&c)*n;l!=u;)i(t[e+0],r[s+0],o[a+0],h,l),i(t[e+1],r[s+0],o[a+0],h,l+n),e+=2,++s,++a,l+=2*n;1&c&&i(t[e+0],r[s+0],o[a+0],h,l)}}function Ii(t,e,i){return 0==i?0==t?0==e?6:5:0==e?4:0:i}function Oi(t,e,i,n,r){switch(t>>>30){case 3:on(e,i,n,r,0);break;case 2:an(e,i,n,r);break;case 1:ln(e,i,n,r)}}function Ri(t,e){var i,s,o=e.M,a=e.Nb,h=t.oc,l=t.pc+40,c=t.oc,u=t.pc+584,d=t.oc,f=t.pc+600;for(i=0;16>i;++i)h[l+32*i-1]=129;for(i=0;8>i;++i)c[u+32*i-1]=129,d[f+32*i-1]=129;for(0<o?h[l-1-32]=c[u-1-32]=d[f-1-32]=129:(r(h,l-32-1,127,21),r(c,u-32-1,127,9),r(d,f-32-1,127,9)),s=0;s<t.za;++s){var p=e.ya[e.aa+s];if(0<s){for(i=-1;16>i;++i)n(h,l+32*i-4,h,l+32*i+12,4);for(i=-1;8>i;++i)n(c,u+32*i-4,c,u+32*i+4,4),n(d,f+32*i-4,d,f+32*i+4,4)}var g=t.Gd,m=t.Hd+s,y=p.ad,v=p.Hc;if(0<o&&(n(h,l-32,g[m].y,0,16),n(c,u-32,g[m].f,0,8),n(d,f-32,g[m].ea,0,8)),p.Za){var _=h,b=l-32+16;for(0<o&&(s>=t.za-1?r(_,b,g[m].y[15],4):n(_,b,g[m+1].y,0,4)),i=0;4>i;i++)_[b+128+i]=_[b+256+i]=_[b+384+i]=_[b+0+i];for(i=0;16>i;++i,v<<=2)_=h,b=l+Dr[i],dr[p.Ob[i]](_,b),Oi(v,y,16*+i,_,b)}else if(_=Ii(s,o,p.Ob[0]),ur[_](h,l),0!=v)for(i=0;16>i;++i,v<<=2)Oi(v,y,16*+i,h,l+Dr[i]);for(i=p.Gc,_=Ii(s,o,p.Dd),fr[_](c,u),fr[_](d,f),v=y,_=c,b=u,255&(p=i>>0)&&(170&p?hn(v,256,_,b):cn(v,256,_,b)),p=d,v=f,255&(i>>=8)&&(170&i?hn(y,320,p,v):cn(y,320,p,v)),o<t.Ub-1&&(n(g[m].y,0,h,l+480,16),n(g[m].f,0,c,u+224,8),n(g[m].ea,0,d,f+224,8)),i=8*a*t.B,g=t.sa,m=t.ta+16*s+16*a*t.R,y=t.qa,p=t.ra+8*s+i,v=t.Ha,_=t.Ia+8*s+i,i=0;16>i;++i)n(g,m+i*t.R,h,l+32*i,16);for(i=0;8>i;++i)n(y,p+i*t.B,c,u+32*i,8),n(v,_+i*t.B,d,f+32*i,8)}}function Fi(t,n,r,s,o,a,h,l,c){var u=[0],d=[0],f=0,p=null!=c?c.kd:0,g=null!=c?c:new ni;if(null==t||12>r)return 7;g.data=t,g.w=n,g.ha=r,n=[n],r=[r],g.gb=[g.gb];t:{var m=n,v=r,_=g.gb;if(e(null!=t),e(null!=v),e(null!=_),_[0]=0,12<=v[0]&&!i(t,m[0],"RIFF")){if(i(t,m[0]+8,"WEBP")){_=3;break t}var b=O(t,m[0]+4);if(12>b||4294967286<b){_=3;break t}if(p&&b>v[0]-8){_=7;break t}_[0]=b,m[0]+=12,v[0]-=12}_=0}if(0!=_)return _;for(b=0<g.gb[0],r=r[0];;){t:{var x=t;v=n,_=r;var S=u,M=d,C=m=[0];if((N=f=[f])[0]=0,8>_[0])_=7;else{if(!i(x,v[0],"VP8X")){if(10!=O(x,v[0]+4)){_=3;break t}if(18>_[0]){_=7;break t}var A=O(x,v[0]+8),L=1+I(x,v[0]+12);if(2147483648<=L*(x=1+I(x,v[0]+15))){_=3;break t}null!=C&&(C[0]=A),null!=S&&(S[0]=L),null!=M&&(M[0]=x),v[0]+=18,_[0]-=18,N[0]=1}_=0}}if(f=f[0],m=m[0],0!=_)return _;if(v=!!(2&m),!b&&f)return 3;if(null!=a&&(a[0]=!!(16&m)),null!=h&&(h[0]=v),null!=l&&(l[0]=0),h=u[0],m=d[0],f&&v&&null==c){_=0;break}if(4>r){_=7;break}if(b&&f||!b&&!f&&!i(t,n[0],"ALPH")){r=[r],g.na=[g.na],g.P=[g.P],g.Sa=[g.Sa];t:{A=t,_=n,b=r;var N=g.gb;S=g.na,M=g.P,C=g.Sa,L=22,e(null!=A),e(null!=b),x=_[0];var E=b[0];for(e(null!=S),e(null!=C),S[0]=null,M[0]=null,C[0]=0;;){if(_[0]=x,b[0]=E,8>E){_=7;break t}var P=O(A,x+4);if(4294967286<P){_=3;break t}var R=8+P+1&-2;if(L+=R,0<N&&L>N){_=3;break t}if(!i(A,x,"VP8 ")||!i(A,x,"VP8L")){_=0;break t}if(E[0]<R){_=7;break t}i(A,x,"ALPH")||(S[0]=A,M[0]=x+8,C[0]=P),x+=R,E-=R}}if(r=r[0],g.na=g.na[0],g.P=g.P[0],g.Sa=g.Sa[0],0!=_)break}r=[r],g.Ja=[g.Ja],g.xa=[g.xa];t:if(N=t,_=n,b=r,S=g.gb[0],M=g.Ja,C=g.xa,A=_[0],x=!i(N,A,"VP8 "),L=!i(N,A,"VP8L"),e(null!=N),e(null!=b),e(null!=M),e(null!=C),8>b[0])_=7;else{if(x||L){if(N=O(N,A+4),12<=S&&N>S-12){_=3;break t}if(p&&N>b[0]-8){_=7;break t}M[0]=N,_[0]+=8,b[0]-=8,C[0]=L}else C[0]=5<=b[0]&&47==N[A+0]&&!(N[A+4]>>5),M[0]=b[0];_=0}if(r=r[0],g.Ja=g.Ja[0],g.xa=g.xa[0],n=n[0],0!=_)break;if(4294967286<g.Ja)return 3;if(null==l||v||(l[0]=g.xa?2:1),h=[h],m=[m],g.xa){if(5>r){_=7;break}l=h,p=m,v=a,null==t||5>r?t=0:5<=r&&47==t[n+0]&&!(t[n+4]>>5)?(b=[0],N=[0],S=[0],y(M=new w,t,n,r),gt(M,b,N,S)?(null!=l&&(l[0]=b[0]),null!=p&&(p[0]=N[0]),null!=v&&(v[0]=S[0]),t=1):t=0):t=0}else{if(10>r){_=7;break}l=m,null==t||10>r||!Zt(t,n+3,r-3)?t=0:(p=t[n+0]|t[n+1]<<8|t[n+2]<<16,v=16383&(t[n+7]<<8|t[n+6]),t=16383&(t[n+9]<<8|t[n+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=g.Ja||!v||!t?t=0:(h&&(h[0]=v),l&&(l[0]=t),t=1))}if(!t)return 3;if(h=h[0],m=m[0],f&&(u[0]!=h||d[0]!=m))return 3;null!=c&&(c[0]=g,c.offset=n-c.w,e(4294967286>n-c.w),e(c.offset==c.ha-r));break}return 0==_||7==_&&f&&null==c?(null!=a&&(a[0]|=null!=g.na&&0<g.na.length),null!=s&&(s[0]=h),null!=o&&(o[0]=m),0):_}function Ti(t,e,i){var n=e.width,r=e.height,s=0,o=0,a=n,h=r;if(e.Da=null!=t&&0<t.Da,e.Da&&(a=t.cd,h=t.bd,s=t.v,o=t.j,11>i||(s&=-2,o&=-2),0>s||0>o||0>=a||0>=h||s+a>n||o+h>r))return 0;if(e.v=s,e.j=o,e.va=s+a,e.o=o+h,e.U=a,e.T=h,e.da=null!=t&&0<t.da,e.da){if(!k(a,h,i=[t.ib],s=[t.hb]))return 0;e.ib=i[0],e.hb=s[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*n/4&&e.hb<3*r/4,e.Kb=0),1}function ki(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function ji(t,e,i,n){if(null==n||0>=t||0>=e)return 2;if(null!=i){if(i.Da){var r=i.cd,o=i.bd,a=-2&i.v,h=-2&i.j;if(0>a||0>h||0>=r||0>=o||a+r>t||h+o>e)return 2;t=r,e=o}if(i.da){if(!k(t,e,r=[i.ib],o=[i.hb]))return 2;t=r[0],e=o[0]}}n.width=t,n.height=e;t:{var l=n.width,c=n.height;if(t=n.S,0>=l||0>=c||!(t>=kn&&13>t))t=2;else{if(0>=n.Rd&&null==n.sd){a=o=r=e=0;var u=(h=l*zr[t])*c;if(11>t||(o=(c+1)/2*(e=(l+1)/2),12==t&&(a=(r=l)*c)),null==(c=s(u+2*o+a))){t=1;break t}n.sd=c,11>t?((l=n.f.RGBA).eb=c,l.fb=0,l.A=h,l.size=u):((l=n.f.kb).y=c,l.O=0,l.fa=h,l.Fd=u,l.f=c,l.N=0+u,l.Ab=e,l.Cd=o,l.ea=c,l.W=0+u+o,l.Db=e,l.Ed=o,12==t&&(l.F=c,l.J=0+u+2*o),l.Tc=a,l.lb=r)}if(e=1,r=n.S,o=n.width,a=n.height,r>=kn&&13>r)if(11>r)t=n.f.RGBA,e&=(h=Math.abs(t.A))*(a-1)+o<=t.size,e&=h>=o*zr[r],e&=null!=t.eb;else{t=n.f.kb,h=(o+1)/2,u=(a+1)/2,l=Math.abs(t.fa),c=Math.abs(t.Ab);var d=Math.abs(t.Db),f=Math.abs(t.lb),p=f*(a-1)+o;e&=l*(a-1)+o<=t.Fd,e&=c*(u-1)+h<=t.Cd,e=(e&=d*(u-1)+h<=t.Ed)&l>=o&c>=h&d>=h,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==r&&(e&=f>=o,e&=p<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=i&&i.fd&&(t=ki(n)),t}var Di=64,Bi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qi=24,Gi=32,zi=8,Ui=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,i){return e[i+0]},t.Predictor3=function(t,e,i){return e[i+1]},t.Predictor4=function(t,e,i){return e[i-1]},t.Predictor5=function(t,e,i){return G(G(t,e[i+1]),e[i+0])},t.Predictor6=function(t,e,i){return G(t,e[i-1])},t.Predictor7=function(t,e,i){return G(t,e[i+0])},t.Predictor8=function(t,e,i){return G(e[i-1],e[i+0])},t.Predictor9=function(t,e,i){return G(e[i+0],e[i+1])},t.Predictor10=function(t,e,i){return G(G(t,e[i-1]),G(e[i+0],e[i+1]))},t.Predictor11=function(t,e,i){var n=e[i+0];return 0>=W(n>>24&255,t>>24&255,(e=e[i-1])>>24&255)+W(n>>16&255,t>>16&255,e>>16&255)+W(n>>8&255,t>>8&255,e>>8&255)+W(255&n,255&t,255&e)?n:t},t.Predictor12=function(t,e,i){var n=e[i+0];return(z((t>>24&255)+(n>>24&255)-((e=e[i-1])>>24&255))<<24|z((t>>16&255)+(n>>16&255)-(e>>16&255))<<16|z((t>>8&255)+(n>>8&255)-(e>>8&255))<<8|z((255&t)+(255&n)-(255&e)))>>>0},t.Predictor13=function(t,e,i){var n=e[i-1];return(U((t=G(t,e[i+0]))>>24&255,n>>24&255)<<24|U(t>>16&255,n>>16&255)<<16|U(t>>8&255,n>>8&255)<<8|U(t>>0&255,n>>0&255))>>>0};var Wi=t.PredictorAdd0;t.PredictorAdd1=Y,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var Yi=t.PredictorAdd2;Z("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),Z("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var Hi,Vi=t.ColorIndexInverseTransform,Xi=t.MapARGB,Zi=t.VP8LColorIndexInverseTransformAlpha,Ki=t.MapAlpha,Ji=t.VP8LPredictorsAdd=[];Ji.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Qi,$i,tn,en,nn,rn,sn,on,an,hn,ln,cn,un,dn,fn,pn,gn,mn,yn,vn,_n,bn,wn,xn,Sn,Mn,Cn,An,Ln=s(511),Nn=s(2041),En=s(225),Pn=s(767),In=0,On=Nn,Rn=En,Fn=Pn,Tn=Ln,kn=0,jn=1,Dn=2,Bn=3,qn=4,Gn=5,zn=6,Un=7,Wn=8,Yn=9,Hn=10,Vn=[2,3,7],Xn=[3,3,11],Zn=[280,256,256,256,40],Kn=[0,1,1,1,0],Jn=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$n=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tr=8,er=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ir=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nr=null,rr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],or=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ar=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ur=[],dr=[],fr=[],pr=1,gr=2,mr=[],yr=[];yi("UpsampleRgbLinePair",Si,3),yi("UpsampleBgrLinePair",Mi,3),yi("UpsampleRgbaLinePair",Ei,4),yi("UpsampleBgraLinePair",Ni,4),yi("UpsampleArgbLinePair",Li,4),yi("UpsampleRgba4444LinePair",Ai,2),yi("UpsampleRgb565LinePair",Ci,2);var vr=t.UpsampleRgbLinePair,_r=t.UpsampleBgrLinePair,br=t.UpsampleRgbaLinePair,wr=t.UpsampleBgraLinePair,xr=t.UpsampleArgbLinePair,Sr=t.UpsampleRgba4444LinePair,Mr=t.UpsampleRgb565LinePair,Cr=16,Ar=1<<Cr-1,Lr=-227,Nr=482,Er=6,Pr=(256<<Er)-1,Ir=0,Or=s(256),Rr=s(256),Fr=s(256),Tr=s(256),kr=s(Nr-Lr),jr=s(Nr-Lr);Pi("YuvToRgbRow",Si,3),Pi("YuvToBgrRow",Mi,3),Pi("YuvToRgbaRow",Ei,4),Pi("YuvToBgraRow",Ni,4),Pi("YuvToArgbRow",Li,4),Pi("YuvToRgba4444Row",Ai,2),Pi("YuvToRgb565Row",Ci,2);var Dr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Br=[0,2,8],qr=[8,7,6,4,4,2,2,2,1,1,1,1],Gr=1;this.WebPDecodeRGBA=function(t,i,n,r,s){var o=jn,a=new ii,h=new ot;a.ba=h,h.S=o,h.width=[h.width],h.height=[h.height];var l=h.width,c=h.height,u=new at;if(null==u||null==t)var d=2;else e(null!=u),d=Fi(t,i,n,u.width,u.height,u.Pd,u.Qd,u.format,null);if(0!=d?l=0:(null!=l&&(l[0]=u.width[0]),null!=c&&(c[0]=u.height[0]),l=1),l){h.width=h.width[0],h.height=h.height[0],null!=r&&(r[0]=h.width),null!=s&&(s[0]=h.height);t:{if(r=new Ht,(s=new ni).data=t,s.w=i,s.ha=n,s.kd=1,i=[0],e(null!=s),(0==(t=Fi(s.data,s.w,s.ha,null,null,null,i,null,s))||7==t)&&i[0]&&(t=4),0==(i=t)){if(e(null!=a),r.data=s.data,r.w=s.w+s.offset,r.ha=s.ha-s.offset,r.put=ft,r.ac=dt,r.bc=pt,r.ma=a,s.xa){if(null==(t=Nt())){a=1;break t}if(function(t,i){var n=[0],r=[0],s=[0];e:for(;;){if(null==t)return 0;if(null==i)return t.a=2,0;if(t.l=i,t.a=0,y(t.m,i.data,i.w,i.ha),!gt(t.m,n,r,s)){t.a=3;break e}if(t.xb=gr,i.width=n[0],i.height=r[0],!Et(n[0],r[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,r)){if(r=0==(i=ji(r.width,r.height,a.Oa,a.ba))){e:{r=t;i:for(;;){if(null==r){r=0;break e}if(e(null!=r.s.yc),e(null!=r.s.Ya),e(0<r.s.Wb),e(null!=(n=r.l)),e(null!=(s=n.ma)),0!=r.xb){if(r.ca=s.ba,r.tb=s.tb,e(null!=r.ca),!Ti(s.Oa,n,Bn)){r.a=2;break i}if(!Pt(r,n.width))break i;if(n.da)break i;if((n.da||nt(r.ca.S))&&mi(),11>r.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=r.ca.f.kb.F&&mi()),r.Pb&&0<r.s.ua&&null==r.s.vb.X&&!R(r.s.vb,r.s.Wa.Xa)){r.a=1;break i}r.xb=0}if(!At(r,r.V,r.Ba,r.c,r.i,n.o,xt))break i;s.Dc=r.Ma,r=1;break e}e(0!=r.a),r=0}r=!r}r&&(i=t.a)}else i=t.a}else{if(null==(t=new Vt)){a=1;break t}if(t.Fa=s.na,t.P=s.P,t.qc=s.Sa,Kt(t,r)){if(0==(i=ji(r.width,r.height,a.Oa,a.ba))){if(t.Aa=0,n=a.Oa,e(null!=(s=t)),null!=n){if(0<(l=0>(l=n.Md)?0:100<l?255:255*l/100)){for(c=u=0;4>c;++c)12>(d=s.pb[c]).lc&&(d.ia=l*qr[0>d.lc?0:d.lc]>>3),u|=d.ia;u&&(alert("todo:VP8InitRandom"),s.ia=1)}s.Ga=n.Id,100<s.Ga?s.Ga=100:0>s.Ga&&(s.Ga=0)}$t(t,r)||(i=t.a)}}else i=t.a}0==i&&null!=a.Oa&&a.Oa.fd&&(i=ki(a.ba))}a=i}o=0!=a?null:11>o?h.f.RGBA.eb:h.f.kb.y}else o=null;return o};var zr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(t,e){for(var i="",n=0;n<4;n++)i+=String.fromCharCode(t[e++]);return i}function c(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function u(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new h;var d=[0],f=[0],p=[],g=new h,m=t,y=function(t,e){var i={},n=0,r=!1,s=0,o=0;if(i.frames=[],!function(t,e,i,n){for(var r=0;r<4;r++)if(t[e+r]!="RIFF".charCodeAt(r))return!0;return!1}(t,e)){var a,h;for(u(t,e+=4),e+=8;e<t.length;){var d=l(t,e),f=u(t,e+=4);e+=4;var p=f+(1&f);switch(d){case"VP8 ":case"VP8L":void 0===i.frames[n]&&(i.frames[n]={}),(y=i.frames[n]).src_off=r?o:e-8,y.src_size=s+f+8,n++,r&&(r=!1,s=0,o=0);break;case"VP8X":(y=i.header={}).feature_flags=t[e];var g=e+4;y.canvas_width=1+c(t,g),g+=3,y.canvas_height=1+c(t,g),g+=3;break;case"ALPH":r=!0,s=p+8,o=e-8;break;case"ANIM":(y=i.header).bgcolor=u(t,e),g=e+4,y.loop_count=(a=t)[(h=g)+0]<<0|a[h+1]<<8,g+=2;break;case"ANMF":var m,y;(y=i.frames[n]={}).offset_x=2*c(t,e),e+=3,y.offset_y=2*c(t,e),e+=3,y.width=1+c(t,e),e+=3,y.height=1+c(t,e),e+=3,y.duration=c(t,e),e+=3,m=t[e++],y.dispose=1&m,y.blend=m>>1&1}"ANMF"!=d&&(e+=p)}return i}}(m,0);y.response=m,y.rgbaoutput=!0,y.dataurl=!1;var v=y.header?y.header:null,_=y.frames?y.frames:null;if(v){v.loop_counter=v.loop_count,d=[v.canvas_height],f=[v.canvas_width];for(var b=0;b<_.length&&0!=_[b].blend;b++);}var w=_[0],x=g.WebPDecodeRGBA(m,w.src_off,w.src_size,f,d);w.rgba=x,w.imgwidth=f[0],w.imgheight=d[0];for(var S=0;S<f[0]*d[0]*4;S++)p[S]=x[S];return this.width=f,this.height=d,this.data=p,this}!function(t){var e=function(e,n,h,l){var c=4,u=s;switch(l){case t.image_compression.FAST:c=1,u=r;break;case t.image_compression.MEDIUM:c=6,u=o;break;case t.image_compression.SLOW:c=9,u=a}var d=uu(e=i(e,n,h,u),{level:c});return t.__addimage__.arrayBufferToBinaryString(d)},i=function(t,e,i,n){for(var r,s,o,a=t.length/e,h=new Uint8Array(t.length+a),u=l(),d=0;d<a;d+=1){if(o=d*e,r=t.subarray(o,o+e),n)h.set(n(r,i,s),o+d);else{for(var f,p=u.length,g=[];f<p;f+=1)g[f]=u[f](r,i,s);var m=c(g.concat());h.set(g[m],o+d)}s=r}return h},n=function(t){var e=Array.apply([],t);return e.unshift(0),e},r=function(t,e){var i,n=[],r=t.length;n[0]=1;for(var s=0;s<r;s+=1)i=t[s-e]||0,n[s+1]=t[s]-i+256&255;return n},s=function(t,e,i){var n,r=[],s=t.length;r[0]=2;for(var o=0;o<s;o+=1)n=i&&i[o]||0,r[o+1]=t[o]-n+256&255;return r},o=function(t,e,i){var n,r,s=[],o=t.length;s[0]=3;for(var a=0;a<o;a+=1)n=t[a-e]||0,r=i&&i[a]||0,s[a+1]=t[a]+256-(n+r>>>1)&255;return s},a=function(t,e,i){var n,r,s,o,a=[],l=t.length;a[0]=4;for(var c=0;c<l;c+=1)n=t[c-e]||0,r=i&&i[c]||0,s=i&&i[c-e]||0,o=h(n,r,s),a[c+1]=t[c]-o+256&255;return a},h=function(t,e,i){if(t===e&&e===i)return t;var n=Math.abs(e-i),r=Math.abs(t-i),s=Math.abs(t+e-i-i);return n<=r&&n<=s?t:r<=s?e:i},l=function(){return[n,r,s,o,a]},c=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))};t.processPNG=function(i,n,r,s){var o,a,h,l,c,u,d,f,p,g,m,y,v,_,b,w=this.decode.FLATE_DECODE,x="";if(this.__addimage__.isArrayBuffer(i)&&(i=new Uint8Array(i)),this.__addimage__.isArrayBufferView(i)){if(i=(h=new sf(i)).imgData,a=h.bits,o=h.colorSpace,c=h.colors,-1!==[4,6].indexOf(h.colorType)){if(8===h.bits){p=(f=32==h.pixelBitlength?new Uint32Array(h.decodePixels().buffer):16==h.pixelBitlength?new Uint16Array(h.decodePixels().buffer):new Uint8Array(h.decodePixels().buffer)).length,m=new Uint8Array(p*h.colors),g=new Uint8Array(p);var S,M=h.pixelBitlength-h.bits;for(_=0,b=0;_<p;_++){for(v=f[_],S=0;S<M;)m[b++]=v>>>S&255,S+=h.bits;g[_]=v>>>S&255}}if(16===h.bits){p=(f=new Uint32Array(h.decodePixels().buffer)).length,m=new Uint8Array(p*(32/h.pixelBitlength)*h.colors),g=new Uint8Array(p*(32/h.pixelBitlength)),y=h.colors>1,_=0,b=0;for(var C=0;_<p;)v=f[_++],m[b++]=v>>>0&255,y&&(m[b++]=v>>>16&255,v=f[_++],m[b++]=v>>>0&255),g[C++]=v>>>16&255;a=8}s!==t.image_compression.NONE?(i=e(m,h.width*h.colors,h.colors,s),d=e(g,h.width,1,s)):(i=m,d=g,w=void 0)}if(3===h.colorType&&(o=this.color_spaces.INDEXED,u=h.palette,h.transparency.indexed)){var A=h.transparency.indexed,L=0;for(_=0,p=A.length;_<p;++_)L+=A[_];if((L/=255)==p-1&&-1!==A.indexOf(0))l=[A.indexOf(0)];else if(L!==p){for(f=h.decodePixels(),g=new Uint8Array(f.length),_=0,p=f.length;_<p;_++)g[_]=A[f[_]];d=e(g,h.width,1)}}var N=function(e){var i;switch(e){case t.image_compression.FAST:i=11;break;case t.image_compression.MEDIUM:i=13;break;case t.image_compression.SLOW:i=14;break;default:i=12}return i}(s);return w===this.decode.FLATE_DECODE&&(x="/Predictor "+N+" "),x+="/Colors "+c+" /BitsPerComponent "+a+" /Columns "+h.width,(this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i))&&(i=this.__addimage__.arrayBufferToBinaryString(i)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:r,data:i,index:n,filter:w,decodeParameters:x,transparency:l,palette:u,sMask:d,predictor:N,width:h.width,height:h.height,bitsPerComponent:a,colorSpace:o}}}}(Hu.API),function(t){t.processGIF89A=function(e,i,n,r){var s=new of(e),o=s.width,a=s.height,h=[];s.decodeAndBlitFrameRGBA(0,h);var l={data:h,width:o,height:a},c=new hf(100).encode(l,100);return t.processJPEG.call(this,c,i,n,r)},t.processGIF87A=t.processGIF89A}(Hu.API),lf.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:n,blue:i,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},lf.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(t){gu.log("bit decode error:"+t)}},lf.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),i=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var h=this.palette[s>>7-a&1];this.data[o+4*a]=h.blue,this.data[o+4*a+1]=h.green,this.data[o+4*a+2]=h.red,this.data[o+4*a+3]=255}0!==i&&(this.pos+=4-i)}},lf.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,r=0;r<t;r++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*r*4,a=s>>4,h=15&s,l=this.palette[a];if(this.data[o]=l.blue,this.data[o+1]=l.green,this.data[o+2]=l.red,this.data[o+3]=255,2*r+1>=this.width)break;l=this.palette[h],this.data[o+4]=l.blue,this.data[o+4+1]=l.green,this.data[o+4+2]=l.red,this.data[o+4+3]=255}0!==e&&(this.pos+=4-e)}},lf.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+4*n;if(r<this.palette.length){var o=this.palette[r];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==t&&(this.pos+=4-t)}},lf.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,h=(s>>10&e)/e*255|0,l=s>>15?255:0,c=n*this.width*4+4*r;this.data[c]=h,this.data[c+1]=a,this.data[c+2]=o,this.data[c+3]=l}this.pos+=t}},lf.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),i=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,h=(o>>5&i)/i*255|0,l=(o>>11)/e*255|0,c=r*this.width*4+4*s;this.data[c]=l,this.data[c+1]=h,this.data[c+2]=a,this.data[c+3]=255}this.pos+=t}},lf.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*i;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},lf.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*i;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=n,this.data[a+3]=o}},lf.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,i,n,r){var s=new lf(e,!1),o=s.width,a=s.height,h={data:s.getData(),width:o,height:a},l=new hf(100).encode(h,100);return t.processJPEG.call(this,l,i,n,r)}}(Hu.API),cf.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,i,n,r){var s=new cf(e,!1),o=s.width,a=s.height,h={data:s.getData(),width:o,height:a},l=new hf(100).encode(h,100);return t.processJPEG.call(this,l,i,n,r)}}(Hu.API),Hu.API.processRGBA=function(t,e,i){for(var n=t.data,r=n.length,s=new Uint8Array(r/4*3),o=new Uint8Array(r/4),a=0,h=0,l=0;l<r;l+=4){var c=n[l],u=n[l+1],d=n[l+2],f=n[l+3];s[a++]=c,s[a++]=u,s[a++]=d,o[h++]=f}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Hu.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},$d=Hu.API,tf=$d.getCharWidthsArray=function(t,e){var i,n,r=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:r.metadata.Unicode.widths,h=a.fof?a.fof:1,l=e.kerning?e.kerning:r.metadata.Unicode.kerning,c=l.fof?l.fof:1,u=!1!==e.doKerning,d=0,f=t.length,p=0,g=a[0]||h,m=[];for(i=0;i<f;i++)n=t.charCodeAt(i),"function"==typeof r.metadata.widthOfString?m.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(d=u&&"object"===(0,Cc.Z)(l[n])&&!isNaN(parseInt(l[n][p],10))?l[n][p]/c:0,m.push((a[n]||g)/h+d)),p=n;return m},ef=$d.getStringUnitWidth=function(t,e){var i=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return $d.processArabic&&(t=$d.processArabic(t)),"function"==typeof n.metadata.widthOfString?n.metadata.widthOfString(t,i,r)/i:tf.apply(this,arguments).reduce((function(t,e){return t+e}),0)},nf=function(t,e,i,n){for(var r=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<i;)a+=e[s],s++;r.push(t.slice(0,s));var h=s;for(a=0;s!==o;)a+e[s]>n&&(r.push(t.slice(h,s)),a=0,h=s),a+=e[s],s++;return h!==s&&r.push(t.slice(h,s)),r},rf=function(t,e,i){i||(i={});var n,r,s,o,a,h,l,c=[],u=[c],d=i.textIndent||0,f=0,p=0,g=t.split(" "),m=tf.apply(this,[" ",i])[0];if(h=-1===i.lineIndent?g[0].length+2:i.lineIndent||0){var y=Array(h).join(" "),v=[];g.map((function(t){(t=t.split(/\s*\n/)).length>1?v=v.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):v.push(t[0])})),g=v,h=ef.apply(this,[y,i])}for(s=0,o=g.length;s<o;s++){var _=0;if(n=g[s],h&&"\n"==n[0]&&(n=n.substr(1),_=1),d+f+(p=(r=tf.apply(this,[n,i])).reduce((function(t,e){return t+e}),0))>e||_){if(p>e){for(a=nf.apply(this,[n,r,e-(d+f),e]),c.push(a.shift()),c=[a.pop()];a.length;)u.push([a.shift()]);p=r.slice(n.length-(c[0]?c[0].length:0)).reduce((function(t,e){return t+e}),0)}else c=[n];u.push(c),d=p+h,f=m}else c.push(n),d+=f+p,f=m}return l=h?function(t,e){return(e?y:"")+t.join(" ")}:function(t){return t.join(" ")},u.map(l)},$d.splitTextToSize=function(t,e,i){var n,r=(i=i||{}).fontSize||this.internal.getFontSize(),s=function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,i);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/r;s.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=i.lineIndent;var a,h,l=[];for(a=0,h=n.length;a<h;a++)l=l.concat(rf.apply(this,[n[a],o,s]));return l},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",i={},n={},r=0;r<e.length;r++)i[e[r]]="0123456789abcdef"[r],n["0123456789abcdef"[r]]=e[r];var s=function(t){return"0x"+parseInt(t,10).toString(16)},o=t.__fontmetrics__.compress=function(t){var e,i,r,a,h=["{"];for(var l in t){if(e=t[l],isNaN(parseInt(l,10))?i="'"+l+"'":(l=parseInt(l,10),i=(i=s(l).slice(2)).slice(0,-1)+n[i.slice(-1)]),"number"==typeof e)e<0?(r=s(e).slice(3),a="-"):(r=s(e).slice(2),a=""),r=a+r.slice(0,-1)+n[r.slice(-1)];else{if("object"!==(0,Cc.Z)(e))throw new Error("Don't know what to do with value type "+(0,Cc.Z)(e)+".");r=o(e)}h.push(i+r)}return h.push("}"),h.join("")},a=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,n,r,s,o={},a=1,h=o,l=[],c="",u="",d=t.length-1,f=1;f<d;f+=1)"'"==(s=t[f])?e?(r=e.join(""),e=void 0):e=[]:e?e.push(s):"{"==s?(l.push([h,r]),h={},r=void 0):"}"==s?((n=l.pop())[0][n[1]]=h,r=void 0,h=n[0]):"-"==s?a=-1:void 0===r?i.hasOwnProperty(s)?(c+=i[s],r=parseInt(c,16)*a,a=1,c=""):c+=s:i.hasOwnProperty(s)?(u+=i[s],h[r]=parseInt(u,16)*a,a=1,r=void 0,u=""):u+=s;return o},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,i=c.Unicode[e.postScriptName];i&&(e.metadata.Unicode={},e.metadata.Unicode.widths=i.widths,e.metadata.Unicode.kerning=i.kerning);var n=l.Unicode[e.postScriptName];n&&(e.metadata.Unicode.encoding=n,e.encoding=n.codePages[0])}])}(Hu.API),function(t){var e=function(t){for(var e=t.length,i=new Uint8Array(e),n=0;n<e;n++)i[n]=t.charCodeAt(n);return i};t.API.events.push(["addFont",function(i){var n=void 0,r=i.font,s=i.instance;if(!r.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if("string"!=typeof(n=!1===s.existsFileInVFS(r.postScriptName)?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");!function(i,n){n=/^\x00\x01\x00\x00/.test(n)?e(n):e(_u(n)),i.metadata=t.API.TTFFont.open(n),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]}(r,n)}}])}(Hu),function(t){function e(){return(fu.canvg?Promise.resolve(fu.canvg):o.e(392).then(o.bind(o,8392))).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}Hu.API.addSvgAsImage=function(t,i,n,r,s,o,a,h){if(isNaN(i)||isNaN(n))throw gu.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw gu.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=s;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then((function(e){return e.fromString(c,t,u)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(t){return t.render(u)})).then((function(){d.addImage(l.toDataURL("image/jpeg",1),i,n,r,s,a,h)}))}}(),Hu.API.putTotalPages=function(t){var e,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),i=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(e,i);return this},Hu.API.viewerPreferences=function(t,e){var i;t=t||{},e=e||!1;var n,r,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),h=[],l=0,c=0,u=0;function d(t,e){var i,n=!1;for(i=0;i<t.length;i+=1)t[i]===e&&(n=!0);return n}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var f=a.length;for(u=0;u<f;u+=1)i[a[u]].value=i[a[u]].defaultValue,i[a[u]].explicitSet=!1}if("object"===(0,Cc.Z)(t))for(r in t)if(s=t[r],d(a,r)&&void 0!==s){if("boolean"===i[r].type&&"boolean"==typeof s)i[r].value=s;else if("name"===i[r].type&&d(i[r].valueSet,s))i[r].value=s;else if("integer"===i[r].type&&Number.isInteger(s))i[r].value=s;else if("array"===i[r].type){for(l=0;l<s.length;l+=1)if(n=!0,1===s[l].length&&"number"==typeof s[l][0])h.push(String(s[l]-1));else if(s[l].length>1){for(c=0;c<s[l].length;c+=1)"number"!=typeof s[l][c]&&(n=!1);!0===n&&h.push([s[l][0]-1,s[l][1]-1].join(" "))}i[r].value="["+h.join(" ")+"]"}else i[r].value=i[r].defaultValue;i[r].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in i)!0===i[t].explicitSet&&("name"===i[t].type?e.push("/"+t+" /"+i[t].value):e.push("/"+t+" "+i[t].value));0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},function(t){var e=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(t)),n=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),o=i.length+n.length+r.length+e.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+o+" >>"),this.internal.write("stream"),this.internal.write(e+i+n+r+s),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(t,n){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",e)),this}}(Hu.API),function(t){var e=t.API,i=e.pdfEscape16=function(t,e){for(var i,n=e.metadata.Unicode.widths,r=["","0","00","000","0000"],s=[""],o=0,a=t.length;o<a;++o){if(i=e.metadata.characterToGlyph(t.charCodeAt(o)),e.metadata.glyIdsUsed.push(i),e.metadata.toUnicode[i]=t.charCodeAt(o),-1==n.indexOf(i)&&(n.push(i),n.push([parseInt(e.metadata.widthOfGlyph(i),10)])),"0"==i)return s.join("");i=i.toString(16),s.push(r[4-i.length],i)}return s.join("")},n=function(t){var e,i,n,r,s,o,a;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",n=[],o=0,a=(i=Object.keys(t).sort((function(t,e){return t-e}))).length;o<a;o++)e=i[o],n.length>=100&&(s+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar",n=[]),void 0!==t[e]&&null!==t[e]&&"function"==typeof t[e].toString&&(r=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),n.push("<"+e+"><"+r+">"));return n.length&&(s+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(e){!function(e){var i=e.font,r=e.out,s=e.newObject,o=e.putStream;if(i.metadata instanceof t.API.TTFFont&&"Identity-H"===i.encoding){for(var a=i.metadata.Unicode.widths,h=i.metadata.subset.encode(i.metadata.glyIdsUsed,1),l="",c=0;c<h.length;c++)l+=String.fromCharCode(h[c]);var u=s();o({data:l,addLength1:!0,objectId:u}),r("endobj");var d=s();o({data:n(i.metadata.toUnicode),addLength1:!0,objectId:d}),r("endobj");var f=s();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+qu(i.fontName)),r("/FontFile2 "+u+" 0 R"),r("/FontBBox "+t.API.PDFObject.convert(i.metadata.bbox)),r("/Flags "+i.metadata.flags),r("/StemV "+i.metadata.stemV),r("/ItalicAngle "+i.metadata.italicAngle),r("/Ascent "+i.metadata.ascender),r("/Descent "+i.metadata.decender),r("/CapHeight "+i.metadata.capHeight),r(">>"),r("endobj");var p=s();r("<<"),r("/Type /Font"),r("/BaseFont /"+qu(i.fontName)),r("/FontDescriptor "+f+" 0 R"),r("/W "+t.API.PDFObject.convert(a)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+i.encoding+")"),r(">>"),r(">>"),r("endobj"),i.objectNumber=s(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+d+" 0 R"),r("/BaseFont /"+qu(i.fontName)),r("/Encoding /"+i.encoding),r("/DescendantFonts ["+p+" 0 R]"),r(">>"),r("endobj"),i.isAlreadyPutted=!0}}(e)}]),e.events.push(["putFont",function(e){!function(e){var i=e.font,r=e.out,s=e.newObject,o=e.putStream;if(i.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===i.encoding){for(var a=i.metadata.rawData,h="",l=0;l<a.length;l++)h+=String.fromCharCode(a[l]);var c=s();o({data:h,addLength1:!0,objectId:c}),r("endobj");var u=s();o({data:n(i.metadata.toUnicode),addLength1:!0,objectId:u}),r("endobj");var d=s();r("<<"),r("/Descent "+i.metadata.decender),r("/CapHeight "+i.metadata.capHeight),r("/StemV "+i.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+c+" 0 R"),r("/Flags 96"),r("/FontBBox "+t.API.PDFObject.convert(i.metadata.bbox)),r("/FontName /"+qu(i.fontName)),r("/ItalicAngle "+i.metadata.italicAngle),r("/Ascent "+i.metadata.ascender),r(">>"),r("endobj"),i.objectNumber=s();for(var f=0;f<i.metadata.hmtx.widths.length;f++)i.metadata.hmtx.widths[f]=parseInt(i.metadata.hmtx.widths[f]*(1e3/i.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+qu(i.fontName)+"/FontDescriptor "+d+" 0 R/Encoding/"+i.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(i.metadata.hmtx.widths)+">>"),r("endobj"),i.isAlreadyPutted=!0}}(e)}]);var r=function(t){var e,n=t.text||"",r=t.x,s=t.y,o=t.options||{},a=t.mutex||{},h=a.pdfEscape,l=a.activeFontKey,c=a.fonts,u=l,d="",f=0,p="",g=c[u].encoding;if("Identity-H"!==c[u].encoding)return{text:n,x:r,y:s,options:o,mutex:a};for(p=n,u=l,Array.isArray(n)&&(p=n[0]),f=0;f<p.length;f+=1)c[u].metadata.hasOwnProperty("cmap")&&(e=c[u].metadata.cmap.unicode.codeMap[p[f].charCodeAt(0)]),e||p[f].charCodeAt(0)<256&&c[u].metadata.hasOwnProperty("Unicode")?d+=p[f]:d+="";var m="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===g?m=h(d,u).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===g&&(m=i(d,c[u])),a.isHex=!0,{text:m,x:r,y:s,options:o,mutex:a}};e.events.push(["postProcessText",function(t){var e=t.text||"",i=[],n={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var s=0;for(s=0;s<e.length;s+=1)Array.isArray(e[s])&&3===e[s].length?i.push([r(Object.assign({},n,{text:e[s][0]})).text,e[s][1],e[s][2]]):i.push(r(Object.assign({},n,{text:e[s]})).text);t.text=i}else t.text=r(Object.assign({},n,{text:e})).text}])}(Hu),function(t){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},t.addFileToVFS=function(t,i){return e.call(this),this.internal.vFS[t]=i,this},t.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(Hu.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var i,n,r,s,o,a,h,l=e,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,y=0;this.__bidiEngine__={};var v=function(t){var e=t.charCodeAt(),i=e>>8,n=f[i];return void 0!==n?l[256*n+(255&e)]:252===i||253===i?"AL":g.test(i)?"L":8===i?"R":"N"},_=function(t){for(var e,i=0;i<t.length;i++){if("L"===(e=v(t.charAt(i))))return!1;if("R"===e)return!0}return!1},b=function(t,e,o,a){var h,l,c,u,d=e[a];switch(d){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"N":case"AN":break;case"EN":m&&(d="AN");break;case"AL":m=!0,d="R";break;case"WS":case"BN":d="N";break;case"CS":a<1||a+1>=e.length||"EN"!==(h=o[a-1])&&"AN"!==h||"EN"!==(l=e[a+1])&&"AN"!==l?d="N":m&&(l="AN"),d=l===h?l:"N";break;case"ES":d="EN"===(h=a>0?o[a-1]:"B")&&a+1<e.length&&"EN"===e[a+1]?"EN":"N";break;case"ET":if(a>0&&"EN"===o[a-1]){d="EN";break}if(m){d="N";break}for(c=a+1,u=e.length;c<u&&"ET"===e[c];)c++;d=c<u&&"EN"===e[c]?"EN":"N";break;case"NSM":if(r&&!s){for(u=e.length,c=a+1;c<u&&"NSM"===e[c];)c++;if(c<u){var f=t[a],p=f>=1425&&f<=2303||64286===f;if(h=e[c],p&&("R"===h||"AL"===h)){d="R";break}}}d=a<1||"B"===(h=e[a-1])?"N":o[a-1];break;case"B":m=!1,i=!0,d=y;break;case"S":n=!0,d="N"}return d},w=function(t,e,i){var n=t.split("");return i&&x(n,i,{hiLevel:y}),n.reverse(),e&&e.reverse(),n.join("")},x=function(t,e,r){var s,o,a,h,l,f=-1,p=t.length,g=0,_=[],w=y?u:c,x=[];for(m=!1,i=!1,n=!1,o=0;o<p;o++)x[o]=v(t[o]);for(a=0;a<p;a++){if(l=g,_[a]=b(t,x,_,a),s=240&(g=w[l][d[_[a]]]),g&=15,e[a]=h=w[g][5],s>0)if(16===s){for(o=f;o<a;o++)e[o]=1;f=-1}else f=-1;if(w[g][6])-1===f&&(f=a);else if(f>-1){for(o=f;o<a;o++)e[o]=h;f=-1}"B"===x[a]&&(e[a]=0),r.hiLevel|=h}n&&function(t,e,i){for(var n=0;n<i;n++)if("S"===t[n]){e[n]=y;for(var r=n-1;r>=0&&"WS"===t[r];r--)e[r]=y}}(x,e,p)},S=function(t,e,n,r,s){if(!(s.hiLevel<t)){if(1===t&&1===y&&!i)return e.reverse(),void(n&&n.reverse());for(var o,a,h,l,c=e.length,u=0;u<c;){if(r[u]>=t){for(h=u+1;h<c&&r[h]>=t;)h++;for(l=u,a=h-1;l<a;l++,a--)o=e[l],e[l]=e[a],e[a]=o,n&&(o=n[l],n[l]=n[a],n[a]=o);u=h}u++}}},M=function(t,e,i){var n=t.split(""),r={hiLevel:y};return i||(i=[]),x(n,i,r),function(t,e,i){if(0!==i.hiLevel&&h)for(var n,r=0;r<t.length;r++)1===e[r]&&(n=p.indexOf(t[r]))>=0&&(t[r]=p[n+1])}(n,i,r),S(2,n,e,i,r),S(1,n,e,i,r),n.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,i){if(function(t,e){if(e)for(var i=0;i<t.length;i++)e[i]=i;void 0===s&&(s=_(t)),void 0===a&&(a=_(t))}(t,e),r||!o||a)if(r&&o&&s^a)y=s?1:0,t=w(t,e,i);else if(!r&&o&&a)y=s?1:0,t=M(t,e,i),t=w(t,e);else if(!r||s||o||a){if(r&&!o&&s^a)t=w(t,e),s?(y=0,t=M(t,e,i)):(y=1,t=M(t,e,i),t=w(t,e));else if(r&&s&&!o&&a)y=1,t=M(t,e,i),t=w(t,e);else if(!r&&!o&&s^a){var n=h;s?(y=1,t=M(t,e,i),y=0,h=!1,t=M(t,e,i),h=n):(y=0,t=M(t,e,i),t=w(t,e),y=1,h=!1,t=M(t,e,i),h=n,t=w(t,e))}}else y=0,t=M(t,e,i);else y=s?1:0,t=M(t,e,i);return t},this.__bidiEngine__.setOptions=function(t){t&&(r=t.isInputVisual,o=t.isOutputVisual,s=t.isInputRtl,a=t.isOutputRtl,h=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,n=(t.x,t.y,t.options||{}),r=(t.mutex,n.lang,[]);if(n.isInputVisual="boolean"!=typeof n.isInputVisual||n.isInputVisual,i.setOptions(n),"[object Array]"===Object.prototype.toString.call(e)){var s=0;for(r=[],s=0;s<e.length;s+=1)"[object Array]"===Object.prototype.toString.call(e[s])?r.push([i.doBidiReorder(e[s][0]),e[s][1],e[s][2]]):r.push([i.doBidiReorder(e[s])]);t.text=r}else t.text=i.doBidiReorder(e);i.setOptions({isInputVisual:!0})}])}(Hu),Hu.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new df(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new If(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ff(this.contents),this.head=new mf(this),this.name=new Sf(this),this.cmap=new vf(this),this.toUnicode={},this.hhea=new _f(this),this.maxp=new Mf(this),this.hmtx=new Cf(this),this.post=new wf(this),this.os2=new bf(this),this.loca=new Pf(this),this.glyf=new Lf(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,i,n,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var e,i,n,r;for(r=[],e=0,i=(n=this.bbox).length;e<i;e++)t=n[e],r.push(Math.round(t*this.scaleFactor));return r}.call(this),this.stemV=0,this.post.exists?(i=255&(n=this.post.italic_angle),0!=(32768&(e=n>>16))&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,i){var n,r,s,o;for(s=0,r=0,o=(t=""+t).length;0<=o?r<o:r>o;r=0<=o?++r:--r)n=t.charCodeAt(r),s+=this.widthOfGlyph(this.characterToGlyph(n))+i*(1e3/e)||0;return s*(e/1e3)},t.prototype.lineHeight=function(t,e){var i;return null==e&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},t}();var uf,df=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(t){var e,i,n;for(n=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)n.push(this.writeByte(t.charCodeAt(e)));return n},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,i,n,r,s,o,a;return t=this.readByte(),e=this.readByte(),i=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^n)+16777216*(255^r)+65536*(255^s)+256*(255^o)+(255^a)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*n+16777216*r+65536*s+256*o+a},t.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},t.prototype.write=function(t){var e,i,n,r;for(r=[],i=0,n=t.length;i<n;i++)e=t[i],r.push(this.writeByte(e));return r},t}(),ff=function(){var t;function e(t){var e,i,n;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,n=this.tableCount;0<=n?i<n:i>n;i=0<=n?++i:--i)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var i,n,r,s,o,a,h,l,c,u,d,f,p;for(p in d=Object.keys(e).length,a=Math.log(2),c=16*Math.floor(Math.log(d)/a),s=Math.floor(c/a),l=16*d-c,(n=new df).writeInt(this.scalarType),n.writeShort(d),n.writeShort(c),n.writeShort(s),n.writeShort(l),r=16*d,h=n.pos+r,o=null,f=[],e)for(u=e[p],n.writeString(p),n.writeInt(t(u)),n.writeInt(h),n.writeInt(u.length),f=f.concat(u),"head"===p&&(o=h),h+=u.length;h%4;)f.push(0),h++;return n.write(f),i=2981146554-t(n.data),n.pos=o+8,n.writeUInt32(i),n.data},t=function(t){var e,i,n,r;for(t=Af.call(t);t.length%4;)t.push(0);for(n=new df(t),i=0,e=0,r=t.length;e<r;e=e+=4)i+=n.readUInt32();return 4294967295&i},e}(),pf={}.hasOwnProperty,gf=function(t,e){for(var i in e)pf.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};uf=function(){function t(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var mf=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gf(e,uf),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var e;return(e=new df).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},e}(),yf=function(){function t(t,e){var i,n,r,s,o,a,h,l,c,u,d,f,p,g,m,y,v;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),c=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=0;a<256;++a)this.codeMap[a]=t.readByte();break;case 4:for(d=t.readUInt16(),u=d/2,t.pos+=6,r=function(){var e,i;for(i=[],a=e=0;0<=u?e<u:e>u;a=0<=u?++e:--e)i.push(t.readUInt16());return i}(),t.pos+=2,p=function(){var e,i;for(i=[],a=e=0;0<=u?e<u:e>u;a=0<=u?++e:--e)i.push(t.readUInt16());return i}(),h=function(){var e,i;for(i=[],a=e=0;0<=u?e<u:e>u;a=0<=u?++e:--e)i.push(t.readUInt16());return i}(),l=function(){var e,i;for(i=[],a=e=0;0<=u?e<u:e>u;a=0<=u?++e:--e)i.push(t.readUInt16());return i}(),n=(this.length-t.pos+this.offset)/2,o=function(){var e,i;for(i=[],a=e=0;0<=n?e<n:e>n;a=0<=n?++e:--e)i.push(t.readUInt16());return i}(),a=m=0,v=r.length;m<v;a=++m)for(g=r[a],i=y=f=p[a];f<=g?y<=g:y>=g;i=f<=g?++y:--y)0===l[a]?s=i+h[a]:0!==(s=o[l[a]/2+(i-f)-(u-a)]||0)&&(s+=h[a]),this.codeMap[i]=65535&s}t.pos=c}return t.encode=function(t,e){var i,n,r,s,o,a,h,l,c,u,d,f,p,g,m,y,v,_,b,w,x,S,M,C,A,L,N,E,P,I,O,R,F,T,k,j,D,B,q,G,z,U,W,Y,H,V;switch(E=new df,s=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(p=0,g=function(){var t=[];for(f=0;f<256;++f)t.push(0);return t}(),y={0:0},r={},P=0,F=s.length;P<F;P++)null==y[W=t[n=s[P]]]&&(y[W]=++p),r[n]={old:t[n],new:y[t[n]]},g[n]=y[t[n]];return E.writeUInt16(1),E.writeUInt16(0),E.writeUInt32(12),E.writeUInt16(0),E.writeUInt16(262),E.writeUInt16(0),E.write(g),{charMap:r,subtable:E.data,maxGlyphID:p+1};case"unicode":for(L=[],c=[],v=0,y={},i={},m=h=null,I=0,T=s.length;I<T;I++)null==y[b=t[n=s[I]]]&&(y[b]=++v),i[n]={old:b,new:y[b]},o=y[b]-n,null!=m&&o===h||(m&&c.push(m),L.push(n),h=o),m=n;for(m&&c.push(m),c.push(65535),L.push(65535),C=2*(M=L.length),S=2*Math.pow(Math.log(M)/Math.LN2,2),u=Math.log(S/2)/Math.LN2,x=2*M-S,a=[],w=[],d=[],f=O=0,k=L.length;O<k;f=++O){if(A=L[f],l=c[f],65535===A){a.push(0),w.push(0);break}if(A-(N=i[A].new)>=32768)for(a.push(0),w.push(2*(d.length+M-f)),n=R=A;A<=l?R<=l:R>=l;n=A<=l?++R:--R)d.push(i[n].new);else a.push(N-A),w.push(0)}for(E.writeUInt16(3),E.writeUInt16(1),E.writeUInt32(12),E.writeUInt16(4),E.writeUInt16(16+8*M+2*d.length),E.writeUInt16(0),E.writeUInt16(C),E.writeUInt16(S),E.writeUInt16(u),E.writeUInt16(x),z=0,j=c.length;z<j;z++)n=c[z],E.writeUInt16(n);for(E.writeUInt16(0),U=0,D=L.length;U<D;U++)n=L[U],E.writeUInt16(n);for(Y=0,B=a.length;Y<B;Y++)o=a[Y],E.writeUInt16(o);for(H=0,q=w.length;H<q;H++)_=w[H],E.writeUInt16(_);for(V=0,G=d.length;V<G;V++)p=d[V],E.writeUInt16(p);return{charMap:i,subtable:E.data,maxGlyphID:v+1}}},t}(),vf=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gf(e,uf),e.prototype.tag="cmap",e.prototype.parse=function(t){var e,i,n;for(t.pos=this.offset,this.version=t.readUInt16(),n=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)e=new yf(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},e.encode=function(t,e){var i,n;return null==e&&(e="macroman"),i=yf.encode(t,e),(n=new df).writeUInt16(0),n.writeUInt16(1),i.table=n.data.concat(i.subtable),i},e}(),_f=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gf(e,uf),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),bf=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gf(e,uf),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,i;for(i=[],e=0;e<10;++e)i.push(t.readByte());return i}(),this.charRange=function(){var e,i;for(i=[],e=0;e<4;++e)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,i;for(i=[],e=0;e<2;e=++e)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),wf=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gf(e,uf),e.prototype.tag="post",e.prototype.parse=function(t){var e,i,n;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var r;for(i=t.readUInt16(),this.glyphNameIndex=[],r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],n=[];t.pos<this.offset+this.length;)e=t.readByte(),n.push(this.names.push(t.readString(e)));return n;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=function(){var e,i,n;for(n=[],r=e=0,i=this.file.maxp.numGlyphs;0<=i?e<i:e>i;r=0<=i?++e:--e)n.push(t.readUInt32());return n}.call(this)}},e}(),xf=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Sf=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gf(e,uf),e.prototype.tag="name",e.prototype.parse=function(t){var e,i,n,r,s,o,a,h,l,c,u;for(t.pos=this.offset,t.readShort(),e=t.readShort(),o=t.readShort(),i=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(a={},r=l=0,c=i.length;l<c;r=++l)n=i[r],t.pos=n.offset,h=t.readString(n.length),s=new xf(h,n),null==a[u=n.nameID]&&(a[u]=[]),a[n.nameID].push(s);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},e}(),Mf=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gf(e,uf),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Cf=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gf(e,uf),e.prototype.tag="hmtx",e.prototype.parse=function(t){var e,i,n,r,s,o,a;for(t.pos=this.offset,this.metrics=[],e=0,o=this.file.hhea.numberOfMetrics;0<=o?e<o:e>o;e=0<=o?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var i,r;for(r=[],e=i=0;0<=n?i<n:i>n;e=0<=n?++i:--i)r.push(t.readInt16());return r}(),this.widths=function(){var t,e,i,n;for(n=[],t=0,e=(i=this.metrics).length;t<e;t++)r=i[t],n.push(r.advance);return n}.call(this),i=this.widths[this.widths.length-1],a=[],e=s=0;0<=n?s<n:s>n;e=0<=n?++s:--s)a.push(this.widths.push(i));return a},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Af=[].slice,Lf=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gf(e,uf),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var e,i,n,r,s,o,a,h,l,c;return t in this.cache?this.cache[t]:(r=this.file.loca,e=this.file.contents,i=r.indexOf(t),0===(n=r.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+i,s=(o=new df(e.read(n))).readShort(),h=o.readShort(),c=o.readShort(),a=o.readShort(),l=o.readShort(),this.cache[t]=-1===s?new Ef(o,h,c,a,l):new Nf(o,s,h,c,a,l),this.cache[t]))},e.prototype.encode=function(t,e,i){var n,r,s,o,a;for(s=[],r=[],o=0,a=e.length;o<a;o++)n=t[e[o]],r.push(s.length),n&&(s=s.concat(n.encode(i)));return r.push(s.length),{table:s,offsets:r}},e}(),Nf=function(){function t(t,e,i,n,r,s){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=n,this.xMax=r,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Ef=function(){function t(t,e,i,n,r){var s,o;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=n,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return t.prototype.encode=function(){var t,e,i;for(e=new df(Af.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),Pf=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gf(e,uf),e.prototype.tag="loca",e.prototype.parse=function(t){var e,i;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=0===e?function(){var e,n;for(n=[],i=0,e=this.length;i<e;i+=2)n.push(2*t.readUInt16());return n}.call(this):function(){var e,n;for(n=[],i=0,e=this.length;i<e;i+=4)n.push(t.readUInt32());return n}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,e){for(var i=new Uint32Array(this.offsets.length),n=0,r=0,s=0;s<i.length;++s)if(i[s]=n,r<e.length&&e[r]==s){++r,i[s]=n;var o=this.offsets[s],a=this.offsets[s+1]-o;a>0&&(n+=a)}for(var h=new Array(4*i.length),l=0;l<i.length;++l)h[4*l+3]=255&i[l],h[4*l+2]=(65280&i[l])>>8,h[4*l+1]=(16711680&i[l])>>16,h[4*l]=(4278190080&i[l])>>24;return h},e}(),If=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,i,n,r;for(e in n=this.font.cmap.tables[0].codeMap,t={},r=this.subset)i=r[e],t[e]=n[i];return t},t.prototype.glyphsFor=function(t){var e,i,n,r,s,o,a;for(n={},s=0,o=t.length;s<o;s++)n[r=t[s]]=this.font.glyf.glyphFor(r);for(r in e=[],n)(null!=(i=n[r])?i.compound:void 0)&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(r in a=this.glyphsFor(e))i=a[r],n[r]=i;return n},t.prototype.encode=function(t,e){var i,n,r,s,o,a,h,l,c,u,d,f,p,g,m;for(n in i=vf.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),d={0:0},m=i.charMap)d[(a=m[n]).old]=a.new;for(f in u=i.maxGlyphID,s)f in d||(d[f]=u++);return l=function(t){var e,i;for(e in i={},t)i[t[e]]=e;return i}(d),c=Object.keys(l).sort((function(t,e){return t-e})),p=function(){var t,e,i;for(i=[],t=0,e=c.length;t<e;t++)o=c[t],i.push(l[o]);return i}(),r=this.font.glyf.encode(s,p,d),h=this.font.loca.encode(r.offsets,p),g={cmap:this.font.cmap.raw(),glyf:r.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Hu.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(i){var n,r,s,o;if(Array.isArray(i))return"["+function(){var t,r,s;for(s=[],t=0,r=i.length;t<r;t++)n=i[t],s.push(e.convert(n));return s}().join(" ")+"]";if("string"==typeof i)return"/"+i;if(null!=i?i.isString:void 0)return"("+i+")";if(i instanceof Date)return"(D:"+t(i.getUTCFullYear(),4)+t(i.getUTCMonth(),2)+t(i.getUTCDate(),2)+t(i.getUTCHours(),2)+t(i.getUTCMinutes(),2)+t(i.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(i)){for(r in s=["<<"],i)o=i[r],s.push("/"+r+" "+e.convert(o));return s.push(">>"),s.join("\n")}return""+i},e}();const Of=document.getElementById("example-05"),Rf=Of.querySelector("custom-button"),Ff=Of.querySelector("print-spec");Ff.onValidityCheck((t=>Rf.enabled=t)),Rf.addEventListener("click",(async()=>{Rf.showSpinner();const t={...Ff.value,size:[277,150,"mm"],attributions:null,northArrow:!1,scaleBar:!1},e=await sc(t);Rf.hideSpinner();const i=new Hu({orientation:"landscape",unit:"mm",format:"a4",putOnlyUsedFonts:!0}),n=URL.createObjectURL(e);i.addImage(n,"JPEG",10,40,277,150),i.setFont("times","bold"),i.setFontSize(20),i.text("A fantastic map.",148.5,13,null,null,"center");const r=function(t,e){const i=document.createElement("canvas"),n=e?rl(e[0],e[1]||"px",t.dpi):Al(t.dpi);i.width=n,i.height=n;const r=i.getContext("2d");return r.translate(n/2,n/2),r.scale(n/wl,n/wl),Ll(r),new bl(i,t.dpi)}(t,[16,"mm"]),s=r.getRealWorldDimensions("mm");i.addImage(r.getImage(),"PNG",140,21,s[0],s[1]);const o=function(t,e){const i=document.createElement("canvas"),n=i.getContext("2d"),r=Nl(t,e?rl(e[0],e[1]||"px",t.dpi):null),[s,o]=El(r,t.dpi,n);i.width=s,i.height=o;const a=rl(1,"mm",t.dpi);return n.scale(a,a),Pl(n,r),n.restore(),new bl(i,t.dpi)}(t,[30,"mm"]),a=o.getRealWorldDimensions("mm");i.addImage(o.getImage(),"PNG",287-a[0],37-a[1],a[0],a[1]),i.setFont("courier","normal"),i.setFontSize(12),i.text(`Print date : ${(new Date).toLocaleString()}`,10,200,null,null,"left"),i.setFont("courier","normal"),i.setFontSize(12),i.text(_l(Ff.value),287,200,null,null,"right"),i.addPage("a4","portrait"),i.setFont("times","bold"),i.setFontSize(16),i.text("Legend",10,10);const h=await async function(t){const e=rc(t),i=await e.renderAsImage("png");return new bl(i,t.dpi)}(t),l=h.getRealWorldDimensions("mm");i.addImage(h.getImage(),"PNG",10,18,l[0],l[1]),i.save("inkmap.pdf")}));const Tf=document.getElementById("example-06"),kf=Tf.querySelector("custom-button"),jf=Tf.querySelector("print-spec");jf.onValidityCheck((t=>kf.enabled=t)),kf.addEventListener("click",(async()=>{var t;kf.showSpinner(),on((t={name:"EPSG:2154",bbox:[51.56,-9.86,41.15,10.38],proj4:"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"}).name,t.proj4,t.bbox);const e=await sc(jf.value);kf.hideSpinner(),Rl(e,"inkmap.png")}));const Df=document.getElementById("example-07"),Bf=Df.querySelector("custom-button"),qf=Df.querySelector("print-spec"),Gf=Df.querySelector("#errors");qf.onValidityCheck((t=>Bf.enabled=t)),Bf.addEventListener("click",(async()=>{Bf.showSpinner(),ac(await oc(qf.value)).subscribe((t=>{if(Bf.progress=t.progress,1===t.progress){if(Bf.hideSpinner(),t.sourceLoadErrors.length>0){let e="The following layers encountered errors:<br>";t.sourceLoadErrors.forEach((t=>{e=`${e} - ${t.url}<br>`})),Gf.innerHTML=e}else Gf.innerHTML="";Rl(t.imageBlob,"inkmap.png")}}))}));const zf=document.getElementById("example-08"),Uf=zf.querySelector("custom-button.map-btn"),Wf=zf.querySelector("custom-button.legend-btn"),Yf=zf.querySelector("custom-progress"),Hf=zf.querySelector("print-spec");Hf.onValidityCheck((t=>{Uf.enabled=t,Wf.enabled=t})),Uf.addEventListener("click",(async()=>{Uf.showSpinner(),Yf.progress=0,Yf.status="pending",ac(await oc(Hf.value)).subscribe((t=>{Yf.progress=t.progress,Yf.status=t.status,1===t.progress&&(Uf.hideSpinner(),Rl(t.imageBlob,"inkmap.png"))}))})),Wf.addEventListener("click",(async()=>{const t=await async function(t){const e=rc(t);let i=(await e.renderAsImage("svg")).outerHTML;return new Blob([i],{type:"image/svg+xml"})}(Hf.value);Rl(t,"legend.svg")})),hljs.initHighlightingOnLoad()})()})();
//# sourceMappingURL=app.js.map